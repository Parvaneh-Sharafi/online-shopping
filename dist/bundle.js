/*! For license information please see bundle.js.LICENSE.txt */
!function(){var e,t,n={761:function(e,t,n){"use strict";var r=n(836);t.Z=void 0;var i=r(n(938)),s=n(893),o=(0,i.default)((0,s.jsx)("path",{d:"M15.5 14h-.79l-.28-.27C15.41 12.59 16 11.11 16 9.5 16 5.91 13.09 3 9.5 3S3 5.91 3 9.5 5.91 16 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19l-4.99-5zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14z"}),"Search");t.Z=o},510:function(e,t,n){"use strict";var r=n(836);t.Z=void 0;var i=r(n(938)),s=n(893),o=(0,i.default)((0,s.jsx)("path",{d:"m17.21 9-4.38-6.56c-.19-.28-.51-.42-.83-.42-.32 0-.64.14-.83.43L6.79 9H2c-.55 0-1 .45-1 1 0 .09.01.18.04.27l2.54 9.27c.23.84 1 1.46 1.92 1.46h13c.92 0 1.69-.62 1.93-1.46l2.54-9.27L23 10c0-.55-.45-1-1-1h-4.79zM9 9l3-4.4L15 9H9zm3 8c-1.1 0-2-.9-2-2s.9-2 2-2 2 .9 2 2-.9 2-2 2z"}),"ShoppingBasket");t.Z=o},595:function(e,t,n){"use strict";var r=n(836);t.Z=void 0;var i=r(n(938)),s=n(893),o=(0,i.default)((0,s.jsx)("path",{d:"M20 4H4v2h16V4zm1 10v-2l-1-5H4l-1 5v2h1v6h10v-6h4v6h2v-6h1zm-9 4H6v-4h6v4z"}),"Store");t.Z=o},938:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"default",{enumerable:!0,get:function(){return r.createSvgIcon}});var r=n(238)},238:function(e,t,n){"use strict";n.r(t),n.d(t,{capitalize:function(){return a},createChainedFunction:function(){return l},createSvgIcon:function(){return Vn},debounce:function(){return zn},deprecatedPropType:function(){return Bn},isMuiElement:function(){return jn},ownerDocument:function(){return $n},ownerWindow:function(){return Kn},requirePropFactory:function(){return Gn},setRef:function(){return Hn},unstable_ClassNameGenerator:function(){return dr},unstable_useEnhancedEffect:function(){return Yn},unstable_useId:function(){return Zn},unsupportedProp:function(){return er},useControlled:function(){return tr},useEventCallback:function(){return nr},useForkRef:function(){return rr},useIsFocusVisible:function(){return hr}});const r=e=>e;var i=(()=>{let e=r;return{configure(t){e=t},generate(t){return e(t)},reset(){e=r}}})();function s(e){let t="https://mui.com/production-error/?code="+e;for(let e=1;e<arguments.length;e+=1)t+="&args[]="+encodeURIComponent(arguments[e]);return"Minified MUI error #"+e+"; visit "+t+" for the full message."}function o(e){if("string"!=typeof e)throw new Error(s(7));return e.charAt(0).toUpperCase()+e.slice(1)}var a=o,l=function(...e){return e.reduce(((e,t)=>null==t?e:function(...n){e.apply(this,n),t.apply(this,n)}),(()=>{}))};function u(){return u=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},u.apply(this,arguments)}var c=n(294),h=n.t(c,2);function d(e,t){if(null==e)return{};var n,r,i={},s=Object.keys(e);for(r=0;r<s.length;r++)n=s[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}function f(e){var t,n,r="";if("string"==typeof e||"number"==typeof e)r+=e;else if("object"==typeof e)if(Array.isArray(e))for(t=0;t<e.length;t++)e[t]&&(n=f(e[t]))&&(r&&(r+=" "),r+=n);else for(t in e)e[t]&&(r&&(r+=" "),r+=t);return r}var p=function(){for(var e,t,n=0,r="";n<arguments.length;)(e=arguments[n++])&&(t=f(e))&&(r&&(r+=" "),r+=t);return r};function m(e,t){const n=u({},t);return Object.keys(e).forEach((r=>{if(r.toString().match(/^(components|slots)$/))n[r]=u({},e[r],n[r]);else if(r.toString().match(/^(componentsProps|slotProps)$/)){const i=e[r]||{},s=t[r];n[r]={},s&&Object.keys(s)?i&&Object.keys(i)?(n[r]=u({},s),Object.keys(i).forEach((e=>{n[r][e]=m(i[e],s[e])}))):n[r]=s:n[r]=i}else void 0===n[r]&&(n[r]=e[r])})),n}function g(e){const{theme:t,name:n,props:r}=e;return t&&t.components&&t.components[n]&&t.components[n].defaultProps?m(t.components[n].defaultProps,r):r}function y(e){return null!==e&&"object"==typeof e&&e.constructor===Object}function v(e){if(!y(e))return e;const t={};return Object.keys(e).forEach((n=>{t[n]=v(e[n])})),t}function w(e,t,n={clone:!0}){const r=n.clone?u({},e):e;return y(e)&&y(t)&&Object.keys(t).forEach((i=>{"__proto__"!==i&&(y(t[i])&&i in e&&y(e[i])?r[i]=w(e[i],t[i],n):n.clone?r[i]=y(t[i])?v(t[i]):t[i]:r[i]=t[i])})),r}const b=["values","unit","step"];var _={borderRadius:4};const E={xs:0,sm:600,md:900,lg:1200,xl:1536},I={keys:["xs","sm","md","lg","xl"],up:e=>`@media (min-width:${E[e]}px)`};function k(e,t,n){const r=e.theme||{};if(Array.isArray(t)){const e=r.breakpoints||I;return t.reduce(((r,i,s)=>(r[e.up(e.keys[s])]=n(t[s]),r)),{})}if("object"==typeof t){const e=r.breakpoints||I;return Object.keys(t).reduce(((r,i)=>{if(-1!==Object.keys(e.values||E).indexOf(i))r[e.up(i)]=n(t[i],i);else{const e=i;r[e]=t[e]}return r}),{})}return n(t)}function S(e,t,n=!0){if(!t||"string"!=typeof t)return null;if(e&&e.vars&&n){const n=`vars.${t}`.split(".").reduce(((e,t)=>e&&e[t]?e[t]:null),e);if(null!=n)return n}return t.split(".").reduce(((e,t)=>e&&null!=e[t]?e[t]:null),e)}function T(e,t,n,r=n){let i;return i="function"==typeof e?e(n):Array.isArray(e)?e[n]||r:S(e,n)||r,t&&(i=t(i,r,e)),i}var x=function(e){const{prop:t,cssProperty:n=e.prop,themeKey:r,transform:i}=e,s=e=>{if(null==e[t])return null;const s=e[t],a=S(e.theme,r)||{};return k(e,s,(e=>{let r=T(a,i,e);return e===r&&"string"==typeof e&&(r=T(a,i,`${t}${"default"===e?"":o(e)}`,e)),!1===n?r:{[n]:r}}))};return s.propTypes={},s.filterProps=[t],s},C=function(e,t){return t?w(e,t,{clone:!1}):e};const A={m:"margin",p:"padding"},N={t:"Top",r:"Right",b:"Bottom",l:"Left",x:["Left","Right"],y:["Top","Bottom"]},R={marginX:"mx",marginY:"my",paddingX:"px",paddingY:"py"},P=function(e){const t={};return e=>(void 0===t[e]&&(t[e]=(e=>{if(e.length>2){if(!R[e])return[e];e=R[e]}const[t,n]=e.split(""),r=A[t],i=N[n]||"";return Array.isArray(i)?i.map((e=>r+e)):[r+i]})(e)),t[e])}(),D=["m","mt","mr","mb","ml","mx","my","margin","marginTop","marginRight","marginBottom","marginLeft","marginX","marginY","marginInline","marginInlineStart","marginInlineEnd","marginBlock","marginBlockStart","marginBlockEnd"],O=["p","pt","pr","pb","pl","px","py","padding","paddingTop","paddingRight","paddingBottom","paddingLeft","paddingX","paddingY","paddingInline","paddingInlineStart","paddingInlineEnd","paddingBlock","paddingBlockStart","paddingBlockEnd"],L=[...D,...O];function M(e,t,n,r){var i;const s=null!=(i=S(e,t,!1))?i:n;return"number"==typeof s?e=>"string"==typeof e?e:s*e:Array.isArray(s)?e=>"string"==typeof e?e:s[e]:"function"==typeof s?s:()=>{}}function F(e){return M(e,"spacing",8)}function U(e,t){if("string"==typeof t||null==t)return t;const n=e(Math.abs(t));return t>=0?n:"number"==typeof n?-n:`-${n}`}function V(e,t){const n=F(e.theme);return Object.keys(e).map((r=>function(e,t,n,r){if(-1===t.indexOf(n))return null;const i=function(e,t){return n=>e.reduce(((e,r)=>(e[r]=U(t,n),e)),{})}(P(n),r);return k(e,e[n],i)}(e,t,r,n))).reduce(C,{})}function z(e){return V(e,D)}function B(e){return V(e,O)}function j(e){return V(e,L)}z.propTypes={},z.filterProps=D,B.propTypes={},B.filterProps=O,j.propTypes={},j.filterProps=L;var q=function(...e){const t=e.reduce(((e,t)=>(t.filterProps.forEach((n=>{e[n]=t})),e)),{}),n=e=>Object.keys(e).reduce(((n,r)=>t[r]?C(n,t[r](e)):n),{});return n.propTypes={},n.filterProps=e.reduce(((e,t)=>e.concat(t.filterProps)),[]),n};function $(e){return"number"!=typeof e?e:`${e}px solid`}const K=x({prop:"border",themeKey:"borders",transform:$}),G=x({prop:"borderTop",themeKey:"borders",transform:$}),W=x({prop:"borderRight",themeKey:"borders",transform:$}),H=x({prop:"borderBottom",themeKey:"borders",transform:$}),Q=x({prop:"borderLeft",themeKey:"borders",transform:$}),Y=x({prop:"borderColor",themeKey:"palette"}),J=x({prop:"borderTopColor",themeKey:"palette"}),X=x({prop:"borderRightColor",themeKey:"palette"}),Z=x({prop:"borderBottomColor",themeKey:"palette"}),ee=x({prop:"borderLeftColor",themeKey:"palette"}),te=e=>{if(void 0!==e.borderRadius&&null!==e.borderRadius){const t=M(e.theme,"shape.borderRadius",4),n=e=>({borderRadius:U(t,e)});return k(e,e.borderRadius,n)}return null};te.propTypes={},te.filterProps=["borderRadius"],q(K,G,W,H,Q,Y,J,X,Z,ee,te);const ne=e=>{if(void 0!==e.gap&&null!==e.gap){const t=M(e.theme,"spacing",8),n=e=>({gap:U(t,e)});return k(e,e.gap,n)}return null};ne.propTypes={},ne.filterProps=["gap"];const re=e=>{if(void 0!==e.columnGap&&null!==e.columnGap){const t=M(e.theme,"spacing",8),n=e=>({columnGap:U(t,e)});return k(e,e.columnGap,n)}return null};re.propTypes={},re.filterProps=["columnGap"];const ie=e=>{if(void 0!==e.rowGap&&null!==e.rowGap){const t=M(e.theme,"spacing",8),n=e=>({rowGap:U(t,e)});return k(e,e.rowGap,n)}return null};function se(e,t){return"grey"===t?t:e}function oe(e){return e<=1&&0!==e?100*e+"%":e}ie.propTypes={},ie.filterProps=["rowGap"],q(ne,re,ie,x({prop:"gridColumn"}),x({prop:"gridRow"}),x({prop:"gridAutoFlow"}),x({prop:"gridAutoColumns"}),x({prop:"gridAutoRows"}),x({prop:"gridTemplateColumns"}),x({prop:"gridTemplateRows"}),x({prop:"gridTemplateAreas"}),x({prop:"gridArea"})),q(x({prop:"color",themeKey:"palette",transform:se}),x({prop:"bgcolor",cssProperty:"backgroundColor",themeKey:"palette",transform:se}),x({prop:"backgroundColor",themeKey:"palette",transform:se}));const ae=x({prop:"width",transform:oe}),le=e=>{if(void 0!==e.maxWidth&&null!==e.maxWidth){const t=t=>{var n;return{maxWidth:(null==(n=e.theme)||null==(n=n.breakpoints)||null==(n=n.values)?void 0:n[t])||E[t]||oe(t)}};return k(e,e.maxWidth,t)}return null};le.filterProps=["maxWidth"];const ue=x({prop:"minWidth",transform:oe}),ce=x({prop:"height",transform:oe}),he=x({prop:"maxHeight",transform:oe}),de=x({prop:"minHeight",transform:oe});x({prop:"size",cssProperty:"width",transform:oe}),x({prop:"size",cssProperty:"height",transform:oe}),q(ae,le,ue,ce,he,de,x({prop:"boxSizing"}));var fe={border:{themeKey:"borders",transform:$},borderTop:{themeKey:"borders",transform:$},borderRight:{themeKey:"borders",transform:$},borderBottom:{themeKey:"borders",transform:$},borderLeft:{themeKey:"borders",transform:$},borderColor:{themeKey:"palette"},borderTopColor:{themeKey:"palette"},borderRightColor:{themeKey:"palette"},borderBottomColor:{themeKey:"palette"},borderLeftColor:{themeKey:"palette"},borderRadius:{themeKey:"shape.borderRadius",style:te},color:{themeKey:"palette",transform:se},bgcolor:{themeKey:"palette",cssProperty:"backgroundColor",transform:se},backgroundColor:{themeKey:"palette",transform:se},p:{style:B},pt:{style:B},pr:{style:B},pb:{style:B},pl:{style:B},px:{style:B},py:{style:B},padding:{style:B},paddingTop:{style:B},paddingRight:{style:B},paddingBottom:{style:B},paddingLeft:{style:B},paddingX:{style:B},paddingY:{style:B},paddingInline:{style:B},paddingInlineStart:{style:B},paddingInlineEnd:{style:B},paddingBlock:{style:B},paddingBlockStart:{style:B},paddingBlockEnd:{style:B},m:{style:z},mt:{style:z},mr:{style:z},mb:{style:z},ml:{style:z},mx:{style:z},my:{style:z},margin:{style:z},marginTop:{style:z},marginRight:{style:z},marginBottom:{style:z},marginLeft:{style:z},marginX:{style:z},marginY:{style:z},marginInline:{style:z},marginInlineStart:{style:z},marginInlineEnd:{style:z},marginBlock:{style:z},marginBlockStart:{style:z},marginBlockEnd:{style:z},displayPrint:{cssProperty:!1,transform:e=>({"@media print":{display:e}})},display:{},overflow:{},textOverflow:{},visibility:{},whiteSpace:{},flexBasis:{},flexDirection:{},flexWrap:{},justifyContent:{},alignItems:{},alignContent:{},order:{},flex:{},flexGrow:{},flexShrink:{},alignSelf:{},justifyItems:{},justifySelf:{},gap:{style:ne},rowGap:{style:ie},columnGap:{style:re},gridColumn:{},gridRow:{},gridAutoFlow:{},gridAutoColumns:{},gridAutoRows:{},gridTemplateColumns:{},gridTemplateRows:{},gridTemplateAreas:{},gridArea:{},position:{},zIndex:{themeKey:"zIndex"},top:{},right:{},bottom:{},left:{},boxShadow:{themeKey:"shadows"},width:{transform:oe},maxWidth:{style:le},minWidth:{transform:oe},height:{transform:oe},maxHeight:{transform:oe},minHeight:{transform:oe},boxSizing:{},fontFamily:{themeKey:"typography"},fontSize:{themeKey:"typography"},fontStyle:{themeKey:"typography"},fontWeight:{themeKey:"typography"},letterSpacing:{},textTransform:{},lineHeight:{},textAlign:{},typography:{cssProperty:!1,themeKey:"typography"}};const pe=function(){function e(e,t,n,r){const i={[e]:t,theme:n},s=r[e];if(!s)return{[e]:t};const{cssProperty:a=e,themeKey:l,transform:u,style:c}=s;if(null==t)return null;if("typography"===l&&"inherit"===t)return{[e]:t};const h=S(n,l)||{};return c?c(i):k(i,t,(t=>{let n=T(h,u,t);return t===n&&"string"==typeof t&&(n=T(h,u,`${e}${"default"===t?"":o(t)}`,t)),!1===a?n:{[a]:n}}))}return function t(n){var r;const{sx:i,theme:s={}}=n||{};if(!i)return null;const o=null!=(r=s.unstable_sxConfig)?r:fe;function a(n){let r=n;if("function"==typeof n)r=n(s);else if("object"!=typeof n)return n;if(!r)return null;const i=function(e={}){var t;return(null==(t=e.keys)?void 0:t.reduce(((t,n)=>(t[e.up(n)]={},t)),{}))||{}}(s.breakpoints),a=Object.keys(i);let l=i;return Object.keys(r).forEach((n=>{const i="function"==typeof(a=r[n])?a(s):a;var a;if(null!=i)if("object"==typeof i)if(o[n])l=C(l,e(n,i,s,o));else{const e=k({theme:s},i,(e=>({[n]:e})));!function(...e){const t=e.reduce(((e,t)=>e.concat(Object.keys(t))),[]),n=new Set(t);return e.every((e=>n.size===Object.keys(e).length))}(e,i)?l=C(l,e):l[n]=t({sx:i,theme:s})}else l=C(l,e(n,i,s,o))})),u=l,a.reduce(((e,t)=>{const n=e[t];return(!n||0===Object.keys(n).length)&&delete e[t],e}),u);var u}return Array.isArray(i)?i.map(a):a(i)}}();pe.filterProps=["sx"];var me=pe;const ge=["breakpoints","palette","spacing","shape"];var ye=function(e={},...t){const{breakpoints:n={},palette:r={},spacing:i,shape:s={}}=e,o=d(e,ge),a=function(e){const{values:t={xs:0,sm:600,md:900,lg:1200,xl:1536},unit:n="px",step:r=5}=e,i=d(e,b),s=(e=>{const t=Object.keys(e).map((t=>({key:t,val:e[t]})))||[];return t.sort(((e,t)=>e.val-t.val)),t.reduce(((e,t)=>u({},e,{[t.key]:t.val})),{})})(t),o=Object.keys(s);function a(e){return`@media (min-width:${"number"==typeof t[e]?t[e]:e}${n})`}function l(e){return`@media (max-width:${("number"==typeof t[e]?t[e]:e)-r/100}${n})`}function c(e,i){const s=o.indexOf(i);return`@media (min-width:${"number"==typeof t[e]?t[e]:e}${n}) and (max-width:${(-1!==s&&"number"==typeof t[o[s]]?t[o[s]]:i)-r/100}${n})`}return u({keys:o,values:s,up:a,down:l,between:c,only:function(e){return o.indexOf(e)+1<o.length?c(e,o[o.indexOf(e)+1]):a(e)},not:function(e){const t=o.indexOf(e);return 0===t?a(o[1]):t===o.length-1?l(o[t]):c(e,o[o.indexOf(e)+1]).replace("@media","@media not all and")},unit:n},i)}(n),l=function(e=8){if(e.mui)return e;const t=F({spacing:e}),n=(...e)=>(0===e.length?[1]:e).map((e=>{const n=t(e);return"number"==typeof n?`${n}px`:n})).join(" ");return n.mui=!0,n}(i);let c=w({breakpoints:a,direction:"ltr",components:{},palette:u({mode:"light"},r),spacing:l,shape:u({},_,s)},o);return c=t.reduce(((e,t)=>w(e,t)),c),c.unstable_sxConfig=u({},fe,null==o?void 0:o.unstable_sxConfig),c.unstable_sx=function(e){return me({sx:e,theme:this})},c},ve=function(){function e(e){var t=this;this._insertTag=function(e){var n;n=0===t.tags.length?t.insertionPoint?t.insertionPoint.nextSibling:t.prepend?t.container.firstChild:t.before:t.tags[t.tags.length-1].nextSibling,t.container.insertBefore(e,n),t.tags.push(e)},this.isSpeedy=void 0===e.speedy||e.speedy,this.tags=[],this.ctr=0,this.nonce=e.nonce,this.key=e.key,this.container=e.container,this.prepend=e.prepend,this.insertionPoint=e.insertionPoint,this.before=null}var t=e.prototype;return t.hydrate=function(e){e.forEach(this._insertTag)},t.insert=function(e){this.ctr%(this.isSpeedy?65e3:1)==0&&this._insertTag(function(e){var t=document.createElement("style");return t.setAttribute("data-emotion",e.key),void 0!==e.nonce&&t.setAttribute("nonce",e.nonce),t.appendChild(document.createTextNode("")),t.setAttribute("data-s",""),t}(this));var t=this.tags[this.tags.length-1];if(this.isSpeedy){var n=function(e){if(e.sheet)return e.sheet;for(var t=0;t<document.styleSheets.length;t++)if(document.styleSheets[t].ownerNode===e)return document.styleSheets[t]}(t);try{n.insertRule(e,n.cssRules.length)}catch(e){}}else t.appendChild(document.createTextNode(e));this.ctr++},t.flush=function(){this.tags.forEach((function(e){return e.parentNode&&e.parentNode.removeChild(e)})),this.tags=[],this.ctr=0},e}(),we=Math.abs,be=String.fromCharCode,_e=Object.assign;function Ee(e){return e.trim()}function Ie(e,t,n){return e.replace(t,n)}function ke(e,t){return e.indexOf(t)}function Se(e,t){return 0|e.charCodeAt(t)}function Te(e,t,n){return e.slice(t,n)}function xe(e){return e.length}function Ce(e){return e.length}function Ae(e,t){return t.push(e),e}var Ne=1,Re=1,Pe=0,De=0,Oe=0,Le="";function Me(e,t,n,r,i,s,o){return{value:e,root:t,parent:n,type:r,props:i,children:s,line:Ne,column:Re,length:o,return:""}}function Fe(e,t){return _e(Me("",null,null,"",null,null,0),e,{length:-e.length},t)}function Ue(){return Oe=De>0?Se(Le,--De):0,Re--,10===Oe&&(Re=1,Ne--),Oe}function Ve(){return Oe=De<Pe?Se(Le,De++):0,Re++,10===Oe&&(Re=1,Ne++),Oe}function ze(){return Se(Le,De)}function Be(){return De}function je(e,t){return Te(Le,e,t)}function qe(e){switch(e){case 0:case 9:case 10:case 13:case 32:return 5;case 33:case 43:case 44:case 47:case 62:case 64:case 126:case 59:case 123:case 125:return 4;case 58:return 3;case 34:case 39:case 40:case 91:return 2;case 41:case 93:return 1}return 0}function $e(e){return Ne=Re=1,Pe=xe(Le=e),De=0,[]}function Ke(e){return Le="",e}function Ge(e){return Ee(je(De-1,Qe(91===e?e+2:40===e?e+1:e)))}function We(e){for(;(Oe=ze())&&Oe<33;)Ve();return qe(e)>2||qe(Oe)>3?"":" "}function He(e,t){for(;--t&&Ve()&&!(Oe<48||Oe>102||Oe>57&&Oe<65||Oe>70&&Oe<97););return je(e,Be()+(t<6&&32==ze()&&32==Ve()))}function Qe(e){for(;Ve();)switch(Oe){case e:return De;case 34:case 39:34!==e&&39!==e&&Qe(Oe);break;case 40:41===e&&Qe(e);break;case 92:Ve()}return De}function Ye(e,t){for(;Ve()&&e+Oe!==57&&(e+Oe!==84||47!==ze()););return"/*"+je(t,De-1)+"*"+be(47===e?e:Ve())}function Je(e){for(;!qe(ze());)Ve();return je(e,De)}var Xe="-ms-",Ze="-moz-",et="-webkit-",tt="comm",nt="rule",rt="decl",it="@keyframes";function st(e,t){for(var n="",r=Ce(e),i=0;i<r;i++)n+=t(e[i],i,e,t)||"";return n}function ot(e,t,n,r){switch(e.type){case"@layer":if(e.children.length)break;case"@import":case rt:return e.return=e.return||e.value;case tt:return"";case it:return e.return=e.value+"{"+st(e.children,r)+"}";case nt:e.value=e.props.join(",")}return xe(n=st(e.children,r))?e.return=e.value+"{"+n+"}":""}function at(e){return Ke(lt("",null,null,null,[""],e=$e(e),0,[0],e))}function lt(e,t,n,r,i,s,o,a,l){for(var u=0,c=0,h=o,d=0,f=0,p=0,m=1,g=1,y=1,v=0,w="",b=i,_=s,E=r,I=w;g;)switch(p=v,v=Ve()){case 40:if(108!=p&&58==Se(I,h-1)){-1!=ke(I+=Ie(Ge(v),"&","&\f"),"&\f")&&(y=-1);break}case 34:case 39:case 91:I+=Ge(v);break;case 9:case 10:case 13:case 32:I+=We(p);break;case 92:I+=He(Be()-1,7);continue;case 47:switch(ze()){case 42:case 47:Ae(ct(Ye(Ve(),Be()),t,n),l);break;default:I+="/"}break;case 123*m:a[u++]=xe(I)*y;case 125*m:case 59:case 0:switch(v){case 0:case 125:g=0;case 59+c:-1==y&&(I=Ie(I,/\f/g,"")),f>0&&xe(I)-h&&Ae(f>32?ht(I+";",r,n,h-1):ht(Ie(I," ","")+";",r,n,h-2),l);break;case 59:I+=";";default:if(Ae(E=ut(I,t,n,u,c,i,a,w,b=[],_=[],h),s),123===v)if(0===c)lt(I,t,E,E,b,s,h,a,_);else switch(99===d&&110===Se(I,3)?100:d){case 100:case 108:case 109:case 115:lt(e,E,E,r&&Ae(ut(e,E,E,0,0,i,a,w,i,b=[],h),_),i,_,h,a,r?b:_);break;default:lt(I,E,E,E,[""],_,0,a,_)}}u=c=f=0,m=y=1,w=I="",h=o;break;case 58:h=1+xe(I),f=p;default:if(m<1)if(123==v)--m;else if(125==v&&0==m++&&125==Ue())continue;switch(I+=be(v),v*m){case 38:y=c>0?1:(I+="\f",-1);break;case 44:a[u++]=(xe(I)-1)*y,y=1;break;case 64:45===ze()&&(I+=Ge(Ve())),d=ze(),c=h=xe(w=I+=Je(Be())),v++;break;case 45:45===p&&2==xe(I)&&(m=0)}}return s}function ut(e,t,n,r,i,s,o,a,l,u,c){for(var h=i-1,d=0===i?s:[""],f=Ce(d),p=0,m=0,g=0;p<r;++p)for(var y=0,v=Te(e,h+1,h=we(m=o[p])),w=e;y<f;++y)(w=Ee(m>0?d[y]+" "+v:Ie(v,/&\f/g,d[y])))&&(l[g++]=w);return Me(e,t,n,0===i?nt:a,l,u,c)}function ct(e,t,n){return Me(e,t,n,tt,be(Oe),Te(e,2,-2),0)}function ht(e,t,n,r){return Me(e,t,n,rt,Te(e,0,r),Te(e,r+1,-1),r)}var dt=function(e,t,n){for(var r=0,i=0;r=i,i=ze(),38===r&&12===i&&(t[n]=1),!qe(i);)Ve();return je(e,De)},ft=new WeakMap,pt=function(e){if("rule"===e.type&&e.parent&&!(e.length<1)){for(var t=e.value,n=e.parent,r=e.column===n.column&&e.line===n.line;"rule"!==n.type;)if(!(n=n.parent))return;if((1!==e.props.length||58===t.charCodeAt(0)||ft.get(n))&&!r){ft.set(e,!0);for(var i=[],s=function(e,t){return Ke(function(e,t){var n=-1,r=44;do{switch(qe(r)){case 0:38===r&&12===ze()&&(t[n]=1),e[n]+=dt(De-1,t,n);break;case 2:e[n]+=Ge(r);break;case 4:if(44===r){e[++n]=58===ze()?"&\f":"",t[n]=e[n].length;break}default:e[n]+=be(r)}}while(r=Ve());return e}($e(e),t))}(t,i),o=n.props,a=0,l=0;a<s.length;a++)for(var u=0;u<o.length;u++,l++)e.props[l]=i[a]?s[a].replace(/&\f/g,o[u]):o[u]+" "+s[a]}}},mt=function(e){if("decl"===e.type){var t=e.value;108===t.charCodeAt(0)&&98===t.charCodeAt(2)&&(e.return="",e.value="")}};function gt(e,t){switch(function(e,t){return 45^Se(e,0)?(((t<<2^Se(e,0))<<2^Se(e,1))<<2^Se(e,2))<<2^Se(e,3):0}(e,t)){case 5103:return et+"print-"+e+e;case 5737:case 4201:case 3177:case 3433:case 1641:case 4457:case 2921:case 5572:case 6356:case 5844:case 3191:case 6645:case 3005:case 6391:case 5879:case 5623:case 6135:case 4599:case 4855:case 4215:case 6389:case 5109:case 5365:case 5621:case 3829:return et+e+e;case 5349:case 4246:case 4810:case 6968:case 2756:return et+e+Ze+e+Xe+e+e;case 6828:case 4268:return et+e+Xe+e+e;case 6165:return et+e+Xe+"flex-"+e+e;case 5187:return et+e+Ie(e,/(\w+).+(:[^]+)/,et+"box-$1$2"+Xe+"flex-$1$2")+e;case 5443:return et+e+Xe+"flex-item-"+Ie(e,/flex-|-self/,"")+e;case 4675:return et+e+Xe+"flex-line-pack"+Ie(e,/align-content|flex-|-self/,"")+e;case 5548:return et+e+Xe+Ie(e,"shrink","negative")+e;case 5292:return et+e+Xe+Ie(e,"basis","preferred-size")+e;case 6060:return et+"box-"+Ie(e,"-grow","")+et+e+Xe+Ie(e,"grow","positive")+e;case 4554:return et+Ie(e,/([^-])(transform)/g,"$1"+et+"$2")+e;case 6187:return Ie(Ie(Ie(e,/(zoom-|grab)/,et+"$1"),/(image-set)/,et+"$1"),e,"")+e;case 5495:case 3959:return Ie(e,/(image-set\([^]*)/,et+"$1$`$1");case 4968:return Ie(Ie(e,/(.+:)(flex-)?(.*)/,et+"box-pack:$3"+Xe+"flex-pack:$3"),/s.+-b[^;]+/,"justify")+et+e+e;case 4095:case 3583:case 4068:case 2532:return Ie(e,/(.+)-inline(.+)/,et+"$1$2")+e;case 8116:case 7059:case 5753:case 5535:case 5445:case 5701:case 4933:case 4677:case 5533:case 5789:case 5021:case 4765:if(xe(e)-1-t>6)switch(Se(e,t+1)){case 109:if(45!==Se(e,t+4))break;case 102:return Ie(e,/(.+:)(.+)-([^]+)/,"$1"+et+"$2-$3$1"+Ze+(108==Se(e,t+3)?"$3":"$2-$3"))+e;case 115:return~ke(e,"stretch")?gt(Ie(e,"stretch","fill-available"),t)+e:e}break;case 4949:if(115!==Se(e,t+1))break;case 6444:switch(Se(e,xe(e)-3-(~ke(e,"!important")&&10))){case 107:return Ie(e,":",":"+et)+e;case 101:return Ie(e,/(.+:)([^;!]+)(;|!.+)?/,"$1"+et+(45===Se(e,14)?"inline-":"")+"box$3$1"+et+"$2$3$1"+Xe+"$2box$3")+e}break;case 5936:switch(Se(e,t+11)){case 114:return et+e+Xe+Ie(e,/[svh]\w+-[tblr]{2}/,"tb")+e;case 108:return et+e+Xe+Ie(e,/[svh]\w+-[tblr]{2}/,"tb-rl")+e;case 45:return et+e+Xe+Ie(e,/[svh]\w+-[tblr]{2}/,"lr")+e}return et+e+Xe+e+e}return e}var yt=[function(e,t,n,r){if(e.length>-1&&!e.return)switch(e.type){case rt:e.return=gt(e.value,e.length);break;case it:return st([Fe(e,{value:Ie(e.value,"@","@"+et)})],r);case nt:if(e.length)return function(e,t){return e.map(t).join("")}(e.props,(function(t){switch(function(e,t){return(e=/(::plac\w+|:read-\w+)/.exec(e))?e[0]:e}(t)){case":read-only":case":read-write":return st([Fe(e,{props:[Ie(t,/:(read-\w+)/,":-moz-$1")]})],r);case"::placeholder":return st([Fe(e,{props:[Ie(t,/:(plac\w+)/,":"+et+"input-$1")]}),Fe(e,{props:[Ie(t,/:(plac\w+)/,":-moz-$1")]}),Fe(e,{props:[Ie(t,/:(plac\w+)/,Xe+"input-$1")]})],r)}return""}))}}],vt=function(e){var t=e.key;if("css"===t){var n=document.querySelectorAll("style[data-emotion]:not([data-s])");Array.prototype.forEach.call(n,(function(e){-1!==e.getAttribute("data-emotion").indexOf(" ")&&(document.head.appendChild(e),e.setAttribute("data-s",""))}))}var r,i,s=e.stylisPlugins||yt,o={},a=[];r=e.container||document.head,Array.prototype.forEach.call(document.querySelectorAll('style[data-emotion^="'+t+' "]'),(function(e){for(var t=e.getAttribute("data-emotion").split(" "),n=1;n<t.length;n++)o[t[n]]=!0;a.push(e)}));var l,u,c,h,d=[ot,(h=function(e){l.insert(e)},function(e){e.root||(e=e.return)&&h(e)})],f=(u=[pt,mt].concat(s,d),c=Ce(u),function(e,t,n,r){for(var i="",s=0;s<c;s++)i+=u[s](e,t,n,r)||"";return i});i=function(e,t,n,r){l=n,st(at(e?e+"{"+t.styles+"}":t.styles),f),r&&(p.inserted[t.name]=!0)};var p={key:t,sheet:new ve({key:t,container:r,nonce:e.nonce,speedy:e.speedy,prepend:e.prepend,insertionPoint:e.insertionPoint}),nonce:e.nonce,inserted:o,registered:{},insert:i};return p.sheet.hydrate(a),p},wt={animationIterationCount:1,aspectRatio:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1};function bt(e){var t=Object.create(null);return function(n){return void 0===t[n]&&(t[n]=e(n)),t[n]}}var _t=/[A-Z]|^ms/g,Et=/_EMO_([^_]+?)_([^]*?)_EMO_/g,It=function(e){return 45===e.charCodeAt(1)},kt=function(e){return null!=e&&"boolean"!=typeof e},St=bt((function(e){return It(e)?e:e.replace(_t,"-$&").toLowerCase()})),Tt=function(e,t){switch(e){case"animation":case"animationName":if("string"==typeof t)return t.replace(Et,(function(e,t,n){return Ct={name:t,styles:n,next:Ct},t}))}return 1===wt[e]||It(e)||"number"!=typeof t||0===t?t:t+"px"};function xt(e,t,n){if(null==n)return"";if(void 0!==n.__emotion_styles)return n;switch(typeof n){case"boolean":return"";case"object":if(1===n.anim)return Ct={name:n.name,styles:n.styles,next:Ct},n.name;if(void 0!==n.styles){var r=n.next;if(void 0!==r)for(;void 0!==r;)Ct={name:r.name,styles:r.styles,next:Ct},r=r.next;return n.styles+";"}return function(e,t,n){var r="";if(Array.isArray(n))for(var i=0;i<n.length;i++)r+=xt(e,t,n[i])+";";else for(var s in n){var o=n[s];if("object"!=typeof o)null!=t&&void 0!==t[o]?r+=s+"{"+t[o]+"}":kt(o)&&(r+=St(s)+":"+Tt(s,o)+";");else if(!Array.isArray(o)||"string"!=typeof o[0]||null!=t&&void 0!==t[o[0]]){var a=xt(e,t,o);switch(s){case"animation":case"animationName":r+=St(s)+":"+a+";";break;default:r+=s+"{"+a+"}"}}else for(var l=0;l<o.length;l++)kt(o[l])&&(r+=St(s)+":"+Tt(s,o[l])+";")}return r}(e,t,n);case"function":if(void 0!==e){var i=Ct,s=n(e);return Ct=i,xt(e,t,s)}}if(null==t)return n;var o=t[n];return void 0!==o?o:n}var Ct,At=/label:\s*([^\s;\n{]+)\s*(;|$)/g,Nt=!!h.useInsertionEffect&&h.useInsertionEffect,Rt=Nt||function(e){return e()},Pt=(Nt||c.useLayoutEffect,c.createContext("undefined"!=typeof HTMLElement?vt({key:"css"}):null));Pt.Provider;var Dt=c.createContext({});const Ot=ye();var Lt=function(e=Ot){return function(e=null){const t=c.useContext(Dt);return t&&(n=t,0!==Object.keys(n).length)?t:e;var n}(e)};function Mt(e,t=0,n=1){return Math.min(Math.max(t,e),n)}function Ft(e){if(e.type)return e;if("#"===e.charAt(0))return Ft(function(e){e=e.slice(1);const t=new RegExp(`.{1,${e.length>=6?2:1}}`,"g");let n=e.match(t);return n&&1===n[0].length&&(n=n.map((e=>e+e))),n?`rgb${4===n.length?"a":""}(${n.map(((e,t)=>t<3?parseInt(e,16):Math.round(parseInt(e,16)/255*1e3)/1e3)).join(", ")})`:""}(e));const t=e.indexOf("("),n=e.substring(0,t);if(-1===["rgb","rgba","hsl","hsla","color"].indexOf(n))throw new Error(s(9,e));let r,i=e.substring(t+1,e.length-1);if("color"===n){if(i=i.split(" "),r=i.shift(),4===i.length&&"/"===i[3].charAt(0)&&(i[3]=i[3].slice(1)),-1===["srgb","display-p3","a98-rgb","prophoto-rgb","rec-2020"].indexOf(r))throw new Error(s(10,r))}else i=i.split(",");return i=i.map((e=>parseFloat(e))),{type:n,values:i,colorSpace:r}}function Ut(e){const{type:t,colorSpace:n}=e;let{values:r}=e;return-1!==t.indexOf("rgb")?r=r.map(((e,t)=>t<3?parseInt(e,10):e)):-1!==t.indexOf("hsl")&&(r[1]=`${r[1]}%`,r[2]=`${r[2]}%`),r=-1!==t.indexOf("color")?`${n} ${r.join(" ")}`:`${r.join(", ")}`,`${t}(${r})`}function Vt(e){let t="hsl"===(e=Ft(e)).type||"hsla"===e.type?Ft(function(e){e=Ft(e);const{values:t}=e,n=t[0],r=t[1]/100,i=t[2]/100,s=r*Math.min(i,1-i),o=(e,t=(e+n/30)%12)=>i-s*Math.max(Math.min(t-3,9-t,1),-1);let a="rgb";const l=[Math.round(255*o(0)),Math.round(255*o(8)),Math.round(255*o(4))];return"hsla"===e.type&&(a+="a",l.push(t[3])),Ut({type:a,values:l})}(e)).values:e.values;return t=t.map((t=>("color"!==e.type&&(t/=255),t<=.03928?t/12.92:((t+.055)/1.055)**2.4))),Number((.2126*t[0]+.7152*t[1]+.0722*t[2]).toFixed(3))}var zt={black:"#000",white:"#fff"},Bt={50:"#fafafa",100:"#f5f5f5",200:"#eeeeee",300:"#e0e0e0",400:"#bdbdbd",500:"#9e9e9e",600:"#757575",700:"#616161",800:"#424242",900:"#212121",A100:"#f5f5f5",A200:"#eeeeee",A400:"#bdbdbd",A700:"#616161"},jt={50:"#f3e5f5",100:"#e1bee7",200:"#ce93d8",300:"#ba68c8",400:"#ab47bc",500:"#9c27b0",600:"#8e24aa",700:"#7b1fa2",800:"#6a1b9a",900:"#4a148c",A100:"#ea80fc",A200:"#e040fb",A400:"#d500f9",A700:"#aa00ff"},qt={50:"#ffebee",100:"#ffcdd2",200:"#ef9a9a",300:"#e57373",400:"#ef5350",500:"#f44336",600:"#e53935",700:"#d32f2f",800:"#c62828",900:"#b71c1c",A100:"#ff8a80",A200:"#ff5252",A400:"#ff1744",A700:"#d50000"},$t={50:"#fff3e0",100:"#ffe0b2",200:"#ffcc80",300:"#ffb74d",400:"#ffa726",500:"#ff9800",600:"#fb8c00",700:"#f57c00",800:"#ef6c00",900:"#e65100",A100:"#ffd180",A200:"#ffab40",A400:"#ff9100",A700:"#ff6d00"},Kt={50:"#e3f2fd",100:"#bbdefb",200:"#90caf9",300:"#64b5f6",400:"#42a5f5",500:"#2196f3",600:"#1e88e5",700:"#1976d2",800:"#1565c0",900:"#0d47a1",A100:"#82b1ff",A200:"#448aff",A400:"#2979ff",A700:"#2962ff"},Gt={50:"#e1f5fe",100:"#b3e5fc",200:"#81d4fa",300:"#4fc3f7",400:"#29b6f6",500:"#03a9f4",600:"#039be5",700:"#0288d1",800:"#0277bd",900:"#01579b",A100:"#80d8ff",A200:"#40c4ff",A400:"#00b0ff",A700:"#0091ea"},Wt={50:"#e8f5e9",100:"#c8e6c9",200:"#a5d6a7",300:"#81c784",400:"#66bb6a",500:"#4caf50",600:"#43a047",700:"#388e3c",800:"#2e7d32",900:"#1b5e20",A100:"#b9f6ca",A200:"#69f0ae",A400:"#00e676",A700:"#00c853"};const Ht=["mode","contrastThreshold","tonalOffset"],Qt={text:{primary:"rgba(0, 0, 0, 0.87)",secondary:"rgba(0, 0, 0, 0.6)",disabled:"rgba(0, 0, 0, 0.38)"},divider:"rgba(0, 0, 0, 0.12)",background:{paper:zt.white,default:zt.white},action:{active:"rgba(0, 0, 0, 0.54)",hover:"rgba(0, 0, 0, 0.04)",hoverOpacity:.04,selected:"rgba(0, 0, 0, 0.08)",selectedOpacity:.08,disabled:"rgba(0, 0, 0, 0.26)",disabledBackground:"rgba(0, 0, 0, 0.12)",disabledOpacity:.38,focus:"rgba(0, 0, 0, 0.12)",focusOpacity:.12,activatedOpacity:.12}},Yt={text:{primary:zt.white,secondary:"rgba(255, 255, 255, 0.7)",disabled:"rgba(255, 255, 255, 0.5)",icon:"rgba(255, 255, 255, 0.5)"},divider:"rgba(255, 255, 255, 0.12)",background:{paper:"#121212",default:"#121212"},action:{active:zt.white,hover:"rgba(255, 255, 255, 0.08)",hoverOpacity:.08,selected:"rgba(255, 255, 255, 0.16)",selectedOpacity:.16,disabled:"rgba(255, 255, 255, 0.3)",disabledBackground:"rgba(255, 255, 255, 0.12)",disabledOpacity:.38,focus:"rgba(255, 255, 255, 0.12)",focusOpacity:.12,activatedOpacity:.24}};function Jt(e,t,n,r){const i=r.light||r,s=r.dark||1.5*r;e[t]||(e.hasOwnProperty(n)?e[t]=e[n]:"light"===t?e.light=function(e,t){if(e=Ft(e),t=Mt(t),-1!==e.type.indexOf("hsl"))e.values[2]+=(100-e.values[2])*t;else if(-1!==e.type.indexOf("rgb"))for(let n=0;n<3;n+=1)e.values[n]+=(255-e.values[n])*t;else if(-1!==e.type.indexOf("color"))for(let n=0;n<3;n+=1)e.values[n]+=(1-e.values[n])*t;return Ut(e)}(e.main,i):"dark"===t&&(e.dark=function(e,t){if(e=Ft(e),t=Mt(t),-1!==e.type.indexOf("hsl"))e.values[2]*=1-t;else if(-1!==e.type.indexOf("rgb")||-1!==e.type.indexOf("color"))for(let n=0;n<3;n+=1)e.values[n]*=1-t;return Ut(e)}(e.main,s)))}const Xt=["fontFamily","fontSize","fontWeightLight","fontWeightRegular","fontWeightMedium","fontWeightBold","htmlFontSize","allVariants","pxToRem"],Zt={textTransform:"uppercase"},en='"Roboto", "Helvetica", "Arial", sans-serif';function tn(e,t){const n="function"==typeof t?t(e):t,{fontFamily:r=en,fontSize:i=14,fontWeightLight:s=300,fontWeightRegular:o=400,fontWeightMedium:a=500,fontWeightBold:l=700,htmlFontSize:c=16,allVariants:h,pxToRem:f}=n,p=d(n,Xt),m=i/14,g=f||(e=>e/c*m+"rem"),y=(e,t,n,i,s)=>{return u({fontFamily:r,fontWeight:e,fontSize:g(t),lineHeight:n},r===en?{letterSpacing:(o=i/t,Math.round(1e5*o)/1e5+"em")}:{},s,h);var o},v={h1:y(s,96,1.167,-1.5),h2:y(s,60,1.2,-.5),h3:y(o,48,1.167,0),h4:y(o,34,1.235,.25),h5:y(o,24,1.334,0),h6:y(a,20,1.6,.15),subtitle1:y(o,16,1.75,.15),subtitle2:y(a,14,1.57,.1),body1:y(o,16,1.5,.15),body2:y(o,14,1.43,.15),button:y(a,14,1.75,.4,Zt),caption:y(o,12,1.66,.4),overline:y(o,12,2.66,1,Zt),inherit:{fontFamily:"inherit",fontWeight:"inherit",fontSize:"inherit",lineHeight:"inherit",letterSpacing:"inherit"}};return w(u({htmlFontSize:c,pxToRem:g,fontFamily:r,fontSize:i,fontWeightLight:s,fontWeightRegular:o,fontWeightMedium:a,fontWeightBold:l},v),p,{clone:!1})}function nn(...e){return[`${e[0]}px ${e[1]}px ${e[2]}px ${e[3]}px rgba(0,0,0,0.2)`,`${e[4]}px ${e[5]}px ${e[6]}px ${e[7]}px rgba(0,0,0,0.14)`,`${e[8]}px ${e[9]}px ${e[10]}px ${e[11]}px rgba(0,0,0,0.12)`].join(",")}var rn=["none",nn(0,2,1,-1,0,1,1,0,0,1,3,0),nn(0,3,1,-2,0,2,2,0,0,1,5,0),nn(0,3,3,-2,0,3,4,0,0,1,8,0),nn(0,2,4,-1,0,4,5,0,0,1,10,0),nn(0,3,5,-1,0,5,8,0,0,1,14,0),nn(0,3,5,-1,0,6,10,0,0,1,18,0),nn(0,4,5,-2,0,7,10,1,0,2,16,1),nn(0,5,5,-3,0,8,10,1,0,3,14,2),nn(0,5,6,-3,0,9,12,1,0,3,16,2),nn(0,6,6,-3,0,10,14,1,0,4,18,3),nn(0,6,7,-4,0,11,15,1,0,4,20,3),nn(0,7,8,-4,0,12,17,2,0,5,22,4),nn(0,7,8,-4,0,13,19,2,0,5,24,4),nn(0,7,9,-4,0,14,21,2,0,5,26,4),nn(0,8,9,-5,0,15,22,2,0,6,28,5),nn(0,8,10,-5,0,16,24,2,0,6,30,5),nn(0,8,11,-5,0,17,26,2,0,6,32,5),nn(0,9,11,-5,0,18,28,2,0,7,34,6),nn(0,9,12,-6,0,19,29,2,0,7,36,6),nn(0,10,13,-6,0,20,31,3,0,8,38,7),nn(0,10,13,-6,0,21,33,3,0,8,40,7),nn(0,10,14,-6,0,22,35,3,0,8,42,7),nn(0,11,14,-7,0,23,36,3,0,9,44,8),nn(0,11,15,-7,0,24,38,3,0,9,46,8)];const sn=["duration","easing","delay"],on={easeInOut:"cubic-bezier(0.4, 0, 0.2, 1)",easeOut:"cubic-bezier(0.0, 0, 0.2, 1)",easeIn:"cubic-bezier(0.4, 0, 1, 1)",sharp:"cubic-bezier(0.4, 0, 0.6, 1)"},an={shortest:150,shorter:200,short:250,standard:300,complex:375,enteringScreen:225,leavingScreen:195};function ln(e){return`${Math.round(e)}ms`}function un(e){if(!e)return 0;const t=e/36;return Math.round(10*(4+15*t**.25+t/5))}function cn(e){const t=u({},on,e.easing),n=u({},an,e.duration);return u({getAutoHeightDuration:un,create:(e=["all"],r={})=>{const{duration:i=n.standard,easing:s=t.easeInOut,delay:o=0}=r;return d(r,sn),(Array.isArray(e)?e:[e]).map((e=>`${e} ${"string"==typeof i?i:ln(i)} ${s} ${"string"==typeof o?o:ln(o)}`)).join(",")}},e,{easing:t,duration:n})}var hn={mobileStepper:1e3,fab:1050,speedDial:1050,appBar:1100,drawer:1200,modal:1300,snackbar:1400,tooltip:1500};const dn=["breakpoints","mixins","spacing","palette","transitions","typography","shape"];var fn=function(e={},...t){const{mixins:n={},palette:r={},transitions:i={},typography:o={}}=e,a=d(e,dn);if(e.vars)throw new Error(s(18));const l=function(e){const{mode:t="light",contrastThreshold:n=3,tonalOffset:r=.2}=e,i=d(e,Ht),o=e.primary||function(e="light"){return"dark"===e?{main:Kt[200],light:Kt[50],dark:Kt[400]}:{main:Kt[700],light:Kt[400],dark:Kt[800]}}(t),a=e.secondary||function(e="light"){return"dark"===e?{main:jt[200],light:jt[50],dark:jt[400]}:{main:jt[500],light:jt[300],dark:jt[700]}}(t),l=e.error||function(e="light"){return"dark"===e?{main:qt[500],light:qt[300],dark:qt[700]}:{main:qt[700],light:qt[400],dark:qt[800]}}(t),c=e.info||function(e="light"){return"dark"===e?{main:Gt[400],light:Gt[300],dark:Gt[700]}:{main:Gt[700],light:Gt[500],dark:Gt[900]}}(t),h=e.success||function(e="light"){return"dark"===e?{main:Wt[400],light:Wt[300],dark:Wt[700]}:{main:Wt[800],light:Wt[500],dark:Wt[900]}}(t),f=e.warning||function(e="light"){return"dark"===e?{main:$t[400],light:$t[300],dark:$t[700]}:{main:"#ed6c02",light:$t[500],dark:$t[900]}}(t);function p(e){const t=function(e,t){const n=Vt(e),r=Vt(t);return(Math.max(n,r)+.05)/(Math.min(n,r)+.05)}(e,Yt.text.primary)>=n?Yt.text.primary:Qt.text.primary;return t}const m=({color:e,name:t,mainShade:n=500,lightShade:i=300,darkShade:o=700})=>{if(!(e=u({},e)).main&&e[n]&&(e.main=e[n]),!e.hasOwnProperty("main"))throw new Error(s(11,t?` (${t})`:"",n));if("string"!=typeof e.main)throw new Error(s(12,t?` (${t})`:"",JSON.stringify(e.main)));return Jt(e,"light",i,r),Jt(e,"dark",o,r),e.contrastText||(e.contrastText=p(e.main)),e},g={dark:Yt,light:Qt};return w(u({common:u({},zt),mode:t,primary:m({color:o,name:"primary"}),secondary:m({color:a,name:"secondary",mainShade:"A400",lightShade:"A200",darkShade:"A700"}),error:m({color:l,name:"error"}),warning:m({color:f,name:"warning"}),info:m({color:c,name:"info"}),success:m({color:h,name:"success"}),grey:Bt,contrastThreshold:n,getContrastText:p,augmentColor:m,tonalOffset:r},g[t]),i)}(r),c=ye(e);let h=w(c,{mixins:(f=c.breakpoints,p=n,u({toolbar:{minHeight:56,[f.up("xs")]:{"@media (orientation: landscape)":{minHeight:48}},[f.up("sm")]:{minHeight:64}}},p)),palette:l,shadows:rn.slice(),typography:tn(l,o),transitions:cn(i),zIndex:u({},hn)});var f,p;return h=w(h,a),h=t.reduce(((e,t)=>w(e,t)),h),h.unstable_sxConfig=u({},fe,null==a?void 0:a.unstable_sxConfig),h.unstable_sx=function(e){return me({sx:e,theme:this})},h}(),pn="$$material";var mn=/^((children|dangerouslySetInnerHTML|key|ref|autoFocus|defaultValue|defaultChecked|innerHTML|suppressContentEditableWarning|suppressHydrationWarning|valueLink|abbr|accept|acceptCharset|accessKey|action|allow|allowUserMedia|allowPaymentRequest|allowFullScreen|allowTransparency|alt|async|autoComplete|autoPlay|capture|cellPadding|cellSpacing|challenge|charSet|checked|cite|classID|className|cols|colSpan|content|contentEditable|contextMenu|controls|controlsList|coords|crossOrigin|data|dateTime|decoding|default|defer|dir|disabled|disablePictureInPicture|download|draggable|encType|enterKeyHint|form|formAction|formEncType|formMethod|formNoValidate|formTarget|frameBorder|headers|height|hidden|high|href|hrefLang|htmlFor|httpEquiv|id|inputMode|integrity|is|keyParams|keyType|kind|label|lang|list|loading|loop|low|marginHeight|marginWidth|max|maxLength|media|mediaGroup|method|min|minLength|multiple|muted|name|nonce|noValidate|open|optimum|pattern|placeholder|playsInline|poster|preload|profile|radioGroup|readOnly|referrerPolicy|rel|required|reversed|role|rows|rowSpan|sandbox|scope|scoped|scrolling|seamless|selected|shape|size|sizes|slot|span|spellCheck|src|srcDoc|srcLang|srcSet|start|step|style|summary|tabIndex|target|title|translate|type|useMap|value|width|wmode|wrap|about|datatype|inlist|prefix|property|resource|typeof|vocab|autoCapitalize|autoCorrect|autoSave|color|incremental|fallback|inert|itemProp|itemScope|itemType|itemID|itemRef|on|option|results|security|unselectable|accentHeight|accumulate|additive|alignmentBaseline|allowReorder|alphabetic|amplitude|arabicForm|ascent|attributeName|attributeType|autoReverse|azimuth|baseFrequency|baselineShift|baseProfile|bbox|begin|bias|by|calcMode|capHeight|clip|clipPathUnits|clipPath|clipRule|colorInterpolation|colorInterpolationFilters|colorProfile|colorRendering|contentScriptType|contentStyleType|cursor|cx|cy|d|decelerate|descent|diffuseConstant|direction|display|divisor|dominantBaseline|dur|dx|dy|edgeMode|elevation|enableBackground|end|exponent|externalResourcesRequired|fill|fillOpacity|fillRule|filter|filterRes|filterUnits|floodColor|floodOpacity|focusable|fontFamily|fontSize|fontSizeAdjust|fontStretch|fontStyle|fontVariant|fontWeight|format|from|fr|fx|fy|g1|g2|glyphName|glyphOrientationHorizontal|glyphOrientationVertical|glyphRef|gradientTransform|gradientUnits|hanging|horizAdvX|horizOriginX|ideographic|imageRendering|in|in2|intercept|k|k1|k2|k3|k4|kernelMatrix|kernelUnitLength|kerning|keyPoints|keySplines|keyTimes|lengthAdjust|letterSpacing|lightingColor|limitingConeAngle|local|markerEnd|markerMid|markerStart|markerHeight|markerUnits|markerWidth|mask|maskContentUnits|maskUnits|mathematical|mode|numOctaves|offset|opacity|operator|order|orient|orientation|origin|overflow|overlinePosition|overlineThickness|panose1|paintOrder|pathLength|patternContentUnits|patternTransform|patternUnits|pointerEvents|points|pointsAtX|pointsAtY|pointsAtZ|preserveAlpha|preserveAspectRatio|primitiveUnits|r|radius|refX|refY|renderingIntent|repeatCount|repeatDur|requiredExtensions|requiredFeatures|restart|result|rotate|rx|ry|scale|seed|shapeRendering|slope|spacing|specularConstant|specularExponent|speed|spreadMethod|startOffset|stdDeviation|stemh|stemv|stitchTiles|stopColor|stopOpacity|strikethroughPosition|strikethroughThickness|string|stroke|strokeDasharray|strokeDashoffset|strokeLinecap|strokeLinejoin|strokeMiterlimit|strokeOpacity|strokeWidth|surfaceScale|systemLanguage|tableValues|targetX|targetY|textAnchor|textDecoration|textRendering|textLength|to|transform|u1|u2|underlinePosition|underlineThickness|unicode|unicodeBidi|unicodeRange|unitsPerEm|vAlphabetic|vHanging|vIdeographic|vMathematical|values|vectorEffect|version|vertAdvY|vertOriginX|vertOriginY|viewBox|viewTarget|visibility|widths|wordSpacing|writingMode|x|xHeight|x1|x2|xChannelSelector|xlinkActuate|xlinkArcrole|xlinkHref|xlinkRole|xlinkShow|xlinkTitle|xlinkType|xmlBase|xmlns|xmlnsXlink|xmlLang|xmlSpace|y|y1|y2|yChannelSelector|z|zoomAndPan|for|class|autofocus)|(([Dd][Aa][Tt][Aa]|[Aa][Rr][Ii][Aa]|x)-.*))$/,gn=function(e,t,n){var r=e.key+"-"+t.name;!1===n&&void 0===e.registered[r]&&(e.registered[r]=t.styles)},yn=bt((function(e){return mn.test(e)||111===e.charCodeAt(0)&&110===e.charCodeAt(1)&&e.charCodeAt(2)<91})),vn=function(e){return"theme"!==e},wn=function(e){return"string"==typeof e&&e.charCodeAt(0)>96?yn:vn},bn=function(e,t,n){var r;if(t){var i=t.shouldForwardProp;r=e.__emotion_forwardProp&&i?function(t){return e.__emotion_forwardProp(t)&&i(t)}:i}return"function"!=typeof r&&n&&(r=e.__emotion_forwardProp),r},_n=function(e){var t=e.cache,n=e.serialized,r=e.isStringTag;return gn(t,n,r),Rt((function(){return function(e,t,n){gn(e,t,n);var r=e.key+"-"+t.name;if(void 0===e.inserted[t.name]){var i=t;do{e.insert(t===i?"."+r:"",i,e.sheet,!0),i=i.next}while(void 0!==i)}}(t,n,r)})),null},En=function e(t,n){var r,i,s=t.__emotion_real===t,o=s&&t.__emotion_base||t;void 0!==n&&(r=n.label,i=n.target);var a=bn(t,n,s),l=a||wn(o),h=!l("as");return function(){var d=arguments,f=s&&void 0!==t.__emotion_styles?t.__emotion_styles.slice(0):[];if(void 0!==r&&f.push("label:"+r+";"),null==d[0]||void 0===d[0].raw)f.push.apply(f,d);else{f.push(d[0][0]);for(var p=d.length,m=1;m<p;m++)f.push(d[m],d[0][m])}var g,y=(g=function(e,t,n){var r,s,u,d,p=h&&e.as||o,m="",g=[],y=e;if(null==e.theme){for(var v in y={},e)y[v]=e[v];y.theme=c.useContext(Dt)}"string"==typeof e.className?(r=t.registered,s=g,u=e.className,d="",u.split(" ").forEach((function(e){void 0!==r[e]?s.push(r[e]+";"):d+=e+" "})),m=d):null!=e.className&&(m=e.className+" ");var w=function(e,t,n){if(1===e.length&&"object"==typeof e[0]&&null!==e[0]&&void 0!==e[0].styles)return e[0];var r=!0,i="";Ct=void 0;var s=e[0];null==s||void 0===s.raw?(r=!1,i+=xt(n,t,s)):i+=s[0];for(var o=1;o<e.length;o++)i+=xt(n,t,e[o]),r&&(i+=s[o]);At.lastIndex=0;for(var a,l="";null!==(a=At.exec(i));)l+="-"+a[1];var u=function(e){for(var t,n=0,r=0,i=e.length;i>=4;++r,i-=4)t=1540483477*(65535&(t=255&e.charCodeAt(r)|(255&e.charCodeAt(++r))<<8|(255&e.charCodeAt(++r))<<16|(255&e.charCodeAt(++r))<<24))+(59797*(t>>>16)<<16),n=1540483477*(65535&(t^=t>>>24))+(59797*(t>>>16)<<16)^1540483477*(65535&n)+(59797*(n>>>16)<<16);switch(i){case 3:n^=(255&e.charCodeAt(r+2))<<16;case 2:n^=(255&e.charCodeAt(r+1))<<8;case 1:n=1540483477*(65535&(n^=255&e.charCodeAt(r)))+(59797*(n>>>16)<<16)}return(((n=1540483477*(65535&(n^=n>>>13))+(59797*(n>>>16)<<16))^n>>>15)>>>0).toString(36)}(i)+l;return{name:u,styles:i,next:Ct}}(f.concat(g),t.registered,y);m+=t.key+"-"+w.name,void 0!==i&&(m+=" "+i);var b=h&&void 0===a?wn(p):l,_={};for(var E in e)h&&"as"===E||b(E)&&(_[E]=e[E]);return _.className=m,_.ref=n,c.createElement(c.Fragment,null,c.createElement(_n,{cache:t,serialized:w,isStringTag:"string"==typeof p}),c.createElement(p,_))},(0,c.forwardRef)((function(e,t){var n=(0,c.useContext)(Pt);return g(e,n,t)})));return y.displayName=void 0!==r?r:"Styled("+("string"==typeof o?o:o.displayName||o.name||"Component")+")",y.defaultProps=t.defaultProps,y.__emotion_real=y,y.__emotion_base=o,y.__emotion_styles=f,y.__emotion_forwardProp=a,Object.defineProperty(y,"toString",{value:function(){return"."+i}}),y.withComponent=function(t,r){return e(t,u({},n,r,{shouldForwardProp:bn(y,r,!0)})).apply(void 0,f)},y}}.bind();["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","big","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","keygen","label","legend","li","link","main","map","mark","marquee","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rp","rt","ruby","s","samp","script","section","select","small","source","span","strong","style","sub","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","title","tr","track","u","ul","var","video","wbr","circle","clipPath","defs","ellipse","foreignObject","g","image","line","linearGradient","mask","path","pattern","polygon","polyline","radialGradient","rect","stop","svg","text","tspan"].forEach((function(e){En[e]=En(e)}));const In=["variant"];function kn(e){return 0===e.length}function Sn(e){const{variant:t}=e,n=d(e,In);let r=t||"";return Object.keys(n).sort().forEach((t=>{r+="color"===t?kn(r)?e[t]:o(e[t]):`${kn(r)?t:o(t)}${o(e[t].toString())}`})),r}const Tn=["name","slot","skipVariantsResolver","skipSx","overridesResolver"];function xn(e){return"ownerState"!==e&&"theme"!==e&&"sx"!==e&&"as"!==e}const Cn=ye();function An({defaultTheme:e,theme:t,themeId:n}){return r=t,0===Object.keys(r).length?e:t[n]||t;var r}var Nn=function(e={}){const{themeId:t,defaultTheme:n=Cn,rootShouldForwardProp:r=xn,slotShouldForwardProp:i=xn}=e,s=e=>me(u({},e,{theme:An(u({},e,{defaultTheme:n,themeId:t}))}));return s.__mui_systemSx=!0,(e,o={})=>{((e,t)=>{Array.isArray(e.__emotion_styles)&&(e.__emotion_styles=e.__emotion_styles.filter((e=>!(null!=e&&e.__mui_systemSx))))})(e);const{name:a,slot:l,skipVariantsResolver:c,skipSx:h,overridesResolver:f}=o,p=d(o,Tn),m=void 0!==c?c:l&&"Root"!==l||!1,g=h||!1;let y=xn;"Root"===l?y=r:l?y=i:function(e){return"string"==typeof e&&e.charCodeAt(0)>96}(e)&&(y=void 0);const v=function(e,t){return En(e,t)}(e,u({shouldForwardProp:y,label:void 0},p)),w=(r,...i)=>{const o=i?i.map((e=>"function"==typeof e&&e.__emotion_real!==e?r=>e(u({},r,{theme:An(u({},r,{defaultTheme:n,themeId:t}))})):e)):[];let l=r;a&&f&&o.push((e=>{const r=An(u({},e,{defaultTheme:n,themeId:t})),i=((e,t)=>t.components&&t.components[e]&&t.components[e].styleOverrides?t.components[e].styleOverrides:null)(a,r);if(i){const t={};return Object.entries(i).forEach((([n,i])=>{t[n]="function"==typeof i?i(u({},e,{theme:r})):i})),f(e,t)}return null})),a&&!m&&o.push((e=>{const r=An(u({},e,{defaultTheme:n,themeId:t}));return((e,t,n,r)=>{var i;const{ownerState:s={}}=e,o=[],a=null==n||null==(i=n.components)||null==(i=i[r])?void 0:i.variants;return a&&a.forEach((n=>{let r=!0;Object.keys(n.props).forEach((t=>{s[t]!==n.props[t]&&e[t]!==n.props[t]&&(r=!1)})),r&&o.push(t[Sn(n.props)])})),o})(e,((e,t)=>{let n=[];t&&t.components&&t.components[e]&&t.components[e].variants&&(n=t.components[e].variants);const r={};return n.forEach((e=>{const t=Sn(e.props);r[t]=e.style})),r})(a,r),r,a)})),g||o.push(s);const c=o.length-i.length;if(Array.isArray(r)&&c>0){const e=new Array(c).fill("");l=[...r,...e],l.raw=[...r.raw,...e]}else"function"==typeof r&&r.__emotion_real!==r&&(l=e=>r(u({},e,{theme:An(u({},e,{defaultTheme:n,themeId:t}))})));const h=v(l,...o);return e.muiName&&(h.muiName=e.muiName),h};return v.withConfig&&(w.withConfig=v.withConfig),w}}({themeId:pn,defaultTheme:fn,rootShouldForwardProp:e=>xn(e)&&"classes"!==e});const Rn={active:"active",checked:"checked",completed:"completed",disabled:"disabled",readOnly:"readOnly",error:"error",expanded:"expanded",focused:"focused",focusVisible:"focusVisible",required:"required",selected:"selected"};function Pn(e,t,n="Mui"){const r=Rn[t];return r?`${n}-${r}`:`${i.generate(e)}-${t}`}function Dn(e){return Pn("MuiSvgIcon",e)}!function(e,t,n="Mui"){const r={};["root","colorPrimary","colorSecondary","colorAction","colorError","colorDisabled","fontSizeInherit","fontSizeSmall","fontSizeMedium","fontSizeLarge"].forEach((t=>{r[t]=Pn(e,t,n)}))}("MuiSvgIcon");var On=n(893);const Ln=["children","className","color","component","fontSize","htmlColor","inheritViewBox","titleAccess","viewBox"],Mn=Nn("svg",{name:"MuiSvgIcon",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,"inherit"!==n.color&&t[`color${a(n.color)}`],t[`fontSize${a(n.fontSize)}`]]}})((({theme:e,ownerState:t})=>{var n,r,i,s,o,a,l,u,c,h,d,f,p;return{userSelect:"none",width:"1em",height:"1em",display:"inline-block",fill:t.hasSvgAsChild?void 0:"currentColor",flexShrink:0,transition:null==(n=e.transitions)||null==(r=n.create)?void 0:r.call(n,"fill",{duration:null==(i=e.transitions)||null==(i=i.duration)?void 0:i.shorter}),fontSize:{inherit:"inherit",small:(null==(s=e.typography)||null==(o=s.pxToRem)?void 0:o.call(s,20))||"1.25rem",medium:(null==(a=e.typography)||null==(l=a.pxToRem)?void 0:l.call(a,24))||"1.5rem",large:(null==(u=e.typography)||null==(c=u.pxToRem)?void 0:c.call(u,35))||"2.1875rem"}[t.fontSize],color:null!=(h=null==(d=(e.vars||e).palette)||null==(d=d[t.color])?void 0:d.main)?h:{action:null==(f=(e.vars||e).palette)||null==(f=f.action)?void 0:f.active,disabled:null==(p=(e.vars||e).palette)||null==(p=p.action)?void 0:p.disabled,inherit:void 0}[t.color]}})),Fn=c.forwardRef((function(e,t){const n=function({props:e,name:t}){return function({props:e,name:t,defaultTheme:n,themeId:r}){let i=Lt(n);return r&&(i=i[r]||i),g({theme:i,name:t,props:e})}({props:e,name:t,defaultTheme:fn,themeId:pn})}({props:e,name:"MuiSvgIcon"}),{children:r,className:i,color:s="inherit",component:o="svg",fontSize:l="medium",htmlColor:h,inheritViewBox:f=!1,titleAccess:m,viewBox:y="0 0 24 24"}=n,v=d(n,Ln),w=c.isValidElement(r)&&"svg"===r.type,b=u({},n,{color:s,component:o,fontSize:l,instanceFontSize:e.fontSize,inheritViewBox:f,viewBox:y,hasSvgAsChild:w}),_={};f||(_.viewBox=y);const E=(e=>{const{color:t,fontSize:n,classes:r}=e;return function(e,t,n){const r={};return Object.keys(e).forEach((i=>{r[i]=e[i].reduce(((e,r)=>{if(r){const i=t(r);""!==i&&e.push(i),n&&n[r]&&e.push(n[r])}return e}),[]).join(" ")})),r}({root:["root","inherit"!==t&&`color${a(t)}`,`fontSize${a(n)}`]},Dn,r)})(b);return(0,On.jsxs)(Mn,u({as:o,className:p(E.root,i),focusable:"false",color:h,"aria-hidden":!m||void 0,role:m?"img":void 0,ref:t},_,v,w&&r.props,{ownerState:b,children:[w?r.props.children:r,m?(0,On.jsx)("title",{children:m}):null]}))}));Fn.muiName="SvgIcon";var Un=Fn;function Vn(e,t){function n(n,r){return(0,On.jsx)(Un,u({"data-testid":`${t}Icon`,ref:r},n,{children:e}))}return n.muiName=Un.muiName,c.memo(c.forwardRef(n))}var zn=function(e,t=166){let n;function r(...r){clearTimeout(n),n=setTimeout((()=>{e.apply(this,r)}),t)}return r.clear=()=>{clearTimeout(n)},r},Bn=function(e,t){return()=>null},jn=function(e,t){return c.isValidElement(e)&&-1!==t.indexOf(e.type.muiName)};function qn(e){return e&&e.ownerDocument||document}var $n=qn,Kn=function(e){return qn(e).defaultView||window},Gn=function(e,t){return()=>null};function Wn(e,t){"function"==typeof e?e(t):e&&(e.current=t)}var Hn=Wn,Qn="undefined"!=typeof window?c.useLayoutEffect:c.useEffect,Yn=Qn;let Jn=0;const Xn=h["useId".toString()];var Zn=function(e){if(void 0!==Xn){const t=Xn();return null!=e?e:t}return function(e){const[t,n]=c.useState(e),r=e||t;return c.useEffect((()=>{null==t&&(Jn+=1,n(`mui-${Jn}`))}),[t]),r}(e)},er=function(e,t,n,r,i){return null},tr=function({controlled:e,default:t,name:n,state:r="value"}){const{current:i}=c.useRef(void 0!==e),[s,o]=c.useState(t);return[i?e:s,c.useCallback((e=>{i||o(e)}),[])]},nr=function(e){const t=c.useRef(e);return Qn((()=>{t.current=e})),c.useCallback(((...e)=>(0,t.current)(...e)),[])},rr=function(...e){return c.useMemo((()=>e.every((e=>null==e))?null:t=>{e.forEach((e=>{Wn(e,t)}))}),e)};let ir,sr=!0,or=!1;const ar={text:!0,search:!0,url:!0,tel:!0,email:!0,password:!0,number:!0,date:!0,month:!0,week:!0,time:!0,datetime:!0,"datetime-local":!0};function lr(e){e.metaKey||e.altKey||e.ctrlKey||(sr=!0)}function ur(){sr=!1}function cr(){"hidden"===this.visibilityState&&or&&(sr=!0)}var hr=function(){const e=c.useCallback((e=>{var t;null!=e&&((t=e.ownerDocument).addEventListener("keydown",lr,!0),t.addEventListener("mousedown",ur,!0),t.addEventListener("pointerdown",ur,!0),t.addEventListener("touchstart",ur,!0),t.addEventListener("visibilitychange",cr,!0))}),[]),t=c.useRef(!1);return{isFocusVisibleRef:t,onFocus:function(e){return!!function(e){const{target:t}=e;try{return t.matches(":focus-visible")}catch(e){}return sr||function(e){const{type:t,tagName:n}=e;return!("INPUT"!==n||!ar[t]||e.readOnly)||"TEXTAREA"===n&&!e.readOnly||!!e.isContentEditable}(t)}(e)&&(t.current=!0,!0)},onBlur:function(){return!!t.current&&(or=!0,window.clearTimeout(ir),ir=window.setTimeout((()=>{or=!1}),100),t.current=!1,!0)},ref:e}};const dr={configure:e=>{i.configure(e)}}},87:function(e,t,n){"use strict";var r=n(81),i=n.n(r),s=n(645),o=n.n(s)()(i());o.push([e.id,"* {\n    margin: 0;\n    padding: 0;\n  }",""]),t.Z=o},936:function(e,t,n){"use strict";var r=n(81),i=n.n(r),s=n(645),o=n.n(s)()(i());o.push([e.id,".checkout {\n    display: flex;\n    padding: 20px;\n    background-color: white;\n    height: max-content;\n}\n\n.checkout__ad {\n    width: 100%;\n    margin-bottom: 10px;\n}\n\n.checkout__title {\n    margin-right: 10px;\n    padding: 10px;\n    border-bottom: 1px solid lightgray;\n}\n\n.checkout__left {\n    display: flex;\n    flex-direction: column;\n}",""]),t.Z=o},178:function(e,t,n){"use strict";var r=n(81),i=n.n(r),s=n(645),o=n.n(s)()(i());o.push([e.id,".checkoutProduct {\n    display: flex;\n    margin-top: 20px;\n    margin-bottom: 20px;\n}\n\n.checkoutProduct__info {\n    padding-left: 20px\n}\n\n.checkoutProduct__info > button {\n    background: #ff9f00;\n    border: 1px solid;\n    margin-top: 10px;\n    border-color: #a88734 #9c7e31 #846a29;\n    color: #111;\n}\n\n.checkoutProduct__image {\n    object-fit: contain;\n    width: 180px;\n    height: 180px;\n  }\n\n.checkoutProduct__rating {\n    display: flex;\n  }\n\n.checkoutProduct__title {\n    font-size: 17px;\n    font-weight: 800;\n}",""]),t.Z=o},491:function(e,t,n){"use strict";var r=n(81),i=n.n(r),s=n(645),o=n.n(s)()(i());o.push([e.id,".header {\n    height: 60px; \n    display: flex;\n    align-items: center;\n    background-color: #131921;\n    position: sticky;\n    top: 0;\n    z-index: 100;\n}\n\n.header__logo {\n    display: flex;\n    align-items: center;\n    color: #ff9f00;\n    margin: 0 25px;\n}\n\n.header__logoImage {\n    margin-right: 10px;\n}\n\n.header__logoTitle {\n    text-decoration: none;\n    border: 0;\n    color: white;\n}\n\n.header__search {\n    display: flex;\n    flex: 1;\n    align-items: center;\n    border-radius: 24px;\n    margin: 0 10px;\n}\n\n.header__searchInput {\n    height: 12px;\n    padding: 10px;\n    border: none;\n    width: 100%;\n}\n\n.header__searchIcon {\n    padding: 5px;\n    height: 22px !important;\n    background-color: #ff9f00;\n}\n\n.header__nav {\n    display: flex;\n    justify-content: space-evenly;\n}\n\n.nav__item {\n    display: flex;\n    flex-direction: column;\n    margin-left: 10px;\n    margin-right: 10px;  \n    color: white;\n}\n\n.nav__itemLineOne {\n    font-size: 10px;\n}\n\n.nav__itemLineTwo {\n    font-size: 13px;\n    font-weight: 800; \n}\n\n.nav__itemBasket {\n    display: flex;\n    align-items: center;\n    color: white;\n    margin-right: 50px;\n    margin-left: 10px;\n}\n\n.nav__basketCount {\n    margin-left: 10px;\n    margin-right: 10px;\n}",""]),t.Z=o},469:function(e,t,n){"use strict";var r=n(81),i=n.n(r),s=n(645),o=n.n(s)()(i());o.push([e.id,".home {\n    display: flex;\n    margin-left: auto;\n    margin-right: auto;\n    max-width: 1500px;\n}\n.home__image {\n    display: flex;\n    width: 100%;\n    height: 300px;\n    z-index: -1;\n   \n}\n\n.home__row {  \n    display: flex; \n    border: 3px;\n    z-index: -1; \n    margin-left: 5px;  \n    margin-right: 5px;\n    border: 3px solid rgb(136, 133, 133);\n\n}",""]),t.Z=o},806:function(e,t,n){"use strict";var r=n(81),i=n.n(r),s=n(645),o=n.n(s)()(i());o.push([e.id,".login {\n    background-color: white;\n    height: 100vh;\n    display: flex;\n    flex-direction: column;\n    align-items: center;\n}\n\n.login__logo {\n    display: flex;\n    margin: 30px 0;\n}\n\n.login__logoImage {\n    color: #ff9f00;\n}\n\n.login__logoTitle {\n    color: black;\n}\n\n.login__container {\n    width: 300px;\n    height: fit-content;\n    display: flex;\n    flex-direction: column;\n    border-radius: 5px;\n    border: 1px solid lightgray;\n    padding: 20px;\n}\n\n.login__container > h1 {\n    font-weight: 500;\n    margin-bottom: 20px;\n  }\n\n.login__container > form > h5 {\n    margin-bottom: 5px;\n}\n\n.login__container > form > input {\n    height: 30px;\n    margin-bottom: 10px;\n    background-color: white;\n    width: 98%;\n  }\n\n.login__container > p {\n    margin-top: 15px;\n    font-size: 12px;\n}\n\n.login__signInButton {\n    background: #ff9f00;\n    border-radius: 2px;\n    width: 100%;\n    height: 30px;\n    border: 1px solid;\n    margin-top: 10px;\n    border-color: #a88734 #9c7e31 #846a29;\n  }\n\n  .login__registerButton {\n    border-radius: 2px;\n    width: 100%;\n    height: 30px;\n    border: 1px solid;\n    margin-top: 10px;\n    border-color: darkgray;\n  }",""]),t.Z=o},225:function(e,t,n){"use strict";var r=n(81),i=n.n(r),s=n(645),o=n.n(s)()(i());o.push([e.id,".product {\n    display: flex;\n    flex-direction: column;\n    align-items: center;\n    justify-content: flex-end;\n    margin: 10px;\n    padding: 20px;\n    width: 100%;\n    max-height: 400px;\n    min-width: 100px;\n    background-color: white;\n    z-index: 1;\n  }\n  \n  .product__rating {\n    display: flex;\n  }\n  \n  .product > img {\n    max-height: 200px;\n    width: 100%;\n    object-fit: contain;\n    margin: 20px 0 0 15px;\n  }\n  \n  .product > button {\n    background: #ff9f00;\n    border: 1px solid;\n    margin-top: 10px;\n    border-color: #a88734 #9c7e31 #846a29;\n    color: #111;\n  }\n  .product > button:hover{\n    background: #e7e4df;\n    cursor: pointer!important\n    \n  }\n  \n  .product__price {\n    margin-top: 5px;\n  }\n  \n  .product__info {\n    height: 100px;\n    margin-bottom: 15px;\n  }\n",""]),t.Z=o},120:function(e,t,n){"use strict";var r=n(81),i=n.n(r),s=n(645),o=n.n(s)()(i());o.push([e.id,"\n.RegisterPage{\n    display: flex;\n    flex-direction: column;\n    align-items: center;\n    height: 100vh;\n\n}\n.login__logoTitle{\n    display: flex;\n    justify-content: center;\n    align-items: center;\n    background-color: aliceblue;\n}\n.RegisterPage__container {\n    display: flex;\n    flex-direction: column;\n    align-items: center;\n\n background-color: white;\n    height: 100vh;\n    display: flex;\n    flex-direction: column;\n    align-items: center;\n}\n\n.register__form {\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  border: 1px solid #504b4b;\n  padding: 20px;\n  border-radius: 5px;\n  max-width: 300px;\n  box-shadow: 0 0 5px rgba(0, 0, 0, 0.3);\n  background-color: #ffffff;\n}\n\n.register__form input {\n    display: flex;\n    justify-content: center;\n    align-items: center;\n  width: 100%;\n  padding: 10px;\n  margin-bottom: 15px;\n  border: 1px solid #6c6969;\n  border-radius: 3px;\n}\n\n.register__form button {\n    display: flex;\n    justify-content: center;\n    align-items: center;\n  background-color: #f0c14b;\n  border: 1px solid;\n  border-color: #a88734 #9c7e31 #846a29;\n  color: #111;\n  padding: 10px 20px;\n  cursor: pointer;\n  border-radius: 3px;\n  font-weight: 600;\n}\n\n.register__form button:hover {\n  background-color: #f7ca6b;\n}\n.login__signInButton{\n    display: flex;\n    justify-content: center;\n    align-items: center;\n}\n\n",""]),t.Z=o},528:function(e,t,n){"use strict";var r=n(81),i=n.n(r),s=n(645),o=n.n(s)()(i());o.push([e.id,".subtotal {\n    display: flex;\n    flex-direction: column;\n    justify-content: space-between;\n    width: 300px;\n    height: 100px;\n    padding: 20px;\n    background-color: #f3f3f3;\n    border: 1px solid #dddddd;\n    border-radius: 3px;\n}\n\n.subtotal__gift {\n    display: flex;\n    align-items: center;\n}\n\n.subtotal__gift > input {\n    margin-right: 5px;\n}\n\n.subtotal > button {\n    background: #ff9f00;\n    border-radius: 2px;\n    width: 100%;\n    height: 30px;\n    border: 1px solid;\n    margin-top: 10px;\n    border-color: #a88734 #9c7e31 #846a29;\n    color: #111;\n}",""]),t.Z=o},424:function(e,t,n){"use strict";var r=n(81),i=n.n(r),s=n(645),o=n.n(s)()(i());o.push([e.id,"body {\n  margin: 0;\n  font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', 'Oxygen',\n    'Ubuntu', 'Cantarell', 'Fira Sans', 'Droid Sans', 'Helvetica Neue',\n    sans-serif;\n  -webkit-font-smoothing: antialiased;\n  -moz-osx-font-smoothing: grayscale;\n}\n\ncode {\n  font-family: source-code-pro, Menlo, Monaco, Consolas, 'Courier New',\n    monospace;\n}\n",""]),t.Z=o},645:function(e){"use strict";e.exports=function(e){var t=[];return t.toString=function(){return this.map((function(t){var n="",r=void 0!==t[5];return t[4]&&(n+="@supports (".concat(t[4],") {")),t[2]&&(n+="@media ".concat(t[2]," {")),r&&(n+="@layer".concat(t[5].length>0?" ".concat(t[5]):""," {")),n+=e(t),r&&(n+="}"),t[2]&&(n+="}"),t[4]&&(n+="}"),n})).join("")},t.i=function(e,n,r,i,s){"string"==typeof e&&(e=[[null,e,void 0]]);var o={};if(r)for(var a=0;a<this.length;a++){var l=this[a][0];null!=l&&(o[l]=!0)}for(var u=0;u<e.length;u++){var c=[].concat(e[u]);r&&o[c[0]]||(void 0!==s&&(void 0===c[5]||(c[1]="@layer".concat(c[5].length>0?" ".concat(c[5]):""," {").concat(c[1],"}")),c[5]=s),n&&(c[2]?(c[1]="@media ".concat(c[2]," {").concat(c[1],"}"),c[2]=n):c[2]=n),i&&(c[4]?(c[1]="@supports (".concat(c[4],") {").concat(c[1],"}"),c[4]=i):c[4]="".concat(i)),t.push(c))}},t}},81:function(e){"use strict";e.exports=function(e){return e[1]}},418:function(e){"use strict";var t=Object.getOwnPropertySymbols,n=Object.prototype.hasOwnProperty,r=Object.prototype.propertyIsEnumerable;e.exports=function(){try{if(!Object.assign)return!1;var e=new String("abc");if(e[5]="de","5"===Object.getOwnPropertyNames(e)[0])return!1;for(var t={},n=0;n<10;n++)t["_"+String.fromCharCode(n)]=n;if("0123456789"!==Object.getOwnPropertyNames(t).map((function(e){return t[e]})).join(""))return!1;var r={};return"abcdefghijklmnopqrst".split("").forEach((function(e){r[e]=e})),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},r)).join("")}catch(e){return!1}}()?Object.assign:function(e,i){for(var s,o,a=function(e){if(null==e)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(e)}(e),l=1;l<arguments.length;l++){for(var u in s=Object(arguments[l]))n.call(s,u)&&(a[u]=s[u]);if(t){o=t(s);for(var c=0;c<o.length;c++)r.call(s,o[c])&&(a[o[c]]=s[o[c]])}}return a}},703:function(e,t,n){"use strict";var r=n(414);function i(){}function s(){}s.resetWarningCache=i,e.exports=function(){function e(e,t,n,i,s,o){if(o!==r){var a=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw a.name="Invariant Violation",a}}function t(){return e}e.isRequired=e;var n={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:s,resetWarningCache:i};return n.PropTypes=n,n}},697:function(e,t,n){e.exports=n(703)()},414:function(e){"use strict";e.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},340:function(e,t,n){"use strict";var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=l(n(697)),o=l(n(294)),a=n(571);function l(e){return e&&e.__esModule?e:{default:e}}var u={thousandSeparator:s.default.oneOfType([s.default.string,s.default.oneOf([!0])]),thousandSpacing:s.default.oneOf(["2","2s","3","4"]),decimalSeparator:s.default.string,decimalScale:s.default.number,fixedDecimalScale:s.default.bool,displayType:s.default.oneOf(["input","text"]),prefix:s.default.string,suffix:s.default.string,format:s.default.oneOfType([s.default.string,s.default.func]),removeFormatting:s.default.func,mask:s.default.oneOfType([s.default.string,s.default.arrayOf(s.default.string)]),value:s.default.oneOfType([s.default.number,s.default.string]),isNumericString:s.default.bool,customInput:s.default.func,allowNegative:s.default.bool,onValueChange:s.default.func,onKeyDown:s.default.func,onMouseUp:s.default.func,onChange:s.default.func,onFocus:s.default.func,onBlur:s.default.func,type:s.default.oneOf(["text","tel"]),isAllowed:s.default.func,renderText:s.default.func},c={displayType:"input",decimalSeparator:".",thousandSpacing:"3",fixedDecimalScale:!1,prefix:"",suffix:"",allowNegative:!0,isNumericString:!1,type:"text",onValueChange:a.noop,onChange:a.noop,onKeyDown:a.noop,onMouseUp:a.noop,onFocus:a.noop,onBlur:a.noop,isAllowed:a.returnTrue},h=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));n.validateProps();var r=n.formatValueProp();return n.state={value:r,numAsString:n.removeFormatting(r)},n.onChange=n.onChange.bind(n),n.onKeyDown=n.onKeyDown.bind(n),n.onMouseUp=n.onMouseUp.bind(n),n.onFocus=n.onFocus.bind(n),n.onBlur=n.onBlur.bind(n),n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),i(t,[{key:"componentDidUpdate",value:function(e){this.updateValueIfRequired(e)}},{key:"updateValueIfRequired",value:function(e){var t=this.props,n=this.state;if(e!==t){this.validateProps();var r=n.value,i=n.numAsString||"",s=void 0===t.value?this.formatNumString(i):this.formatValueProp();s!==r&&this.setState({value:s,numAsString:this.removeFormatting(s)})}}},{key:"getFloatString",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=this.getSeparators().decimalSeparator,n=this.getNumberRegex(!0),r="-"===e[0];r&&(e=e.replace("-",""));var i=(e=(e.match(n)||[]).join("").replace(t,".")).indexOf(".");return-1!==i&&(e=e.substring(0,i)+"."+e.substring(i+1,e.length).replace(new RegExp((0,a.escapeRegExp)(t),"g"),"")),r&&(e="-"+e),e}},{key:"getNumberRegex",value:function(e,t){var n=this.props,r=n.format,i=n.decimalScale,s=this.getSeparators().decimalSeparator;return new RegExp("\\d"+(!s||0===i||t||r?"":"|"+(0,a.escapeRegExp)(s)),e?"g":void 0)}},{key:"getSeparators",value:function(){var e=this.props,t=e.decimalSeparator,n=e.thousandSpacing,r=this.props.thousandSeparator;return!0===r&&(r=","),{decimalSeparator:t,thousandSeparator:r,thousandSpacing:n}}},{key:"getMaskAtIndex",value:function(e){var t=this.props.mask,n=void 0===t?" ":t;return"string"==typeof n?n:n[e]||" "}},{key:"validateProps",value:function(){var e=this.props.mask,t=this.getSeparators(),n=t.decimalSeparator,r=t.thousandSeparator;if(n===r)throw new Error("\n          Decimal separator can't be same as thousand separator.\n\n          thousandSeparator: "+r+' (thousandSeparator = {true} is same as thousandSeparator = ",")\n          decimalSeparator: '+n+" (default value for decimalSeparator is .)\n       ");if(e&&("string"===e?e:e.toString()).match(/\d/g))throw new Error("\n          Mask "+e+" should not contain numeric character;\n        ")}},{key:"splitDecimal",value:function(e){var t=this.props.allowNegative,n="-"===e[0],r=n&&t,i=(e=e.replace("-","")).split(".");return{beforeDecimal:i[0],afterDecimal:i[1]||"",hasNagation:n,addNegation:r}}},{key:"setPatchedCaretPosition",value:function(e,t,n){(0,a.setCaretPosition)(e,t),setTimeout((function(){e.value===n&&(0,a.setCaretPosition)(e,t)}),0)}},{key:"correctCaretPosition",value:function(e,t,n){var r=this.props,i=r.prefix,s=r.suffix,o=r.format;if(!o){var l="-"===e[0];return Math.min(Math.max(t,i.length+(l?1:0)),e.length-s.length)}if("function"==typeof o)return t;if("#"===o[t]&&(0,a.charIsNumber)(e[t]))return t;if("#"===o[t-1]&&(0,a.charIsNumber)(e[t-1]))return t;var u=o.indexOf("#"),c=o.lastIndexOf("#");t=Math.min(Math.max(t,u),c+1);for(var h=o.substring(t,o.length).indexOf("#"),d=t,f=t+(-1===h?0:h);d>u&&("#"!==o[d]||!(0,a.charIsNumber)(e[d]));)d-=1;return!(0,a.charIsNumber)(e[f])||"left"===n&&t!==u||t-d<f-t?d+1:f}},{key:"getCaretPosition",value:function(e,t,n){var r=this.props.format,i=this.state.value,s=this.getNumberRegex(!0),o=(e.match(s)||[]).join(""),a=(t.match(s)||[]).join(""),l=void 0,u=void 0;for(l=0,u=0;u<n;u++){var c=e[u]||"",h=t[l]||"";if((c.match(s)||c===h)&&("0"!==c||!h.match(s)||"0"===h||o.length===a.length)){for(;c!==t[l]&&l<t.length;)l++;l++}}return"string"!=typeof r||i||(l=t.length),this.correctCaretPosition(t,l)}},{key:"removePrefixAndSuffix",value:function(e){var t=this.props,n=t.format,r=t.prefix,i=t.suffix;if(!n&&e){var s="-"===e[0];s&&(e=e.substring(1,e.length));var o=(e=r&&0===e.indexOf(r)?e.substring(r.length,e.length):e).lastIndexOf(i);e=i&&-1!==o&&o===e.length-i.length?e.substring(0,o):e,s&&(e="-"+e)}return e}},{key:"removePatternFormatting",value:function(e){for(var t=this.props.format.split("#").filter((function(e){return""!==e})),n=0,r="",i=0,s=t.length;i<=s;i++){var o=t[i]||"",a=i===s?e.length:e.indexOf(o,n);if(-1===a){r=e;break}r+=e.substring(n,a),n=a+o.length}return(r.match(/\d/g)||[]).join("")}},{key:"removeFormatting",value:function(e){var t=this.props,n=t.format,r=t.removeFormatting;return e?(n?e="string"==typeof n?this.removePatternFormatting(e):"function"==typeof r?r(e):(e.match(/\d/g)||[]).join(""):(e=this.removePrefixAndSuffix(e),e=this.getFloatString(e)),e):e}},{key:"formatWithPattern",value:function(e){for(var t=this.props.format,n=0,r=t.split(""),i=0,s=t.length;i<s;i++)"#"===t[i]&&(r[i]=e[n]||this.getMaskAtIndex(n),n+=1);return r.join("")}},{key:"formatThousand",value:function(e,t,n){var r=void 0;switch(n){case a.thousandGroupSpacing.two:r=/(\d)(?=(\d{2})+(?!\d))/g;break;case a.thousandGroupSpacing.twoScaled:r=/(\d)(?=(((\d{2})+)(\d{1})(?!\d)))/g;break;case a.thousandGroupSpacing.four:r=/(\d)(?=(\d{4})+(?!\d))/g;break;default:r=/(\d)(?=(\d{3})+(?!\d))/g}return e.replace(r,"$1"+t)}},{key:"formatAsNumber",value:function(e){var t=this.props,n=t.decimalScale,r=t.fixedDecimalScale,i=t.prefix,s=t.suffix,o=this.getSeparators(),l=o.thousandSeparator,u=o.decimalSeparator,c=o.thousandSpacing,h=-1!==e.indexOf(".")||n&&r,d=this.splitDecimal(e),f=d.beforeDecimal,p=d.afterDecimal,m=d.addNegation;return void 0!==n&&(p=(0,a.limitToScale)(p,n,r)),l&&(f=this.formatThousand(f,l,c)),i&&(f=i+f),s&&(p+=s),m&&(f="-"+f),f+(h&&u||"")+p}},{key:"formatNumString",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=this.props.format,n=e;return""===e?n="":"-"!==e||t?n="string"==typeof t?this.formatWithPattern(n):"function"==typeof t?t(n):this.formatAsNumber(n):(n="-",e=""),n}},{key:"formatValueProp",value:function(){var e=this.props,t=e.format,n=e.decimalScale,r=e.fixedDecimalScale,i=this.props,s=i.value,o=i.isNumericString;return void 0===s?"":("number"==typeof s&&(s=s.toString(),o=!0),o&&!t&&"number"==typeof n&&(s=(0,a.roundToPrecision)(s,n,r)),o?this.formatNumString(s):this.formatInput(s))}},{key:"formatNegation",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=this.props.allowNegative,n=new RegExp("(-)"),r=new RegExp("(-)(.)*(-)"),i=n.test(e),s=r.test(e);return e=e.replace(/-/g,""),i&&!s&&t&&(e="-"+e),e}},{key:"formatInput",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return this.props.format||(e=this.formatNegation(e)),e=this.removeFormatting(e),this.formatNumString(e)}},{key:"isCharacterAFormat",value:function(e,t){var n=this.props,r=n.format,i=n.prefix,s=n.suffix,o=n.decimalScale,a=n.fixedDecimalScale,l=this.getSeparators().decimalSeparator;return"string"==typeof r&&"#"!==r[e]||!(r||!(e<i.length||e>=t.length-s.length||o&&a&&t[e]===l))}},{key:"checkIfFormatGotDeleted",value:function(e,t,n){for(var r=e;r<t;r++)if(this.isCharacterAFormat(r,n))return!0;return!1}},{key:"correctInputValue",value:function(e,t,n){var r=this.props.format,i=this.state.numAsString||"";if(n.length>=t.length||!n.length)return n;var s=e,o=(0,a.splitString)(t,e),l=(0,a.splitString)(n,e),u=o[1].lastIndexOf(l[1]),c=s+(-1!==u?o[1].substring(0,u):"").length;if(this.checkIfFormatGotDeleted(s,c,t)&&(n=t),!r){var h=this.removeFormatting(n),d=this.splitDecimal(h),f=d.beforeDecimal,p=d.afterDecimal,m=d.addNegation;if(h.length<i.length&&""===f&&!parseFloat(p))return m?"-":""}return n}},{key:"onChange",value:function(e){e.persist();var t=e.target,n=t.value,r=this.state,i=this.props,s=i.isAllowed,o=r.value||"",a=Math.max(t.selectionStart,t.selectionEnd);n=this.correctInputValue(a,o,n);var l=this.formatInput(n)||"",u=this.removeFormatting(l),c={formattedValue:l,value:u,floatValue:parseFloat(u)};s(c)||(l=o),t.value=l;var h=this.getCaretPosition(n,l,a);this.setPatchedCaretPosition(t,h,l),l!==o?this.setState({value:l,numAsString:u},(function(){i.onValueChange(c),i.onChange(e)})):i.onChange(e)}},{key:"onBlur",value:function(e){var t=this.props,n=this.state,r=t.format,i=t.onBlur,s=n.numAsString,o=n.value;if(!r){s=(0,a.fixLeadingZero)(s);var l=this.formatNumString(s),u={formattedValue:l,value:s,floatValue:parseFloat(s)};if(l!==o)return e.persist(),void this.setState({value:l,numAsString:s},(function(){t.onValueChange(u),i(e)}))}i(e)}},{key:"onKeyDown",value:function(e){var t=e.target,n=e.key,r=t.selectionEnd,i=t.value,s=t.selectionStart,o=void 0,a=this.props,l=a.decimalScale,u=a.fixedDecimalScale,c=a.prefix,h=a.suffix,d=a.format,f=a.onKeyDown,p=void 0!==l&&u,m=this.getNumberRegex(!1,p),g=new RegExp("-"),y="string"==typeof d;if("ArrowLeft"===n||"Backspace"===n?o=s-1:"ArrowRight"===n?o=s+1:"Delete"===n&&(o=s),void 0!==o&&s===r){var v=o,w=y?d.indexOf("#"):c.length,b=y?d.lastIndexOf("#")+1:i.length-h.length;if("ArrowLeft"===n||"ArrowRight"===n){var _="ArrowLeft"===n?"left":"right";v=this.correctCaretPosition(i,o,_)}else if("Delete"!==n||m.test(i[o])||g.test(i[o])){if("Backspace"===n&&!m.test(i[o])&&!g.test(i[o])){for(;!m.test(i[v-1])&&v>w;)v--;v=this.correctCaretPosition(i,v,"left")}}else for(;!m.test(i[v])&&v<b;)v++;(v!==o||o<w||o>b)&&(e.preventDefault(),this.setPatchedCaretPosition(t,v,i)),e.isUnitTestRun&&this.setPatchedCaretPosition(t,v,i),this.props.onKeyDown(e)}else f(e)}},{key:"onMouseUp",value:function(e){var t=e.target,n=t.selectionStart,r=t.selectionEnd,i=t.value;if(n===r){var s=this.correctCaretPosition(i,n);s!==n&&this.setPatchedCaretPosition(t,s,i)}this.props.onMouseUp(e)}},{key:"onFocus",value:function(e){var t=this;e.persist(),setTimeout((function(){var n=e.target,r=n.selectionStart,i=n.value,s=t.correctCaretPosition(i,r);s!==r&&t.setPatchedCaretPosition(n,s,i),t.props.onFocus(e)}))}},{key:"render",value:function(){var e=this.props,t=e.type,n=e.displayType,i=e.customInput,s=e.renderText,l=this.state.value,c=(0,a.omit)(this.props,u),h=r({},c,{type:t,value:l,onChange:this.onChange,onKeyDown:this.onKeyDown,onMouseUp:this.onMouseUp,onFocus:this.onFocus,onBlur:this.onBlur});if("text"===n)return s?s(l)||null:o.default.createElement("span",c,l);if(i){var d=i;return o.default.createElement(d,h)}return o.default.createElement("input",h)}}]),t}(o.default.Component);h.propTypes=u,h.defaultProps=c,e.exports=h},571:function(e,t){"use strict";function n(e,t,n){for(var r="",i=n?"0":"",s=0;s<=t-1;s++)r+=e[s]||i;return r}Object.defineProperty(t,"__esModule",{value:!0}),t.noop=function(){},t.returnTrue=function(){return!0},t.charIsNumber=function(e){return!!(e||"").match(/\d/)},t.escapeRegExp=function(e){return e.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&")},t.fixLeadingZero=function(e){if(!e)return e;var t="-"===e[0];t&&(e=e.substring(1,e.length));var n=e.split("."),r=n[0].replace(/^0+/,"")||"0",i=n[1]||"";return(t?"-":"")+r+(i?"."+i:"")},t.splitString=function(e,t){return[e.substring(0,t),e.substring(t)]},t.limitToScale=n,t.roundToPrecision=function(e,t,r){var i=e.split("."),s=parseFloat("0."+(i[1]||"0")).toFixed(t).split("."),o=i[0].split("").reverse().reduce((function(e,t,n){return e.length>n?(Number(e[0])+Number(t)).toString()+e.substring(1,e.length):t+e}),s[0]),a=n(s[1]||"",(i[1]||"").length,r);return o+(a?"."+a:"")},t.omit=function(e,t){var n={};return Object.keys(e).forEach((function(r){t[r]||(n[r]=e[r])})),n},t.setCaretPosition=function(e,t){if(e.value=e.value,null!==e){if(e.createTextRange){var n=e.createTextRange();return n.move("character",t),n.select(),!0}return e.selectionStart||0===e.selectionStart?(e.focus(),e.setSelectionRange(t,t),!0):(e.focus(),!1)}},t.thousandGroupSpacing={two:"2",twoScaled:"2s",three:"3",four:"4"}},448:function(e,t,n){"use strict";var r=n(294),i=n(418),s=n(840);function o(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}if(!r)throw Error(o(227));var a=new Set,l={};function u(e,t){c(e,t),c(e+"Capture",t)}function c(e,t){for(l[e]=t,e=0;e<t.length;e++)a.add(t[e])}var h=!("undefined"==typeof window||void 0===window.document||void 0===window.document.createElement),d=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,f=Object.prototype.hasOwnProperty,p={},m={};function g(e,t,n,r,i,s,o){this.acceptsBooleans=2===t||3===t||4===t,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=s,this.removeEmptyString=o}var y={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach((function(e){y[e]=new g(e,0,!1,e,null,!1,!1)})),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach((function(e){var t=e[0];y[t]=new g(t,1,!1,e[1],null,!1,!1)})),["contentEditable","draggable","spellCheck","value"].forEach((function(e){y[e]=new g(e,2,!1,e.toLowerCase(),null,!1,!1)})),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach((function(e){y[e]=new g(e,2,!1,e,null,!1,!1)})),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach((function(e){y[e]=new g(e,3,!1,e.toLowerCase(),null,!1,!1)})),["checked","multiple","muted","selected"].forEach((function(e){y[e]=new g(e,3,!0,e,null,!1,!1)})),["capture","download"].forEach((function(e){y[e]=new g(e,4,!1,e,null,!1,!1)})),["cols","rows","size","span"].forEach((function(e){y[e]=new g(e,6,!1,e,null,!1,!1)})),["rowSpan","start"].forEach((function(e){y[e]=new g(e,5,!1,e.toLowerCase(),null,!1,!1)}));var v=/[\-:]([a-z])/g;function w(e){return e[1].toUpperCase()}function b(e,t,n,r){var i=y.hasOwnProperty(t)?y[t]:null;(null!==i?0===i.type:!r&&2<t.length&&("o"===t[0]||"O"===t[0])&&("n"===t[1]||"N"===t[1]))||(function(e,t,n,r){if(null==t||function(e,t,n,r){if(null!==n&&0===n.type)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return!r&&(null!==n?!n.acceptsBooleans:"data-"!==(e=e.toLowerCase().slice(0,5))&&"aria-"!==e);default:return!1}}(e,t,n,r))return!0;if(r)return!1;if(null!==n)switch(n.type){case 3:return!t;case 4:return!1===t;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}(t,n,i,r)&&(n=null),r||null===i?function(e){return!!f.call(m,e)||!f.call(p,e)&&(d.test(e)?m[e]=!0:(p[e]=!0,!1))}(t)&&(null===n?e.removeAttribute(t):e.setAttribute(t,""+n)):i.mustUseProperty?e[i.propertyName]=null===n?3!==i.type&&"":n:(t=i.attributeName,r=i.attributeNamespace,null===n?e.removeAttribute(t):(n=3===(i=i.type)||4===i&&!0===n?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach((function(e){var t=e.replace(v,w);y[t]=new g(t,1,!1,e,null,!1,!1)})),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach((function(e){var t=e.replace(v,w);y[t]=new g(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)})),["xml:base","xml:lang","xml:space"].forEach((function(e){var t=e.replace(v,w);y[t]=new g(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)})),["tabIndex","crossOrigin"].forEach((function(e){y[e]=new g(e,1,!1,e.toLowerCase(),null,!1,!1)})),y.xlinkHref=new g("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach((function(e){y[e]=new g(e,1,!1,e.toLowerCase(),null,!0,!0)}));var _=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,E=60103,I=60106,k=60107,S=60108,T=60114,x=60109,C=60110,A=60112,N=60113,R=60120,P=60115,D=60116,O=60121,L=60128,M=60129,F=60130,U=60131;if("function"==typeof Symbol&&Symbol.for){var V=Symbol.for;E=V("react.element"),I=V("react.portal"),k=V("react.fragment"),S=V("react.strict_mode"),T=V("react.profiler"),x=V("react.provider"),C=V("react.context"),A=V("react.forward_ref"),N=V("react.suspense"),R=V("react.suspense_list"),P=V("react.memo"),D=V("react.lazy"),O=V("react.block"),V("react.scope"),L=V("react.opaque.id"),M=V("react.debug_trace_mode"),F=V("react.offscreen"),U=V("react.legacy_hidden")}var z,B="function"==typeof Symbol&&Symbol.iterator;function j(e){return null===e||"object"!=typeof e?null:"function"==typeof(e=B&&e[B]||e["@@iterator"])?e:null}function q(e){if(void 0===z)try{throw Error()}catch(e){var t=e.stack.trim().match(/\n( *(at )?)/);z=t&&t[1]||""}return"\n"+z+e}var $=!1;function K(e,t){if(!e||$)return"";$=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),"object"==typeof Reflect&&Reflect.construct){try{Reflect.construct(t,[])}catch(e){var r=e}Reflect.construct(e,[],t)}else{try{t.call()}catch(e){r=e}e.call(t.prototype)}else{try{throw Error()}catch(e){r=e}e()}}catch(e){if(e&&r&&"string"==typeof e.stack){for(var i=e.stack.split("\n"),s=r.stack.split("\n"),o=i.length-1,a=s.length-1;1<=o&&0<=a&&i[o]!==s[a];)a--;for(;1<=o&&0<=a;o--,a--)if(i[o]!==s[a]){if(1!==o||1!==a)do{if(o--,0>--a||i[o]!==s[a])return"\n"+i[o].replace(" at new "," at ")}while(1<=o&&0<=a);break}}}finally{$=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?q(e):""}function G(e){switch(e.tag){case 5:return q(e.type);case 16:return q("Lazy");case 13:return q("Suspense");case 19:return q("SuspenseList");case 0:case 2:case 15:return K(e.type,!1);case 11:return K(e.type.render,!1);case 22:return K(e.type._render,!1);case 1:return K(e.type,!0);default:return""}}function W(e){if(null==e)return null;if("function"==typeof e)return e.displayName||e.name||null;if("string"==typeof e)return e;switch(e){case k:return"Fragment";case I:return"Portal";case T:return"Profiler";case S:return"StrictMode";case N:return"Suspense";case R:return"SuspenseList"}if("object"==typeof e)switch(e.$$typeof){case C:return(e.displayName||"Context")+".Consumer";case x:return(e._context.displayName||"Context")+".Provider";case A:var t=e.render;return t=t.displayName||t.name||"",e.displayName||(""!==t?"ForwardRef("+t+")":"ForwardRef");case P:return W(e.type);case O:return W(e._render);case D:t=e._payload,e=e._init;try{return W(e(t))}catch(e){}}return null}function H(e){switch(typeof e){case"boolean":case"number":case"object":case"string":case"undefined":return e;default:return""}}function Q(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function Y(e){e._valueTracker||(e._valueTracker=function(e){var t=Q(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&void 0!==n&&"function"==typeof n.get&&"function"==typeof n.set){var i=n.get,s=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return i.call(this)},set:function(e){r=""+e,s.call(this,e)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(e){r=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function J(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=Q(e)?e.checked?"true":"false":e.value),(e=r)!==n&&(t.setValue(e),!0)}function X(e){if(void 0===(e=e||("undefined"!=typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}function Z(e,t){var n=t.checked;return i({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=n?n:e._wrapperState.initialChecked})}function ee(e,t){var n=null==t.defaultValue?"":t.defaultValue,r=null!=t.checked?t.checked:t.defaultChecked;n=H(null!=t.value?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:"checkbox"===t.type||"radio"===t.type?null!=t.checked:null!=t.value}}function te(e,t){null!=(t=t.checked)&&b(e,"checked",t,!1)}function ne(e,t){te(e,t);var n=H(t.value),r=t.type;if(null!=n)"number"===r?(0===n&&""===e.value||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if("submit"===r||"reset"===r)return void e.removeAttribute("value");t.hasOwnProperty("value")?ie(e,t.type,n):t.hasOwnProperty("defaultValue")&&ie(e,t.type,H(t.defaultValue)),null==t.checked&&null!=t.defaultChecked&&(e.defaultChecked=!!t.defaultChecked)}function re(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!("submit"!==r&&"reset"!==r||void 0!==t.value&&null!==t.value))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}""!==(n=e.name)&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,""!==n&&(e.name=n)}function ie(e,t,n){"number"===t&&X(e.ownerDocument)===e||(null==n?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}function se(e,t){return e=i({children:void 0},t),(t=function(e){var t="";return r.Children.forEach(e,(function(e){null!=e&&(t+=e)})),t}(t.children))&&(e.children=t),e}function oe(e,t,n,r){if(e=e.options,t){t={};for(var i=0;i<n.length;i++)t["$"+n[i]]=!0;for(n=0;n<e.length;n++)i=t.hasOwnProperty("$"+e[n].value),e[n].selected!==i&&(e[n].selected=i),i&&r&&(e[n].defaultSelected=!0)}else{for(n=""+H(n),t=null,i=0;i<e.length;i++){if(e[i].value===n)return e[i].selected=!0,void(r&&(e[i].defaultSelected=!0));null!==t||e[i].disabled||(t=e[i])}null!==t&&(t.selected=!0)}}function ae(e,t){if(null!=t.dangerouslySetInnerHTML)throw Error(o(91));return i({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function le(e,t){var n=t.value;if(null==n){if(n=t.children,t=t.defaultValue,null!=n){if(null!=t)throw Error(o(92));if(Array.isArray(n)){if(!(1>=n.length))throw Error(o(93));n=n[0]}t=n}null==t&&(t=""),n=t}e._wrapperState={initialValue:H(n)}}function ue(e,t){var n=H(t.value),r=H(t.defaultValue);null!=n&&((n=""+n)!==e.value&&(e.value=n),null==t.defaultValue&&e.defaultValue!==n&&(e.defaultValue=n)),null!=r&&(e.defaultValue=""+r)}function ce(e){var t=e.textContent;t===e._wrapperState.initialValue&&""!==t&&null!==t&&(e.value=t)}var he={html:"http://www.w3.org/1999/xhtml",mathml:"http://www.w3.org/1998/Math/MathML",svg:"http://www.w3.org/2000/svg"};function de(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function fe(e,t){return null==e||"http://www.w3.org/1999/xhtml"===e?de(t):"http://www.w3.org/2000/svg"===e&&"foreignObject"===t?"http://www.w3.org/1999/xhtml":e}var pe,me,ge=(me=function(e,t){if(e.namespaceURI!==he.svg||"innerHTML"in e)e.innerHTML=t;else{for((pe=pe||document.createElement("div")).innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=pe.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}},"undefined"!=typeof MSApp&&MSApp.execUnsafeLocalFunction?function(e,t,n,r){MSApp.execUnsafeLocalFunction((function(){return me(e,t)}))}:me);function ye(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&3===n.nodeType)return void(n.nodeValue=t)}e.textContent=t}var ve={animationIterationCount:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},we=["Webkit","ms","Moz","O"];function be(e,t,n){return null==t||"boolean"==typeof t||""===t?"":n||"number"!=typeof t||0===t||ve.hasOwnProperty(e)&&ve[e]?(""+t).trim():t+"px"}function _e(e,t){for(var n in e=e.style,t)if(t.hasOwnProperty(n)){var r=0===n.indexOf("--"),i=be(n,t[n],r);"float"===n&&(n="cssFloat"),r?e.setProperty(n,i):e[n]=i}}Object.keys(ve).forEach((function(e){we.forEach((function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),ve[t]=ve[e]}))}));var Ee=i({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Ie(e,t){if(t){if(Ee[e]&&(null!=t.children||null!=t.dangerouslySetInnerHTML))throw Error(o(137,e));if(null!=t.dangerouslySetInnerHTML){if(null!=t.children)throw Error(o(60));if("object"!=typeof t.dangerouslySetInnerHTML||!("__html"in t.dangerouslySetInnerHTML))throw Error(o(61))}if(null!=t.style&&"object"!=typeof t.style)throw Error(o(62))}}function ke(e,t){if(-1===e.indexOf("-"))return"string"==typeof t.is;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}function Se(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}var Te=null,xe=null,Ce=null;function Ae(e){if(e=ni(e)){if("function"!=typeof Te)throw Error(o(280));var t=e.stateNode;t&&(t=ii(t),Te(e.stateNode,e.type,t))}}function Ne(e){xe?Ce?Ce.push(e):Ce=[e]:xe=e}function Re(){if(xe){var e=xe,t=Ce;if(Ce=xe=null,Ae(e),t)for(e=0;e<t.length;e++)Ae(t[e])}}function Pe(e,t){return e(t)}function De(e,t,n,r,i){return e(t,n,r,i)}function Oe(){}var Le=Pe,Me=!1,Fe=!1;function Ue(){null===xe&&null===Ce||(Oe(),Re())}function Ve(e,t){var n=e.stateNode;if(null===n)return null;var r=ii(n);if(null===r)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(r=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!r;break e;default:e=!1}if(e)return null;if(n&&"function"!=typeof n)throw Error(o(231,t,typeof n));return n}var ze=!1;if(h)try{var Be={};Object.defineProperty(Be,"passive",{get:function(){ze=!0}}),window.addEventListener("test",Be,Be),window.removeEventListener("test",Be,Be)}catch(me){ze=!1}function je(e,t,n,r,i,s,o,a,l){var u=Array.prototype.slice.call(arguments,3);try{t.apply(n,u)}catch(e){this.onError(e)}}var qe=!1,$e=null,Ke=!1,Ge=null,We={onError:function(e){qe=!0,$e=e}};function He(e,t,n,r,i,s,o,a,l){qe=!1,$e=null,je.apply(We,arguments)}function Qe(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{0!=(1026&(t=e).flags)&&(n=t.return),e=t.return}while(e)}return 3===t.tag?n:null}function Ye(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&null!==(e=e.alternate)&&(t=e.memoizedState),null!==t)return t.dehydrated}return null}function Je(e){if(Qe(e)!==e)throw Error(o(188))}function Xe(e){if(e=function(e){var t=e.alternate;if(!t){if(null===(t=Qe(e)))throw Error(o(188));return t!==e?null:e}for(var n=e,r=t;;){var i=n.return;if(null===i)break;var s=i.alternate;if(null===s){if(null!==(r=i.return)){n=r;continue}break}if(i.child===s.child){for(s=i.child;s;){if(s===n)return Je(i),e;if(s===r)return Je(i),t;s=s.sibling}throw Error(o(188))}if(n.return!==r.return)n=i,r=s;else{for(var a=!1,l=i.child;l;){if(l===n){a=!0,n=i,r=s;break}if(l===r){a=!0,r=i,n=s;break}l=l.sibling}if(!a){for(l=s.child;l;){if(l===n){a=!0,n=s,r=i;break}if(l===r){a=!0,r=s,n=i;break}l=l.sibling}if(!a)throw Error(o(189))}}if(n.alternate!==r)throw Error(o(190))}if(3!==n.tag)throw Error(o(188));return n.stateNode.current===n?e:t}(e),!e)return null;for(var t=e;;){if(5===t.tag||6===t.tag)return t;if(t.child)t.child.return=t,t=t.child;else{if(t===e)break;for(;!t.sibling;){if(!t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}}return null}function Ze(e,t){for(var n=e.alternate;null!==t;){if(t===e||t===n)return!0;t=t.return}return!1}var et,tt,nt,rt,it=!1,st=[],ot=null,at=null,lt=null,ut=new Map,ct=new Map,ht=[],dt="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function ft(e,t,n,r,i){return{blockedOn:e,domEventName:t,eventSystemFlags:16|n,nativeEvent:i,targetContainers:[r]}}function pt(e,t){switch(e){case"focusin":case"focusout":ot=null;break;case"dragenter":case"dragleave":at=null;break;case"mouseover":case"mouseout":lt=null;break;case"pointerover":case"pointerout":ut.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":ct.delete(t.pointerId)}}function mt(e,t,n,r,i,s){return null===e||e.nativeEvent!==s?(e=ft(t,n,r,i,s),null!==t&&null!==(t=ni(t))&&tt(t),e):(e.eventSystemFlags|=r,t=e.targetContainers,null!==i&&-1===t.indexOf(i)&&t.push(i),e)}function gt(e){var t=ti(e.target);if(null!==t){var n=Qe(t);if(null!==n)if(13===(t=n.tag)){if(null!==(t=Ye(n)))return e.blockedOn=t,void rt(e.lanePriority,(function(){s.unstable_runWithPriority(e.priority,(function(){nt(n)}))}))}else if(3===t&&n.stateNode.hydrate)return void(e.blockedOn=3===n.tag?n.stateNode.containerInfo:null)}e.blockedOn=null}function yt(e){if(null!==e.blockedOn)return!1;for(var t=e.targetContainers;0<t.length;){var n=Xt(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(null!==n)return null!==(t=ni(n))&&tt(t),e.blockedOn=n,!1;t.shift()}return!0}function vt(e,t,n){yt(e)&&n.delete(t)}function wt(){for(it=!1;0<st.length;){var e=st[0];if(null!==e.blockedOn){null!==(e=ni(e.blockedOn))&&et(e);break}for(var t=e.targetContainers;0<t.length;){var n=Xt(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(null!==n){e.blockedOn=n;break}t.shift()}null===e.blockedOn&&st.shift()}null!==ot&&yt(ot)&&(ot=null),null!==at&&yt(at)&&(at=null),null!==lt&&yt(lt)&&(lt=null),ut.forEach(vt),ct.forEach(vt)}function bt(e,t){e.blockedOn===t&&(e.blockedOn=null,it||(it=!0,s.unstable_scheduleCallback(s.unstable_NormalPriority,wt)))}function _t(e){function t(t){return bt(t,e)}if(0<st.length){bt(st[0],e);for(var n=1;n<st.length;n++){var r=st[n];r.blockedOn===e&&(r.blockedOn=null)}}for(null!==ot&&bt(ot,e),null!==at&&bt(at,e),null!==lt&&bt(lt,e),ut.forEach(t),ct.forEach(t),n=0;n<ht.length;n++)(r=ht[n]).blockedOn===e&&(r.blockedOn=null);for(;0<ht.length&&null===(n=ht[0]).blockedOn;)gt(n),null===n.blockedOn&&ht.shift()}function Et(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var It={animationend:Et("Animation","AnimationEnd"),animationiteration:Et("Animation","AnimationIteration"),animationstart:Et("Animation","AnimationStart"),transitionend:Et("Transition","TransitionEnd")},kt={},St={};function Tt(e){if(kt[e])return kt[e];if(!It[e])return e;var t,n=It[e];for(t in n)if(n.hasOwnProperty(t)&&t in St)return kt[e]=n[t];return e}h&&(St=document.createElement("div").style,"AnimationEvent"in window||(delete It.animationend.animation,delete It.animationiteration.animation,delete It.animationstart.animation),"TransitionEvent"in window||delete It.transitionend.transition);var xt=Tt("animationend"),Ct=Tt("animationiteration"),At=Tt("animationstart"),Nt=Tt("transitionend"),Rt=new Map,Pt=new Map,Dt=["abort","abort",xt,"animationEnd",Ct,"animationIteration",At,"animationStart","canplay","canPlay","canplaythrough","canPlayThrough","durationchange","durationChange","emptied","emptied","encrypted","encrypted","ended","ended","error","error","gotpointercapture","gotPointerCapture","load","load","loadeddata","loadedData","loadedmetadata","loadedMetadata","loadstart","loadStart","lostpointercapture","lostPointerCapture","playing","playing","progress","progress","seeking","seeking","stalled","stalled","suspend","suspend","timeupdate","timeUpdate",Nt,"transitionEnd","waiting","waiting"];function Ot(e,t){for(var n=0;n<e.length;n+=2){var r=e[n],i=e[n+1];i="on"+(i[0].toUpperCase()+i.slice(1)),Pt.set(r,t),Rt.set(r,i),u(i,[r])}}(0,s.unstable_now)();var Lt=8;function Mt(e){if(0!=(1&e))return Lt=15,1;if(0!=(2&e))return Lt=14,2;if(0!=(4&e))return Lt=13,4;var t=24&e;return 0!==t?(Lt=12,t):0!=(32&e)?(Lt=11,32):0!=(t=192&e)?(Lt=10,t):0!=(256&e)?(Lt=9,256):0!=(t=3584&e)?(Lt=8,t):0!=(4096&e)?(Lt=7,4096):0!=(t=4186112&e)?(Lt=6,t):0!=(t=62914560&e)?(Lt=5,t):67108864&e?(Lt=4,67108864):0!=(134217728&e)?(Lt=3,134217728):0!=(t=805306368&e)?(Lt=2,t):0!=(1073741824&e)?(Lt=1,1073741824):(Lt=8,e)}function Ft(e,t){var n=e.pendingLanes;if(0===n)return Lt=0;var r=0,i=0,s=e.expiredLanes,o=e.suspendedLanes,a=e.pingedLanes;if(0!==s)r=s,i=Lt=15;else if(0!=(s=134217727&n)){var l=s&~o;0!==l?(r=Mt(l),i=Lt):0!=(a&=s)&&(r=Mt(a),i=Lt)}else 0!=(s=n&~o)?(r=Mt(s),i=Lt):0!==a&&(r=Mt(a),i=Lt);if(0===r)return 0;if(r=n&((0>(r=31-qt(r))?0:1<<r)<<1)-1,0!==t&&t!==r&&0==(t&o)){if(Mt(t),i<=Lt)return t;Lt=i}if(0!==(t=e.entangledLanes))for(e=e.entanglements,t&=r;0<t;)i=1<<(n=31-qt(t)),r|=e[n],t&=~i;return r}function Ut(e){return 0!=(e=-1073741825&e.pendingLanes)?e:1073741824&e?1073741824:0}function Vt(e,t){switch(e){case 15:return 1;case 14:return 2;case 12:return 0===(e=zt(24&~t))?Vt(10,t):e;case 10:return 0===(e=zt(192&~t))?Vt(8,t):e;case 8:return 0===(e=zt(3584&~t))&&0===(e=zt(4186112&~t))&&(e=512),e;case 2:return 0===(t=zt(805306368&~t))&&(t=268435456),t}throw Error(o(358,e))}function zt(e){return e&-e}function Bt(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function jt(e,t,n){e.pendingLanes|=t;var r=t-1;e.suspendedLanes&=r,e.pingedLanes&=r,(e=e.eventTimes)[t=31-qt(t)]=n}var qt=Math.clz32?Math.clz32:function(e){return 0===e?32:31-($t(e)/Kt|0)|0},$t=Math.log,Kt=Math.LN2,Gt=s.unstable_UserBlockingPriority,Wt=s.unstable_runWithPriority,Ht=!0;function Qt(e,t,n,r){Me||Oe();var i=Jt,s=Me;Me=!0;try{De(i,e,t,n,r)}finally{(Me=s)||Ue()}}function Yt(e,t,n,r){Wt(Gt,Jt.bind(null,e,t,n,r))}function Jt(e,t,n,r){var i;if(Ht)if((i=0==(4&t))&&0<st.length&&-1<dt.indexOf(e))e=ft(null,e,t,n,r),st.push(e);else{var s=Xt(e,t,n,r);if(null===s)i&&pt(e,r);else{if(i){if(-1<dt.indexOf(e))return e=ft(s,e,t,n,r),void st.push(e);if(function(e,t,n,r,i){switch(t){case"focusin":return ot=mt(ot,e,t,n,r,i),!0;case"dragenter":return at=mt(at,e,t,n,r,i),!0;case"mouseover":return lt=mt(lt,e,t,n,r,i),!0;case"pointerover":var s=i.pointerId;return ut.set(s,mt(ut.get(s)||null,e,t,n,r,i)),!0;case"gotpointercapture":return s=i.pointerId,ct.set(s,mt(ct.get(s)||null,e,t,n,r,i)),!0}return!1}(s,e,t,n,r))return;pt(e,r)}Or(e,t,r,null,n)}}}function Xt(e,t,n,r){var i=Se(r);if(null!==(i=ti(i))){var s=Qe(i);if(null===s)i=null;else{var o=s.tag;if(13===o){if(null!==(i=Ye(s)))return i;i=null}else if(3===o){if(s.stateNode.hydrate)return 3===s.tag?s.stateNode.containerInfo:null;i=null}else s!==i&&(i=null)}}return Or(e,t,r,i,n),null}var Zt=null,en=null,tn=null;function nn(){if(tn)return tn;var e,t,n=en,r=n.length,i="value"in Zt?Zt.value:Zt.textContent,s=i.length;for(e=0;e<r&&n[e]===i[e];e++);var o=r-e;for(t=1;t<=o&&n[r-t]===i[s-t];t++);return tn=i.slice(e,1<t?1-t:void 0)}function rn(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}function sn(){return!0}function on(){return!1}function an(e){function t(t,n,r,i,s){for(var o in this._reactName=t,this._targetInst=r,this.type=n,this.nativeEvent=i,this.target=s,this.currentTarget=null,e)e.hasOwnProperty(o)&&(t=e[o],this[o]=t?t(i):i[o]);return this.isDefaultPrevented=(null!=i.defaultPrevented?i.defaultPrevented:!1===i.returnValue)?sn:on,this.isPropagationStopped=on,this}return i(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!=typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=sn)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!=typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=sn)},persist:function(){},isPersistent:sn}),t}var ln,un,cn,hn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},dn=an(hn),fn=i({},hn,{view:0,detail:0}),pn=an(fn),mn=i({},fn,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:xn,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==cn&&(cn&&"mousemove"===e.type?(ln=e.screenX-cn.screenX,un=e.screenY-cn.screenY):un=ln=0,cn=e),ln)},movementY:function(e){return"movementY"in e?e.movementY:un}}),gn=an(mn),yn=an(i({},mn,{dataTransfer:0})),vn=an(i({},fn,{relatedTarget:0})),wn=an(i({},hn,{animationName:0,elapsedTime:0,pseudoElement:0})),bn=i({},hn,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),_n=an(bn),En=an(i({},hn,{data:0})),In={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},kn={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Sn={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Tn(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=Sn[e])&&!!t[e]}function xn(){return Tn}var Cn=i({},fn,{key:function(e){if(e.key){var t=In[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=rn(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?kn[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:xn,charCode:function(e){return"keypress"===e.type?rn(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?rn(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}}),An=an(Cn),Nn=an(i({},mn,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),Rn=an(i({},fn,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:xn})),Pn=an(i({},hn,{propertyName:0,elapsedTime:0,pseudoElement:0})),Dn=i({},mn,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),On=an(Dn),Ln=[9,13,27,32],Mn=h&&"CompositionEvent"in window,Fn=null;h&&"documentMode"in document&&(Fn=document.documentMode);var Un=h&&"TextEvent"in window&&!Fn,Vn=h&&(!Mn||Fn&&8<Fn&&11>=Fn),zn=String.fromCharCode(32),Bn=!1;function jn(e,t){switch(e){case"keyup":return-1!==Ln.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function qn(e){return"object"==typeof(e=e.detail)&&"data"in e?e.data:null}var $n=!1,Kn={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Gn(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!Kn[e.type]:"textarea"===t}function Wn(e,t,n,r){Ne(r),0<(t=Mr(t,"onChange")).length&&(n=new dn("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var Hn=null,Qn=null;function Yn(e){Cr(e,0)}function Jn(e){if(J(ri(e)))return e}function Xn(e,t){if("change"===e)return t}var Zn=!1;if(h){var er;if(h){var tr="oninput"in document;if(!tr){var nr=document.createElement("div");nr.setAttribute("oninput","return;"),tr="function"==typeof nr.oninput}er=tr}else er=!1;Zn=er&&(!document.documentMode||9<document.documentMode)}function rr(){Hn&&(Hn.detachEvent("onpropertychange",ir),Qn=Hn=null)}function ir(e){if("value"===e.propertyName&&Jn(Qn)){var t=[];if(Wn(t,Qn,e,Se(e)),e=Yn,Me)e(t);else{Me=!0;try{Pe(e,t)}finally{Me=!1,Ue()}}}}function sr(e,t,n){"focusin"===e?(rr(),Qn=n,(Hn=t).attachEvent("onpropertychange",ir)):"focusout"===e&&rr()}function or(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return Jn(Qn)}function ar(e,t){if("click"===e)return Jn(t)}function lr(e,t){if("input"===e||"change"===e)return Jn(t)}var ur="function"==typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e==1/t)||e!=e&&t!=t},cr=Object.prototype.hasOwnProperty;function hr(e,t){if(ur(e,t))return!0;if("object"!=typeof e||null===e||"object"!=typeof t||null===t)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++)if(!cr.call(t,n[r])||!ur(e[n[r]],t[n[r]]))return!1;return!0}function dr(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function fr(e,t){var n,r=dr(e);for(e=0;r;){if(3===r.nodeType){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=dr(r)}}function pr(e,t){return!(!e||!t)&&(e===t||(!e||3!==e.nodeType)&&(t&&3===t.nodeType?pr(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}function mr(){for(var e=window,t=X();t instanceof e.HTMLIFrameElement;){try{var n="string"==typeof t.contentWindow.location.href}catch(e){n=!1}if(!n)break;t=X((e=t.contentWindow).document)}return t}function gr(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}var yr=h&&"documentMode"in document&&11>=document.documentMode,vr=null,wr=null,br=null,_r=!1;function Er(e,t,n){var r=n.window===n?n.document:9===n.nodeType?n:n.ownerDocument;_r||null==vr||vr!==X(r)||(r="selectionStart"in(r=vr)&&gr(r)?{start:r.selectionStart,end:r.selectionEnd}:{anchorNode:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset},br&&hr(br,r)||(br=r,0<(r=Mr(wr,"onSelect")).length&&(t=new dn("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=vr)))}Ot("cancel cancel click click close close contextmenu contextMenu copy copy cut cut auxclick auxClick dblclick doubleClick dragend dragEnd dragstart dragStart drop drop focusin focus focusout blur input input invalid invalid keydown keyDown keypress keyPress keyup keyUp mousedown mouseDown mouseup mouseUp paste paste pause pause play play pointercancel pointerCancel pointerdown pointerDown pointerup pointerUp ratechange rateChange reset reset seeked seeked submit submit touchcancel touchCancel touchend touchEnd touchstart touchStart volumechange volumeChange".split(" "),0),Ot("drag drag dragenter dragEnter dragexit dragExit dragleave dragLeave dragover dragOver mousemove mouseMove mouseout mouseOut mouseover mouseOver pointermove pointerMove pointerout pointerOut pointerover pointerOver scroll scroll toggle toggle touchmove touchMove wheel wheel".split(" "),1),Ot(Dt,2);for(var Ir="change selectionchange textInput compositionstart compositionend compositionupdate".split(" "),kr=0;kr<Ir.length;kr++)Pt.set(Ir[kr],0);c("onMouseEnter",["mouseout","mouseover"]),c("onMouseLeave",["mouseout","mouseover"]),c("onPointerEnter",["pointerout","pointerover"]),c("onPointerLeave",["pointerout","pointerover"]),u("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),u("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),u("onBeforeInput",["compositionend","keypress","textInput","paste"]),u("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),u("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),u("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Sr="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Tr=new Set("cancel close invalid load scroll toggle".split(" ").concat(Sr));function xr(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,function(e,t,n,r,i,s,a,l,u){if(He.apply(this,arguments),qe){if(!qe)throw Error(o(198));var c=$e;qe=!1,$e=null,Ke||(Ke=!0,Ge=c)}}(r,t,void 0,e),e.currentTarget=null}function Cr(e,t){t=0!=(4&t);for(var n=0;n<e.length;n++){var r=e[n],i=r.event;r=r.listeners;e:{var s=void 0;if(t)for(var o=r.length-1;0<=o;o--){var a=r[o],l=a.instance,u=a.currentTarget;if(a=a.listener,l!==s&&i.isPropagationStopped())break e;xr(i,a,u),s=l}else for(o=0;o<r.length;o++){if(l=(a=r[o]).instance,u=a.currentTarget,a=a.listener,l!==s&&i.isPropagationStopped())break e;xr(i,a,u),s=l}}}if(Ke)throw e=Ge,Ke=!1,Ge=null,e}function Ar(e,t){var n=si(t),r=e+"__bubble";n.has(r)||(Dr(t,e,2,!1),n.add(r))}var Nr="_reactListening"+Math.random().toString(36).slice(2);function Rr(e){e[Nr]||(e[Nr]=!0,a.forEach((function(t){Tr.has(t)||Pr(t,!1,e,null),Pr(t,!0,e,null)})))}function Pr(e,t,n,r){var i=4<arguments.length&&void 0!==arguments[4]?arguments[4]:0,s=n;if("selectionchange"===e&&9!==n.nodeType&&(s=n.ownerDocument),null!==r&&!t&&Tr.has(e)){if("scroll"!==e)return;i|=2,s=r}var o=si(s),a=e+"__"+(t?"capture":"bubble");o.has(a)||(t&&(i|=4),Dr(s,e,i,t),o.add(a))}function Dr(e,t,n,r){var i=Pt.get(t);switch(void 0===i?2:i){case 0:i=Qt;break;case 1:i=Yt;break;default:i=Jt}n=i.bind(null,t,n,e),i=void 0,!ze||"touchstart"!==t&&"touchmove"!==t&&"wheel"!==t||(i=!0),r?void 0!==i?e.addEventListener(t,n,{capture:!0,passive:i}):e.addEventListener(t,n,!0):void 0!==i?e.addEventListener(t,n,{passive:i}):e.addEventListener(t,n,!1)}function Or(e,t,n,r,i){var s=r;if(0==(1&t)&&0==(2&t)&&null!==r)e:for(;;){if(null===r)return;var o=r.tag;if(3===o||4===o){var a=r.stateNode.containerInfo;if(a===i||8===a.nodeType&&a.parentNode===i)break;if(4===o)for(o=r.return;null!==o;){var l=o.tag;if((3===l||4===l)&&((l=o.stateNode.containerInfo)===i||8===l.nodeType&&l.parentNode===i))return;o=o.return}for(;null!==a;){if(null===(o=ti(a)))return;if(5===(l=o.tag)||6===l){r=s=o;continue e}a=a.parentNode}}r=r.return}!function(e,t,n){if(Fe)return e();Fe=!0;try{return Le(e,t,n)}finally{Fe=!1,Ue()}}((function(){var r=s,i=Se(n),o=[];e:{var a=Rt.get(e);if(void 0!==a){var l=dn,u=e;switch(e){case"keypress":if(0===rn(n))break e;case"keydown":case"keyup":l=An;break;case"focusin":u="focus",l=vn;break;case"focusout":u="blur",l=vn;break;case"beforeblur":case"afterblur":l=vn;break;case"click":if(2===n.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":l=gn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":l=yn;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":l=Rn;break;case xt:case Ct:case At:l=wn;break;case Nt:l=Pn;break;case"scroll":l=pn;break;case"wheel":l=On;break;case"copy":case"cut":case"paste":l=_n;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":l=Nn}var c=0!=(4&t),h=!c&&"scroll"===e,d=c?null!==a?a+"Capture":null:a;c=[];for(var f,p=r;null!==p;){var m=(f=p).stateNode;if(5===f.tag&&null!==m&&(f=m,null!==d&&null!=(m=Ve(p,d))&&c.push(Lr(p,m,f))),h)break;p=p.return}0<c.length&&(a=new l(a,u,null,n,i),o.push({event:a,listeners:c}))}}if(0==(7&t)){if(l="mouseout"===e||"pointerout"===e,(!(a="mouseover"===e||"pointerover"===e)||0!=(16&t)||!(u=n.relatedTarget||n.fromElement)||!ti(u)&&!u[Zr])&&(l||a)&&(a=i.window===i?i:(a=i.ownerDocument)?a.defaultView||a.parentWindow:window,l?(l=r,null!==(u=(u=n.relatedTarget||n.toElement)?ti(u):null)&&(u!==(h=Qe(u))||5!==u.tag&&6!==u.tag)&&(u=null)):(l=null,u=r),l!==u)){if(c=gn,m="onMouseLeave",d="onMouseEnter",p="mouse","pointerout"!==e&&"pointerover"!==e||(c=Nn,m="onPointerLeave",d="onPointerEnter",p="pointer"),h=null==l?a:ri(l),f=null==u?a:ri(u),(a=new c(m,p+"leave",l,n,i)).target=h,a.relatedTarget=f,m=null,ti(i)===r&&((c=new c(d,p+"enter",u,n,i)).target=f,c.relatedTarget=h,m=c),h=m,l&&u)e:{for(d=u,p=0,f=c=l;f;f=Fr(f))p++;for(f=0,m=d;m;m=Fr(m))f++;for(;0<p-f;)c=Fr(c),p--;for(;0<f-p;)d=Fr(d),f--;for(;p--;){if(c===d||null!==d&&c===d.alternate)break e;c=Fr(c),d=Fr(d)}c=null}else c=null;null!==l&&Ur(o,a,l,c,!1),null!==u&&null!==h&&Ur(o,h,u,c,!0)}if("select"===(l=(a=r?ri(r):window).nodeName&&a.nodeName.toLowerCase())||"input"===l&&"file"===a.type)var g=Xn;else if(Gn(a))if(Zn)g=lr;else{g=or;var y=sr}else(l=a.nodeName)&&"input"===l.toLowerCase()&&("checkbox"===a.type||"radio"===a.type)&&(g=ar);switch(g&&(g=g(e,r))?Wn(o,g,n,i):(y&&y(e,a,r),"focusout"===e&&(y=a._wrapperState)&&y.controlled&&"number"===a.type&&ie(a,"number",a.value)),y=r?ri(r):window,e){case"focusin":(Gn(y)||"true"===y.contentEditable)&&(vr=y,wr=r,br=null);break;case"focusout":br=wr=vr=null;break;case"mousedown":_r=!0;break;case"contextmenu":case"mouseup":case"dragend":_r=!1,Er(o,n,i);break;case"selectionchange":if(yr)break;case"keydown":case"keyup":Er(o,n,i)}var v;if(Mn)e:{switch(e){case"compositionstart":var w="onCompositionStart";break e;case"compositionend":w="onCompositionEnd";break e;case"compositionupdate":w="onCompositionUpdate";break e}w=void 0}else $n?jn(e,n)&&(w="onCompositionEnd"):"keydown"===e&&229===n.keyCode&&(w="onCompositionStart");w&&(Vn&&"ko"!==n.locale&&($n||"onCompositionStart"!==w?"onCompositionEnd"===w&&$n&&(v=nn()):(en="value"in(Zt=i)?Zt.value:Zt.textContent,$n=!0)),0<(y=Mr(r,w)).length&&(w=new En(w,e,null,n,i),o.push({event:w,listeners:y}),(v||null!==(v=qn(n)))&&(w.data=v))),(v=Un?function(e,t){switch(e){case"compositionend":return qn(t);case"keypress":return 32!==t.which?null:(Bn=!0,zn);case"textInput":return(e=t.data)===zn&&Bn?null:e;default:return null}}(e,n):function(e,t){if($n)return"compositionend"===e||!Mn&&jn(e,t)?(e=nn(),tn=en=Zt=null,$n=!1,e):null;switch(e){case"paste":default:return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Vn&&"ko"!==t.locale?null:t.data}}(e,n))&&0<(r=Mr(r,"onBeforeInput")).length&&(i=new En("onBeforeInput","beforeinput",null,n,i),o.push({event:i,listeners:r}),i.data=v)}Cr(o,t)}))}function Lr(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Mr(e,t){for(var n=t+"Capture",r=[];null!==e;){var i=e,s=i.stateNode;5===i.tag&&null!==s&&(i=s,null!=(s=Ve(e,n))&&r.unshift(Lr(e,s,i)),null!=(s=Ve(e,t))&&r.push(Lr(e,s,i))),e=e.return}return r}function Fr(e){if(null===e)return null;do{e=e.return}while(e&&5!==e.tag);return e||null}function Ur(e,t,n,r,i){for(var s=t._reactName,o=[];null!==n&&n!==r;){var a=n,l=a.alternate,u=a.stateNode;if(null!==l&&l===r)break;5===a.tag&&null!==u&&(a=u,i?null!=(l=Ve(n,s))&&o.unshift(Lr(n,l,a)):i||null!=(l=Ve(n,s))&&o.push(Lr(n,l,a))),n=n.return}0!==o.length&&e.push({event:t,listeners:o})}function Vr(){}var zr=null,Br=null;function jr(e,t){switch(e){case"button":case"input":case"select":case"textarea":return!!t.autoFocus}return!1}function qr(e,t){return"textarea"===e||"option"===e||"noscript"===e||"string"==typeof t.children||"number"==typeof t.children||"object"==typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var $r="function"==typeof setTimeout?setTimeout:void 0,Kr="function"==typeof clearTimeout?clearTimeout:void 0;function Gr(e){(1===e.nodeType||9===e.nodeType&&null!=(e=e.body))&&(e.textContent="")}function Wr(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break}return e}function Hr(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var n=e.data;if("$"===n||"$!"===n||"$?"===n){if(0===t)return e;t--}else"/$"===n&&t++}e=e.previousSibling}return null}var Qr=0,Yr=Math.random().toString(36).slice(2),Jr="__reactFiber$"+Yr,Xr="__reactProps$"+Yr,Zr="__reactContainer$"+Yr,ei="__reactEvents$"+Yr;function ti(e){var t=e[Jr];if(t)return t;for(var n=e.parentNode;n;){if(t=n[Zr]||n[Jr]){if(n=t.alternate,null!==t.child||null!==n&&null!==n.child)for(e=Hr(e);null!==e;){if(n=e[Jr])return n;e=Hr(e)}return t}n=(e=n).parentNode}return null}function ni(e){return!(e=e[Jr]||e[Zr])||5!==e.tag&&6!==e.tag&&13!==e.tag&&3!==e.tag?null:e}function ri(e){if(5===e.tag||6===e.tag)return e.stateNode;throw Error(o(33))}function ii(e){return e[Xr]||null}function si(e){var t=e[ei];return void 0===t&&(t=e[ei]=new Set),t}var oi=[],ai=-1;function li(e){return{current:e}}function ui(e){0>ai||(e.current=oi[ai],oi[ai]=null,ai--)}function ci(e,t){ai++,oi[ai]=e.current,e.current=t}var hi={},di=li(hi),fi=li(!1),pi=hi;function mi(e,t){var n=e.type.contextTypes;if(!n)return hi;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var i,s={};for(i in n)s[i]=t[i];return r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=s),s}function gi(e){return null!=e.childContextTypes}function yi(){ui(fi),ui(di)}function vi(e,t,n){if(di.current!==hi)throw Error(o(168));ci(di,t),ci(fi,n)}function wi(e,t,n){var r=e.stateNode;if(e=t.childContextTypes,"function"!=typeof r.getChildContext)return n;for(var s in r=r.getChildContext())if(!(s in e))throw Error(o(108,W(t)||"Unknown",s));return i({},n,r)}function bi(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||hi,pi=di.current,ci(di,e),ci(fi,fi.current),!0}function _i(e,t,n){var r=e.stateNode;if(!r)throw Error(o(169));n?(e=wi(e,t,pi),r.__reactInternalMemoizedMergedChildContext=e,ui(fi),ui(di),ci(di,e)):ui(fi),ci(fi,n)}var Ei=null,Ii=null,ki=s.unstable_runWithPriority,Si=s.unstable_scheduleCallback,Ti=s.unstable_cancelCallback,xi=s.unstable_shouldYield,Ci=s.unstable_requestPaint,Ai=s.unstable_now,Ni=s.unstable_getCurrentPriorityLevel,Ri=s.unstable_ImmediatePriority,Pi=s.unstable_UserBlockingPriority,Di=s.unstable_NormalPriority,Oi=s.unstable_LowPriority,Li=s.unstable_IdlePriority,Mi={},Fi=void 0!==Ci?Ci:function(){},Ui=null,Vi=null,zi=!1,Bi=Ai(),ji=1e4>Bi?Ai:function(){return Ai()-Bi};function qi(){switch(Ni()){case Ri:return 99;case Pi:return 98;case Di:return 97;case Oi:return 96;case Li:return 95;default:throw Error(o(332))}}function $i(e){switch(e){case 99:return Ri;case 98:return Pi;case 97:return Di;case 96:return Oi;case 95:return Li;default:throw Error(o(332))}}function Ki(e,t){return e=$i(e),ki(e,t)}function Gi(e,t,n){return e=$i(e),Si(e,t,n)}function Wi(){if(null!==Vi){var e=Vi;Vi=null,Ti(e)}Hi()}function Hi(){if(!zi&&null!==Ui){zi=!0;var e=0;try{var t=Ui;Ki(99,(function(){for(;e<t.length;e++){var n=t[e];do{n=n(!0)}while(null!==n)}})),Ui=null}catch(t){throw null!==Ui&&(Ui=Ui.slice(e+1)),Si(Ri,Wi),t}finally{zi=!1}}}var Qi=_.ReactCurrentBatchConfig;function Yi(e,t){if(e&&e.defaultProps){for(var n in t=i({},t),e=e.defaultProps)void 0===t[n]&&(t[n]=e[n]);return t}return t}var Ji=li(null),Xi=null,Zi=null,es=null;function ts(){es=Zi=Xi=null}function ns(e){var t=Ji.current;ui(Ji),e.type._context._currentValue=t}function rs(e,t){for(;null!==e;){var n=e.alternate;if((e.childLanes&t)===t){if(null===n||(n.childLanes&t)===t)break;n.childLanes|=t}else e.childLanes|=t,null!==n&&(n.childLanes|=t);e=e.return}}function is(e,t){Xi=e,es=Zi=null,null!==(e=e.dependencies)&&null!==e.firstContext&&(0!=(e.lanes&t)&&(Mo=!0),e.firstContext=null)}function ss(e,t){if(es!==e&&!1!==t&&0!==t)if("number"==typeof t&&1073741823!==t||(es=e,t=1073741823),t={context:e,observedBits:t,next:null},null===Zi){if(null===Xi)throw Error(o(308));Zi=t,Xi.dependencies={lanes:0,firstContext:t,responders:null}}else Zi=Zi.next=t;return e._currentValue}var os=!1;function as(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null},effects:null}}function ls(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function us(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function cs(e,t){if(null!==(e=e.updateQueue)){var n=(e=e.shared).pending;null===n?t.next=t:(t.next=n.next,n.next=t),e.pending=t}}function hs(e,t){var n=e.updateQueue,r=e.alternate;if(null!==r&&n===(r=r.updateQueue)){var i=null,s=null;if(null!==(n=n.firstBaseUpdate)){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};null===s?i=s=o:s=s.next=o,n=n.next}while(null!==n);null===s?i=s=t:s=s.next=t}else i=s=t;return n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:s,shared:r.shared,effects:r.effects},void(e.updateQueue=n)}null===(e=n.lastBaseUpdate)?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function ds(e,t,n,r){var s=e.updateQueue;os=!1;var o=s.firstBaseUpdate,a=s.lastBaseUpdate,l=s.shared.pending;if(null!==l){s.shared.pending=null;var u=l,c=u.next;u.next=null,null===a?o=c:a.next=c,a=u;var h=e.alternate;if(null!==h){var d=(h=h.updateQueue).lastBaseUpdate;d!==a&&(null===d?h.firstBaseUpdate=c:d.next=c,h.lastBaseUpdate=u)}}if(null!==o){for(d=s.baseState,a=0,h=c=u=null;;){l=o.lane;var f=o.eventTime;if((r&l)===l){null!==h&&(h=h.next={eventTime:f,lane:0,tag:o.tag,payload:o.payload,callback:o.callback,next:null});e:{var p=e,m=o;switch(l=t,f=n,m.tag){case 1:if("function"==typeof(p=m.payload)){d=p.call(f,d,l);break e}d=p;break e;case 3:p.flags=-4097&p.flags|64;case 0:if(null==(l="function"==typeof(p=m.payload)?p.call(f,d,l):p))break e;d=i({},d,l);break e;case 2:os=!0}}null!==o.callback&&(e.flags|=32,null===(l=s.effects)?s.effects=[o]:l.push(o))}else f={eventTime:f,lane:l,tag:o.tag,payload:o.payload,callback:o.callback,next:null},null===h?(c=h=f,u=d):h=h.next=f,a|=l;if(null===(o=o.next)){if(null===(l=s.shared.pending))break;o=l.next,l.next=null,s.lastBaseUpdate=l,s.shared.pending=null}}null===h&&(u=d),s.baseState=u,s.firstBaseUpdate=c,s.lastBaseUpdate=h,Va|=a,e.lanes=a,e.memoizedState=d}}function fs(e,t,n){if(e=t.effects,t.effects=null,null!==e)for(t=0;t<e.length;t++){var r=e[t],i=r.callback;if(null!==i){if(r.callback=null,r=n,"function"!=typeof i)throw Error(o(191,i));i.call(r)}}}var ps=(new r.Component).refs;function ms(e,t,n,r){n=null==(n=n(r,t=e.memoizedState))?t:i({},t,n),e.memoizedState=n,0===e.lanes&&(e.updateQueue.baseState=n)}var gs={isMounted:function(e){return!!(e=e._reactInternals)&&Qe(e)===e},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=cl(),i=hl(e),s=us(r,i);s.payload=t,null!=n&&(s.callback=n),cs(e,s),dl(e,i,r)},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=cl(),i=hl(e),s=us(r,i);s.tag=1,s.payload=t,null!=n&&(s.callback=n),cs(e,s),dl(e,i,r)},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=cl(),r=hl(e),i=us(n,r);i.tag=2,null!=t&&(i.callback=t),cs(e,i),dl(e,r,n)}};function ys(e,t,n,r,i,s,o){return"function"==typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(r,s,o):!(t.prototype&&t.prototype.isPureReactComponent&&hr(n,r)&&hr(i,s))}function vs(e,t,n){var r=!1,i=hi,s=t.contextType;return"object"==typeof s&&null!==s?s=ss(s):(i=gi(t)?pi:di.current,s=(r=null!=(r=t.contextTypes))?mi(e,i):hi),t=new t(n,s),e.memoizedState=null!==t.state&&void 0!==t.state?t.state:null,t.updater=gs,e.stateNode=t,t._reactInternals=e,r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=i,e.__reactInternalMemoizedMaskedChildContext=s),t}function ws(e,t,n,r){e=t.state,"function"==typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(n,r),"function"==typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&gs.enqueueReplaceState(t,t.state,null)}function bs(e,t,n,r){var i=e.stateNode;i.props=n,i.state=e.memoizedState,i.refs=ps,as(e);var s=t.contextType;"object"==typeof s&&null!==s?i.context=ss(s):(s=gi(t)?pi:di.current,i.context=mi(e,s)),ds(e,n,i,r),i.state=e.memoizedState,"function"==typeof(s=t.getDerivedStateFromProps)&&(ms(e,t,s,n),i.state=e.memoizedState),"function"==typeof t.getDerivedStateFromProps||"function"==typeof i.getSnapshotBeforeUpdate||"function"!=typeof i.UNSAFE_componentWillMount&&"function"!=typeof i.componentWillMount||(t=i.state,"function"==typeof i.componentWillMount&&i.componentWillMount(),"function"==typeof i.UNSAFE_componentWillMount&&i.UNSAFE_componentWillMount(),t!==i.state&&gs.enqueueReplaceState(i,i.state,null),ds(e,n,i,r),i.state=e.memoizedState),"function"==typeof i.componentDidMount&&(e.flags|=4)}var _s=Array.isArray;function Es(e,t,n){if(null!==(e=n.ref)&&"function"!=typeof e&&"object"!=typeof e){if(n._owner){if(n=n._owner){if(1!==n.tag)throw Error(o(309));var r=n.stateNode}if(!r)throw Error(o(147,e));var i=""+e;return null!==t&&null!==t.ref&&"function"==typeof t.ref&&t.ref._stringRef===i?t.ref:(t=function(e){var t=r.refs;t===ps&&(t=r.refs={}),null===e?delete t[i]:t[i]=e},t._stringRef=i,t)}if("string"!=typeof e)throw Error(o(284));if(!n._owner)throw Error(o(290,e))}return e}function Is(e,t){if("textarea"!==e.type)throw Error(o(31,"[object Object]"===Object.prototype.toString.call(t)?"object with keys {"+Object.keys(t).join(", ")+"}":t))}function ks(e){function t(t,n){if(e){var r=t.lastEffect;null!==r?(r.nextEffect=n,t.lastEffect=n):t.firstEffect=t.lastEffect=n,n.nextEffect=null,n.flags=8}}function n(n,r){if(!e)return null;for(;null!==r;)t(n,r),r=r.sibling;return null}function r(e,t){for(e=new Map;null!==t;)null!==t.key?e.set(t.key,t):e.set(t.index,t),t=t.sibling;return e}function i(e,t){return(e=$l(e,t)).index=0,e.sibling=null,e}function s(t,n,r){return t.index=r,e?null!==(r=t.alternate)?(r=r.index)<n?(t.flags=2,n):r:(t.flags=2,n):n}function a(t){return e&&null===t.alternate&&(t.flags=2),t}function l(e,t,n,r){return null===t||6!==t.tag?((t=Hl(n,e.mode,r)).return=e,t):((t=i(t,n)).return=e,t)}function u(e,t,n,r){return null!==t&&t.elementType===n.type?((r=i(t,n.props)).ref=Es(e,t,n),r.return=e,r):((r=Kl(n.type,n.key,n.props,null,e.mode,r)).ref=Es(e,t,n),r.return=e,r)}function c(e,t,n,r){return null===t||4!==t.tag||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?((t=Ql(n,e.mode,r)).return=e,t):((t=i(t,n.children||[])).return=e,t)}function h(e,t,n,r,s){return null===t||7!==t.tag?((t=Gl(n,e.mode,r,s)).return=e,t):((t=i(t,n)).return=e,t)}function d(e,t,n){if("string"==typeof t||"number"==typeof t)return(t=Hl(""+t,e.mode,n)).return=e,t;if("object"==typeof t&&null!==t){switch(t.$$typeof){case E:return(n=Kl(t.type,t.key,t.props,null,e.mode,n)).ref=Es(e,null,t),n.return=e,n;case I:return(t=Ql(t,e.mode,n)).return=e,t}if(_s(t)||j(t))return(t=Gl(t,e.mode,n,null)).return=e,t;Is(e,t)}return null}function f(e,t,n,r){var i=null!==t?t.key:null;if("string"==typeof n||"number"==typeof n)return null!==i?null:l(e,t,""+n,r);if("object"==typeof n&&null!==n){switch(n.$$typeof){case E:return n.key===i?n.type===k?h(e,t,n.props.children,r,i):u(e,t,n,r):null;case I:return n.key===i?c(e,t,n,r):null}if(_s(n)||j(n))return null!==i?null:h(e,t,n,r,null);Is(e,n)}return null}function p(e,t,n,r,i){if("string"==typeof r||"number"==typeof r)return l(t,e=e.get(n)||null,""+r,i);if("object"==typeof r&&null!==r){switch(r.$$typeof){case E:return e=e.get(null===r.key?n:r.key)||null,r.type===k?h(t,e,r.props.children,i,r.key):u(t,e,r,i);case I:return c(t,e=e.get(null===r.key?n:r.key)||null,r,i)}if(_s(r)||j(r))return h(t,e=e.get(n)||null,r,i,null);Is(t,r)}return null}function m(i,o,a,l){for(var u=null,c=null,h=o,m=o=0,g=null;null!==h&&m<a.length;m++){h.index>m?(g=h,h=null):g=h.sibling;var y=f(i,h,a[m],l);if(null===y){null===h&&(h=g);break}e&&h&&null===y.alternate&&t(i,h),o=s(y,o,m),null===c?u=y:c.sibling=y,c=y,h=g}if(m===a.length)return n(i,h),u;if(null===h){for(;m<a.length;m++)null!==(h=d(i,a[m],l))&&(o=s(h,o,m),null===c?u=h:c.sibling=h,c=h);return u}for(h=r(i,h);m<a.length;m++)null!==(g=p(h,i,m,a[m],l))&&(e&&null!==g.alternate&&h.delete(null===g.key?m:g.key),o=s(g,o,m),null===c?u=g:c.sibling=g,c=g);return e&&h.forEach((function(e){return t(i,e)})),u}function g(i,a,l,u){var c=j(l);if("function"!=typeof c)throw Error(o(150));if(null==(l=c.call(l)))throw Error(o(151));for(var h=c=null,m=a,g=a=0,y=null,v=l.next();null!==m&&!v.done;g++,v=l.next()){m.index>g?(y=m,m=null):y=m.sibling;var w=f(i,m,v.value,u);if(null===w){null===m&&(m=y);break}e&&m&&null===w.alternate&&t(i,m),a=s(w,a,g),null===h?c=w:h.sibling=w,h=w,m=y}if(v.done)return n(i,m),c;if(null===m){for(;!v.done;g++,v=l.next())null!==(v=d(i,v.value,u))&&(a=s(v,a,g),null===h?c=v:h.sibling=v,h=v);return c}for(m=r(i,m);!v.done;g++,v=l.next())null!==(v=p(m,i,g,v.value,u))&&(e&&null!==v.alternate&&m.delete(null===v.key?g:v.key),a=s(v,a,g),null===h?c=v:h.sibling=v,h=v);return e&&m.forEach((function(e){return t(i,e)})),c}return function(e,r,s,l){var u="object"==typeof s&&null!==s&&s.type===k&&null===s.key;u&&(s=s.props.children);var c="object"==typeof s&&null!==s;if(c)switch(s.$$typeof){case E:e:{for(c=s.key,u=r;null!==u;){if(u.key===c){if(7===u.tag){if(s.type===k){n(e,u.sibling),(r=i(u,s.props.children)).return=e,e=r;break e}}else if(u.elementType===s.type){n(e,u.sibling),(r=i(u,s.props)).ref=Es(e,u,s),r.return=e,e=r;break e}n(e,u);break}t(e,u),u=u.sibling}s.type===k?((r=Gl(s.props.children,e.mode,l,s.key)).return=e,e=r):((l=Kl(s.type,s.key,s.props,null,e.mode,l)).ref=Es(e,r,s),l.return=e,e=l)}return a(e);case I:e:{for(u=s.key;null!==r;){if(r.key===u){if(4===r.tag&&r.stateNode.containerInfo===s.containerInfo&&r.stateNode.implementation===s.implementation){n(e,r.sibling),(r=i(r,s.children||[])).return=e,e=r;break e}n(e,r);break}t(e,r),r=r.sibling}(r=Ql(s,e.mode,l)).return=e,e=r}return a(e)}if("string"==typeof s||"number"==typeof s)return s=""+s,null!==r&&6===r.tag?(n(e,r.sibling),(r=i(r,s)).return=e,e=r):(n(e,r),(r=Hl(s,e.mode,l)).return=e,e=r),a(e);if(_s(s))return m(e,r,s,l);if(j(s))return g(e,r,s,l);if(c&&Is(e,s),void 0===s&&!u)switch(e.tag){case 1:case 22:case 0:case 11:case 15:throw Error(o(152,W(e.type)||"Component"))}return n(e,r)}}var Ss=ks(!0),Ts=ks(!1),xs={},Cs=li(xs),As=li(xs),Ns=li(xs);function Rs(e){if(e===xs)throw Error(o(174));return e}function Ps(e,t){switch(ci(Ns,t),ci(As,e),ci(Cs,xs),e=t.nodeType){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:fe(null,"");break;default:t=fe(t=(e=8===e?t.parentNode:t).namespaceURI||null,e=e.tagName)}ui(Cs),ci(Cs,t)}function Ds(){ui(Cs),ui(As),ui(Ns)}function Os(e){Rs(Ns.current);var t=Rs(Cs.current),n=fe(t,e.type);t!==n&&(ci(As,e),ci(Cs,n))}function Ls(e){As.current===e&&(ui(Cs),ui(As))}var Ms=li(0);function Fs(e){for(var t=e;null!==t;){if(13===t.tag){var n=t.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||"$?"===n.data||"$!"===n.data))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(0!=(64&t.flags))return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var Us=null,Vs=null,zs=!1;function Bs(e,t){var n=jl(5,null,null,0);n.elementType="DELETED",n.type="DELETED",n.stateNode=t,n.return=e,n.flags=8,null!==e.lastEffect?(e.lastEffect.nextEffect=n,e.lastEffect=n):e.firstEffect=e.lastEffect=n}function js(e,t){switch(e.tag){case 5:var n=e.type;return null!==(t=1!==t.nodeType||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t)&&(e.stateNode=t,!0);case 6:return null!==(t=""===e.pendingProps||3!==t.nodeType?null:t)&&(e.stateNode=t,!0);default:return!1}}function qs(e){if(zs){var t=Vs;if(t){var n=t;if(!js(e,t)){if(!(t=Wr(n.nextSibling))||!js(e,t))return e.flags=-1025&e.flags|2,zs=!1,void(Us=e);Bs(Us,n)}Us=e,Vs=Wr(t.firstChild)}else e.flags=-1025&e.flags|2,zs=!1,Us=e}}function $s(e){for(e=e.return;null!==e&&5!==e.tag&&3!==e.tag&&13!==e.tag;)e=e.return;Us=e}function Ks(e){if(e!==Us)return!1;if(!zs)return $s(e),zs=!0,!1;var t=e.type;if(5!==e.tag||"head"!==t&&"body"!==t&&!qr(t,e.memoizedProps))for(t=Vs;t;)Bs(e,t),t=Wr(t.nextSibling);if($s(e),13===e.tag){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(o(317));e:{for(e=e.nextSibling,t=0;e;){if(8===e.nodeType){var n=e.data;if("/$"===n){if(0===t){Vs=Wr(e.nextSibling);break e}t--}else"$"!==n&&"$!"!==n&&"$?"!==n||t++}e=e.nextSibling}Vs=null}}else Vs=Us?Wr(e.stateNode.nextSibling):null;return!0}function Gs(){Vs=Us=null,zs=!1}var Ws=[];function Hs(){for(var e=0;e<Ws.length;e++)Ws[e]._workInProgressVersionPrimary=null;Ws.length=0}var Qs=_.ReactCurrentDispatcher,Ys=_.ReactCurrentBatchConfig,Js=0,Xs=null,Zs=null,eo=null,to=!1,no=!1;function ro(){throw Error(o(321))}function io(e,t){if(null===t)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!ur(e[n],t[n]))return!1;return!0}function so(e,t,n,r,i,s){if(Js=s,Xs=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,Qs.current=null===e||null===e.memoizedState?Po:Do,e=n(r,i),no){s=0;do{if(no=!1,!(25>s))throw Error(o(301));s+=1,eo=Zs=null,t.updateQueue=null,Qs.current=Oo,e=n(r,i)}while(no)}if(Qs.current=Ro,t=null!==Zs&&null!==Zs.next,Js=0,eo=Zs=Xs=null,to=!1,t)throw Error(o(300));return e}function oo(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===eo?Xs.memoizedState=eo=e:eo=eo.next=e,eo}function ao(){if(null===Zs){var e=Xs.alternate;e=null!==e?e.memoizedState:null}else e=Zs.next;var t=null===eo?Xs.memoizedState:eo.next;if(null!==t)eo=t,Zs=e;else{if(null===e)throw Error(o(310));e={memoizedState:(Zs=e).memoizedState,baseState:Zs.baseState,baseQueue:Zs.baseQueue,queue:Zs.queue,next:null},null===eo?Xs.memoizedState=eo=e:eo=eo.next=e}return eo}function lo(e,t){return"function"==typeof t?t(e):t}function uo(e){var t=ao(),n=t.queue;if(null===n)throw Error(o(311));n.lastRenderedReducer=e;var r=Zs,i=r.baseQueue,s=n.pending;if(null!==s){if(null!==i){var a=i.next;i.next=s.next,s.next=a}r.baseQueue=i=s,n.pending=null}if(null!==i){i=i.next,r=r.baseState;var l=a=s=null,u=i;do{var c=u.lane;if((Js&c)===c)null!==l&&(l=l.next={lane:0,action:u.action,eagerReducer:u.eagerReducer,eagerState:u.eagerState,next:null}),r=u.eagerReducer===e?u.eagerState:e(r,u.action);else{var h={lane:c,action:u.action,eagerReducer:u.eagerReducer,eagerState:u.eagerState,next:null};null===l?(a=l=h,s=r):l=l.next=h,Xs.lanes|=c,Va|=c}u=u.next}while(null!==u&&u!==i);null===l?s=r:l.next=a,ur(r,t.memoizedState)||(Mo=!0),t.memoizedState=r,t.baseState=s,t.baseQueue=l,n.lastRenderedState=r}return[t.memoizedState,n.dispatch]}function co(e){var t=ao(),n=t.queue;if(null===n)throw Error(o(311));n.lastRenderedReducer=e;var r=n.dispatch,i=n.pending,s=t.memoizedState;if(null!==i){n.pending=null;var a=i=i.next;do{s=e(s,a.action),a=a.next}while(a!==i);ur(s,t.memoizedState)||(Mo=!0),t.memoizedState=s,null===t.baseQueue&&(t.baseState=s),n.lastRenderedState=s}return[s,r]}function ho(e,t,n){var r=t._getVersion;r=r(t._source);var i=t._workInProgressVersionPrimary;if(null!==i?e=i===r:(e=e.mutableReadLanes,(e=(Js&e)===e)&&(t._workInProgressVersionPrimary=r,Ws.push(t))),e)return n(t._source);throw Ws.push(t),Error(o(350))}function fo(e,t,n,r){var i=Ra;if(null===i)throw Error(o(349));var s=t._getVersion,a=s(t._source),l=Qs.current,u=l.useState((function(){return ho(i,t,n)})),c=u[1],h=u[0];u=eo;var d=e.memoizedState,f=d.refs,p=f.getSnapshot,m=d.source;d=d.subscribe;var g=Xs;return e.memoizedState={refs:f,source:t,subscribe:r},l.useEffect((function(){f.getSnapshot=n,f.setSnapshot=c;var e=s(t._source);if(!ur(a,e)){e=n(t._source),ur(h,e)||(c(e),e=hl(g),i.mutableReadLanes|=e&i.pendingLanes),e=i.mutableReadLanes,i.entangledLanes|=e;for(var r=i.entanglements,o=e;0<o;){var l=31-qt(o),u=1<<l;r[l]|=e,o&=~u}}}),[n,t,r]),l.useEffect((function(){return r(t._source,(function(){var e=f.getSnapshot,n=f.setSnapshot;try{n(e(t._source));var r=hl(g);i.mutableReadLanes|=r&i.pendingLanes}catch(e){n((function(){throw e}))}}))}),[t,r]),ur(p,n)&&ur(m,t)&&ur(d,r)||((e={pending:null,dispatch:null,lastRenderedReducer:lo,lastRenderedState:h}).dispatch=c=No.bind(null,Xs,e),u.queue=e,u.baseQueue=null,h=ho(i,t,n),u.memoizedState=u.baseState=h),h}function po(e,t,n){return fo(ao(),e,t,n)}function mo(e){var t=oo();return"function"==typeof e&&(e=e()),t.memoizedState=t.baseState=e,e=(e=t.queue={pending:null,dispatch:null,lastRenderedReducer:lo,lastRenderedState:e}).dispatch=No.bind(null,Xs,e),[t.memoizedState,e]}function go(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},null===(t=Xs.updateQueue)?(t={lastEffect:null},Xs.updateQueue=t,t.lastEffect=e.next=e):null===(n=t.lastEffect)?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e),e}function yo(e){return e={current:e},oo().memoizedState=e}function vo(){return ao().memoizedState}function wo(e,t,n,r){var i=oo();Xs.flags|=e,i.memoizedState=go(1|t,n,void 0,void 0===r?null:r)}function bo(e,t,n,r){var i=ao();r=void 0===r?null:r;var s=void 0;if(null!==Zs){var o=Zs.memoizedState;if(s=o.destroy,null!==r&&io(r,o.deps))return void go(t,n,s,r)}Xs.flags|=e,i.memoizedState=go(1|t,n,s,r)}function _o(e,t){return wo(516,4,e,t)}function Eo(e,t){return bo(516,4,e,t)}function Io(e,t){return bo(4,2,e,t)}function ko(e,t){return"function"==typeof t?(e=e(),t(e),function(){t(null)}):null!=t?(e=e(),t.current=e,function(){t.current=null}):void 0}function So(e,t,n){return n=null!=n?n.concat([e]):null,bo(4,2,ko.bind(null,t,e),n)}function To(){}function xo(e,t){var n=ao();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&io(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function Co(e,t){var n=ao();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&io(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function Ao(e,t){var n=qi();Ki(98>n?98:n,(function(){e(!0)})),Ki(97<n?97:n,(function(){var n=Ys.transition;Ys.transition=1;try{e(!1),t()}finally{Ys.transition=n}}))}function No(e,t,n){var r=cl(),i=hl(e),s={lane:i,action:n,eagerReducer:null,eagerState:null,next:null},o=t.pending;if(null===o?s.next=s:(s.next=o.next,o.next=s),t.pending=s,o=e.alternate,e===Xs||null!==o&&o===Xs)no=to=!0;else{if(0===e.lanes&&(null===o||0===o.lanes)&&null!==(o=t.lastRenderedReducer))try{var a=t.lastRenderedState,l=o(a,n);if(s.eagerReducer=o,s.eagerState=l,ur(l,a))return}catch(e){}dl(e,i,r)}}var Ro={readContext:ss,useCallback:ro,useContext:ro,useEffect:ro,useImperativeHandle:ro,useLayoutEffect:ro,useMemo:ro,useReducer:ro,useRef:ro,useState:ro,useDebugValue:ro,useDeferredValue:ro,useTransition:ro,useMutableSource:ro,useOpaqueIdentifier:ro,unstable_isNewReconciler:!1},Po={readContext:ss,useCallback:function(e,t){return oo().memoizedState=[e,void 0===t?null:t],e},useContext:ss,useEffect:_o,useImperativeHandle:function(e,t,n){return n=null!=n?n.concat([e]):null,wo(4,2,ko.bind(null,t,e),n)},useLayoutEffect:function(e,t){return wo(4,2,e,t)},useMemo:function(e,t){var n=oo();return t=void 0===t?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=oo();return t=void 0!==n?n(t):t,r.memoizedState=r.baseState=t,e=(e=r.queue={pending:null,dispatch:null,lastRenderedReducer:e,lastRenderedState:t}).dispatch=No.bind(null,Xs,e),[r.memoizedState,e]},useRef:yo,useState:mo,useDebugValue:To,useDeferredValue:function(e){var t=mo(e),n=t[0],r=t[1];return _o((function(){var t=Ys.transition;Ys.transition=1;try{r(e)}finally{Ys.transition=t}}),[e]),n},useTransition:function(){var e=mo(!1),t=e[0];return yo(e=Ao.bind(null,e[1])),[e,t]},useMutableSource:function(e,t,n){var r=oo();return r.memoizedState={refs:{getSnapshot:t,setSnapshot:null},source:e,subscribe:n},fo(r,e,t,n)},useOpaqueIdentifier:function(){if(zs){var e=!1,t=function(e){return{$$typeof:L,toString:e,valueOf:e}}((function(){throw e||(e=!0,n("r:"+(Qr++).toString(36))),Error(o(355))})),n=mo(t)[1];return 0==(2&Xs.mode)&&(Xs.flags|=516,go(5,(function(){n("r:"+(Qr++).toString(36))}),void 0,null)),t}return mo(t="r:"+(Qr++).toString(36)),t},unstable_isNewReconciler:!1},Do={readContext:ss,useCallback:xo,useContext:ss,useEffect:Eo,useImperativeHandle:So,useLayoutEffect:Io,useMemo:Co,useReducer:uo,useRef:vo,useState:function(){return uo(lo)},useDebugValue:To,useDeferredValue:function(e){var t=uo(lo),n=t[0],r=t[1];return Eo((function(){var t=Ys.transition;Ys.transition=1;try{r(e)}finally{Ys.transition=t}}),[e]),n},useTransition:function(){var e=uo(lo)[0];return[vo().current,e]},useMutableSource:po,useOpaqueIdentifier:function(){return uo(lo)[0]},unstable_isNewReconciler:!1},Oo={readContext:ss,useCallback:xo,useContext:ss,useEffect:Eo,useImperativeHandle:So,useLayoutEffect:Io,useMemo:Co,useReducer:co,useRef:vo,useState:function(){return co(lo)},useDebugValue:To,useDeferredValue:function(e){var t=co(lo),n=t[0],r=t[1];return Eo((function(){var t=Ys.transition;Ys.transition=1;try{r(e)}finally{Ys.transition=t}}),[e]),n},useTransition:function(){var e=co(lo)[0];return[vo().current,e]},useMutableSource:po,useOpaqueIdentifier:function(){return co(lo)[0]},unstable_isNewReconciler:!1},Lo=_.ReactCurrentOwner,Mo=!1;function Fo(e,t,n,r){t.child=null===e?Ts(t,null,n,r):Ss(t,e.child,n,r)}function Uo(e,t,n,r,i){n=n.render;var s=t.ref;return is(t,i),r=so(e,t,n,r,s,i),null===e||Mo?(t.flags|=1,Fo(e,t,r,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-517,e.lanes&=~i,ra(e,t,i))}function Vo(e,t,n,r,i,s){if(null===e){var o=n.type;return"function"!=typeof o||ql(o)||void 0!==o.defaultProps||null!==n.compare||void 0!==n.defaultProps?((e=Kl(n.type,null,r,t,t.mode,s)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=o,zo(e,t,o,r,i,s))}return o=e.child,0==(i&s)&&(i=o.memoizedProps,(n=null!==(n=n.compare)?n:hr)(i,r)&&e.ref===t.ref)?ra(e,t,s):(t.flags|=1,(e=$l(o,r)).ref=t.ref,e.return=t,t.child=e)}function zo(e,t,n,r,i,s){if(null!==e&&hr(e.memoizedProps,r)&&e.ref===t.ref){if(Mo=!1,0==(s&i))return t.lanes=e.lanes,ra(e,t,s);0!=(16384&e.flags)&&(Mo=!0)}return qo(e,t,n,r,s)}function Bo(e,t,n){var r=t.pendingProps,i=r.children,s=null!==e?e.memoizedState:null;if("hidden"===r.mode||"unstable-defer-without-hiding"===r.mode)if(0==(4&t.mode))t.memoizedState={baseLanes:0},bl(0,n);else{if(0==(1073741824&n))return e=null!==s?s.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e},bl(0,e),null;t.memoizedState={baseLanes:0},bl(0,null!==s?s.baseLanes:n)}else null!==s?(r=s.baseLanes|n,t.memoizedState=null):r=n,bl(0,r);return Fo(e,t,i,n),t.child}function jo(e,t){var n=t.ref;(null===e&&null!==n||null!==e&&e.ref!==n)&&(t.flags|=128)}function qo(e,t,n,r,i){var s=gi(n)?pi:di.current;return s=mi(t,s),is(t,i),n=so(e,t,n,r,s,i),null===e||Mo?(t.flags|=1,Fo(e,t,n,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-517,e.lanes&=~i,ra(e,t,i))}function $o(e,t,n,r,i){if(gi(n)){var s=!0;bi(t)}else s=!1;if(is(t,i),null===t.stateNode)null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2),vs(t,n,r),bs(t,n,r,i),r=!0;else if(null===e){var o=t.stateNode,a=t.memoizedProps;o.props=a;var l=o.context,u=n.contextType;u="object"==typeof u&&null!==u?ss(u):mi(t,u=gi(n)?pi:di.current);var c=n.getDerivedStateFromProps,h="function"==typeof c||"function"==typeof o.getSnapshotBeforeUpdate;h||"function"!=typeof o.UNSAFE_componentWillReceiveProps&&"function"!=typeof o.componentWillReceiveProps||(a!==r||l!==u)&&ws(t,o,r,u),os=!1;var d=t.memoizedState;o.state=d,ds(t,r,o,i),l=t.memoizedState,a!==r||d!==l||fi.current||os?("function"==typeof c&&(ms(t,n,c,r),l=t.memoizedState),(a=os||ys(t,n,a,r,d,l,u))?(h||"function"!=typeof o.UNSAFE_componentWillMount&&"function"!=typeof o.componentWillMount||("function"==typeof o.componentWillMount&&o.componentWillMount(),"function"==typeof o.UNSAFE_componentWillMount&&o.UNSAFE_componentWillMount()),"function"==typeof o.componentDidMount&&(t.flags|=4)):("function"==typeof o.componentDidMount&&(t.flags|=4),t.memoizedProps=r,t.memoizedState=l),o.props=r,o.state=l,o.context=u,r=a):("function"==typeof o.componentDidMount&&(t.flags|=4),r=!1)}else{o=t.stateNode,ls(e,t),a=t.memoizedProps,u=t.type===t.elementType?a:Yi(t.type,a),o.props=u,h=t.pendingProps,d=o.context,l="object"==typeof(l=n.contextType)&&null!==l?ss(l):mi(t,l=gi(n)?pi:di.current);var f=n.getDerivedStateFromProps;(c="function"==typeof f||"function"==typeof o.getSnapshotBeforeUpdate)||"function"!=typeof o.UNSAFE_componentWillReceiveProps&&"function"!=typeof o.componentWillReceiveProps||(a!==h||d!==l)&&ws(t,o,r,l),os=!1,d=t.memoizedState,o.state=d,ds(t,r,o,i);var p=t.memoizedState;a!==h||d!==p||fi.current||os?("function"==typeof f&&(ms(t,n,f,r),p=t.memoizedState),(u=os||ys(t,n,u,r,d,p,l))?(c||"function"!=typeof o.UNSAFE_componentWillUpdate&&"function"!=typeof o.componentWillUpdate||("function"==typeof o.componentWillUpdate&&o.componentWillUpdate(r,p,l),"function"==typeof o.UNSAFE_componentWillUpdate&&o.UNSAFE_componentWillUpdate(r,p,l)),"function"==typeof o.componentDidUpdate&&(t.flags|=4),"function"==typeof o.getSnapshotBeforeUpdate&&(t.flags|=256)):("function"!=typeof o.componentDidUpdate||a===e.memoizedProps&&d===e.memoizedState||(t.flags|=4),"function"!=typeof o.getSnapshotBeforeUpdate||a===e.memoizedProps&&d===e.memoizedState||(t.flags|=256),t.memoizedProps=r,t.memoizedState=p),o.props=r,o.state=p,o.context=l,r=u):("function"!=typeof o.componentDidUpdate||a===e.memoizedProps&&d===e.memoizedState||(t.flags|=4),"function"!=typeof o.getSnapshotBeforeUpdate||a===e.memoizedProps&&d===e.memoizedState||(t.flags|=256),r=!1)}return Ko(e,t,n,r,s,i)}function Ko(e,t,n,r,i,s){jo(e,t);var o=0!=(64&t.flags);if(!r&&!o)return i&&_i(t,n,!1),ra(e,t,s);r=t.stateNode,Lo.current=t;var a=o&&"function"!=typeof n.getDerivedStateFromError?null:r.render();return t.flags|=1,null!==e&&o?(t.child=Ss(t,e.child,null,s),t.child=Ss(t,null,a,s)):Fo(e,t,a,s),t.memoizedState=r.state,i&&_i(t,n,!0),t.child}function Go(e){var t=e.stateNode;t.pendingContext?vi(0,t.pendingContext,t.pendingContext!==t.context):t.context&&vi(0,t.context,!1),Ps(e,t.containerInfo)}var Wo,Ho,Qo,Yo,Jo={dehydrated:null,retryLane:0};function Xo(e,t,n){var r,i=t.pendingProps,s=Ms.current,o=!1;return(r=0!=(64&t.flags))||(r=(null===e||null!==e.memoizedState)&&0!=(2&s)),r?(o=!0,t.flags&=-65):null!==e&&null===e.memoizedState||void 0===i.fallback||!0===i.unstable_avoidThisFallback||(s|=1),ci(Ms,1&s),null===e?(void 0!==i.fallback&&qs(t),e=i.children,s=i.fallback,o?(e=Zo(t,e,s,n),t.child.memoizedState={baseLanes:n},t.memoizedState=Jo,e):"number"==typeof i.unstable_expectedLoadTime?(e=Zo(t,e,s,n),t.child.memoizedState={baseLanes:n},t.memoizedState=Jo,t.lanes=33554432,e):((n=Wl({mode:"visible",children:e},t.mode,n,null)).return=t,t.child=n)):(e.memoizedState,o?(i=function(e,t,n,r,i){var s=t.mode,o=e.child;e=o.sibling;var a={mode:"hidden",children:n};return 0==(2&s)&&t.child!==o?((n=t.child).childLanes=0,n.pendingProps=a,null!==(o=n.lastEffect)?(t.firstEffect=n.firstEffect,t.lastEffect=o,o.nextEffect=null):t.firstEffect=t.lastEffect=null):n=$l(o,a),null!==e?r=$l(e,r):(r=Gl(r,s,i,null)).flags|=2,r.return=t,n.return=t,n.sibling=r,t.child=n,r}(e,t,i.children,i.fallback,n),o=t.child,s=e.child.memoizedState,o.memoizedState=null===s?{baseLanes:n}:{baseLanes:s.baseLanes|n},o.childLanes=e.childLanes&~n,t.memoizedState=Jo,i):(n=function(e,t,n,r){var i=e.child;return e=i.sibling,n=$l(i,{mode:"visible",children:n}),0==(2&t.mode)&&(n.lanes=r),n.return=t,n.sibling=null,null!==e&&(e.nextEffect=null,e.flags=8,t.firstEffect=t.lastEffect=e),t.child=n}(e,t,i.children,n),t.memoizedState=null,n))}function Zo(e,t,n,r){var i=e.mode,s=e.child;return t={mode:"hidden",children:t},0==(2&i)&&null!==s?(s.childLanes=0,s.pendingProps=t):s=Wl(t,i,0,null),n=Gl(n,i,r,null),s.return=e,n.return=e,s.sibling=n,e.child=s,n}function ea(e,t){e.lanes|=t;var n=e.alternate;null!==n&&(n.lanes|=t),rs(e.return,t)}function ta(e,t,n,r,i,s){var o=e.memoizedState;null===o?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i,lastEffect:s}:(o.isBackwards=t,o.rendering=null,o.renderingStartTime=0,o.last=r,o.tail=n,o.tailMode=i,o.lastEffect=s)}function na(e,t,n){var r=t.pendingProps,i=r.revealOrder,s=r.tail;if(Fo(e,t,r.children,n),0!=(2&(r=Ms.current)))r=1&r|2,t.flags|=64;else{if(null!==e&&0!=(64&e.flags))e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&ea(e,n);else if(19===e.tag)ea(e,n);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(ci(Ms,r),0==(2&t.mode))t.memoizedState=null;else switch(i){case"forwards":for(n=t.child,i=null;null!==n;)null!==(e=n.alternate)&&null===Fs(e)&&(i=n),n=n.sibling;null===(n=i)?(i=t.child,t.child=null):(i=n.sibling,n.sibling=null),ta(t,!1,i,n,s,t.lastEffect);break;case"backwards":for(n=null,i=t.child,t.child=null;null!==i;){if(null!==(e=i.alternate)&&null===Fs(e)){t.child=i;break}e=i.sibling,i.sibling=n,n=i,i=e}ta(t,!0,n,null,s,t.lastEffect);break;case"together":ta(t,!1,null,null,void 0,t.lastEffect);break;default:t.memoizedState=null}return t.child}function ra(e,t,n){if(null!==e&&(t.dependencies=e.dependencies),Va|=t.lanes,0!=(n&t.childLanes)){if(null!==e&&t.child!==e.child)throw Error(o(153));if(null!==t.child){for(n=$l(e=t.child,e.pendingProps),t.child=n,n.return=t;null!==e.sibling;)e=e.sibling,(n=n.sibling=$l(e,e.pendingProps)).return=t;n.sibling=null}return t.child}return null}function ia(e,t){if(!zs)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;null!==t;)null!==t.alternate&&(n=t),t=t.sibling;null===n?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;null!==n;)null!==n.alternate&&(r=n),n=n.sibling;null===r?t||null===e.tail?e.tail=null:e.tail.sibling=null:r.sibling=null}}function sa(e,t,n){var r=t.pendingProps;switch(t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return null;case 1:case 17:return gi(t.type)&&yi(),null;case 3:return Ds(),ui(fi),ui(di),Hs(),(r=t.stateNode).pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),null!==e&&null!==e.child||(Ks(t)?t.flags|=4:r.hydrate||(t.flags|=256)),Ho(t),null;case 5:Ls(t);var s=Rs(Ns.current);if(n=t.type,null!==e&&null!=t.stateNode)Qo(e,t,n,r,s),e.ref!==t.ref&&(t.flags|=128);else{if(!r){if(null===t.stateNode)throw Error(o(166));return null}if(e=Rs(Cs.current),Ks(t)){r=t.stateNode,n=t.type;var a=t.memoizedProps;switch(r[Jr]=t,r[Xr]=a,n){case"dialog":Ar("cancel",r),Ar("close",r);break;case"iframe":case"object":case"embed":Ar("load",r);break;case"video":case"audio":for(e=0;e<Sr.length;e++)Ar(Sr[e],r);break;case"source":Ar("error",r);break;case"img":case"image":case"link":Ar("error",r),Ar("load",r);break;case"details":Ar("toggle",r);break;case"input":ee(r,a),Ar("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!a.multiple},Ar("invalid",r);break;case"textarea":le(r,a),Ar("invalid",r)}for(var u in Ie(n,a),e=null,a)a.hasOwnProperty(u)&&(s=a[u],"children"===u?"string"==typeof s?r.textContent!==s&&(e=["children",s]):"number"==typeof s&&r.textContent!==""+s&&(e=["children",""+s]):l.hasOwnProperty(u)&&null!=s&&"onScroll"===u&&Ar("scroll",r));switch(n){case"input":Y(r),re(r,a,!0);break;case"textarea":Y(r),ce(r);break;case"select":case"option":break;default:"function"==typeof a.onClick&&(r.onclick=Vr)}r=e,t.updateQueue=r,null!==r&&(t.flags|=4)}else{switch(u=9===s.nodeType?s:s.ownerDocument,e===he.html&&(e=de(n)),e===he.html?"script"===n?((e=u.createElement("div")).innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):"string"==typeof r.is?e=u.createElement(n,{is:r.is}):(e=u.createElement(n),"select"===n&&(u=e,r.multiple?u.multiple=!0:r.size&&(u.size=r.size))):e=u.createElementNS(e,n),e[Jr]=t,e[Xr]=r,Wo(e,t,!1,!1),t.stateNode=e,u=ke(n,r),n){case"dialog":Ar("cancel",e),Ar("close",e),s=r;break;case"iframe":case"object":case"embed":Ar("load",e),s=r;break;case"video":case"audio":for(s=0;s<Sr.length;s++)Ar(Sr[s],e);s=r;break;case"source":Ar("error",e),s=r;break;case"img":case"image":case"link":Ar("error",e),Ar("load",e),s=r;break;case"details":Ar("toggle",e),s=r;break;case"input":ee(e,r),s=Z(e,r),Ar("invalid",e);break;case"option":s=se(e,r);break;case"select":e._wrapperState={wasMultiple:!!r.multiple},s=i({},r,{value:void 0}),Ar("invalid",e);break;case"textarea":le(e,r),s=ae(e,r),Ar("invalid",e);break;default:s=r}Ie(n,s);var c=s;for(a in c)if(c.hasOwnProperty(a)){var h=c[a];"style"===a?_e(e,h):"dangerouslySetInnerHTML"===a?null!=(h=h?h.__html:void 0)&&ge(e,h):"children"===a?"string"==typeof h?("textarea"!==n||""!==h)&&ye(e,h):"number"==typeof h&&ye(e,""+h):"suppressContentEditableWarning"!==a&&"suppressHydrationWarning"!==a&&"autoFocus"!==a&&(l.hasOwnProperty(a)?null!=h&&"onScroll"===a&&Ar("scroll",e):null!=h&&b(e,a,h,u))}switch(n){case"input":Y(e),re(e,r,!1);break;case"textarea":Y(e),ce(e);break;case"option":null!=r.value&&e.setAttribute("value",""+H(r.value));break;case"select":e.multiple=!!r.multiple,null!=(a=r.value)?oe(e,!!r.multiple,a,!1):null!=r.defaultValue&&oe(e,!!r.multiple,r.defaultValue,!0);break;default:"function"==typeof s.onClick&&(e.onclick=Vr)}jr(n,r)&&(t.flags|=4)}null!==t.ref&&(t.flags|=128)}return null;case 6:if(e&&null!=t.stateNode)Yo(e,t,e.memoizedProps,r);else{if("string"!=typeof r&&null===t.stateNode)throw Error(o(166));n=Rs(Ns.current),Rs(Cs.current),Ks(t)?(r=t.stateNode,n=t.memoizedProps,r[Jr]=t,r.nodeValue!==n&&(t.flags|=4)):((r=(9===n.nodeType?n:n.ownerDocument).createTextNode(r))[Jr]=t,t.stateNode=r)}return null;case 13:return ui(Ms),r=t.memoizedState,0!=(64&t.flags)?(t.lanes=n,t):(r=null!==r,n=!1,null===e?void 0!==t.memoizedProps.fallback&&Ks(t):n=null!==e.memoizedState,r&&!n&&0!=(2&t.mode)&&(null===e&&!0!==t.memoizedProps.unstable_avoidThisFallback||0!=(1&Ms.current)?0===Ma&&(Ma=3):(0!==Ma&&3!==Ma||(Ma=4),null===Ra||0==(134217727&Va)&&0==(134217727&za)||gl(Ra,Da))),(r||n)&&(t.flags|=4),null);case 4:return Ds(),Ho(t),null===e&&Rr(t.stateNode.containerInfo),null;case 10:return ns(t),null;case 19:if(ui(Ms),null===(r=t.memoizedState))return null;if(a=0!=(64&t.flags),null===(u=r.rendering))if(a)ia(r,!1);else{if(0!==Ma||null!==e&&0!=(64&e.flags))for(e=t.child;null!==e;){if(null!==(u=Fs(e))){for(t.flags|=64,ia(r,!1),null!==(a=u.updateQueue)&&(t.updateQueue=a,t.flags|=4),null===r.lastEffect&&(t.firstEffect=null),t.lastEffect=r.lastEffect,r=n,n=t.child;null!==n;)e=r,(a=n).flags&=2,a.nextEffect=null,a.firstEffect=null,a.lastEffect=null,null===(u=a.alternate)?(a.childLanes=0,a.lanes=e,a.child=null,a.memoizedProps=null,a.memoizedState=null,a.updateQueue=null,a.dependencies=null,a.stateNode=null):(a.childLanes=u.childLanes,a.lanes=u.lanes,a.child=u.child,a.memoizedProps=u.memoizedProps,a.memoizedState=u.memoizedState,a.updateQueue=u.updateQueue,a.type=u.type,e=u.dependencies,a.dependencies=null===e?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return ci(Ms,1&Ms.current|2),t.child}e=e.sibling}null!==r.tail&&ji()>$a&&(t.flags|=64,a=!0,ia(r,!1),t.lanes=33554432)}else{if(!a)if(null!==(e=Fs(u))){if(t.flags|=64,a=!0,null!==(n=e.updateQueue)&&(t.updateQueue=n,t.flags|=4),ia(r,!0),null===r.tail&&"hidden"===r.tailMode&&!u.alternate&&!zs)return null!==(t=t.lastEffect=r.lastEffect)&&(t.nextEffect=null),null}else 2*ji()-r.renderingStartTime>$a&&1073741824!==n&&(t.flags|=64,a=!0,ia(r,!1),t.lanes=33554432);r.isBackwards?(u.sibling=t.child,t.child=u):(null!==(n=r.last)?n.sibling=u:t.child=u,r.last=u)}return null!==r.tail?(n=r.tail,r.rendering=n,r.tail=n.sibling,r.lastEffect=t.lastEffect,r.renderingStartTime=ji(),n.sibling=null,t=Ms.current,ci(Ms,a?1&t|2:1&t),n):null;case 23:case 24:return _l(),null!==e&&null!==e.memoizedState!=(null!==t.memoizedState)&&"unstable-defer-without-hiding"!==r.mode&&(t.flags|=4),null}throw Error(o(156,t.tag))}function oa(e){switch(e.tag){case 1:gi(e.type)&&yi();var t=e.flags;return 4096&t?(e.flags=-4097&t|64,e):null;case 3:if(Ds(),ui(fi),ui(di),Hs(),0!=(64&(t=e.flags)))throw Error(o(285));return e.flags=-4097&t|64,e;case 5:return Ls(e),null;case 13:return ui(Ms),4096&(t=e.flags)?(e.flags=-4097&t|64,e):null;case 19:return ui(Ms),null;case 4:return Ds(),null;case 10:return ns(e),null;case 23:case 24:return _l(),null;default:return null}}function aa(e,t){try{var n="",r=t;do{n+=G(r),r=r.return}while(r);var i=n}catch(e){i="\nError generating stack: "+e.message+"\n"+e.stack}return{value:e,source:t,stack:i}}function la(e,t){try{console.error(t.value)}catch(e){setTimeout((function(){throw e}))}}Wo=function(e,t){for(var n=t.child;null!==n;){if(5===n.tag||6===n.tag)e.appendChild(n.stateNode);else if(4!==n.tag&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===t)break;for(;null===n.sibling;){if(null===n.return||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}},Ho=function(){},Qo=function(e,t,n,r){var s=e.memoizedProps;if(s!==r){e=t.stateNode,Rs(Cs.current);var o,a=null;switch(n){case"input":s=Z(e,s),r=Z(e,r),a=[];break;case"option":s=se(e,s),r=se(e,r),a=[];break;case"select":s=i({},s,{value:void 0}),r=i({},r,{value:void 0}),a=[];break;case"textarea":s=ae(e,s),r=ae(e,r),a=[];break;default:"function"!=typeof s.onClick&&"function"==typeof r.onClick&&(e.onclick=Vr)}for(h in Ie(n,r),n=null,s)if(!r.hasOwnProperty(h)&&s.hasOwnProperty(h)&&null!=s[h])if("style"===h){var u=s[h];for(o in u)u.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else"dangerouslySetInnerHTML"!==h&&"children"!==h&&"suppressContentEditableWarning"!==h&&"suppressHydrationWarning"!==h&&"autoFocus"!==h&&(l.hasOwnProperty(h)?a||(a=[]):(a=a||[]).push(h,null));for(h in r){var c=r[h];if(u=null!=s?s[h]:void 0,r.hasOwnProperty(h)&&c!==u&&(null!=c||null!=u))if("style"===h)if(u){for(o in u)!u.hasOwnProperty(o)||c&&c.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in c)c.hasOwnProperty(o)&&u[o]!==c[o]&&(n||(n={}),n[o]=c[o])}else n||(a||(a=[]),a.push(h,n)),n=c;else"dangerouslySetInnerHTML"===h?(c=c?c.__html:void 0,u=u?u.__html:void 0,null!=c&&u!==c&&(a=a||[]).push(h,c)):"children"===h?"string"!=typeof c&&"number"!=typeof c||(a=a||[]).push(h,""+c):"suppressContentEditableWarning"!==h&&"suppressHydrationWarning"!==h&&(l.hasOwnProperty(h)?(null!=c&&"onScroll"===h&&Ar("scroll",e),a||u===c||(a=[])):"object"==typeof c&&null!==c&&c.$$typeof===L?c.toString():(a=a||[]).push(h,c))}n&&(a=a||[]).push("style",n);var h=a;(t.updateQueue=h)&&(t.flags|=4)}},Yo=function(e,t,n,r){n!==r&&(t.flags|=4)};var ua="function"==typeof WeakMap?WeakMap:Map;function ca(e,t,n){(n=us(-1,n)).tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){Ha||(Ha=!0,Qa=r),la(0,t)},n}function ha(e,t,n){(n=us(-1,n)).tag=3;var r=e.type.getDerivedStateFromError;if("function"==typeof r){var i=t.value;n.payload=function(){return la(0,t),r(i)}}var s=e.stateNode;return null!==s&&"function"==typeof s.componentDidCatch&&(n.callback=function(){"function"!=typeof r&&(null===Ya?Ya=new Set([this]):Ya.add(this),la(0,t));var e=t.stack;this.componentDidCatch(t.value,{componentStack:null!==e?e:""})}),n}var da="function"==typeof WeakSet?WeakSet:Set;function fa(e){var t=e.ref;if(null!==t)if("function"==typeof t)try{t(null)}catch(t){Ul(e,t)}else t.current=null}function pa(e,t){switch(t.tag){case 0:case 11:case 15:case 22:case 5:case 6:case 4:case 17:return;case 1:if(256&t.flags&&null!==e){var n=e.memoizedProps,r=e.memoizedState;t=(e=t.stateNode).getSnapshotBeforeUpdate(t.elementType===t.type?n:Yi(t.type,n),r),e.__reactInternalSnapshotBeforeUpdate=t}return;case 3:return void(256&t.flags&&Gr(t.stateNode.containerInfo))}throw Error(o(163))}function ma(e,t,n){switch(n.tag){case 0:case 11:case 15:case 22:if(null!==(t=null!==(t=n.updateQueue)?t.lastEffect:null)){e=t=t.next;do{if(3==(3&e.tag)){var r=e.create;e.destroy=r()}e=e.next}while(e!==t)}if(null!==(t=null!==(t=n.updateQueue)?t.lastEffect:null)){e=t=t.next;do{var i=e;r=i.next,0!=(4&(i=i.tag))&&0!=(1&i)&&(Ll(n,e),Ol(n,e)),e=r}while(e!==t)}return;case 1:return e=n.stateNode,4&n.flags&&(null===t?e.componentDidMount():(r=n.elementType===n.type?t.memoizedProps:Yi(n.type,t.memoizedProps),e.componentDidUpdate(r,t.memoizedState,e.__reactInternalSnapshotBeforeUpdate))),void(null!==(t=n.updateQueue)&&fs(n,t,e));case 3:if(null!==(t=n.updateQueue)){if(e=null,null!==n.child)switch(n.child.tag){case 5:case 1:e=n.child.stateNode}fs(n,t,e)}return;case 5:return e=n.stateNode,void(null===t&&4&n.flags&&jr(n.type,n.memoizedProps)&&e.focus());case 6:case 4:case 12:case 19:case 17:case 20:case 21:case 23:case 24:return;case 13:return void(null===n.memoizedState&&(n=n.alternate,null!==n&&(n=n.memoizedState,null!==n&&(n=n.dehydrated,null!==n&&_t(n)))))}throw Error(o(163))}function ga(e,t){for(var n=e;;){if(5===n.tag){var r=n.stateNode;if(t)"function"==typeof(r=r.style).setProperty?r.setProperty("display","none","important"):r.display="none";else{r=n.stateNode;var i=n.memoizedProps.style;i=null!=i&&i.hasOwnProperty("display")?i.display:null,r.style.display=be("display",i)}}else if(6===n.tag)n.stateNode.nodeValue=t?"":n.memoizedProps;else if((23!==n.tag&&24!==n.tag||null===n.memoizedState||n===e)&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===e)break;for(;null===n.sibling;){if(null===n.return||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}}function ya(e,t){if(Ii&&"function"==typeof Ii.onCommitFiberUnmount)try{Ii.onCommitFiberUnmount(Ei,t)}catch(e){}switch(t.tag){case 0:case 11:case 14:case 15:case 22:if(null!==(e=t.updateQueue)&&null!==(e=e.lastEffect)){var n=e=e.next;do{var r=n,i=r.destroy;if(r=r.tag,void 0!==i)if(0!=(4&r))Ll(t,n);else{r=t;try{i()}catch(e){Ul(r,e)}}n=n.next}while(n!==e)}break;case 1:if(fa(t),"function"==typeof(e=t.stateNode).componentWillUnmount)try{e.props=t.memoizedProps,e.state=t.memoizedState,e.componentWillUnmount()}catch(e){Ul(t,e)}break;case 5:fa(t);break;case 4:Ia(e,t)}}function va(e){e.alternate=null,e.child=null,e.dependencies=null,e.firstEffect=null,e.lastEffect=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.return=null,e.updateQueue=null}function wa(e){return 5===e.tag||3===e.tag||4===e.tag}function ba(e){e:{for(var t=e.return;null!==t;){if(wa(t))break e;t=t.return}throw Error(o(160))}var n=t;switch(t=n.stateNode,n.tag){case 5:var r=!1;break;case 3:case 4:t=t.containerInfo,r=!0;break;default:throw Error(o(161))}16&n.flags&&(ye(t,""),n.flags&=-17);e:t:for(n=e;;){for(;null===n.sibling;){if(null===n.return||wa(n.return)){n=null;break e}n=n.return}for(n.sibling.return=n.return,n=n.sibling;5!==n.tag&&6!==n.tag&&18!==n.tag;){if(2&n.flags)continue t;if(null===n.child||4===n.tag)continue t;n.child.return=n,n=n.child}if(!(2&n.flags)){n=n.stateNode;break e}}r?_a(e,n,t):Ea(e,n,t)}function _a(e,t,n){var r=e.tag,i=5===r||6===r;if(i)e=i?e.stateNode:e.stateNode.instance,t?8===n.nodeType?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(8===n.nodeType?(t=n.parentNode).insertBefore(e,n):(t=n).appendChild(e),null!=(n=n._reactRootContainer)||null!==t.onclick||(t.onclick=Vr));else if(4!==r&&null!==(e=e.child))for(_a(e,t,n),e=e.sibling;null!==e;)_a(e,t,n),e=e.sibling}function Ea(e,t,n){var r=e.tag,i=5===r||6===r;if(i)e=i?e.stateNode:e.stateNode.instance,t?n.insertBefore(e,t):n.appendChild(e);else if(4!==r&&null!==(e=e.child))for(Ea(e,t,n),e=e.sibling;null!==e;)Ea(e,t,n),e=e.sibling}function Ia(e,t){for(var n,r,i=t,s=!1;;){if(!s){s=i.return;e:for(;;){if(null===s)throw Error(o(160));switch(n=s.stateNode,s.tag){case 5:r=!1;break e;case 3:case 4:n=n.containerInfo,r=!0;break e}s=s.return}s=!0}if(5===i.tag||6===i.tag){e:for(var a=e,l=i,u=l;;)if(ya(a,u),null!==u.child&&4!==u.tag)u.child.return=u,u=u.child;else{if(u===l)break e;for(;null===u.sibling;){if(null===u.return||u.return===l)break e;u=u.return}u.sibling.return=u.return,u=u.sibling}r?(a=n,l=i.stateNode,8===a.nodeType?a.parentNode.removeChild(l):a.removeChild(l)):n.removeChild(i.stateNode)}else if(4===i.tag){if(null!==i.child){n=i.stateNode.containerInfo,r=!0,i.child.return=i,i=i.child;continue}}else if(ya(e,i),null!==i.child){i.child.return=i,i=i.child;continue}if(i===t)break;for(;null===i.sibling;){if(null===i.return||i.return===t)return;4===(i=i.return).tag&&(s=!1)}i.sibling.return=i.return,i=i.sibling}}function ka(e,t){switch(t.tag){case 0:case 11:case 14:case 15:case 22:var n=t.updateQueue;if(null!==(n=null!==n?n.lastEffect:null)){var r=n=n.next;do{3==(3&r.tag)&&(e=r.destroy,r.destroy=void 0,void 0!==e&&e()),r=r.next}while(r!==n)}return;case 1:case 12:case 17:return;case 5:if(null!=(n=t.stateNode)){r=t.memoizedProps;var i=null!==e?e.memoizedProps:r;e=t.type;var s=t.updateQueue;if(t.updateQueue=null,null!==s){for(n[Xr]=r,"input"===e&&"radio"===r.type&&null!=r.name&&te(n,r),ke(e,i),t=ke(e,r),i=0;i<s.length;i+=2){var a=s[i],l=s[i+1];"style"===a?_e(n,l):"dangerouslySetInnerHTML"===a?ge(n,l):"children"===a?ye(n,l):b(n,a,l,t)}switch(e){case"input":ne(n,r);break;case"textarea":ue(n,r);break;case"select":e=n._wrapperState.wasMultiple,n._wrapperState.wasMultiple=!!r.multiple,null!=(s=r.value)?oe(n,!!r.multiple,s,!1):e!==!!r.multiple&&(null!=r.defaultValue?oe(n,!!r.multiple,r.defaultValue,!0):oe(n,!!r.multiple,r.multiple?[]:"",!1))}}}return;case 6:if(null===t.stateNode)throw Error(o(162));return void(t.stateNode.nodeValue=t.memoizedProps);case 3:return void((n=t.stateNode).hydrate&&(n.hydrate=!1,_t(n.containerInfo)));case 13:return null!==t.memoizedState&&(qa=ji(),ga(t.child,!0)),void Sa(t);case 19:return void Sa(t);case 23:case 24:return void ga(t,null!==t.memoizedState)}throw Error(o(163))}function Sa(e){var t=e.updateQueue;if(null!==t){e.updateQueue=null;var n=e.stateNode;null===n&&(n=e.stateNode=new da),t.forEach((function(t){var r=zl.bind(null,e,t);n.has(t)||(n.add(t),t.then(r,r))}))}}function Ta(e,t){return null!==e&&(null===(e=e.memoizedState)||null!==e.dehydrated)&&null!==(t=t.memoizedState)&&null===t.dehydrated}var xa=Math.ceil,Ca=_.ReactCurrentDispatcher,Aa=_.ReactCurrentOwner,Na=0,Ra=null,Pa=null,Da=0,Oa=0,La=li(0),Ma=0,Fa=null,Ua=0,Va=0,za=0,Ba=0,ja=null,qa=0,$a=1/0;function Ka(){$a=ji()+500}var Ga,Wa=null,Ha=!1,Qa=null,Ya=null,Ja=!1,Xa=null,Za=90,el=[],tl=[],nl=null,rl=0,il=null,sl=-1,ol=0,al=0,ll=null,ul=!1;function cl(){return 0!=(48&Na)?ji():-1!==sl?sl:sl=ji()}function hl(e){if(0==(2&(e=e.mode)))return 1;if(0==(4&e))return 99===qi()?1:2;if(0===ol&&(ol=Ua),0!==Qi.transition){0!==al&&(al=null!==ja?ja.pendingLanes:0),e=ol;var t=4186112&~al;return 0==(t&=-t)&&0==(t=(e=4186112&~e)&-e)&&(t=8192),t}return e=qi(),e=Vt(0!=(4&Na)&&98===e?12:e=function(e){switch(e){case 99:return 15;case 98:return 10;case 97:case 96:return 8;case 95:return 2;default:return 0}}(e),ol)}function dl(e,t,n){if(50<rl)throw rl=0,il=null,Error(o(185));if(null===(e=fl(e,t)))return null;jt(e,t,n),e===Ra&&(za|=t,4===Ma&&gl(e,Da));var r=qi();1===t?0!=(8&Na)&&0==(48&Na)?yl(e):(pl(e,n),0===Na&&(Ka(),Wi())):(0==(4&Na)||98!==r&&99!==r||(null===nl?nl=new Set([e]):nl.add(e)),pl(e,n)),ja=e}function fl(e,t){e.lanes|=t;var n=e.alternate;for(null!==n&&(n.lanes|=t),n=e,e=e.return;null!==e;)e.childLanes|=t,null!==(n=e.alternate)&&(n.childLanes|=t),n=e,e=e.return;return 3===n.tag?n.stateNode:null}function pl(e,t){for(var n=e.callbackNode,r=e.suspendedLanes,i=e.pingedLanes,s=e.expirationTimes,a=e.pendingLanes;0<a;){var l=31-qt(a),u=1<<l,c=s[l];if(-1===c){if(0==(u&r)||0!=(u&i)){c=t,Mt(u);var h=Lt;s[l]=10<=h?c+250:6<=h?c+5e3:-1}}else c<=t&&(e.expiredLanes|=u);a&=~u}if(r=Ft(e,e===Ra?Da:0),t=Lt,0===r)null!==n&&(n!==Mi&&Ti(n),e.callbackNode=null,e.callbackPriority=0);else{if(null!==n){if(e.callbackPriority===t)return;n!==Mi&&Ti(n)}15===t?(n=yl.bind(null,e),null===Ui?(Ui=[n],Vi=Si(Ri,Hi)):Ui.push(n),n=Mi):14===t?n=Gi(99,yl.bind(null,e)):(n=function(e){switch(e){case 15:case 14:return 99;case 13:case 12:case 11:case 10:return 98;case 9:case 8:case 7:case 6:case 4:case 5:return 97;case 3:case 2:case 1:return 95;case 0:return 90;default:throw Error(o(358,e))}}(t),n=Gi(n,ml.bind(null,e))),e.callbackPriority=t,e.callbackNode=n}}function ml(e){if(sl=-1,al=ol=0,0!=(48&Na))throw Error(o(327));var t=e.callbackNode;if(Dl()&&e.callbackNode!==t)return null;var n=Ft(e,e===Ra?Da:0);if(0===n)return null;var r=n,i=Na;Na|=16;var s=kl();for(Ra===e&&Da===r||(Ka(),El(e,r));;)try{xl();break}catch(t){Il(e,t)}if(ts(),Ca.current=s,Na=i,null!==Pa?r=0:(Ra=null,Da=0,r=Ma),0!=(Ua&za))El(e,0);else if(0!==r){if(2===r&&(Na|=64,e.hydrate&&(e.hydrate=!1,Gr(e.containerInfo)),0!==(n=Ut(e))&&(r=Sl(e,n))),1===r)throw t=Fa,El(e,0),gl(e,n),pl(e,ji()),t;switch(e.finishedWork=e.current.alternate,e.finishedLanes=n,r){case 0:case 1:throw Error(o(345));case 2:case 5:Nl(e);break;case 3:if(gl(e,n),(62914560&n)===n&&10<(r=qa+500-ji())){if(0!==Ft(e,0))break;if(((i=e.suspendedLanes)&n)!==n){cl(),e.pingedLanes|=e.suspendedLanes&i;break}e.timeoutHandle=$r(Nl.bind(null,e),r);break}Nl(e);break;case 4:if(gl(e,n),(4186112&n)===n)break;for(r=e.eventTimes,i=-1;0<n;){var a=31-qt(n);s=1<<a,(a=r[a])>i&&(i=a),n&=~s}if(n=i,10<(n=(120>(n=ji()-n)?120:480>n?480:1080>n?1080:1920>n?1920:3e3>n?3e3:4320>n?4320:1960*xa(n/1960))-n)){e.timeoutHandle=$r(Nl.bind(null,e),n);break}Nl(e);break;default:throw Error(o(329))}}return pl(e,ji()),e.callbackNode===t?ml.bind(null,e):null}function gl(e,t){for(t&=~Ba,t&=~za,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-qt(t),r=1<<n;e[n]=-1,t&=~r}}function yl(e){if(0!=(48&Na))throw Error(o(327));if(Dl(),e===Ra&&0!=(e.expiredLanes&Da)){var t=Da,n=Sl(e,t);0!=(Ua&za)&&(n=Sl(e,t=Ft(e,t)))}else n=Sl(e,t=Ft(e,0));if(0!==e.tag&&2===n&&(Na|=64,e.hydrate&&(e.hydrate=!1,Gr(e.containerInfo)),0!==(t=Ut(e))&&(n=Sl(e,t))),1===n)throw n=Fa,El(e,0),gl(e,t),pl(e,ji()),n;return e.finishedWork=e.current.alternate,e.finishedLanes=t,Nl(e),pl(e,ji()),null}function vl(e,t){var n=Na;Na|=1;try{return e(t)}finally{0===(Na=n)&&(Ka(),Wi())}}function wl(e,t){var n=Na;Na&=-2,Na|=8;try{return e(t)}finally{0===(Na=n)&&(Ka(),Wi())}}function bl(e,t){ci(La,Oa),Oa|=t,Ua|=t}function _l(){Oa=La.current,ui(La)}function El(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(-1!==n&&(e.timeoutHandle=-1,Kr(n)),null!==Pa)for(n=Pa.return;null!==n;){var r=n;switch(r.tag){case 1:null!=(r=r.type.childContextTypes)&&yi();break;case 3:Ds(),ui(fi),ui(di),Hs();break;case 5:Ls(r);break;case 4:Ds();break;case 13:case 19:ui(Ms);break;case 10:ns(r);break;case 23:case 24:_l()}n=n.return}Ra=e,Pa=$l(e.current,null),Da=Oa=Ua=t,Ma=0,Fa=null,Ba=za=Va=0}function Il(e,t){for(;;){var n=Pa;try{if(ts(),Qs.current=Ro,to){for(var r=Xs.memoizedState;null!==r;){var i=r.queue;null!==i&&(i.pending=null),r=r.next}to=!1}if(Js=0,eo=Zs=Xs=null,no=!1,Aa.current=null,null===n||null===n.return){Ma=1,Fa=t,Pa=null;break}e:{var s=e,o=n.return,a=n,l=t;if(t=Da,a.flags|=2048,a.firstEffect=a.lastEffect=null,null!==l&&"object"==typeof l&&"function"==typeof l.then){var u=l;if(0==(2&a.mode)){var c=a.alternate;c?(a.updateQueue=c.updateQueue,a.memoizedState=c.memoizedState,a.lanes=c.lanes):(a.updateQueue=null,a.memoizedState=null)}var h=0!=(1&Ms.current),d=o;do{var f;if(f=13===d.tag){var p=d.memoizedState;if(null!==p)f=null!==p.dehydrated;else{var m=d.memoizedProps;f=void 0!==m.fallback&&(!0!==m.unstable_avoidThisFallback||!h)}}if(f){var g=d.updateQueue;if(null===g){var y=new Set;y.add(u),d.updateQueue=y}else g.add(u);if(0==(2&d.mode)){if(d.flags|=64,a.flags|=16384,a.flags&=-2981,1===a.tag)if(null===a.alternate)a.tag=17;else{var v=us(-1,1);v.tag=2,cs(a,v)}a.lanes|=1;break e}l=void 0,a=t;var w=s.pingCache;if(null===w?(w=s.pingCache=new ua,l=new Set,w.set(u,l)):void 0===(l=w.get(u))&&(l=new Set,w.set(u,l)),!l.has(a)){l.add(a);var b=Vl.bind(null,s,u,a);u.then(b,b)}d.flags|=4096,d.lanes=t;break e}d=d.return}while(null!==d);l=Error((W(a.type)||"A React component")+" suspended while rendering, but no fallback UI was specified.\n\nAdd a <Suspense fallback=...> component higher in the tree to provide a loading indicator or placeholder to display.")}5!==Ma&&(Ma=2),l=aa(l,a),d=o;do{switch(d.tag){case 3:s=l,d.flags|=4096,t&=-t,d.lanes|=t,hs(d,ca(0,s,t));break e;case 1:s=l;var _=d.type,E=d.stateNode;if(0==(64&d.flags)&&("function"==typeof _.getDerivedStateFromError||null!==E&&"function"==typeof E.componentDidCatch&&(null===Ya||!Ya.has(E)))){d.flags|=4096,t&=-t,d.lanes|=t,hs(d,ha(d,s,t));break e}}d=d.return}while(null!==d)}Al(n)}catch(e){t=e,Pa===n&&null!==n&&(Pa=n=n.return);continue}break}}function kl(){var e=Ca.current;return Ca.current=Ro,null===e?Ro:e}function Sl(e,t){var n=Na;Na|=16;var r=kl();for(Ra===e&&Da===t||El(e,t);;)try{Tl();break}catch(t){Il(e,t)}if(ts(),Na=n,Ca.current=r,null!==Pa)throw Error(o(261));return Ra=null,Da=0,Ma}function Tl(){for(;null!==Pa;)Cl(Pa)}function xl(){for(;null!==Pa&&!xi();)Cl(Pa)}function Cl(e){var t=Ga(e.alternate,e,Oa);e.memoizedProps=e.pendingProps,null===t?Al(e):Pa=t,Aa.current=null}function Al(e){var t=e;do{var n=t.alternate;if(e=t.return,0==(2048&t.flags)){if(null!==(n=sa(n,t,Oa)))return void(Pa=n);if(24!==(n=t).tag&&23!==n.tag||null===n.memoizedState||0!=(1073741824&Oa)||0==(4&n.mode)){for(var r=0,i=n.child;null!==i;)r|=i.lanes|i.childLanes,i=i.sibling;n.childLanes=r}null!==e&&0==(2048&e.flags)&&(null===e.firstEffect&&(e.firstEffect=t.firstEffect),null!==t.lastEffect&&(null!==e.lastEffect&&(e.lastEffect.nextEffect=t.firstEffect),e.lastEffect=t.lastEffect),1<t.flags&&(null!==e.lastEffect?e.lastEffect.nextEffect=t:e.firstEffect=t,e.lastEffect=t))}else{if(null!==(n=oa(t)))return n.flags&=2047,void(Pa=n);null!==e&&(e.firstEffect=e.lastEffect=null,e.flags|=2048)}if(null!==(t=t.sibling))return void(Pa=t);Pa=t=e}while(null!==t);0===Ma&&(Ma=5)}function Nl(e){var t=qi();return Ki(99,Rl.bind(null,e,t)),null}function Rl(e,t){do{Dl()}while(null!==Xa);if(0!=(48&Na))throw Error(o(327));var n=e.finishedWork;if(null===n)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(o(177));e.callbackNode=null;var r=n.lanes|n.childLanes,i=r,s=e.pendingLanes&~i;e.pendingLanes=i,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=i,e.mutableReadLanes&=i,e.entangledLanes&=i,i=e.entanglements;for(var a=e.eventTimes,l=e.expirationTimes;0<s;){var u=31-qt(s),c=1<<u;i[u]=0,a[u]=-1,l[u]=-1,s&=~c}if(null!==nl&&0==(24&r)&&nl.has(e)&&nl.delete(e),e===Ra&&(Pa=Ra=null,Da=0),1<n.flags?null!==n.lastEffect?(n.lastEffect.nextEffect=n,r=n.firstEffect):r=n:r=n.firstEffect,null!==r){if(i=Na,Na|=32,Aa.current=null,zr=Ht,gr(a=mr())){if("selectionStart"in a)l={start:a.selectionStart,end:a.selectionEnd};else e:if(l=(l=a.ownerDocument)&&l.defaultView||window,(c=l.getSelection&&l.getSelection())&&0!==c.rangeCount){l=c.anchorNode,s=c.anchorOffset,u=c.focusNode,c=c.focusOffset;try{l.nodeType,u.nodeType}catch(e){l=null;break e}var h=0,d=-1,f=-1,p=0,m=0,g=a,y=null;t:for(;;){for(var v;g!==l||0!==s&&3!==g.nodeType||(d=h+s),g!==u||0!==c&&3!==g.nodeType||(f=h+c),3===g.nodeType&&(h+=g.nodeValue.length),null!==(v=g.firstChild);)y=g,g=v;for(;;){if(g===a)break t;if(y===l&&++p===s&&(d=h),y===u&&++m===c&&(f=h),null!==(v=g.nextSibling))break;y=(g=y).parentNode}g=v}l=-1===d||-1===f?null:{start:d,end:f}}else l=null;l=l||{start:0,end:0}}else l=null;Br={focusedElem:a,selectionRange:l},Ht=!1,ll=null,ul=!1,Wa=r;do{try{Pl()}catch(e){if(null===Wa)throw Error(o(330));Ul(Wa,e),Wa=Wa.nextEffect}}while(null!==Wa);ll=null,Wa=r;do{try{for(a=e;null!==Wa;){var w=Wa.flags;if(16&w&&ye(Wa.stateNode,""),128&w){var b=Wa.alternate;if(null!==b){var _=b.ref;null!==_&&("function"==typeof _?_(null):_.current=null)}}switch(1038&w){case 2:ba(Wa),Wa.flags&=-3;break;case 6:ba(Wa),Wa.flags&=-3,ka(Wa.alternate,Wa);break;case 1024:Wa.flags&=-1025;break;case 1028:Wa.flags&=-1025,ka(Wa.alternate,Wa);break;case 4:ka(Wa.alternate,Wa);break;case 8:Ia(a,l=Wa);var E=l.alternate;va(l),null!==E&&va(E)}Wa=Wa.nextEffect}}catch(e){if(null===Wa)throw Error(o(330));Ul(Wa,e),Wa=Wa.nextEffect}}while(null!==Wa);if(_=Br,b=mr(),w=_.focusedElem,a=_.selectionRange,b!==w&&w&&w.ownerDocument&&pr(w.ownerDocument.documentElement,w)){null!==a&&gr(w)&&(b=a.start,void 0===(_=a.end)&&(_=b),"selectionStart"in w?(w.selectionStart=b,w.selectionEnd=Math.min(_,w.value.length)):(_=(b=w.ownerDocument||document)&&b.defaultView||window).getSelection&&(_=_.getSelection(),l=w.textContent.length,E=Math.min(a.start,l),a=void 0===a.end?E:Math.min(a.end,l),!_.extend&&E>a&&(l=a,a=E,E=l),l=fr(w,E),s=fr(w,a),l&&s&&(1!==_.rangeCount||_.anchorNode!==l.node||_.anchorOffset!==l.offset||_.focusNode!==s.node||_.focusOffset!==s.offset)&&((b=b.createRange()).setStart(l.node,l.offset),_.removeAllRanges(),E>a?(_.addRange(b),_.extend(s.node,s.offset)):(b.setEnd(s.node,s.offset),_.addRange(b))))),b=[];for(_=w;_=_.parentNode;)1===_.nodeType&&b.push({element:_,left:_.scrollLeft,top:_.scrollTop});for("function"==typeof w.focus&&w.focus(),w=0;w<b.length;w++)(_=b[w]).element.scrollLeft=_.left,_.element.scrollTop=_.top}Ht=!!zr,Br=zr=null,e.current=n,Wa=r;do{try{for(w=e;null!==Wa;){var I=Wa.flags;if(36&I&&ma(w,Wa.alternate,Wa),128&I){b=void 0;var k=Wa.ref;if(null!==k){var S=Wa.stateNode;Wa.tag,b=S,"function"==typeof k?k(b):k.current=b}}Wa=Wa.nextEffect}}catch(e){if(null===Wa)throw Error(o(330));Ul(Wa,e),Wa=Wa.nextEffect}}while(null!==Wa);Wa=null,Fi(),Na=i}else e.current=n;if(Ja)Ja=!1,Xa=e,Za=t;else for(Wa=r;null!==Wa;)t=Wa.nextEffect,Wa.nextEffect=null,8&Wa.flags&&((I=Wa).sibling=null,I.stateNode=null),Wa=t;if(0===(r=e.pendingLanes)&&(Ya=null),1===r?e===il?rl++:(rl=0,il=e):rl=0,n=n.stateNode,Ii&&"function"==typeof Ii.onCommitFiberRoot)try{Ii.onCommitFiberRoot(Ei,n,void 0,64==(64&n.current.flags))}catch(e){}if(pl(e,ji()),Ha)throw Ha=!1,e=Qa,Qa=null,e;return 0!=(8&Na)||Wi(),null}function Pl(){for(;null!==Wa;){var e=Wa.alternate;ul||null===ll||(0!=(8&Wa.flags)?Ze(Wa,ll)&&(ul=!0):13===Wa.tag&&Ta(e,Wa)&&Ze(Wa,ll)&&(ul=!0));var t=Wa.flags;0!=(256&t)&&pa(e,Wa),0==(512&t)||Ja||(Ja=!0,Gi(97,(function(){return Dl(),null}))),Wa=Wa.nextEffect}}function Dl(){if(90!==Za){var e=97<Za?97:Za;return Za=90,Ki(e,Ml)}return!1}function Ol(e,t){el.push(t,e),Ja||(Ja=!0,Gi(97,(function(){return Dl(),null})))}function Ll(e,t){tl.push(t,e),Ja||(Ja=!0,Gi(97,(function(){return Dl(),null})))}function Ml(){if(null===Xa)return!1;var e=Xa;if(Xa=null,0!=(48&Na))throw Error(o(331));var t=Na;Na|=32;var n=tl;tl=[];for(var r=0;r<n.length;r+=2){var i=n[r],s=n[r+1],a=i.destroy;if(i.destroy=void 0,"function"==typeof a)try{a()}catch(e){if(null===s)throw Error(o(330));Ul(s,e)}}for(n=el,el=[],r=0;r<n.length;r+=2){i=n[r],s=n[r+1];try{var l=i.create;i.destroy=l()}catch(e){if(null===s)throw Error(o(330));Ul(s,e)}}for(l=e.current.firstEffect;null!==l;)e=l.nextEffect,l.nextEffect=null,8&l.flags&&(l.sibling=null,l.stateNode=null),l=e;return Na=t,Wi(),!0}function Fl(e,t,n){cs(e,t=ca(0,t=aa(n,t),1)),t=cl(),null!==(e=fl(e,1))&&(jt(e,1,t),pl(e,t))}function Ul(e,t){if(3===e.tag)Fl(e,e,t);else for(var n=e.return;null!==n;){if(3===n.tag){Fl(n,e,t);break}if(1===n.tag){var r=n.stateNode;if("function"==typeof n.type.getDerivedStateFromError||"function"==typeof r.componentDidCatch&&(null===Ya||!Ya.has(r))){var i=ha(n,e=aa(t,e),1);if(cs(n,i),i=cl(),null!==(n=fl(n,1)))jt(n,1,i),pl(n,i);else if("function"==typeof r.componentDidCatch&&(null===Ya||!Ya.has(r)))try{r.componentDidCatch(t,e)}catch(e){}break}}n=n.return}}function Vl(e,t,n){var r=e.pingCache;null!==r&&r.delete(t),t=cl(),e.pingedLanes|=e.suspendedLanes&n,Ra===e&&(Da&n)===n&&(4===Ma||3===Ma&&(62914560&Da)===Da&&500>ji()-qa?El(e,0):Ba|=n),pl(e,t)}function zl(e,t){var n=e.stateNode;null!==n&&n.delete(t),0==(t=0)&&(0==(2&(t=e.mode))?t=1:0==(4&t)?t=99===qi()?1:2:(0===ol&&(ol=Ua),0===(t=zt(62914560&~ol))&&(t=4194304))),n=cl(),null!==(e=fl(e,t))&&(jt(e,t,n),pl(e,n))}function Bl(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.flags=0,this.lastEffect=this.firstEffect=this.nextEffect=null,this.childLanes=this.lanes=0,this.alternate=null}function jl(e,t,n,r){return new Bl(e,t,n,r)}function ql(e){return!(!(e=e.prototype)||!e.isReactComponent)}function $l(e,t){var n=e.alternate;return null===n?((n=jl(e.tag,t,e.key,e.mode)).elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.nextEffect=null,n.firstEffect=null,n.lastEffect=null),n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function Kl(e,t,n,r,i,s){var a=2;if(r=e,"function"==typeof e)ql(e)&&(a=1);else if("string"==typeof e)a=5;else e:switch(e){case k:return Gl(n.children,i,s,t);case M:a=8,i|=16;break;case S:a=8,i|=1;break;case T:return(e=jl(12,n,t,8|i)).elementType=T,e.type=T,e.lanes=s,e;case N:return(e=jl(13,n,t,i)).type=N,e.elementType=N,e.lanes=s,e;case R:return(e=jl(19,n,t,i)).elementType=R,e.lanes=s,e;case F:return Wl(n,i,s,t);case U:return(e=jl(24,n,t,i)).elementType=U,e.lanes=s,e;default:if("object"==typeof e&&null!==e)switch(e.$$typeof){case x:a=10;break e;case C:a=9;break e;case A:a=11;break e;case P:a=14;break e;case D:a=16,r=null;break e;case O:a=22;break e}throw Error(o(130,null==e?e:typeof e,""))}return(t=jl(a,n,t,i)).elementType=e,t.type=r,t.lanes=s,t}function Gl(e,t,n,r){return(e=jl(7,e,r,t)).lanes=n,e}function Wl(e,t,n,r){return(e=jl(23,e,r,t)).elementType=F,e.lanes=n,e}function Hl(e,t,n){return(e=jl(6,e,null,t)).lanes=n,e}function Ql(e,t,n){return(t=jl(4,null!==e.children?e.children:[],e.key,t)).lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function Yl(e,t,n){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.pendingContext=this.context=null,this.hydrate=n,this.callbackNode=null,this.callbackPriority=0,this.eventTimes=Bt(0),this.expirationTimes=Bt(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Bt(0),this.mutableSourceEagerHydrationData=null}function Jl(e,t,n,r){var i=t.current,s=cl(),a=hl(i);e:if(n){t:{if(Qe(n=n._reactInternals)!==n||1!==n.tag)throw Error(o(170));var l=n;do{switch(l.tag){case 3:l=l.stateNode.context;break t;case 1:if(gi(l.type)){l=l.stateNode.__reactInternalMemoizedMergedChildContext;break t}}l=l.return}while(null!==l);throw Error(o(171))}if(1===n.tag){var u=n.type;if(gi(u)){n=wi(n,u,l);break e}}n=l}else n=hi;return null===t.context?t.context=n:t.pendingContext=n,(t=us(s,a)).payload={element:e},null!==(r=void 0===r?null:r)&&(t.callback=r),cs(i,t),dl(i,a,s),a}function Xl(e){return(e=e.current).child?(e.child.tag,e.child.stateNode):null}function Zl(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var n=e.retryLane;e.retryLane=0!==n&&n<t?n:t}}function eu(e,t){Zl(e,t),(e=e.alternate)&&Zl(e,t)}function tu(e,t,n){var r=null!=n&&null!=n.hydrationOptions&&n.hydrationOptions.mutableSources||null;if(n=new Yl(e,t,null!=n&&!0===n.hydrate),t=jl(3,null,null,2===t?7:1===t?3:0),n.current=t,t.stateNode=n,as(t),e[Zr]=n.current,Rr(8===e.nodeType?e.parentNode:e),r)for(e=0;e<r.length;e++){var i=(t=r[e])._getVersion;i=i(t._source),null==n.mutableSourceEagerHydrationData?n.mutableSourceEagerHydrationData=[t,i]:n.mutableSourceEagerHydrationData.push(t,i)}this._internalRoot=n}function nu(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType&&(8!==e.nodeType||" react-mount-point-unstable "!==e.nodeValue))}function ru(e,t,n,r,i){var s=n._reactRootContainer;if(s){var o=s._internalRoot;if("function"==typeof i){var a=i;i=function(){var e=Xl(o);a.call(e)}}Jl(t,o,e,i)}else{if(s=n._reactRootContainer=function(e,t){if(t||(t=!(!(t=e?9===e.nodeType?e.documentElement:e.firstChild:null)||1!==t.nodeType||!t.hasAttribute("data-reactroot"))),!t)for(var n;n=e.lastChild;)e.removeChild(n);return new tu(e,0,t?{hydrate:!0}:void 0)}(n,r),o=s._internalRoot,"function"==typeof i){var l=i;i=function(){var e=Xl(o);l.call(e)}}wl((function(){Jl(t,o,e,i)}))}return Xl(o)}function iu(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!nu(t))throw Error(o(200));return function(e,t,n){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:I,key:null==r?null:""+r,children:e,containerInfo:t,implementation:n}}(e,t,null,n)}Ga=function(e,t,n){var r=t.lanes;if(null!==e)if(e.memoizedProps!==t.pendingProps||fi.current)Mo=!0;else{if(0==(n&r)){switch(Mo=!1,t.tag){case 3:Go(t),Gs();break;case 5:Os(t);break;case 1:gi(t.type)&&bi(t);break;case 4:Ps(t,t.stateNode.containerInfo);break;case 10:r=t.memoizedProps.value;var i=t.type._context;ci(Ji,i._currentValue),i._currentValue=r;break;case 13:if(null!==t.memoizedState)return 0!=(n&t.child.childLanes)?Xo(e,t,n):(ci(Ms,1&Ms.current),null!==(t=ra(e,t,n))?t.sibling:null);ci(Ms,1&Ms.current);break;case 19:if(r=0!=(n&t.childLanes),0!=(64&e.flags)){if(r)return na(e,t,n);t.flags|=64}if(null!==(i=t.memoizedState)&&(i.rendering=null,i.tail=null,i.lastEffect=null),ci(Ms,Ms.current),r)break;return null;case 23:case 24:return t.lanes=0,Bo(e,t,n)}return ra(e,t,n)}Mo=0!=(16384&e.flags)}else Mo=!1;switch(t.lanes=0,t.tag){case 2:if(r=t.type,null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2),e=t.pendingProps,i=mi(t,di.current),is(t,n),i=so(null,t,r,e,i,n),t.flags|=1,"object"==typeof i&&null!==i&&"function"==typeof i.render&&void 0===i.$$typeof){if(t.tag=1,t.memoizedState=null,t.updateQueue=null,gi(r)){var s=!0;bi(t)}else s=!1;t.memoizedState=null!==i.state&&void 0!==i.state?i.state:null,as(t);var a=r.getDerivedStateFromProps;"function"==typeof a&&ms(t,r,a,e),i.updater=gs,t.stateNode=i,i._reactInternals=t,bs(t,r,e,n),t=Ko(null,t,r,!0,s,n)}else t.tag=0,Fo(null,t,i,n),t=t.child;return t;case 16:i=t.elementType;e:{switch(null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2),e=t.pendingProps,i=(s=i._init)(i._payload),t.type=i,s=t.tag=function(e){if("function"==typeof e)return ql(e)?1:0;if(null!=e){if((e=e.$$typeof)===A)return 11;if(e===P)return 14}return 2}(i),e=Yi(i,e),s){case 0:t=qo(null,t,i,e,n);break e;case 1:t=$o(null,t,i,e,n);break e;case 11:t=Uo(null,t,i,e,n);break e;case 14:t=Vo(null,t,i,Yi(i.type,e),r,n);break e}throw Error(o(306,i,""))}return t;case 0:return r=t.type,i=t.pendingProps,qo(e,t,r,i=t.elementType===r?i:Yi(r,i),n);case 1:return r=t.type,i=t.pendingProps,$o(e,t,r,i=t.elementType===r?i:Yi(r,i),n);case 3:if(Go(t),r=t.updateQueue,null===e||null===r)throw Error(o(282));if(r=t.pendingProps,i=null!==(i=t.memoizedState)?i.element:null,ls(e,t),ds(t,r,null,n),(r=t.memoizedState.element)===i)Gs(),t=ra(e,t,n);else{if((s=(i=t.stateNode).hydrate)&&(Vs=Wr(t.stateNode.containerInfo.firstChild),Us=t,s=zs=!0),s){if(null!=(e=i.mutableSourceEagerHydrationData))for(i=0;i<e.length;i+=2)(s=e[i])._workInProgressVersionPrimary=e[i+1],Ws.push(s);for(n=Ts(t,null,r,n),t.child=n;n;)n.flags=-3&n.flags|1024,n=n.sibling}else Fo(e,t,r,n),Gs();t=t.child}return t;case 5:return Os(t),null===e&&qs(t),r=t.type,i=t.pendingProps,s=null!==e?e.memoizedProps:null,a=i.children,qr(r,i)?a=null:null!==s&&qr(r,s)&&(t.flags|=16),jo(e,t),Fo(e,t,a,n),t.child;case 6:return null===e&&qs(t),null;case 13:return Xo(e,t,n);case 4:return Ps(t,t.stateNode.containerInfo),r=t.pendingProps,null===e?t.child=Ss(t,null,r,n):Fo(e,t,r,n),t.child;case 11:return r=t.type,i=t.pendingProps,Uo(e,t,r,i=t.elementType===r?i:Yi(r,i),n);case 7:return Fo(e,t,t.pendingProps,n),t.child;case 8:case 12:return Fo(e,t,t.pendingProps.children,n),t.child;case 10:e:{r=t.type._context,i=t.pendingProps,a=t.memoizedProps,s=i.value;var l=t.type._context;if(ci(Ji,l._currentValue),l._currentValue=s,null!==a)if(l=a.value,0==(s=ur(l,s)?0:0|("function"==typeof r._calculateChangedBits?r._calculateChangedBits(l,s):1073741823))){if(a.children===i.children&&!fi.current){t=ra(e,t,n);break e}}else for(null!==(l=t.child)&&(l.return=t);null!==l;){var u=l.dependencies;if(null!==u){a=l.child;for(var c=u.firstContext;null!==c;){if(c.context===r&&0!=(c.observedBits&s)){1===l.tag&&((c=us(-1,n&-n)).tag=2,cs(l,c)),l.lanes|=n,null!==(c=l.alternate)&&(c.lanes|=n),rs(l.return,n),u.lanes|=n;break}c=c.next}}else a=10===l.tag&&l.type===t.type?null:l.child;if(null!==a)a.return=l;else for(a=l;null!==a;){if(a===t){a=null;break}if(null!==(l=a.sibling)){l.return=a.return,a=l;break}a=a.return}l=a}Fo(e,t,i.children,n),t=t.child}return t;case 9:return i=t.type,r=(s=t.pendingProps).children,is(t,n),r=r(i=ss(i,s.unstable_observedBits)),t.flags|=1,Fo(e,t,r,n),t.child;case 14:return s=Yi(i=t.type,t.pendingProps),Vo(e,t,i,s=Yi(i.type,s),r,n);case 15:return zo(e,t,t.type,t.pendingProps,r,n);case 17:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:Yi(r,i),null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2),t.tag=1,gi(r)?(e=!0,bi(t)):e=!1,is(t,n),vs(t,r,i),bs(t,r,i,n),Ko(null,t,r,!0,e,n);case 19:return na(e,t,n);case 23:case 24:return Bo(e,t,n)}throw Error(o(156,t.tag))},tu.prototype.render=function(e){Jl(e,this._internalRoot,null,null)},tu.prototype.unmount=function(){var e=this._internalRoot,t=e.containerInfo;Jl(null,e,null,(function(){t[Zr]=null}))},et=function(e){13===e.tag&&(dl(e,4,cl()),eu(e,4))},tt=function(e){13===e.tag&&(dl(e,67108864,cl()),eu(e,67108864))},nt=function(e){if(13===e.tag){var t=cl(),n=hl(e);dl(e,n,t),eu(e,n)}},rt=function(e,t){return t()},Te=function(e,t,n){switch(t){case"input":if(ne(e,n),t=n.name,"radio"===n.type&&null!=t){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var i=ii(r);if(!i)throw Error(o(90));J(r),ne(r,i)}}}break;case"textarea":ue(e,n);break;case"select":null!=(t=n.value)&&oe(e,!!n.multiple,t,!1)}},Pe=vl,De=function(e,t,n,r,i){var s=Na;Na|=4;try{return Ki(98,e.bind(null,t,n,r,i))}finally{0===(Na=s)&&(Ka(),Wi())}},Oe=function(){0==(49&Na)&&(function(){if(null!==nl){var e=nl;nl=null,e.forEach((function(e){e.expiredLanes|=24&e.pendingLanes,pl(e,ji())}))}Wi()}(),Dl())},Le=function(e,t){var n=Na;Na|=2;try{return e(t)}finally{0===(Na=n)&&(Ka(),Wi())}};var su={Events:[ni,ri,ii,Ne,Re,Dl,{current:!1}]},ou={findFiberByHostInstance:ti,bundleType:0,version:"17.0.2",rendererPackageName:"react-dom"},au={bundleType:ou.bundleType,version:ou.version,rendererPackageName:ou.rendererPackageName,rendererConfig:ou.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:_.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return null===(e=Xe(e))?null:e.stateNode},findFiberByHostInstance:ou.findFiberByHostInstance||function(){return null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null};if("undefined"!=typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var lu=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!lu.isDisabled&&lu.supportsFiber)try{Ei=lu.inject(au),Ii=lu}catch(me){}}t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=su,t.createPortal=iu,t.findDOMNode=function(e){if(null==e)return null;if(1===e.nodeType)return e;var t=e._reactInternals;if(void 0===t){if("function"==typeof e.render)throw Error(o(188));throw Error(o(268,Object.keys(e)))}return null===(e=Xe(t))?null:e.stateNode},t.flushSync=function(e,t){var n=Na;if(0!=(48&n))return e(t);Na|=1;try{if(e)return Ki(99,e.bind(null,t))}finally{Na=n,Wi()}},t.hydrate=function(e,t,n){if(!nu(t))throw Error(o(200));return ru(null,e,t,!0,n)},t.render=function(e,t,n){if(!nu(t))throw Error(o(200));return ru(null,e,t,!1,n)},t.unmountComponentAtNode=function(e){if(!nu(e))throw Error(o(40));return!!e._reactRootContainer&&(wl((function(){ru(null,null,e,!1,(function(){e._reactRootContainer=null,e[Zr]=null}))})),!0)},t.unstable_batchedUpdates=vl,t.unstable_createPortal=function(e,t){return iu(e,t,2<arguments.length&&void 0!==arguments[2]?arguments[2]:null)},t.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!nu(n))throw Error(o(200));if(null==e||void 0===e._reactInternals)throw Error(o(38));return ru(e,t,n,!1,r)},t.version="17.0.2"},935:function(e,t,n){"use strict";!function e(){if("undefined"!=typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(e){console.error(e)}}(),e.exports=n(448)},251:function(e,t,n){"use strict";n(418);var r=n(294),i=60103;if(t.Fragment=60107,"function"==typeof Symbol&&Symbol.for){var s=Symbol.for;i=s("react.element"),t.Fragment=s("react.fragment")}var o=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,a=Object.prototype.hasOwnProperty,l={key:!0,ref:!0,__self:!0,__source:!0};function u(e,t,n){var r,s={},u=null,c=null;for(r in void 0!==n&&(u=""+n),void 0!==t.key&&(u=""+t.key),void 0!==t.ref&&(c=t.ref),t)a.call(t,r)&&!l.hasOwnProperty(r)&&(s[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps)void 0===s[r]&&(s[r]=t[r]);return{$$typeof:i,type:e,key:u,ref:c,props:s,_owner:o.current}}t.jsx=u,t.jsxs=u},408:function(e,t,n){"use strict";var r=n(418),i=60103,s=60106;t.Fragment=60107,t.StrictMode=60108,t.Profiler=60114;var o=60109,a=60110,l=60112;t.Suspense=60113;var u=60115,c=60116;if("function"==typeof Symbol&&Symbol.for){var h=Symbol.for;i=h("react.element"),s=h("react.portal"),t.Fragment=h("react.fragment"),t.StrictMode=h("react.strict_mode"),t.Profiler=h("react.profiler"),o=h("react.provider"),a=h("react.context"),l=h("react.forward_ref"),t.Suspense=h("react.suspense"),u=h("react.memo"),c=h("react.lazy")}var d="function"==typeof Symbol&&Symbol.iterator;function f(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var p={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},m={};function g(e,t,n){this.props=e,this.context=t,this.refs=m,this.updater=n||p}function y(){}function v(e,t,n){this.props=e,this.context=t,this.refs=m,this.updater=n||p}g.prototype.isReactComponent={},g.prototype.setState=function(e,t){if("object"!=typeof e&&"function"!=typeof e&&null!=e)throw Error(f(85));this.updater.enqueueSetState(this,e,t,"setState")},g.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},y.prototype=g.prototype;var w=v.prototype=new y;w.constructor=v,r(w,g.prototype),w.isPureReactComponent=!0;var b={current:null},_=Object.prototype.hasOwnProperty,E={key:!0,ref:!0,__self:!0,__source:!0};function I(e,t,n){var r,s={},o=null,a=null;if(null!=t)for(r in void 0!==t.ref&&(a=t.ref),void 0!==t.key&&(o=""+t.key),t)_.call(t,r)&&!E.hasOwnProperty(r)&&(s[r]=t[r]);var l=arguments.length-2;if(1===l)s.children=n;else if(1<l){for(var u=Array(l),c=0;c<l;c++)u[c]=arguments[c+2];s.children=u}if(e&&e.defaultProps)for(r in l=e.defaultProps)void 0===s[r]&&(s[r]=l[r]);return{$$typeof:i,type:e,key:o,ref:a,props:s,_owner:b.current}}function k(e){return"object"==typeof e&&null!==e&&e.$$typeof===i}var S=/\/+/g;function T(e,t){return"object"==typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,(function(e){return t[e]}))}(""+e.key):t.toString(36)}function x(e,t,n,r,o){var a=typeof e;"undefined"!==a&&"boolean"!==a||(e=null);var l=!1;if(null===e)l=!0;else switch(a){case"string":case"number":l=!0;break;case"object":switch(e.$$typeof){case i:case s:l=!0}}if(l)return o=o(l=e),e=""===r?"."+T(l,0):r,Array.isArray(o)?(n="",null!=e&&(n=e.replace(S,"$&/")+"/"),x(o,t,n,"",(function(e){return e}))):null!=o&&(k(o)&&(o=function(e,t){return{$$typeof:i,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}(o,n+(!o.key||l&&l.key===o.key?"":(""+o.key).replace(S,"$&/")+"/")+e)),t.push(o)),1;if(l=0,r=""===r?".":r+":",Array.isArray(e))for(var u=0;u<e.length;u++){var c=r+T(a=e[u],u);l+=x(a,t,n,c,o)}else if(c=function(e){return null===e||"object"!=typeof e?null:"function"==typeof(e=d&&e[d]||e["@@iterator"])?e:null}(e),"function"==typeof c)for(e=c.call(e),u=0;!(a=e.next()).done;)l+=x(a=a.value,t,n,c=r+T(a,u++),o);else if("object"===a)throw t=""+e,Error(f(31,"[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t));return l}function C(e,t,n){if(null==e)return e;var r=[],i=0;return x(e,r,"","",(function(e){return t.call(n,e,i++)})),r}function A(e){if(-1===e._status){var t=e._result;t=t(),e._status=0,e._result=t,t.then((function(t){0===e._status&&(t=t.default,e._status=1,e._result=t)}),(function(t){0===e._status&&(e._status=2,e._result=t)}))}if(1===e._status)return e._result;throw e._result}var N={current:null};function R(){var e=N.current;if(null===e)throw Error(f(321));return e}var P={ReactCurrentDispatcher:N,ReactCurrentBatchConfig:{transition:0},ReactCurrentOwner:b,IsSomeRendererActing:{current:!1},assign:r};t.Children={map:C,forEach:function(e,t,n){C(e,(function(){t.apply(this,arguments)}),n)},count:function(e){var t=0;return C(e,(function(){t++})),t},toArray:function(e){return C(e,(function(e){return e}))||[]},only:function(e){if(!k(e))throw Error(f(143));return e}},t.Component=g,t.PureComponent=v,t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=P,t.cloneElement=function(e,t,n){if(null==e)throw Error(f(267,e));var s=r({},e.props),o=e.key,a=e.ref,l=e._owner;if(null!=t){if(void 0!==t.ref&&(a=t.ref,l=b.current),void 0!==t.key&&(o=""+t.key),e.type&&e.type.defaultProps)var u=e.type.defaultProps;for(c in t)_.call(t,c)&&!E.hasOwnProperty(c)&&(s[c]=void 0===t[c]&&void 0!==u?u[c]:t[c])}var c=arguments.length-2;if(1===c)s.children=n;else if(1<c){u=Array(c);for(var h=0;h<c;h++)u[h]=arguments[h+2];s.children=u}return{$$typeof:i,type:e.type,key:o,ref:a,props:s,_owner:l}},t.createContext=function(e,t){return void 0===t&&(t=null),(e={$$typeof:a,_calculateChangedBits:t,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null}).Provider={$$typeof:o,_context:e},e.Consumer=e},t.createElement=I,t.createFactory=function(e){var t=I.bind(null,e);return t.type=e,t},t.createRef=function(){return{current:null}},t.forwardRef=function(e){return{$$typeof:l,render:e}},t.isValidElement=k,t.lazy=function(e){return{$$typeof:c,_payload:{_status:-1,_result:e},_init:A}},t.memo=function(e,t){return{$$typeof:u,type:e,compare:void 0===t?null:t}},t.useCallback=function(e,t){return R().useCallback(e,t)},t.useContext=function(e,t){return R().useContext(e,t)},t.useDebugValue=function(){},t.useEffect=function(e,t){return R().useEffect(e,t)},t.useImperativeHandle=function(e,t,n){return R().useImperativeHandle(e,t,n)},t.useLayoutEffect=function(e,t){return R().useLayoutEffect(e,t)},t.useMemo=function(e,t){return R().useMemo(e,t)},t.useReducer=function(e,t,n){return R().useReducer(e,t,n)},t.useRef=function(e){return R().useRef(e)},t.useState=function(e){return R().useState(e)},t.version="17.0.2"},294:function(e,t,n){"use strict";e.exports=n(408)},893:function(e,t,n){"use strict";e.exports=n(251)},53:function(e,t){"use strict";var n,r,i,s;if("object"==typeof performance&&"function"==typeof performance.now){var o=performance;t.unstable_now=function(){return o.now()}}else{var a=Date,l=a.now();t.unstable_now=function(){return a.now()-l}}if("undefined"==typeof window||"function"!=typeof MessageChannel){var u=null,c=null,h=function(){if(null!==u)try{var e=t.unstable_now();u(!0,e),u=null}catch(e){throw setTimeout(h,0),e}};n=function(e){null!==u?setTimeout(n,0,e):(u=e,setTimeout(h,0))},r=function(e,t){c=setTimeout(e,t)},i=function(){clearTimeout(c)},t.unstable_shouldYield=function(){return!1},s=t.unstable_forceFrameRate=function(){}}else{var d=window.setTimeout,f=window.clearTimeout;if("undefined"!=typeof console){var p=window.cancelAnimationFrame;"function"!=typeof window.requestAnimationFrame&&console.error("This browser doesn't support requestAnimationFrame. Make sure that you load a polyfill in older browsers. https://reactjs.org/link/react-polyfills"),"function"!=typeof p&&console.error("This browser doesn't support cancelAnimationFrame. Make sure that you load a polyfill in older browsers. https://reactjs.org/link/react-polyfills")}var m=!1,g=null,y=-1,v=5,w=0;t.unstable_shouldYield=function(){return t.unstable_now()>=w},s=function(){},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):v=0<e?Math.floor(1e3/e):5};var b=new MessageChannel,_=b.port2;b.port1.onmessage=function(){if(null!==g){var e=t.unstable_now();w=e+v;try{g(!0,e)?_.postMessage(null):(m=!1,g=null)}catch(e){throw _.postMessage(null),e}}else m=!1},n=function(e){g=e,m||(m=!0,_.postMessage(null))},r=function(e,n){y=d((function(){e(t.unstable_now())}),n)},i=function(){f(y),y=-1}}function E(e,t){var n=e.length;e.push(t);e:for(;;){var r=n-1>>>1,i=e[r];if(!(void 0!==i&&0<S(i,t)))break e;e[r]=t,e[n]=i,n=r}}function I(e){return void 0===(e=e[0])?null:e}function k(e){var t=e[0];if(void 0!==t){var n=e.pop();if(n!==t){e[0]=n;e:for(var r=0,i=e.length;r<i;){var s=2*(r+1)-1,o=e[s],a=s+1,l=e[a];if(void 0!==o&&0>S(o,n))void 0!==l&&0>S(l,o)?(e[r]=l,e[a]=n,r=a):(e[r]=o,e[s]=n,r=s);else{if(!(void 0!==l&&0>S(l,n)))break e;e[r]=l,e[a]=n,r=a}}}return t}return null}function S(e,t){var n=e.sortIndex-t.sortIndex;return 0!==n?n:e.id-t.id}var T=[],x=[],C=1,A=null,N=3,R=!1,P=!1,D=!1;function O(e){for(var t=I(x);null!==t;){if(null===t.callback)k(x);else{if(!(t.startTime<=e))break;k(x),t.sortIndex=t.expirationTime,E(T,t)}t=I(x)}}function L(e){if(D=!1,O(e),!P)if(null!==I(T))P=!0,n(M);else{var t=I(x);null!==t&&r(L,t.startTime-e)}}function M(e,n){P=!1,D&&(D=!1,i()),R=!0;var s=N;try{for(O(n),A=I(T);null!==A&&(!(A.expirationTime>n)||e&&!t.unstable_shouldYield());){var o=A.callback;if("function"==typeof o){A.callback=null,N=A.priorityLevel;var a=o(A.expirationTime<=n);n=t.unstable_now(),"function"==typeof a?A.callback=a:A===I(T)&&k(T),O(n)}else k(T);A=I(T)}if(null!==A)var l=!0;else{var u=I(x);null!==u&&r(L,u.startTime-n),l=!1}return l}finally{A=null,N=s,R=!1}}var F=s;t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_continueExecution=function(){P||R||(P=!0,n(M))},t.unstable_getCurrentPriorityLevel=function(){return N},t.unstable_getFirstCallbackNode=function(){return I(T)},t.unstable_next=function(e){switch(N){case 1:case 2:case 3:var t=3;break;default:t=N}var n=N;N=t;try{return e()}finally{N=n}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=F,t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=N;N=e;try{return t()}finally{N=n}},t.unstable_scheduleCallback=function(e,s,o){var a=t.unstable_now();switch(o="object"==typeof o&&null!==o&&"number"==typeof(o=o.delay)&&0<o?a+o:a,e){case 1:var l=-1;break;case 2:l=250;break;case 5:l=1073741823;break;case 4:l=1e4;break;default:l=5e3}return e={id:C++,callback:s,priorityLevel:e,startTime:o,expirationTime:l=o+l,sortIndex:-1},o>a?(e.sortIndex=o,E(x,e),null===I(T)&&e===I(x)&&(D?i():D=!0,r(L,o-a))):(e.sortIndex=l,E(T,e),P||R||(P=!0,n(M))),e},t.unstable_wrapCallback=function(e){var t=N;return function(){var n=N;N=t;try{return e.apply(this,arguments)}finally{N=n}}}},840:function(e,t,n){"use strict";e.exports=n(53)},379:function(e){"use strict";var t=[];function n(e){for(var n=-1,r=0;r<t.length;r++)if(t[r].identifier===e){n=r;break}return n}function r(e,r){for(var s={},o=[],a=0;a<e.length;a++){var l=e[a],u=r.base?l[0]+r.base:l[0],c=s[u]||0,h="".concat(u," ").concat(c);s[u]=c+1;var d=n(h),f={css:l[1],media:l[2],sourceMap:l[3],supports:l[4],layer:l[5]};if(-1!==d)t[d].references++,t[d].updater(f);else{var p=i(f,r);r.byIndex=a,t.splice(a,0,{identifier:h,updater:p,references:1})}o.push(h)}return o}function i(e,t){var n=t.domAPI(t);return n.update(e),function(t){if(t){if(t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap&&t.supports===e.supports&&t.layer===e.layer)return;n.update(e=t)}else n.remove()}}e.exports=function(e,i){var s=r(e=e||[],i=i||{});return function(e){e=e||[];for(var o=0;o<s.length;o++){var a=n(s[o]);t[a].references--}for(var l=r(e,i),u=0;u<s.length;u++){var c=n(s[u]);0===t[c].references&&(t[c].updater(),t.splice(c,1))}s=l}}},569:function(e){"use strict";var t={};e.exports=function(e,n){var r=function(e){if(void 0===t[e]){var n=document.querySelector(e);if(window.HTMLIFrameElement&&n instanceof window.HTMLIFrameElement)try{n=n.contentDocument.head}catch(e){n=null}t[e]=n}return t[e]}(e);if(!r)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");r.appendChild(n)}},216:function(e){"use strict";e.exports=function(e){var t=document.createElement("style");return e.setAttributes(t,e.attributes),e.insert(t,e.options),t}},565:function(e,t,n){"use strict";e.exports=function(e){var t=n.nc;t&&e.setAttribute("nonce",t)}},795:function(e){"use strict";e.exports=function(e){if("undefined"==typeof document)return{update:function(){},remove:function(){}};var t=e.insertStyleElement(e);return{update:function(n){!function(e,t,n){var r="";n.supports&&(r+="@supports (".concat(n.supports,") {")),n.media&&(r+="@media ".concat(n.media," {"));var i=void 0!==n.layer;i&&(r+="@layer".concat(n.layer.length>0?" ".concat(n.layer):""," {")),r+=n.css,i&&(r+="}"),n.media&&(r+="}"),n.supports&&(r+="}");var s=n.sourceMap;s&&"undefined"!=typeof btoa&&(r+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(s))))," */")),t.styleTagTransform(r,e,t.options)}(t,e,n)},remove:function(){!function(e){if(null===e.parentNode)return!1;e.parentNode.removeChild(e)}(t)}}}},589:function(e){"use strict";e.exports=function(e,t){if(t.styleSheet)t.styleSheet.cssText=e;else{for(;t.firstChild;)t.removeChild(t.firstChild);t.appendChild(document.createTextNode(e))}}},836:function(e){e.exports=function(e){return e&&e.__esModule?e:{default:e}},e.exports.__esModule=!0,e.exports.default=e.exports}},r={};function i(e){var t=r[e];if(void 0!==t)return t.exports;var s=r[e]={id:e,exports:{}};return n[e](s,s.exports,i),s.exports}i.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return i.d(t,{a:t}),t},t=Object.getPrototypeOf?function(e){return Object.getPrototypeOf(e)}:function(e){return e.__proto__},i.t=function(n,r){if(1&r&&(n=this(n)),8&r)return n;if("object"==typeof n&&n){if(4&r&&n.__esModule)return n;if(16&r&&"function"==typeof n.then)return n}var s=Object.create(null);i.r(s);var o={};e=e||[null,t({}),t([]),t(t)];for(var a=2&r&&n;"object"==typeof a&&!~e.indexOf(a);a=t(a))Object.getOwnPropertyNames(a).forEach((function(e){o[e]=function(){return n[e]}}));return o.default=function(){return n},i.d(s,o),s},i.d=function(e,t){for(var n in t)i.o(t,n)&&!i.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},i.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.nc=void 0,function(){"use strict";var e={};i.r(e),i.d(e,{FirebaseError:function(){return St},SDK_VERSION:function(){return An},_DEFAULT_ENTRY_NAME:function(){return yn},_addComponent:function(){return _n},_addOrOverwriteComponent:function(){return En},_apps:function(){return wn},_clearComponents:function(){return Tn},_components:function(){return bn},_getProvider:function(){return kn},_registerComponent:function(){return In},_removeServiceInstance:function(){return Sn},deleteApp:function(){return Dn},getApp:function(){return Rn},getApps:function(){return Pn},initializeApp:function(){return Nn},onLog:function(){return Ln},registerVersion:function(){return On},setLogLevel:function(){return Mn}});var t=i(294),n=i.t(t,2),r=i(935),s=i(379),o=i.n(s),a=i(795),l=i.n(a),u=i(569),c=i.n(u),h=i(565),d=i.n(h),f=i(216),p=i.n(f),m=i(589),g=i.n(m),y=i(424),v={};v.styleTagTransform=g(),v.setAttributes=d(),v.insert=c().bind(null,"head"),v.domAPI=l(),v.insertStyleElement=p(),o()(y.Z,v),y.Z&&y.Z.locals&&y.Z.locals;var w=i(87),b={};b.styleTagTransform=g(),b.setAttributes=d(),b.insert=c().bind(null,"head"),b.domAPI=l(),b.insertStyleElement=p(),o()(w.Z,b),w.Z&&w.Z.locals&&w.Z.locals;var _=i(469),E={};E.styleTagTransform=g(),E.setAttributes=d(),E.insert=c().bind(null,"head"),E.domAPI=l(),E.insertStyleElement=p(),o()(_.Z,E),_.Z&&_.Z.locals&&_.Z.locals;var I=i(225),k={};k.styleTagTransform=g(),k.setAttributes=d(),k.insert=c().bind(null,"head"),k.domAPI=l(),k.insertStyleElement=p(),o()(I.Z,k),I.Z&&I.Z.locals&&I.Z.locals;const S=(0,t.createContext)(),T=({reducer:e,initialState:n,children:r})=>React.createElement(S.Provider,{value:(0,t.useReducer)(e,n)},r),x=()=>(0,t.useContext)(S);var C=function({id:e,title:n,image:r,price:i,rating:s}){const[o,a]=x();return t.createElement("div",{className:"product"},t.createElement("div",{className:"product__info"},t.createElement("p",null,n),t.createElement("p",{className:"product__price"},t.createElement("small",null,"£"),t.createElement("strong",null,i)),t.createElement("div",{className:"product__rating"},Array(s).fill().map(((e,n)=>t.createElement("p",{key:n},"⭐"))))),t.createElement("img",{src:r,alt:""}),t.createElement("button",{onClick:()=>{a({type:"ADD_TO_BASKET",item:{id:e,image:r,price:i,rating:s}})}},"Add to Basket"))},A=function(){return t.createElement("div",{className:"home"},t.createElement("div",{className:"home__container"},t.createElement("img",{src:"https://www.x-cart.com/wp-content/uploads/2019/01/ecommerce-768x278.jpg",alt:"",className:"home__image"}),t.createElement("div",{className:"home__row"},t.createElement(C,{id:"12321341",title:"Bennett Mystic 15.6 inch Laptop Shoulder Messenger Sling Office Bag, Water Repellent Fabric for Men and Women (Blue)",price:11.96,rating:5,image:"https://images-na.ssl-images-amazon.com/images/I/71mEsHyzSCL._SL1000_.jpg"}),t.createElement(C,{id:"49538094",title:"IFB 30 L Convection Microwave Oven (30BRC2, Black, With Starter Kit)",price:239,rating:4,image:"https://images-na.ssl-images-amazon.com/images/I/81D8pNFmWzL._SL1500_.jpg"})),t.createElement("div",{className:"home__row"},t.createElement(C,{id:"4903850",title:"TV",price:199.99,rating:3,image:"https://res.cloudinary.com/sharp-consumer-eu/image/fetch/w_3000,f_auto/https://s3.infra.brandquad.io/accounts-media/SHRP/DAM/origin/326ac5f6-6cea-11ea-b76b-e2581aee4843.jpg"}),t.createElement(C,{id:"23445930",title:"Amazon Echo (3rd generation) | Smart speaker with Alexa, Charcoal Fabric",price:98.99,rating:5,image:"https://media.very.co.uk/i/very/P6LTG_SQ1_0000000071_CHARCOAL_SLf?$300x400_retinamobilex2$"}),t.createElement(C,{id:"3254354345",title:"Washing machine - Silver (4th Generation)",price:598.99,rating:4,image:"https://storage.beko.co.uk/blomberg2018products/large/2Blomberg_WashingMachine_LWF28442G_Manhattan_FrontClosed.jpg"})),t.createElement("div",{className:"home__row"},t.createElement(C,{id:"90829332",title:"Samsung LC49RG90SSUXEN 49' Curved LED Gaming Monitor - Super Ultra Wide Dual WQHD 5120 x 1440",price:1094.98,rating:4,image:"https://images-na.ssl-images-amazon.com/images/I/6125mFrzr6L._AC_SX355_.jpg"}))))},N=i(491),R={};R.styleTagTransform=g(),R.setAttributes=d(),R.insert=c().bind(null,"head"),R.domAPI=l(),R.insertStyleElement=p(),o()(N.Z,R),N.Z&&N.Z.locals&&N.Z.locals;var P,D=i(510),O=i(595),L=i(761);function M(){return M=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},M.apply(this,arguments)}!function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"}(P||(P={}));const F="popstate";function U(e,t){if(!1===e||null==e)throw new Error(t)}function V(e,t){if(!e){"undefined"!=typeof console&&console.warn(t);try{throw new Error(t)}catch(e){}}}function z(e,t){return{usr:e.state,key:e.key,idx:t}}function B(e,t,n,r){return void 0===n&&(n=null),M({pathname:"string"==typeof e?e:e.pathname,search:"",hash:""},"string"==typeof t?q(t):t,{state:n,key:t&&t.key||r||Math.random().toString(36).substr(2,8)})}function j(e){let{pathname:t="/",search:n="",hash:r=""}=e;return n&&"?"!==n&&(t+="?"===n.charAt(0)?n:"?"+n),r&&"#"!==r&&(t+="#"===r.charAt(0)?r:"#"+r),t}function q(e){let t={};if(e){let n=e.indexOf("#");n>=0&&(t.hash=e.substr(n),e=e.substr(0,n));let r=e.indexOf("?");r>=0&&(t.search=e.substr(r),e=e.substr(0,r)),e&&(t.pathname=e)}return t}var $;function K(e,t,n){void 0===n&&(n="/");let r=se(("string"==typeof t?q(t):t).pathname||"/",n);if(null==r)return null;let i=G(e);!function(e){e.sort(((e,t)=>e.score!==t.score?t.score-e.score:function(e,t){return e.length===t.length&&e.slice(0,-1).every(((e,n)=>e===t[n]))?e[e.length-1]-t[t.length-1]:0}(e.routesMeta.map((e=>e.childrenIndex)),t.routesMeta.map((e=>e.childrenIndex)))))}(i);let s=null;for(let e=0;null==s&&e<i.length;++e)s=ne(i[e],ie(r));return s}function G(e,t,n,r){void 0===t&&(t=[]),void 0===n&&(n=[]),void 0===r&&(r="");let i=(e,i,s)=>{let o={relativePath:void 0===s?e.path||"":s,caseSensitive:!0===e.caseSensitive,childrenIndex:i,route:e};o.relativePath.startsWith("/")&&(U(o.relativePath.startsWith(r),'Absolute route path "'+o.relativePath+'" nested under path "'+r+'" is not valid. An absolute child route path must start with the combined path of all its parent routes.'),o.relativePath=o.relativePath.slice(r.length));let a=ue([r,o.relativePath]),l=n.concat(o);e.children&&e.children.length>0&&(U(!0!==e.index,'Index routes must not have child routes. Please remove all child routes from route path "'+a+'".'),G(e.children,t,l,a)),(null!=e.path||e.index)&&t.push({path:a,score:te(a,e.index),routesMeta:l})};return e.forEach(((e,t)=>{var n;if(""!==e.path&&null!=(n=e.path)&&n.includes("?"))for(let n of W(e.path))i(e,t,n);else i(e,t)})),t}function W(e){let t=e.split("/");if(0===t.length)return[];let[n,...r]=t,i=n.endsWith("?"),s=n.replace(/\?$/,"");if(0===r.length)return i?[s,""]:[s];let o=W(r.join("/")),a=[];return a.push(...o.map((e=>""===e?s:[s,e].join("/")))),i&&a.push(...o),a.map((t=>e.startsWith("/")&&""===t?"/":t))}!function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"}($||($={})),new Set(["lazy","caseSensitive","path","id","index","children"]);const H=/^:\w+$/,Q=3,Y=2,J=1,X=10,Z=-2,ee=e=>"*"===e;function te(e,t){let n=e.split("/"),r=n.length;return n.some(ee)&&(r+=Z),t&&(r+=Y),n.filter((e=>!ee(e))).reduce(((e,t)=>e+(H.test(t)?Q:""===t?J:X)),r)}function ne(e,t){let{routesMeta:n}=e,r={},i="/",s=[];for(let e=0;e<n.length;++e){let o=n[e],a=e===n.length-1,l="/"===i?t:t.slice(i.length)||"/",u=re({path:o.relativePath,caseSensitive:o.caseSensitive,end:a},l);if(!u)return null;Object.assign(r,u.params);let c=o.route;s.push({params:r,pathname:ue([i,u.pathname]),pathnameBase:ce(ue([i,u.pathnameBase])),route:c}),"/"!==u.pathnameBase&&(i=ue([i,u.pathnameBase]))}return s}function re(e,t){"string"==typeof e&&(e={path:e,caseSensitive:!1,end:!0});let[n,r]=function(e,t,n){void 0===t&&(t=!1),void 0===n&&(n=!0),V("*"===e||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were "'+e.replace(/\*$/,"/*")+'" because the `*` character must always follow a `/` in the pattern. To get rid of this warning, please change the route path to "'+e.replace(/\*$/,"/*")+'".');let r=[],i="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^$?{}|()[\]]/g,"\\$&").replace(/\/:(\w+)/g,((e,t)=>(r.push(t),"/([^\\/]+)")));return e.endsWith("*")?(r.push("*"),i+="*"===e||"/*"===e?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?i+="\\/*$":""!==e&&"/"!==e&&(i+="(?:(?=\\/|$))"),[new RegExp(i,t?void 0:"i"),r]}(e.path,e.caseSensitive,e.end),i=t.match(n);if(!i)return null;let s=i[0],o=s.replace(/(.)\/+$/,"$1"),a=i.slice(1);return{params:r.reduce(((e,t,n)=>{if("*"===t){let e=a[n]||"";o=s.slice(0,s.length-e.length).replace(/(.)\/+$/,"$1")}return e[t]=function(e,t){try{return decodeURIComponent(e)}catch(n){return V(!1,'The value for the URL param "'+t+'" will not be decoded because the string "'+e+'" is a malformed URL segment. This is probably due to a bad percent encoding ('+n+")."),e}}(a[n]||"",t),e}),{}),pathname:s,pathnameBase:o,pattern:e}}function ie(e){try{return decodeURI(e)}catch(t){return V(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent encoding ('+t+")."),e}}function se(e,t){if("/"===t)return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let n=t.endsWith("/")?t.length-1:t.length,r=e.charAt(n);return r&&"/"!==r?null:e.slice(n)||"/"}function oe(e,t,n,r){return"Cannot include a '"+e+"' character in a manually specified `to."+t+"` field ["+JSON.stringify(r)+"].  Please separate it out to the `to."+n+'` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.'}function ae(e){return e.filter(((e,t)=>0===t||e.route.path&&e.route.path.length>0))}function le(e,t,n,r){let i;void 0===r&&(r=!1),"string"==typeof e?i=q(e):(i=M({},e),U(!i.pathname||!i.pathname.includes("?"),oe("?","pathname","search",i)),U(!i.pathname||!i.pathname.includes("#"),oe("#","pathname","hash",i)),U(!i.search||!i.search.includes("#"),oe("#","search","hash",i)));let s,o=""===e||""===i.pathname,a=o?"/":i.pathname;if(r||null==a)s=n;else{let e=t.length-1;if(a.startsWith("..")){let t=a.split("/");for(;".."===t[0];)t.shift(),e-=1;i.pathname=t.join("/")}s=e>=0?t[e]:"/"}let l=function(e,t){void 0===t&&(t="/");let{pathname:n,search:r="",hash:i=""}="string"==typeof e?q(e):e,s=n?n.startsWith("/")?n:function(e,t){let n=t.replace(/\/+$/,"").split("/");return e.split("/").forEach((e=>{".."===e?n.length>1&&n.pop():"."!==e&&n.push(e)})),n.length>1?n.join("/"):"/"}(n,t):t;return{pathname:s,search:he(r),hash:de(i)}}(i,s),u=a&&"/"!==a&&a.endsWith("/"),c=(o||"."===a)&&n.endsWith("/");return l.pathname.endsWith("/")||!u&&!c||(l.pathname+="/"),l}const ue=e=>e.join("/").replace(/\/\/+/g,"/"),ce=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),he=e=>e&&"?"!==e?e.startsWith("?")?e:"?"+e:"",de=e=>e&&"#"!==e?e.startsWith("#")?e:"#"+e:"";Error;const fe=["post","put","patch","delete"],pe=(new Set(fe),["get",...fe]);function me(){return me=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},me.apply(this,arguments)}new Set(pe),new Set([301,302,303,307,308]),new Set([307,308]),Symbol("deferred");const ge=t.createContext(null),ye=t.createContext(null),ve=t.createContext(null),we=t.createContext(null),be=t.createContext({outlet:null,matches:[],isDataRoute:!1}),_e=t.createContext(null);function Ee(){return null!=t.useContext(we)}function Ie(){return Ee()||U(!1),t.useContext(we).location}function ke(e){t.useContext(ve).static||t.useLayoutEffect(e)}function Se(){let{isDataRoute:e}=t.useContext(be);return e?function(){let{router:e}=function(e){let n=t.useContext(ge);return n||U(!1),n}(Pe.UseNavigateStable),n=Le(De.UseNavigateStable),r=t.useRef(!1);ke((()=>{r.current=!0}));let i=t.useCallback((function(t,i){void 0===i&&(i={}),r.current&&("number"==typeof t?e.navigate(t):e.navigate(t,me({fromRouteId:n},i)))}),[e,n]);return i}():function(){Ee()||U(!1);let e=t.useContext(ge),{basename:n,navigator:r}=t.useContext(ve),{matches:i}=t.useContext(be),{pathname:s}=Ie(),o=JSON.stringify(ae(i).map((e=>e.pathnameBase))),a=t.useRef(!1);ke((()=>{a.current=!0}));let l=t.useCallback((function(t,i){if(void 0===i&&(i={}),!a.current)return;if("number"==typeof t)return void r.go(t);let l=le(t,JSON.parse(o),s,"path"===i.relative);null==e&&"/"!==n&&(l.pathname="/"===l.pathname?n:ue([n,l.pathname])),(i.replace?r.replace:r.push)(l,i.state,i)}),[n,r,o,s,e]);return l}()}function Te(e,n){let{relative:r}=void 0===n?{}:n,{matches:i}=t.useContext(be),{pathname:s}=Ie(),o=JSON.stringify(ae(i).map((e=>e.pathnameBase)));return t.useMemo((()=>le(e,JSON.parse(o),s,"path"===r)),[e,o,s,r])}function xe(e,n,r){Ee()||U(!1);let{navigator:i}=t.useContext(ve),{matches:s}=t.useContext(be),o=s[s.length-1],a=o?o.params:{},l=(o&&o.pathname,o?o.pathnameBase:"/");o&&o.route;let u,c=Ie();if(n){var h;let e="string"==typeof n?q(n):n;"/"===l||(null==(h=e.pathname)?void 0:h.startsWith(l))||U(!1),u=e}else u=c;let d=u.pathname||"/",f=K(e,{pathname:"/"===l?d:d.slice(l.length)||"/"}),p=function(e,n,r){var i;if(void 0===n&&(n=[]),void 0===r&&(r=null),null==e){var s;if(null==(s=r)||!s.errors)return null;e=r.matches}let o=e,a=null==(i=r)?void 0:i.errors;if(null!=a){let e=o.findIndex((e=>e.route.id&&(null==a?void 0:a[e.route.id])));e>=0||U(!1),o=o.slice(0,Math.min(o.length,e+1))}return o.reduceRight(((e,i,s)=>{let l=i.route.id?null==a?void 0:a[i.route.id]:null,u=null;r&&(u=i.route.errorElement||Ae);let c=n.concat(o.slice(0,s+1)),h=()=>{let n;return n=l?u:i.route.Component?t.createElement(i.route.Component,null):i.route.element?i.route.element:e,t.createElement(Re,{match:i,routeContext:{outlet:e,matches:c,isDataRoute:null!=r},children:n})};return r&&(i.route.ErrorBoundary||i.route.errorElement||0===s)?t.createElement(Ne,{location:r.location,revalidation:r.revalidation,component:u,error:l,children:h(),routeContext:{outlet:null,matches:c,isDataRoute:!0}}):h()}),null)}(f&&f.map((e=>Object.assign({},e,{params:Object.assign({},a,e.params),pathname:ue([l,i.encodeLocation?i.encodeLocation(e.pathname).pathname:e.pathname]),pathnameBase:"/"===e.pathnameBase?l:ue([l,i.encodeLocation?i.encodeLocation(e.pathnameBase).pathname:e.pathnameBase])}))),s,r);return n&&p?t.createElement(we.Provider,{value:{location:me({pathname:"/",search:"",hash:"",state:null,key:"default"},u),navigationType:P.Pop}},p):p}function Ce(){let e=function(){var e;let n=t.useContext(_e),r=function(e){let n=t.useContext(ye);return n||U(!1),n}(De.UseRouteError),i=Le(De.UseRouteError);return n||(null==(e=r.errors)?void 0:e[i])}(),n=function(e){return null!=e&&"number"==typeof e.status&&"string"==typeof e.statusText&&"boolean"==typeof e.internal&&"data"in e}(e)?e.status+" "+e.statusText:e instanceof Error?e.message:JSON.stringify(e),r=e instanceof Error?e.stack:null,i={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return t.createElement(t.Fragment,null,t.createElement("h2",null,"Unexpected Application Error!"),t.createElement("h3",{style:{fontStyle:"italic"}},n),r?t.createElement("pre",{style:i},r):null,null)}const Ae=t.createElement(Ce,null);class Ne extends t.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,t){return t.location!==e.location||"idle"!==t.revalidation&&"idle"===e.revalidation?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error||t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}componentDidCatch(e,t){console.error("React Router caught the following error during render",e,t)}render(){return this.state.error?t.createElement(be.Provider,{value:this.props.routeContext},t.createElement(_e.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function Re(e){let{routeContext:n,match:r,children:i}=e,s=t.useContext(ge);return s&&s.static&&s.staticContext&&(r.route.errorElement||r.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=r.route.id),t.createElement(be.Provider,{value:n},i)}var Pe,De,Oe;function Le(e){let n=function(e){let n=t.useContext(be);return n||U(!1),n}(),r=n.matches[n.matches.length-1];return r.route.id||U(!1),r.route.id}function Me(e){U(!1)}function Fe(e){let{basename:n="/",children:r=null,location:i,navigationType:s=P.Pop,navigator:o,static:a=!1}=e;Ee()&&U(!1);let l=n.replace(/^\/*/,"/"),u=t.useMemo((()=>({basename:l,navigator:o,static:a})),[l,o,a]);"string"==typeof i&&(i=q(i));let{pathname:c="/",search:h="",hash:d="",state:f=null,key:p="default"}=i,m=t.useMemo((()=>{let e=se(c,l);return null==e?null:{location:{pathname:e,search:h,hash:d,state:f,key:p},navigationType:s}}),[l,c,h,d,f,p,s]);return null==m?null:t.createElement(ve.Provider,{value:u},t.createElement(we.Provider,{children:r,value:m}))}function Ue(e){let{children:t,location:n}=e;return xe(Ve(t),n)}function Ve(e,n){void 0===n&&(n=[]);let r=[];return t.Children.forEach(e,((e,i)=>{if(!t.isValidElement(e))return;let s=[...n,i];if(e.type===t.Fragment)return void r.push.apply(r,Ve(e.props.children,s));e.type!==Me&&U(!1),e.props.index&&e.props.children&&U(!1);let o={id:e.props.id||s.join("-"),caseSensitive:e.props.caseSensitive,element:e.props.element,Component:e.props.Component,index:e.props.index,path:e.props.path,loader:e.props.loader,action:e.props.action,errorElement:e.props.errorElement,ErrorBoundary:e.props.ErrorBoundary,hasErrorBoundary:null!=e.props.ErrorBoundary||null!=e.props.errorElement,shouldRevalidate:e.props.shouldRevalidate,handle:e.props.handle,lazy:e.props.lazy};e.props.children&&(o.children=Ve(e.props.children,s)),r.push(o)})),r}function ze(){return ze=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},ze.apply(this,arguments)}!function(e){e.UseBlocker="useBlocker",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate"}(Pe||(Pe={})),function(e){e.UseBlocker="useBlocker",e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e.UseRouteId="useRouteId"}(De||(De={})),n.startTransition,function(e){e[e.pending=0]="pending",e[e.success=1]="success",e[e.error=2]="error"}(Oe||(Oe={})),new Promise((()=>{})),t.Component,new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);const Be=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset"],je=n.startTransition;function qe(e){let{basename:n,children:r,future:i,window:s}=e,o=t.useRef();null==o.current&&(o.current=function(e){return void 0===e&&(e={}),function(e,t,n,r){void 0===r&&(r={});let{window:i=document.defaultView,v5Compat:s=!1}=r,o=i.history,a=P.Pop,l=null,u=c();function c(){return(o.state||{idx:null}).idx}function h(){a=P.Pop;let e=c(),t=null==e?null:e-u;u=e,l&&l({action:a,location:f.location,delta:t})}function d(e){let t="null"!==i.location.origin?i.location.origin:i.location.href,n="string"==typeof e?e:j(e);return U(t,"No window.location.(origin|href) available to create URL for href: "+n),new URL(n,t)}null==u&&(u=0,o.replaceState(M({},o.state,{idx:u}),""));let f={get action(){return a},get location(){return e(i,o)},listen(e){if(l)throw new Error("A history only accepts one active listener");return i.addEventListener(F,h),l=e,()=>{i.removeEventListener(F,h),l=null}},createHref(e){return t(i,e)},createURL:d,encodeLocation(e){let t=d(e);return{pathname:t.pathname,search:t.search,hash:t.hash}},push:function(e,t){a=P.Push;let r=B(f.location,e,t);n&&n(r,e),u=c()+1;let h=z(r,u),d=f.createHref(r);try{o.pushState(h,"",d)}catch(e){if(e instanceof DOMException&&"DataCloneError"===e.name)throw e;i.location.assign(d)}s&&l&&l({action:a,location:f.location,delta:1})},replace:function(e,t){a=P.Replace;let r=B(f.location,e,t);n&&n(r,e),u=c();let i=z(r,u),h=f.createHref(r);o.replaceState(i,"",h),s&&l&&l({action:a,location:f.location,delta:0})},go(e){return o.go(e)}};return f}((function(e,t){let{pathname:n,search:r,hash:i}=e.location;return B("",{pathname:n,search:r,hash:i},t.state&&t.state.usr||null,t.state&&t.state.key||"default")}),(function(e,t){return"string"==typeof t?t:j(t)}),null,e)}({window:s,v5Compat:!0}));let a=o.current,[l,u]=t.useState({action:a.action,location:a.location}),{v7_startTransition:c}=i||{},h=t.useCallback((e=>{c&&je?je((()=>u(e))):u(e)}),[u,c]);return t.useLayoutEffect((()=>a.listen(h)),[a,h]),t.createElement(Fe,{basename:n,children:r,location:l.location,navigationType:l.action,navigator:a})}const $e="undefined"!=typeof window&&void 0!==window.document&&void 0!==window.document.createElement,Ke=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Ge=t.forwardRef((function(e,n){let r,{onClick:i,relative:s,reloadDocument:o,replace:a,state:l,target:u,to:c,preventScrollReset:h}=e,d=function(e,t){if(null==e)return{};var n,r,i={},s=Object.keys(e);for(r=0;r<s.length;r++)n=s[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,Be),{basename:f}=t.useContext(ve),p=!1;if("string"==typeof c&&Ke.test(c)&&(r=c,$e))try{let e=new URL(window.location.href),t=c.startsWith("//")?new URL(e.protocol+c):new URL(c),n=se(t.pathname,f);t.origin===e.origin&&null!=n?c=n+t.search+t.hash:p=!0}catch(e){}let m=function(e,n){let{relative:r}=void 0===n?{}:n;Ee()||U(!1);let{basename:i,navigator:s}=t.useContext(ve),{hash:o,pathname:a,search:l}=Te(e,{relative:r}),u=a;return"/"!==i&&(u="/"===a?i:ue([i,a])),s.createHref({pathname:u,search:l,hash:o})}(c,{relative:s}),g=function(e,n){let{target:r,replace:i,state:s,preventScrollReset:o,relative:a}=void 0===n?{}:n,l=Se(),u=Ie(),c=Te(e,{relative:a});return t.useCallback((t=>{if(function(e,t){return!(0!==e.button||t&&"_self"!==t||function(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}(e))}(t,r)){t.preventDefault();let n=void 0!==i?i:j(u)===j(c);l(e,{replace:n,state:s,preventScrollReset:o,relative:a})}}),[u,l,c,i,s,r,e,o,a])}(c,{replace:a,state:l,target:u,preventScrollReset:h,relative:s});return t.createElement("a",ze({},d,{href:r||m,onClick:p||o?i:function(e){i&&i(e),e.defaultPrevented||g(e)},ref:n,target:u}))}));var We,He;(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmit="useSubmit",e.UseSubmitFetcher="useSubmitFetcher",e.UseFetcher="useFetcher"})(We||(We={})),function(e){e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"}(He||(He={}));var Qe=function(){const[{basket:e},n]=x();return t.createElement("div",{className:"header"},t.createElement(Ge,{to:"/",style:{textDecoration:"none"}},t.createElement("div",{className:"header__logo"},t.createElement(O.Z,{className:"header__logoImage",fontSize:"large"}),t.createElement("h2",{className:"header__logoTitle"},"Online-Shopping"))),t.createElement("div",{className:"header__search"},t.createElement("input",{type:"text",className:"header__searchInput"}),t.createElement(L.Z,{className:"header__searchIcon"})),t.createElement("div",{className:"header__nav"},t.createElement(Ge,{to:"/login",style:{textDecoration:"none"}},t.createElement("div",{className:"nav__item"},t.createElement("span",{className:"nav__itemLineOne"},"Hello Guest"),t.createElement("span",{className:"nav__itemLineTwo"},"Sign In"))),t.createElement("div",{className:"nav__item"},t.createElement("span",{className:"nav__itemLineOne"},"Your"),t.createElement("span",{className:"nav__itemLineTwo"},"Shop")),t.createElement(Ge,{to:"/checkout",style:{textDecoration:"none"}},t.createElement("div",{className:"nav__itemBasket"},t.createElement(D.Z,null),t.createElement("span",{className:"nav__itemLineTwo nav__basketCount"},e.length)))))},Ye=i(936),Je={};Je.styleTagTransform=g(),Je.setAttributes=d(),Je.insert=c().bind(null,"head"),Je.domAPI=l(),Je.insertStyleElement=p(),o()(Ye.Z,Je),Ye.Z&&Ye.Z.locals&&Ye.Z.locals;var Xe=i(178),Ze={};Ze.styleTagTransform=g(),Ze.setAttributes=d(),Ze.insert=c().bind(null,"head"),Ze.domAPI=l(),Ze.insertStyleElement=p(),o()(Xe.Z,Ze),Xe.Z&&Xe.Z.locals&&Xe.Z.locals;var et=function({id:e,image:n,title:r,price:i,rating:s}){const[{basket:o},a]=x();return t.createElement("div",{className:"checkoutProduct"},t.createElement("img",{src:n,alt:"",className:"checkoutProduct__image"}),t.createElement("div",{className:"checkoutProduct__info"},t.createElement("p",{className:"checkoutProduct__title"},r),t.createElement("p",{className:"checkoutProduct__price"},t.createElement("small",null,"£"),t.createElement("strong",null,i)),t.createElement("div",{className:"checkoutProduct__rating"},Array(s).fill().map(((e,n)=>t.createElement("p",null,"⭐")))),t.createElement("button",{onClick:()=>{a({type:"REMOVE_FROM_BASKET",id:e})}},"Remove from Basket")))},tt=i(528),nt={};nt.styleTagTransform=g(),nt.setAttributes=d(),nt.insert=c().bind(null,"head"),nt.domAPI=l(),nt.insertStyleElement=p(),o()(tt.Z,nt),tt.Z&&tt.Z.locals&&tt.Z.locals;var rt=i(340),it=i.n(rt);const st=e=>e?.reduce(((e,t)=>t.price+e),0);var ot=function(){const[{basket:e},n]=x();return t.createElement("div",{className:"subtotal"},t.createElement(it(),{renderText:n=>t.createElement(t.Fragment,null,t.createElement("p",null,"Subtotal (",e.length," items): ",t.createElement("strong",null,"$",n)),t.createElement("small",{className:"subtotal__gift"},t.createElement("input",{type:"checkbox"})," This order contains a gift")),decimalScale:2,value:st(e),displayType:"text",thousandSeparator:!0}),t.createElement("button",null,"Proceed to Checkout"))},at=function(){const[{basket:e},n]=x();return t.createElement("div",{className:"checkout"},t.createElement("div",{className:"checkout__left"},t.createElement("img",{src:"https://images-na.ssl-images-amazon.com/images/G/02/UK_CCMP/TM/OCC_Amazon1._CB423492668_.jpg",alt:"",className:"checkout__ad"}),t.createElement("div",null,t.createElement("h2",{className:"checkout__title"},"Your Shopping Basket"),e.map((e=>t.createElement(et,{id:e.id,title:e.title,image:e.image,price:e.price,rating:e.rating}))))),t.createElement("div",{className:"checkout__right"},t.createElement(ot,null)))},lt=i(806),ut={};ut.styleTagTransform=g(),ut.setAttributes=d(),ut.insert=c().bind(null,"head"),ut.domAPI=l(),ut.insertStyleElement=p(),o()(lt.Z,ut),lt.Z&&lt.Z.locals&&lt.Z.locals;const ct=function(e){const t=[];let n=0;for(let r=0;r<e.length;r++){let i=e.charCodeAt(r);i<128?t[n++]=i:i<2048?(t[n++]=i>>6|192,t[n++]=63&i|128):55296==(64512&i)&&r+1<e.length&&56320==(64512&e.charCodeAt(r+1))?(i=65536+((1023&i)<<10)+(1023&e.charCodeAt(++r)),t[n++]=i>>18|240,t[n++]=i>>12&63|128,t[n++]=i>>6&63|128,t[n++]=63&i|128):(t[n++]=i>>12|224,t[n++]=i>>6&63|128,t[n++]=63&i|128)}return t},ht={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let t=0;t<e.length;t+=3){const i=e[t],s=t+1<e.length,o=s?e[t+1]:0,a=t+2<e.length,l=a?e[t+2]:0,u=i>>2,c=(3&i)<<4|o>>4;let h=(15&o)<<2|l>>6,d=63&l;a||(d=64,s||(h=64)),r.push(n[u],n[c],n[h],n[d])}return r.join("")},encodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(ct(e),t)},decodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):function(e){const t=[];let n=0,r=0;for(;n<e.length;){const i=e[n++];if(i<128)t[r++]=String.fromCharCode(i);else if(i>191&&i<224){const s=e[n++];t[r++]=String.fromCharCode((31&i)<<6|63&s)}else if(i>239&&i<365){const s=((7&i)<<18|(63&e[n++])<<12|(63&e[n++])<<6|63&e[n++])-65536;t[r++]=String.fromCharCode(55296+(s>>10)),t[r++]=String.fromCharCode(56320+(1023&s))}else{const s=e[n++],o=e[n++];t[r++]=String.fromCharCode((15&i)<<12|(63&s)<<6|63&o)}}return t.join("")}(this.decodeStringToByteArray(e,t))},decodeStringToByteArray(e,t){this.init_();const n=t?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let t=0;t<e.length;){const i=n[e.charAt(t++)],s=t<e.length?n[e.charAt(t)]:0;++t;const o=t<e.length?n[e.charAt(t)]:64;++t;const a=t<e.length?n[e.charAt(t)]:64;if(++t,null==i||null==s||null==o||null==a)throw new dt;const l=i<<2|s>>4;if(r.push(l),64!==o){const e=s<<4&240|o>>2;if(r.push(e),64!==a){const e=o<<6&192|a;r.push(e)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}};class dt extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const ft=function(e){return function(e){const t=ct(e);return ht.encodeByteArray(t,!0)}(e).replace(/\./g,"")},pt=function(e){try{return ht.decodeString(e,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function mt(e,t){if(!(t instanceof Object))return t;switch(t.constructor){case Date:return new Date(t.getTime());case Object:void 0===e&&(e={});break;case Array:e=[];break;default:return t}for(const n in t)t.hasOwnProperty(n)&&"__proto__"!==n&&(e[n]=mt(e[n],t[n]));return e}const gt=()=>{try{return function(){if("undefined"!=typeof self)return self;if("undefined"!=typeof window)return window;if(void 0!==i.g)return i.g;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__||(()=>{if("undefined"==typeof process||void 0===process.env)return;const e=process.env.__FIREBASE_DEFAULTS__;return e?JSON.parse(e):void 0})()||(()=>{if("undefined"==typeof document)return;let e;try{e=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch(e){return}const t=e&&pt(e[1]);return t&&JSON.parse(t)})()}catch(e){return void console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${e}`)}},yt=()=>{var e;return null===(e=gt())||void 0===e?void 0:e.config};class vt{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}wrapCallback(e){return(t,n)=>{t?this.reject(t):this.resolve(n),"function"==typeof e&&(this.promise.catch((()=>{})),1===e.length?e(t):e(t,n))}}}function wt(){return"undefined"!=typeof navigator&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function bt(){var e;const t=null===(e=gt())||void 0===e?void 0:e.forceEnvironment;if("node"===t)return!0;if("browser"===t)return!1;try{return"[object process]"===Object.prototype.toString.call(i.g.process)}catch(e){return!1}}function _t(){const e="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof e&&void 0!==e.id}function Et(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function It(){const e=wt();return e.indexOf("MSIE ")>=0||e.indexOf("Trident/")>=0}function kt(){try{return"object"==typeof indexedDB}catch(e){return!1}}class St extends Error{constructor(e,t,n){super(t),this.code=e,this.customData=n,this.name="FirebaseError",Object.setPrototypeOf(this,St.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Tt.prototype.create)}}class Tt{constructor(e,t,n){this.service=e,this.serviceName=t,this.errors=n}create(e,...t){const n=t[0]||{},r=`${this.service}/${e}`,i=this.errors[e],s=i?function(e,t){return e.replace(xt,((e,n)=>{const r=t[n];return null!=r?String(r):`<${n}?>`}))}(i,n):"Error",o=`${this.serviceName}: ${s} (${r}).`;return new St(r,o,n)}}const xt=/\{\$([^}]+)}/g;function Ct(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function At(e,t){if(e===t)return!0;const n=Object.keys(e),r=Object.keys(t);for(const i of n){if(!r.includes(i))return!1;const n=e[i],s=t[i];if(Nt(n)&&Nt(s)){if(!At(n,s))return!1}else if(n!==s)return!1}for(const e of r)if(!n.includes(e))return!1;return!0}function Nt(e){return null!==e&&"object"==typeof e}function Rt(e){const t=[];for(const[n,r]of Object.entries(e))Array.isArray(r)?r.forEach((e=>{t.push(encodeURIComponent(n)+"="+encodeURIComponent(e))})):t.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return t.length?"&"+t.join("&"):""}function Pt(e){const t={};return e.replace(/^\?/,"").split("&").forEach((e=>{if(e){const[n,r]=e.split("=");t[decodeURIComponent(n)]=decodeURIComponent(r)}})),t}function Dt(e){const t=e.indexOf("?");if(!t)return"";const n=e.indexOf("#",t);return e.substring(t,n>0?n:void 0)}function Ot(e,t){const n=new Lt(e,t);return n.subscribe.bind(n)}class Lt{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then((()=>{e(this)})).catch((e=>{this.error(e)}))}next(e){this.forEachObserver((t=>{t.next(e)}))}error(e){this.forEachObserver((t=>{t.error(e)})),this.close(e)}complete(){this.forEachObserver((e=>{e.complete()})),this.close()}subscribe(e,t,n){let r;if(void 0===e&&void 0===t&&void 0===n)throw new Error("Missing Observer.");r=function(e,t){if("object"!=typeof e||null===e)return!1;for(const t of["next","error","complete"])if(t in e&&"function"==typeof e[t])return!0;return!1}(e)?e:{next:e,error:t,complete:n},void 0===r.next&&(r.next=Mt),void 0===r.error&&(r.error=Mt),void 0===r.complete&&(r.complete=Mt);const i=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then((()=>{try{this.finalError?r.error(this.finalError):r.complete()}catch(e){}})),this.observers.push(r),i}unsubscribeOne(e){void 0!==this.observers&&void 0!==this.observers[e]&&(delete this.observers[e],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then((()=>{if(void 0!==this.observers&&void 0!==this.observers[e])try{t(this.observers[e])}catch(e){"undefined"!=typeof console&&console.error&&console.error(e)}}))}close(e){this.finalized||(this.finalized=!0,void 0!==e&&(this.finalError=e),this.task.then((()=>{this.observers=void 0,this.onNoObservers=void 0})))}}function Mt(){}function Ft(e){return e&&e._delegate?e._delegate:e}class Ut{constructor(e,t,n){this.name=e,this.instanceFactory=t,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}const Vt="[DEFAULT]";class zt{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const e=new vt;if(this.instancesDeferred.set(t,e),this.isInitialized(t)||this.shouldAutoInitialize())try{const n=this.getOrInitializeService({instanceIdentifier:t});n&&e.resolve(n)}catch(e){}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;const n=this.normalizeInstanceIdentifier(null==e?void 0:e.identifier),r=null!==(t=null==e?void 0:e.optional)&&void 0!==t&&t;if(!this.isInitialized(n)&&!this.shouldAutoInitialize()){if(r)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:n})}catch(e){if(r)return null;throw e}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,this.shouldAutoInitialize()){if(function(e){return"EAGER"===e.instantiationMode}(e))try{this.getOrInitializeService({instanceIdentifier:Vt})}catch(e){}for(const[e,t]of this.instancesDeferred.entries()){const n=this.normalizeInstanceIdentifier(e);try{const e=this.getOrInitializeService({instanceIdentifier:n});t.resolve(e)}catch(e){}}}}clearInstance(e=Vt){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter((e=>"INTERNAL"in e)).map((e=>e.INTERNAL.delete())),...e.filter((e=>"_delete"in e)).map((e=>e._delete()))])}isComponentSet(){return null!=this.component}isInitialized(e=Vt){return this.instances.has(e)}getOptions(e=Vt){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,n=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(n))throw Error(`${this.name}(${n}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const r=this.getOrInitializeService({instanceIdentifier:n,options:t});for(const[e,t]of this.instancesDeferred.entries())n===this.normalizeInstanceIdentifier(e)&&t.resolve(r);return r}onInit(e,t){var n;const r=this.normalizeInstanceIdentifier(t),i=null!==(n=this.onInitCallbacks.get(r))&&void 0!==n?n:new Set;i.add(e),this.onInitCallbacks.set(r,i);const s=this.instances.get(r);return s&&e(s,r),()=>{i.delete(e)}}invokeOnInitCallbacks(e,t){const n=this.onInitCallbacks.get(t);if(n)for(const r of n)try{r(e,t)}catch(e){}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let n=this.instances.get(e);if(!n&&this.component&&(n=this.component.instanceFactory(this.container,{instanceIdentifier:(r=e,r===Vt?void 0:r),options:t}),this.instances.set(e,n),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(n,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,n)}catch(e){}var r;return n||null}normalizeInstanceIdentifier(e=Vt){return this.component?this.component.multipleInstances?e:Vt:e}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class Bt{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new zt(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}const jt=[];var qt;!function(e){e[e.DEBUG=0]="DEBUG",e[e.VERBOSE=1]="VERBOSE",e[e.INFO=2]="INFO",e[e.WARN=3]="WARN",e[e.ERROR=4]="ERROR",e[e.SILENT=5]="SILENT"}(qt||(qt={}));const $t={debug:qt.DEBUG,verbose:qt.VERBOSE,info:qt.INFO,warn:qt.WARN,error:qt.ERROR,silent:qt.SILENT},Kt=qt.INFO,Gt={[qt.DEBUG]:"log",[qt.VERBOSE]:"log",[qt.INFO]:"info",[qt.WARN]:"warn",[qt.ERROR]:"error"},Wt=(e,t,...n)=>{if(t<e.logLevel)return;const r=(new Date).toISOString(),i=Gt[t];if(!i)throw new Error(`Attempted to log a message with an invalid logType (value: ${t})`);console[i](`[${r}]  ${e.name}:`,...n)};class Ht{constructor(e){this.name=e,this._logLevel=Kt,this._logHandler=Wt,this._userLogHandler=null,jt.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in qt))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel="string"==typeof e?$t[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if("function"!=typeof e)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,qt.DEBUG,...e),this._logHandler(this,qt.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,qt.VERBOSE,...e),this._logHandler(this,qt.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,qt.INFO,...e),this._logHandler(this,qt.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,qt.WARN,...e),this._logHandler(this,qt.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,qt.ERROR,...e),this._logHandler(this,qt.ERROR,...e)}}const Qt=(e,t)=>t.some((t=>e instanceof t));let Yt,Jt;const Xt=new WeakMap,Zt=new WeakMap,en=new WeakMap,tn=new WeakMap,nn=new WeakMap;let rn={get(e,t,n){if(e instanceof IDBTransaction){if("done"===t)return Zt.get(e);if("objectStoreNames"===t)return e.objectStoreNames||en.get(e);if("store"===t)return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return on(e[t])},set(e,t,n){return e[t]=n,!0},has(e,t){return e instanceof IDBTransaction&&("done"===t||"store"===t)||t in e}};function sn(e){return"function"==typeof e?(t=e)!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?(Jt||(Jt=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])).includes(t)?function(...e){return t.apply(an(this),e),on(Xt.get(this))}:function(...e){return on(t.apply(an(this),e))}:function(e,...n){const r=t.call(an(this),e,...n);return en.set(r,e.sort?e.sort():[e]),on(r)}:(e instanceof IDBTransaction&&function(e){if(Zt.has(e))return;const t=new Promise(((t,n)=>{const r=()=>{e.removeEventListener("complete",i),e.removeEventListener("error",s),e.removeEventListener("abort",s)},i=()=>{t(),r()},s=()=>{n(e.error||new DOMException("AbortError","AbortError")),r()};e.addEventListener("complete",i),e.addEventListener("error",s),e.addEventListener("abort",s)}));Zt.set(e,t)}(e),Qt(e,Yt||(Yt=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction]))?new Proxy(e,rn):e);var t}function on(e){if(e instanceof IDBRequest)return function(e){const t=new Promise(((t,n)=>{const r=()=>{e.removeEventListener("success",i),e.removeEventListener("error",s)},i=()=>{t(on(e.result)),r()},s=()=>{n(e.error),r()};e.addEventListener("success",i),e.addEventListener("error",s)}));return t.then((t=>{t instanceof IDBCursor&&Xt.set(t,e)})).catch((()=>{})),nn.set(t,e),t}(e);if(tn.has(e))return tn.get(e);const t=sn(e);return t!==e&&(tn.set(e,t),nn.set(t,e)),t}const an=e=>nn.get(e),ln=["get","getKey","getAll","getAllKeys","count"],un=["put","add","delete","clear"],cn=new Map;function hn(e,t){if(!(e instanceof IDBDatabase)||t in e||"string"!=typeof t)return;if(cn.get(t))return cn.get(t);const n=t.replace(/FromIndex$/,""),r=t!==n,i=un.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!i&&!ln.includes(n))return;const s=async function(e,...t){const s=this.transaction(e,i?"readwrite":"readonly");let o=s.store;return r&&(o=o.index(t.shift())),(await Promise.all([o[n](...t),i&&s.done]))[0]};return cn.set(t,s),s}var dn;dn=rn,rn={...dn,get:(e,t,n)=>hn(e,t)||dn.get(e,t,n),has:(e,t)=>!!hn(e,t)||dn.has(e,t)};class fn{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map((e=>{if(function(e){const t=e.getComponent();return"VERSION"===(null==t?void 0:t.type)}(e)){const t=e.getImmediate();return`${t.library}/${t.version}`}return null})).filter((e=>e)).join(" ")}}const pn="@firebase/app",mn="0.9.15",gn=new Ht("@firebase/app"),yn="[DEFAULT]",vn={[pn]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},wn=new Map,bn=new Map;function _n(e,t){try{e.container.addComponent(t)}catch(n){gn.debug(`Component ${t.name} failed to register with FirebaseApp ${e.name}`,n)}}function En(e,t){e.container.addOrOverwriteComponent(t)}function In(e){const t=e.name;if(bn.has(t))return gn.debug(`There were multiple attempts to register component ${t}.`),!1;bn.set(t,e);for(const t of wn.values())_n(t,e);return!0}function kn(e,t){const n=e.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),e.container.getProvider(t)}function Sn(e,t,n=yn){kn(e,t).clearInstance(n)}function Tn(){bn.clear()}const xn=new Tt("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."});class Cn{constructor(e,t,n){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=n,this.container.addComponent(new Ut("app",(()=>this),"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw xn.create("app-deleted",{appName:this._name})}}const An="10.1.0";function Nn(e,t={}){let n=e;"object"!=typeof t&&(t={name:t});const r=Object.assign({name:yn,automaticDataCollectionEnabled:!1},t),i=r.name;if("string"!=typeof i||!i)throw xn.create("bad-app-name",{appName:String(i)});if(n||(n=yt()),!n)throw xn.create("no-options");const s=wn.get(i);if(s){if(At(n,s.options)&&At(r,s.config))return s;throw xn.create("duplicate-app",{appName:i})}const o=new Bt(i);for(const e of bn.values())o.addComponent(e);const a=new Cn(n,r,o);return wn.set(i,a),a}function Rn(e=yn){const t=wn.get(e);if(!t&&e===yn&&yt())return Nn();if(!t)throw xn.create("no-app",{appName:e});return t}function Pn(){return Array.from(wn.values())}async function Dn(e){const t=e.name;wn.has(t)&&(wn.delete(t),await Promise.all(e.container.getProviders().map((e=>e.delete()))),e.isDeleted=!0)}function On(e,t,n){var r;let i=null!==(r=vn[e])&&void 0!==r?r:e;n&&(i+=`-${n}`);const s=i.match(/\s|\//),o=t.match(/\s|\//);if(s||o){const e=[`Unable to register library "${i}" with version "${t}":`];return s&&e.push(`library name "${i}" contains illegal characters (whitespace or "/")`),s&&o&&e.push("and"),o&&e.push(`version name "${t}" contains illegal characters (whitespace or "/")`),void gn.warn(e.join(" "))}In(new Ut(`${i}-version`,(()=>({library:i,version:t})),"VERSION"))}function Ln(e,t){if(null!==e&&"function"!=typeof e)throw xn.create("invalid-log-argument");!function(e,t){for(const n of jt){let r=null;t&&t.level&&(r=$t[t.level]),n.userLogHandler=null===e?null:(t,n,...i)=>{const s=i.map((e=>{if(null==e)return null;if("string"==typeof e)return e;if("number"==typeof e||"boolean"==typeof e)return e.toString();if(e instanceof Error)return e.message;try{return JSON.stringify(e)}catch(e){return null}})).filter((e=>e)).join(" ");n>=(null!=r?r:t.logLevel)&&e({level:qt[n].toLowerCase(),message:s,args:i,type:t.name})}}}(e,t)}function Mn(e){var t;t=e,jt.forEach((e=>{e.setLogLevel(t)}))}const Fn="firebase-heartbeat-database",Un=1,Vn="firebase-heartbeat-store";let zn=null;function Bn(){return zn||(zn=function(e,t,{blocked:n,upgrade:r,blocking:i,terminated:s}={}){const o=indexedDB.open(e,t),a=on(o);return r&&o.addEventListener("upgradeneeded",(e=>{r(on(o.result),e.oldVersion,e.newVersion,on(o.transaction),e)})),n&&o.addEventListener("blocked",(e=>n(e.oldVersion,e.newVersion,e))),a.then((e=>{s&&e.addEventListener("close",(()=>s())),i&&e.addEventListener("versionchange",(e=>i(e.oldVersion,e.newVersion,e)))})).catch((()=>{})),a}(Fn,Un,{upgrade:(e,t)=>{0===t&&e.createObjectStore(Vn)}}).catch((e=>{throw xn.create("idb-open",{originalErrorMessage:e.message})}))),zn}async function jn(e,t){try{const n=(await Bn()).transaction(Vn,"readwrite"),r=n.objectStore(Vn);await r.put(t,qn(e)),await n.done}catch(e){if(e instanceof St)gn.warn(e.message);else{const t=xn.create("idb-set",{originalErrorMessage:null==e?void 0:e.message});gn.warn(t.message)}}}function qn(e){return`${e.name}!${e.options.appId}`}class $n{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new Gn(t),this._heartbeatsCachePromise=this._storage.read().then((e=>(this._heartbeatsCache=e,e)))}async triggerHeartbeat(){const e=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),t=Kn();if(null===this._heartbeatsCache&&(this._heartbeatsCache=await this._heartbeatsCachePromise),this._heartbeatsCache.lastSentHeartbeatDate!==t&&!this._heartbeatsCache.heartbeats.some((e=>e.date===t)))return this._heartbeatsCache.heartbeats.push({date:t,agent:e}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter((e=>{const t=new Date(e.date).valueOf();return Date.now()-t<=2592e6})),this._storage.overwrite(this._heartbeatsCache)}async getHeartbeatsHeader(){if(null===this._heartbeatsCache&&await this._heartbeatsCachePromise,null===this._heartbeatsCache||0===this._heartbeatsCache.heartbeats.length)return"";const e=Kn(),{heartbeatsToSend:t,unsentEntries:n}=function(e,t=1024){const n=[];let r=e.slice();for(const i of e){const e=n.find((e=>e.agent===i.agent));if(e){if(e.dates.push(i.date),Wn(n)>t){e.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),Wn(n)>t){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}(this._heartbeatsCache.heartbeats),r=ft(JSON.stringify({version:2,heartbeats:t}));return this._heartbeatsCache.lastSentHeartbeatDate=e,n.length>0?(this._heartbeatsCache.heartbeats=n,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),r}}function Kn(){return(new Date).toISOString().substring(0,10)}class Gn{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return!!kt()&&new Promise(((e,t)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),e(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var e;t((null===(e=i.error)||void 0===e?void 0:e.message)||"")}}catch(e){t(e)}})).then((()=>!0)).catch((()=>!1))}async read(){if(await this._canUseIndexedDBPromise){const e=await async function(e){try{const t=await Bn();return await t.transaction(Vn).objectStore(Vn).get(qn(e))}catch(e){if(e instanceof St)gn.warn(e.message);else{const t=xn.create("idb-get",{originalErrorMessage:null==e?void 0:e.message});gn.warn(t.message)}}}(this.app);return e||{heartbeats:[]}}return{heartbeats:[]}}async overwrite(e){var t;if(await this._canUseIndexedDBPromise){const n=await this.read();return jn(this.app,{lastSentHeartbeatDate:null!==(t=e.lastSentHeartbeatDate)&&void 0!==t?t:n.lastSentHeartbeatDate,heartbeats:e.heartbeats})}}async add(e){var t;if(await this._canUseIndexedDBPromise){const n=await this.read();return jn(this.app,{lastSentHeartbeatDate:null!==(t=e.lastSentHeartbeatDate)&&void 0!==t?t:n.lastSentHeartbeatDate,heartbeats:[...n.heartbeats,...e.heartbeats]})}}}function Wn(e){return ft(JSON.stringify({version:2,heartbeats:e})).length}In(new Ut("platform-logger",(e=>new fn(e)),"PRIVATE")),In(new Ut("heartbeat",(e=>new $n(e)),"PRIVATE")),On(pn,mn,""),On(pn,mn,"esm2017"),On("fire-js","");class Hn{constructor(e,t){this._delegate=e,this.firebase=t,_n(e,new Ut("app-compat",(()=>this),"PUBLIC")),this.container=e.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this._delegate.automaticDataCollectionEnabled=e}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise((e=>{this._delegate.checkDestroyed(),e()})).then((()=>(this.firebase.INTERNAL.removeApp(this.name),Dn(this._delegate))))}_getService(e,t=yn){var n;this._delegate.checkDestroyed();const r=this._delegate.container.getProvider(e);return r.isInitialized()||"EXPLICIT"!==(null===(n=r.getComponent())||void 0===n?void 0:n.instantiationMode)||r.initialize(),r.getImmediate({identifier:t})}_removeServiceInstance(e,t=yn){this._delegate.container.getProvider(e).clearInstance(t)}_addComponent(e){_n(this._delegate,e)}_addOrOverwriteComponent(e){En(this._delegate,e)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}const Qn=new Tt("app-compat","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."}),Yn=function t(){const n=function(t){const n={},r={__esModule:!0,initializeApp:function(e,i={}){const s=Nn(e,i);if(Ct(n,s.name))return n[s.name];const o=new t(s,r);return n[s.name]=o,o},app:i,registerVersion:On,setLogLevel:Mn,onLog:Ln,apps:null,SDK_VERSION:An,INTERNAL:{registerComponent:function(e){const n=e.name,s=n.replace("-compat","");if(In(e)&&"PUBLIC"===e.type){const o=(e=i())=>{if("function"!=typeof e[s])throw Qn.create("invalid-app-argument",{appName:n});return e[s]()};void 0!==e.serviceProps&&mt(o,e.serviceProps),r[s]=o,t.prototype[s]=function(...t){return this._getService.bind(this,n).apply(this,e.multipleInstances?t:[])}}return"PUBLIC"===e.type?r[s]:null},removeApp:function(e){delete n[e]},useAsService:function(e,t){return"serverAuth"===t?null:t},modularAPIs:e}};function i(e){if(!Ct(n,e=e||yn))throw Qn.create("no-app",{appName:e});return n[e]}return r.default=r,Object.defineProperty(r,"apps",{get:function(){return Object.keys(n).map((e=>n[e]))}}),i.App=t,r}(Hn);return n.INTERNAL=Object.assign(Object.assign({},n.INTERNAL),{createFirebaseNamespace:t,extendNamespace:function(e){mt(n,e)},createSubscribe:Ot,ErrorFactory:Tt,deepExtend:mt}),n}(),Jn=new Ht("@firebase/app-compat");if("object"==typeof self&&self.self===self&&void 0!==self.firebase){Jn.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");const e=self.firebase.SDK_VERSION;e&&e.indexOf("LITE")>=0&&Jn.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}const Xn=Yn;function Zn(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n}On("@firebase/app-compat","0.2.15",void 0),Xn.registerVersion("firebase","10.1.0","app-compat"),Object.create,Object.create,"function"==typeof SuppressedError&&SuppressedError;const er={FACEBOOK:"facebook.com",GITHUB:"github.com",GOOGLE:"google.com",PASSWORD:"password",PHONE:"phone",TWITTER:"twitter.com"};const tr=function(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","login-blocked":"Login blocked by user-provided method: {$originalMessage}","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-password":"A non-empty password must be provided","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance.","missing-recaptcha-token":"The reCAPTCHA token is missing when sending request to the backend.","invalid-recaptcha-token":"The reCAPTCHA token is invalid when sending request to the backend.","invalid-recaptcha-action":"The reCAPTCHA action is invalid when sending request to the backend.","recaptcha-not-enabled":"reCAPTCHA Enterprise integration is not enabled for this project.","missing-client-type":"The reCAPTCHA client type is missing when sending request to the backend.","missing-recaptcha-version":"The reCAPTCHA version is missing when sending request to the backend.","invalid-req-type":"Invalid request parameters.","invalid-recaptcha-version":"The reCAPTCHA version is invalid when sending request to the backend."}},nr=function(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}},rr=new Tt("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),ir=new Ht("@firebase/auth");function sr(e,...t){ir.logLevel<=qt.ERROR&&ir.error(`Auth (${An}): ${e}`,...t)}function or(e,...t){throw cr(e,...t)}function ar(e,...t){return cr(e,...t)}function lr(e,t,n){const r=Object.assign(Object.assign({},nr()),{[t]:n});return new Tt("auth","Firebase",r).create(t,{appName:e.name})}function ur(e,t,n){if(!(t instanceof n))throw n.name!==t.constructor.name&&or(e,"argument-error"),lr(e,"argument-error",`Type of ${t.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function cr(e,...t){if("string"!=typeof e){const n=t[0],r=[...t.slice(1)];return r[0]&&(r[0].appName=e.name),e._errorFactory.create(n,...r)}return rr.create(e,...t)}function hr(e,t,...n){if(!e)throw cr(t,...n)}function dr(e){const t="INTERNAL ASSERTION FAILED: "+e;throw sr(t),new Error(t)}function fr(e,t){e||dr(t)}function pr(){var e;return"undefined"!=typeof self&&(null===(e=self.location)||void 0===e?void 0:e.href)||""}function mr(){return"http:"===gr()||"https:"===gr()}function gr(){var e;return"undefined"!=typeof self&&(null===(e=self.location)||void 0===e?void 0:e.protocol)||null}class yr{constructor(e,t){this.shortDelay=e,this.longDelay=t,fr(t>e,"Short delay should be less than long delay!"),this.isMobile="undefined"!=typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(wt())||Et()}get(){return"undefined"!=typeof navigator&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(mr()||_t()||"connection"in navigator)&&!navigator.onLine?Math.min(5e3,this.shortDelay):this.isMobile?this.longDelay:this.shortDelay}}function vr(e,t){fr(e.emulator,"Emulator should always be set here");const{url:n}=e.emulator;return t?`${n}${t.startsWith("/")?t.slice(1):t}`:n}class wr{static initialize(e,t,n){this.fetchImpl=e,t&&(this.headersImpl=t),n&&(this.responseImpl=n)}static fetch(){return this.fetchImpl?this.fetchImpl:"undefined"!=typeof self&&"fetch"in self?self.fetch:void dr("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:"undefined"!=typeof self&&"Headers"in self?self.Headers:void dr("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:"undefined"!=typeof self&&"Response"in self?self.Response:void dr("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const br={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"},_r=new yr(3e4,6e4);function Er(e,t){return e.tenantId&&!t.tenantId?Object.assign(Object.assign({},t),{tenantId:e.tenantId}):t}async function Ir(e,t,n,r,i={}){return kr(e,i,(async()=>{let i={},s={};r&&("GET"===t?s=r:i={body:JSON.stringify(r)});const o=Rt(Object.assign({key:e.config.apiKey},s)).slice(1),a=await e._getAdditionalHeaders();return a["Content-Type"]="application/json",e.languageCode&&(a["X-Firebase-Locale"]=e.languageCode),wr.fetch()(Tr(e,e.config.apiHost,n,o),Object.assign({method:t,headers:a,referrerPolicy:"no-referrer"},i))}))}async function kr(e,t,n){e._canInitEmulator=!1;const r=Object.assign(Object.assign({},br),t);try{const t=new xr(e),i=await Promise.race([n(),t.promise]);t.clearNetworkTimeout();const s=await i.json();if("needConfirmation"in s)throw Cr(e,"account-exists-with-different-credential",s);if(i.ok&&!("errorMessage"in s))return s;{const t=i.ok?s.errorMessage:s.error.message,[n,o]=t.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===n)throw Cr(e,"credential-already-in-use",s);if("EMAIL_EXISTS"===n)throw Cr(e,"email-already-in-use",s);if("USER_DISABLED"===n)throw Cr(e,"user-disabled",s);const a=r[n]||n.toLowerCase().replace(/[_\s]+/g,"-");if(o)throw lr(e,a,o);or(e,a)}}catch(t){if(t instanceof St)throw t;or(e,"network-request-failed",{message:String(t)})}}async function Sr(e,t,n,r,i={}){const s=await Ir(e,t,n,r,i);return"mfaPendingCredential"in s&&or(e,"multi-factor-auth-required",{_serverResponse:s}),s}function Tr(e,t,n,r){const i=`${t}${n}?${r}`;return e.config.emulator?vr(e.config,i):`${e.config.apiScheme}://${i}`}class xr{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise(((e,t)=>{this.timer=setTimeout((()=>t(ar(this.auth,"network-request-failed"))),_r.get())}))}clearNetworkTimeout(){clearTimeout(this.timer)}}function Cr(e,t,n){const r={appName:e.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const i=ar(e,t,r);return i.customData._tokenResponse=n,i}function Ar(e){if(e)try{const t=new Date(Number(e));if(!isNaN(t.getTime()))return t.toUTCString()}catch(e){}}function Nr(e){return 1e3*Number(e)}function Rr(e){const[t,n,r]=e.split(".");if(void 0===t||void 0===n||void 0===r)return sr("JWT malformed, contained fewer than 3 sections"),null;try{const e=pt(n);return e?JSON.parse(e):(sr("Failed to decode base64 JWT payload"),null)}catch(e){return sr("Caught error parsing JWT payload as JSON",null==e?void 0:e.toString()),null}}async function Pr(e,t,n=!1){if(n)return t;try{return await t}catch(t){throw t instanceof St&&function({code:e}){return"auth/user-disabled"===e||"auth/user-token-expired"===e}(t)&&e.auth.currentUser===e&&await e.auth.signOut(),t}}class Dr{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(e){var t;if(e){const e=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),e}{this.errorBackoff=3e4;const e=(null!==(t=this.user.stsTokenManager.expirationTime)&&void 0!==t?t:0)-Date.now()-3e5;return Math.max(0,e)}}schedule(e=!1){if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout((async()=>{await this.iteration()}),t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){return void("auth/network-request-failed"===(null==e?void 0:e.code)&&this.schedule(!0))}this.schedule()}}class Or{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=Ar(this.lastLoginAt),this.creationTime=Ar(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}async function Lr(e){var t;const n=e.auth,r=await e.getIdToken(),i=await Pr(e,async function(e,t){return Ir(e,"POST","/v1/accounts:lookup",t)}(n,{idToken:r}));hr(null==i?void 0:i.users.length,n,"internal-error");const s=i.users[0];e._notifyReloadListener(s);const o=(null===(t=s.providerUserInfo)||void 0===t?void 0:t.length)?s.providerUserInfo.map((e=>{var{providerId:t}=e,n=Zn(e,["providerId"]);return{providerId:t,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}})):[],a=(l=e.providerData,u=o,[...l.filter((e=>!u.some((t=>t.providerId===e.providerId)))),...u]);var l,u;const c=e.isAnonymous,h=!(e.email&&s.passwordHash||(null==a?void 0:a.length)),d=!!c&&h,f={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:a,metadata:new Or(s.createdAt,s.lastLoginAt),isAnonymous:d};Object.assign(e,f)}class Mr{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){hr(e.idToken,"internal-error"),hr(void 0!==e.idToken,"internal-error"),hr(void 0!==e.refreshToken,"internal-error");const t="expiresIn"in e&&void 0!==e.expiresIn?Number(e.expiresIn):function(e){const t=Rr(e);return hr(t,"internal-error"),hr(void 0!==t.exp,"internal-error"),hr(void 0!==t.iat,"internal-error"),Number(t.exp)-Number(t.iat)}(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}async getToken(e,t=!1){return hr(!this.accessToken||this.refreshToken,e,"user-token-expired"),t||!this.accessToken||this.isExpired?this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null:this.accessToken}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:n,refreshToken:r,expiresIn:i}=await async function(e,t){const n=await kr(e,{},(async()=>{const n=Rt({grant_type:"refresh_token",refresh_token:t}).slice(1),{tokenApiHost:r,apiKey:i}=e.config,s=Tr(e,r,"/v1/token",`key=${i}`),o=await e._getAdditionalHeaders();return o["Content-Type"]="application/x-www-form-urlencoded",wr.fetch()(s,{method:"POST",headers:o,body:n})}));return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}(e,t);this.updateTokensAndExpiration(n,r,Number(i))}updateTokensAndExpiration(e,t,n){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+1e3*n}static fromJSON(e,t){const{refreshToken:n,accessToken:r,expirationTime:i}=t,s=new Mr;return n&&(hr("string"==typeof n,"internal-error",{appName:e}),s.refreshToken=n),r&&(hr("string"==typeof r,"internal-error",{appName:e}),s.accessToken=r),i&&(hr("number"==typeof i,"internal-error",{appName:e}),s.expirationTime=i),s}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Mr,this.toJSON())}_performRefresh(){return dr("not implemented")}}function Fr(e,t){hr("string"==typeof e||void 0===e,"internal-error",{appName:t})}class Ur{constructor(e){var{uid:t,auth:n,stsTokenManager:r}=e,i=Zn(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new Dr(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=n,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=i.displayName||null,this.email=i.email||null,this.emailVerified=i.emailVerified||!1,this.phoneNumber=i.phoneNumber||null,this.photoURL=i.photoURL||null,this.isAnonymous=i.isAnonymous||!1,this.tenantId=i.tenantId||null,this.providerData=i.providerData?[...i.providerData]:[],this.metadata=new Or(i.createdAt||void 0,i.lastLoginAt||void 0)}async getIdToken(e){const t=await Pr(this,this.stsTokenManager.getToken(this.auth,e));return hr(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return async function(e,t=!1){const n=Ft(e),r=await n.getIdToken(t),i=Rr(r);hr(i&&i.exp&&i.auth_time&&i.iat,n.auth,"internal-error");const s="object"==typeof i.firebase?i.firebase:void 0,o=null==s?void 0:s.sign_in_provider;return{claims:i,token:r,authTime:Ar(Nr(i.auth_time)),issuedAtTime:Ar(Nr(i.iat)),expirationTime:Ar(Nr(i.exp)),signInProvider:o||null,signInSecondFactor:(null==s?void 0:s.sign_in_second_factor)||null}}(this,e)}reload(){return async function(e){const t=Ft(e);await Lr(t),await t.auth._persistUserIfCurrent(t),t.auth._notifyListenersIfCurrent(t)}(this)}_assign(e){this!==e&&(hr(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map((e=>Object.assign({},e))),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new Ur(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){hr(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let n=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),n=!0),t&&await Lr(this),await this.auth._persistUserIfCurrent(this),n&&this.auth._notifyListenersIfCurrent(this)}async delete(){const e=await this.getIdToken();return await Pr(this,async function(e,t){return Ir(e,"POST","/v1/accounts:delete",t)}(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map((e=>Object.assign({},e))),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var n,r,i,s,o,a,l,u;const c=null!==(n=t.displayName)&&void 0!==n?n:void 0,h=null!==(r=t.email)&&void 0!==r?r:void 0,d=null!==(i=t.phoneNumber)&&void 0!==i?i:void 0,f=null!==(s=t.photoURL)&&void 0!==s?s:void 0,p=null!==(o=t.tenantId)&&void 0!==o?o:void 0,m=null!==(a=t._redirectEventId)&&void 0!==a?a:void 0,g=null!==(l=t.createdAt)&&void 0!==l?l:void 0,y=null!==(u=t.lastLoginAt)&&void 0!==u?u:void 0,{uid:v,emailVerified:w,isAnonymous:b,providerData:_,stsTokenManager:E}=t;hr(v&&E,e,"internal-error");const I=Mr.fromJSON(this.name,E);hr("string"==typeof v,e,"internal-error"),Fr(c,e.name),Fr(h,e.name),hr("boolean"==typeof w,e,"internal-error"),hr("boolean"==typeof b,e,"internal-error"),Fr(d,e.name),Fr(f,e.name),Fr(p,e.name),Fr(m,e.name),Fr(g,e.name),Fr(y,e.name);const k=new Ur({uid:v,auth:e,email:h,emailVerified:w,displayName:c,isAnonymous:b,photoURL:f,phoneNumber:d,tenantId:p,stsTokenManager:I,createdAt:g,lastLoginAt:y});return _&&Array.isArray(_)&&(k.providerData=_.map((e=>Object.assign({},e)))),m&&(k._redirectEventId=m),k}static async _fromIdTokenResponse(e,t,n=!1){const r=new Mr;r.updateFromServerResponse(t);const i=new Ur({uid:t.localId,auth:e,stsTokenManager:r,isAnonymous:n});return await Lr(i),i}}const Vr=new Map;function zr(e){fr(e instanceof Function,"Expected a class definition");let t=Vr.get(e);return t?(fr(t instanceof e,"Instance stored in cache mismatched with class"),t):(t=new e,Vr.set(e,t),t)}class Br{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return void 0===t?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}Br.type="NONE";const jr=Br;function qr(e,t,n){return`firebase:${e}:${t}:${n}`}class $r{constructor(e,t,n){this.persistence=e,this.auth=t,this.userKey=n;const{config:r,name:i}=this.auth;this.fullUserKey=qr(this.userKey,r.apiKey,i),this.fullPersistenceKey=qr("persistence",r.apiKey,i),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?Ur._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();return await this.removeCurrentUser(),this.persistence=e,t?this.setCurrentUser(t):void 0}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,n="authUser"){if(!t.length)return new $r(zr(jr),e,n);const r=(await Promise.all(t.map((async e=>{if(await e._isAvailable())return e})))).filter((e=>e));let i=r[0]||zr(jr);const s=qr(n,e.config.apiKey,e.name);let o=null;for(const n of t)try{const t=await n._get(s);if(t){const r=Ur._fromJSON(e,t);n!==i&&(o=r),i=n;break}}catch(e){}const a=r.filter((e=>e._shouldAllowMigration));return i._shouldAllowMigration&&a.length?(i=a[0],o&&await i._set(s,o.toJSON()),await Promise.all(t.map((async e=>{if(e!==i)try{await e._remove(s)}catch(e){}}))),new $r(i,e,n)):new $r(i,e,n)}}function Kr(e){const t=e.toLowerCase();if(t.includes("opera/")||t.includes("opr/")||t.includes("opios/"))return"Opera";if(Qr(t))return"IEMobile";if(t.includes("msie")||t.includes("trident/"))return"IE";if(t.includes("edge/"))return"Edge";if(Gr(t))return"Firefox";if(t.includes("silk/"))return"Silk";if(Jr(t))return"Blackberry";if(Xr(t))return"Webos";if(Wr(t))return"Safari";if((t.includes("chrome/")||Hr(t))&&!t.includes("edge/"))return"Chrome";if(Yr(t))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,n=e.match(t);if(2===(null==n?void 0:n.length))return n[1]}return"Other"}function Gr(e=wt()){return/firefox\//i.test(e)}function Wr(e=wt()){const t=e.toLowerCase();return t.includes("safari/")&&!t.includes("chrome/")&&!t.includes("crios/")&&!t.includes("android")}function Hr(e=wt()){return/crios\//i.test(e)}function Qr(e=wt()){return/iemobile/i.test(e)}function Yr(e=wt()){return/android/i.test(e)}function Jr(e=wt()){return/blackberry/i.test(e)}function Xr(e=wt()){return/webos/i.test(e)}function Zr(e=wt()){return/iphone|ipad|ipod/i.test(e)||/macintosh/i.test(e)&&/mobile/i.test(e)}function ei(e=wt()){return Zr(e)||Yr(e)||Xr(e)||Jr(e)||/windows phone/i.test(e)||Qr(e)}function ti(e,t=[]){let n;switch(e){case"Browser":n=Kr(wt());break;case"Worker":n=`${Kr(wt())}-${e}`;break;default:n=e}const r=t.length?t.join(","):"FirebaseCore-web";return`${n}/JsCore/${An}/${r}`}async function ni(e,t){return Ir(e,"GET","/v2/recaptchaConfig",Er(e,t))}function ri(e){return void 0!==e&&void 0!==e.getResponse}function ii(e){return void 0!==e&&void 0!==e.enterprise}class si{constructor(e){if(this.siteKey="",this.emailPasswordEnabled=!1,void 0===e.recaptchaKey)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.emailPasswordEnabled=e.recaptchaEnforcementState.some((e=>"EMAIL_PASSWORD_PROVIDER"===e.provider&&"OFF"!==e.enforcementState))}}function oi(e){return new Promise(((t,n)=>{const r=document.createElement("script");var i,s;r.setAttribute("src",e),r.onload=t,r.onerror=e=>{const t=ar("internal-error");t.customData=e,n(t)},r.type="text/javascript",r.charset="UTF-8",(null!==(s=null===(i=document.getElementsByTagName("head"))||void 0===i?void 0:i[0])&&void 0!==s?s:document).appendChild(r)}))}function ai(e){return`__${e}${Math.floor(1e6*Math.random())}`}class li{constructor(e){this.type="recaptcha-enterprise",this.auth=di(e)}async verify(e="verify",t=!1){function n(t,n,r){const i=window.grecaptcha;ii(i)?i.enterprise.ready((()=>{i.enterprise.execute(t,{action:e}).then((e=>{n(e)})).catch((()=>{n("NO_RECAPTCHA")}))})):r(Error("No reCAPTCHA enterprise script loaded."))}return new Promise(((e,r)=>{(async function(e){if(!t){if(null==e.tenantId&&null!=e._agentRecaptchaConfig)return e._agentRecaptchaConfig.siteKey;if(null!=e.tenantId&&void 0!==e._tenantRecaptchaConfigs[e.tenantId])return e._tenantRecaptchaConfigs[e.tenantId].siteKey}return new Promise((async(t,n)=>{ni(e,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then((r=>{if(void 0!==r.recaptchaKey){const n=new si(r);return null==e.tenantId?e._agentRecaptchaConfig=n:e._tenantRecaptchaConfigs[e.tenantId]=n,t(n.siteKey)}n(new Error("recaptcha Enterprise site key undefined"))})).catch((e=>{n(e)}))}))})(this.auth).then((i=>{if(!t&&ii(window.grecaptcha))n(i,e,r);else{if("undefined"==typeof window)return void r(new Error("RecaptchaVerifier is only supported in browser"));oi("https://www.google.com/recaptcha/enterprise.js?render="+i).then((()=>{n(i,e,r)})).catch((e=>{r(e)}))}})).catch((e=>{r(e)}))}))}}async function ui(e,t,n,r=!1){const i=new li(e);let s;try{s=await i.verify(n)}catch(e){s=await i.verify(n,!0)}const o=Object.assign({},t);return r?Object.assign(o,{captchaResp:s}):Object.assign(o,{captchaResponse:s}),Object.assign(o,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(o,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),o}class ci{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const n=t=>new Promise(((n,r)=>{try{n(e(t))}catch(e){r(e)}}));n.onAbort=t,this.queue.push(n);const r=this.queue.length-1;return()=>{this.queue[r]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const n of this.queue)await n(e),n.onAbort&&t.push(n.onAbort)}catch(e){t.reverse();for(const e of t)try{e()}catch(e){}throw this.auth._errorFactory.create("login-blocked",{originalMessage:null==e?void 0:e.message})}}}class hi{constructor(e,t,n,r){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=n,this.config=r,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new fi(this),this.idTokenSubscription=new fi(this),this.beforeStateQueue=new ci(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=rr,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=r.sdkClientVersion}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=zr(t)),this._initializationPromise=this.queue((async()=>{var n,r;if(!this._deleted&&(this.persistenceManager=await $r.create(this,e),!this._deleted)){if(null===(n=this._popupRedirectResolver)||void 0===n?void 0:n._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch(e){}await this.initializeCurrentUser(t),this.lastNotifiedUid=(null===(r=this.currentUser)||void 0===r?void 0:r.uid)||null,this._deleted||(this._isInitialized=!0)}})),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();return this.currentUser||e?this.currentUser&&e&&this.currentUser.uid===e.uid?(this._currentUser._assign(e),void await this.currentUser.getIdToken()):void await this._updateCurrentUser(e,!0):void 0}async initializeCurrentUser(e){var t;const n=await this.assertedPersistence.getCurrentUser();let r=n,i=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const n=null===(t=this.redirectUser)||void 0===t?void 0:t._redirectEventId,s=null==r?void 0:r._redirectEventId,o=await this.tryRedirectSignIn(e);n&&n!==s||!(null==o?void 0:o.user)||(r=o.user,i=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(i)try{await this.beforeStateQueue.runMiddleware(r)}catch(e){r=n,this._popupRedirectResolver._overrideRedirectResult(this,(()=>Promise.reject(e)))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return hr(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch(e){await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await Lr(e)}catch(e){if("auth/network-request-failed"!==(null==e?void 0:e.code))return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=function(){if("undefined"==typeof navigator)return null;const e=navigator;return e.languages&&e.languages[0]||e.language||null}()}async _delete(){this._deleted=!0}async updateCurrentUser(e){const t=e?Ft(e):null;return t&&hr(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&hr(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue((async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()}))}async signOut(){return await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0)}setPersistence(e){return this.queue((async()=>{await this.assertedPersistence.setPersistence(zr(e))}))}async initializeRecaptchaConfig(){const e=await ni(this,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}),t=new si(e);null==this.tenantId?this._agentRecaptchaConfig=t:this._tenantRecaptchaConfigs[this.tenantId]=t,t.emailPasswordEnabled&&new li(this).verify()}_getRecaptchaConfig(){return null==this.tenantId?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new Tt("auth","Firebase",e())}onAuthStateChanged(e,t,n){return this.registerStateListener(this.authStateSubscription,e,t,n)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,n){return this.registerStateListener(this.idTokenSubscription,e,t,n)}authStateReady(){return new Promise(((e,t)=>{if(this.currentUser)e();else{const n=this.onAuthStateChanged((()=>{n(),e()}),t)}}))}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(e=this._currentUser)||void 0===e?void 0:e.toJSON()}}async _setRedirectUser(e,t){const n=await this.getOrInitRedirectPersistenceManager(t);return null===e?n.removeCurrentUser():n.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&zr(e)||this._popupRedirectResolver;hr(t,this,"argument-error"),this.redirectPersistenceManager=await $r.create(this,[zr(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,n;return this._isInitialized&&await this.queue((async()=>{})),(null===(t=this._currentUser)||void 0===t?void 0:t._redirectEventId)===e?this._currentUser:(null===(n=this.redirectUser)||void 0===n?void 0:n._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue((async()=>this.directlySetCurrentUser(e)))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const n=null!==(t=null===(e=this.currentUser)||void 0===e?void 0:e.uid)&&void 0!==t?t:null;this.lastNotifiedUid!==n&&(this.lastNotifiedUid=n,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,n,r){if(this._deleted)return()=>{};const i="function"==typeof t?t:t.next.bind(t),s=this._isInitialized?Promise.resolve():this._initializationPromise;return hr(s,this,"internal-error"),s.then((()=>i(this.currentUser))),"function"==typeof t?e.addObserver(t,n,r):e.addObserver(t)}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return hr(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){e&&!this.frameworks.includes(e)&&(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=ti(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);const n=await(null===(e=this.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===e?void 0:e.getHeartbeatsHeader());n&&(t["X-Firebase-Client"]=n);const r=await this._getAppCheckToken();return r&&(t["X-Firebase-AppCheck"]=r),t}async _getAppCheckToken(){var e;const t=await(null===(e=this.appCheckServiceProvider.getImmediate({optional:!0}))||void 0===e?void 0:e.getToken());return(null==t?void 0:t.error)&&function(e,...t){ir.logLevel<=qt.WARN&&ir.warn(`Auth (${An}): ${e}`,...t)}(`Error while retrieving App Check token: ${t.error}`),null==t?void 0:t.token}}function di(e){return Ft(e)}class fi{constructor(e){this.auth=e,this.observer=null,this.addObserver=Ot((e=>this.observer=e))}get next(){return hr(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}function pi(e){const t=e.indexOf(":");return t<0?"":e.substr(0,t+1)}function mi(e){if(!e)return null;const t=Number(e);return isNaN(t)?null:t}class gi{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return dr("not implemented")}_getIdTokenResponse(e){return dr("not implemented")}_linkToIdToken(e,t){return dr("not implemented")}_getReauthenticationResolver(e){return dr("not implemented")}}async function yi(e,t){return Ir(e,"POST","/v1/accounts:resetPassword",Er(e,t))}async function vi(e,t){return Ir(e,"POST","/v1/accounts:update",t)}async function wi(e,t){return Sr(e,"POST","/v1/accounts:signInWithPassword",Er(e,t))}async function bi(e,t){return Ir(e,"POST","/v1/accounts:sendOobCode",Er(e,t))}async function _i(e,t){return bi(e,t)}async function Ei(e,t){return bi(e,t)}class Ii extends gi{constructor(e,t,n,r=null){super("password",n),this._email=e,this._password=t,this._tenantId=r}static _fromEmailAndPassword(e,t){return new Ii(e,t,"password")}static _fromEmailAndCode(e,t,n=null){return new Ii(e,t,"emailLink",n)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const t="string"==typeof e?JSON.parse(e):e;if((null==t?void 0:t.email)&&(null==t?void 0:t.password)){if("password"===t.signInMethod)return this._fromEmailAndPassword(t.email,t.password);if("emailLink"===t.signInMethod)return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}async _getIdTokenResponse(e){var t;switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};if(null===(t=e._getRecaptchaConfig())||void 0===t?void 0:t.emailPasswordEnabled){const t=await ui(e,n,"signInWithPassword");return wi(e,t)}return wi(e,n).catch((async t=>{if("auth/missing-recaptcha-token"===t.code){console.log("Sign-in with email address and password is protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the sign-in flow.");const t=await ui(e,n,"signInWithPassword");return wi(e,t)}return Promise.reject(t)}));case"emailLink":return async function(e,t){return Sr(e,"POST","/v1/accounts:signInWithEmailLink",Er(e,t))}(e,{email:this._email,oobCode:this._password});default:or(e,"internal-error")}}async _linkToIdToken(e,t){switch(this.signInMethod){case"password":return vi(e,{idToken:t,returnSecureToken:!0,email:this._email,password:this._password});case"emailLink":return async function(e,t){return Sr(e,"POST","/v1/accounts:signInWithEmailLink",Er(e,t))}(e,{idToken:t,email:this._email,oobCode:this._password});default:or(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}async function ki(e,t){return Sr(e,"POST","/v1/accounts:signInWithIdp",Er(e,t))}class Si extends gi{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new Si(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):or("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t="string"==typeof e?JSON.parse(e):e,{providerId:n,signInMethod:r}=t,i=Zn(t,["providerId","signInMethod"]);if(!n||!r)return null;const s=new Si(n,r);return s.idToken=i.idToken||void 0,s.accessToken=i.accessToken||void 0,s.secret=i.secret,s.nonce=i.nonce,s.pendingToken=i.pendingToken||null,s}_getIdTokenResponse(e){return ki(e,this.buildRequest())}_linkToIdToken(e,t){const n=this.buildRequest();return n.idToken=t,ki(e,n)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,ki(e,t)}buildRequest(){const e={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=Rt(t)}return e}}const Ti={USER_NOT_FOUND:"user-not-found"};class xi extends gi{constructor(e){super("phone","phone"),this.params=e}static _fromVerification(e,t){return new xi({verificationId:e,verificationCode:t})}static _fromTokenResponse(e,t){return new xi({phoneNumber:e,temporaryProof:t})}_getIdTokenResponse(e){return async function(e,t){return Sr(e,"POST","/v1/accounts:signInWithPhoneNumber",Er(e,t))}(e,this._makeVerificationRequest())}_linkToIdToken(e,t){return async function(e,t){const n=await Sr(e,"POST","/v1/accounts:signInWithPhoneNumber",Er(e,t));if(n.temporaryProof)throw Cr(e,"account-exists-with-different-credential",n);return n}(e,Object.assign({idToken:t},this._makeVerificationRequest()))}_getReauthenticationResolver(e){return async function(e,t){return Sr(e,"POST","/v1/accounts:signInWithPhoneNumber",Er(e,Object.assign(Object.assign({},t),{operation:"REAUTH"})),Ti)}(e,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:e,phoneNumber:t,verificationId:n,verificationCode:r}=this.params;return e&&t?{temporaryProof:e,phoneNumber:t}:{sessionInfo:n,code:r}}toJSON(){const e={providerId:this.providerId};return this.params.phoneNumber&&(e.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(e.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(e.verificationCode=this.params.verificationCode),this.params.verificationId&&(e.verificationId=this.params.verificationId),e}static fromJSON(e){"string"==typeof e&&(e=JSON.parse(e));const{verificationId:t,verificationCode:n,phoneNumber:r,temporaryProof:i}=e;return n||t||r||i?new xi({verificationId:t,verificationCode:n,phoneNumber:r,temporaryProof:i}):null}}class Ci{constructor(e){var t,n,r,i,s,o;const a=Pt(Dt(e)),l=null!==(t=a.apiKey)&&void 0!==t?t:null,u=null!==(n=a.oobCode)&&void 0!==n?n:null,c=function(e){switch(e){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(r=a.mode)&&void 0!==r?r:null);hr(l&&u&&c,"argument-error"),this.apiKey=l,this.operation=c,this.code=u,this.continueUrl=null!==(i=a.continueUrl)&&void 0!==i?i:null,this.languageCode=null!==(s=a.languageCode)&&void 0!==s?s:null,this.tenantId=null!==(o=a.tenantId)&&void 0!==o?o:null}static parseLink(e){const t=function(e){const t=Pt(Dt(e)).link,n=t?Pt(Dt(t)).deep_link_id:null,r=Pt(Dt(e)).deep_link_id;return(r?Pt(Dt(r)).link:null)||r||n||t||e}(e);try{return new Ci(t)}catch(e){return null}}}class Ai{constructor(){this.providerId=Ai.PROVIDER_ID}static credential(e,t){return Ii._fromEmailAndPassword(e,t)}static credentialWithLink(e,t){const n=Ci.parseLink(t);return hr(n,"argument-error"),Ii._fromEmailAndCode(e,n.code,n.tenantId)}}Ai.PROVIDER_ID="password",Ai.EMAIL_PASSWORD_SIGN_IN_METHOD="password",Ai.EMAIL_LINK_SIGN_IN_METHOD="emailLink";class Ni{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}class Ri extends Ni{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}class Pi extends Ri{static credentialFromJSON(e){const t="string"==typeof e?JSON.parse(e):e;return hr("providerId"in t&&"signInMethod"in t,"argument-error"),Si._fromParams(t)}credential(e){return this._credential(Object.assign(Object.assign({},e),{nonce:e.rawNonce}))}_credential(e){return hr(e.idToken||e.accessToken,"argument-error"),Si._fromParams(Object.assign(Object.assign({},e),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(e){return Pi.oauthCredentialFromTaggedObject(e)}static credentialFromError(e){return Pi.oauthCredentialFromTaggedObject(e.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:n,oauthTokenSecret:r,pendingToken:i,nonce:s,providerId:o}=e;if(!(n||r||t||i))return null;if(!o)return null;try{return new Pi(o)._credential({idToken:t,accessToken:n,nonce:s,pendingToken:i})}catch(e){return null}}}class Di extends Ri{constructor(){super("facebook.com")}static credential(e){return Si._fromParams({providerId:Di.PROVIDER_ID,signInMethod:Di.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Di.credentialFromTaggedObject(e)}static credentialFromError(e){return Di.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e))return null;if(!e.oauthAccessToken)return null;try{return Di.credential(e.oauthAccessToken)}catch(e){return null}}}Di.FACEBOOK_SIGN_IN_METHOD="facebook.com",Di.PROVIDER_ID="facebook.com";class Oi extends Ri{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return Si._fromParams({providerId:Oi.PROVIDER_ID,signInMethod:Oi.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return Oi.credentialFromTaggedObject(e)}static credentialFromError(e){return Oi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:n}=e;if(!t&&!n)return null;try{return Oi.credential(t,n)}catch(e){return null}}}Oi.GOOGLE_SIGN_IN_METHOD="google.com",Oi.PROVIDER_ID="google.com";class Li extends Ri{constructor(){super("github.com")}static credential(e){return Si._fromParams({providerId:Li.PROVIDER_ID,signInMethod:Li.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Li.credentialFromTaggedObject(e)}static credentialFromError(e){return Li.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e))return null;if(!e.oauthAccessToken)return null;try{return Li.credential(e.oauthAccessToken)}catch(e){return null}}}Li.GITHUB_SIGN_IN_METHOD="github.com",Li.PROVIDER_ID="github.com";class Mi extends gi{constructor(e,t){super(e,e),this.pendingToken=t}_getIdTokenResponse(e){return ki(e,this.buildRequest())}_linkToIdToken(e,t){const n=this.buildRequest();return n.idToken=t,ki(e,n)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,ki(e,t)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(e){const t="string"==typeof e?JSON.parse(e):e,{providerId:n,signInMethod:r,pendingToken:i}=t;return n&&r&&i&&n===r?new Mi(n,i):null}static _create(e,t){return new Mi(e,t)}buildRequest(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}class Fi extends Ni{constructor(e){hr(e.startsWith("saml."),"argument-error"),super(e)}static credentialFromResult(e){return Fi.samlCredentialFromTaggedObject(e)}static credentialFromError(e){return Fi.samlCredentialFromTaggedObject(e.customData||{})}static credentialFromJSON(e){const t=Mi.fromJSON(e);return hr(t,"argument-error"),t}static samlCredentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{pendingToken:t,providerId:n}=e;if(!t||!n)return null;try{return Mi._create(n,t)}catch(e){return null}}}class Ui extends Ri{constructor(){super("twitter.com")}static credential(e,t){return Si._fromParams({providerId:Ui.PROVIDER_ID,signInMethod:Ui.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return Ui.credentialFromTaggedObject(e)}static credentialFromError(e){return Ui.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:t,oauthTokenSecret:n}=e;if(!t||!n)return null;try{return Ui.credential(t,n)}catch(e){return null}}}async function Vi(e,t){return Sr(e,"POST","/v1/accounts:signUp",Er(e,t))}Ui.TWITTER_SIGN_IN_METHOD="twitter.com",Ui.PROVIDER_ID="twitter.com";class zi{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,n,r=!1){const i=await Ur._fromIdTokenResponse(e,n,r),s=Bi(n);return new zi({user:i,providerId:s,_tokenResponse:n,operationType:t})}static async _forOperation(e,t,n){await e._updateTokensIfNecessary(n,!0);const r=Bi(n);return new zi({user:e,providerId:r,_tokenResponse:n,operationType:t})}}function Bi(e){return e.providerId?e.providerId:"phoneNumber"in e?"phone":null}class ji extends St{constructor(e,t,n,r){var i;super(t.code,t.message),this.operationType=n,this.user=r,Object.setPrototypeOf(this,ji.prototype),this.customData={appName:e.name,tenantId:null!==(i=e.tenantId)&&void 0!==i?i:void 0,_serverResponse:t.customData._serverResponse,operationType:n}}static _fromErrorAndOperation(e,t,n,r){return new ji(e,t,n,r)}}function qi(e,t,n,r){return("reauthenticate"===t?n._getReauthenticationResolver(e):n._getIdTokenResponse(e)).catch((n=>{if("auth/multi-factor-auth-required"===n.code)throw ji._fromErrorAndOperation(e,n,t,r);throw n}))}function $i(e){return new Set(e.map((({providerId:e})=>e)).filter((e=>!!e)))}async function Ki(e,t,n=!1){const r=await Pr(e,t._linkToIdToken(e.auth,await e.getIdToken()),n);return zi._forOperation(e,"link",r)}async function Gi(e,t,n){await Lr(t);const r=!1===e?"provider-already-linked":"no-such-provider";hr($i(t.providerData).has(n)===e,t.auth,r)}async function Wi(e,t,n=!1){const{auth:r}=e,i="reauthenticate";try{const s=await Pr(e,qi(r,i,t,e),n);hr(s.idToken,r,"internal-error");const o=Rr(s.idToken);hr(o,r,"internal-error");const{sub:a}=o;return hr(e.uid===a,r,"user-mismatch"),zi._forOperation(e,i,s)}catch(e){throw"auth/user-not-found"===(null==e?void 0:e.code)&&or(r,"user-mismatch"),e}}async function Hi(e,t,n=!1){const r="signIn",i=await qi(e,r,t),s=await zi._fromIdTokenResponse(e,r,i);return n||await e._updateCurrentUser(s.user),s}async function Qi(e,t){return Hi(di(e),t)}async function Yi(e,t){const n=Ft(e);return await Gi(!1,n,t.providerId),Ki(n,t)}async function Ji(e,t){return Wi(Ft(e),t)}class Xi{constructor(e,t){this.factorId=e,this.uid=t.mfaEnrollmentId,this.enrollmentTime=new Date(t.enrolledAt).toUTCString(),this.displayName=t.displayName}static _fromServerResponse(e,t){return"phoneInfo"in t?Zi._fromServerResponse(e,t):"totpInfo"in t?es._fromServerResponse(e,t):or(e,"internal-error")}}class Zi extends Xi{constructor(e){super("phone",e),this.phoneNumber=e.phoneInfo}static _fromServerResponse(e,t){return new Zi(t)}}class es extends Xi{constructor(e){super("totp",e)}static _fromServerResponse(e,t){return new es(t)}}function ts(e,t,n){var r;hr((null===(r=n.url)||void 0===r?void 0:r.length)>0,e,"invalid-continue-uri"),hr(void 0===n.dynamicLinkDomain||n.dynamicLinkDomain.length>0,e,"invalid-dynamic-link-domain"),t.continueUrl=n.url,t.dynamicLinkDomain=n.dynamicLinkDomain,t.canHandleCodeInApp=n.handleCodeInApp,n.iOS&&(hr(n.iOS.bundleId.length>0,e,"missing-ios-bundle-id"),t.iOSBundleId=n.iOS.bundleId),n.android&&(hr(n.android.packageName.length>0,e,"missing-android-pkg-name"),t.androidInstallApp=n.android.installApp,t.androidMinimumVersionCode=n.android.minimumVersion,t.androidPackageName=n.android.packageName)}async function ns(e,t){const n=Ft(e),r=await yi(n,{oobCode:t}),i=r.requestType;switch(hr(i,n,"internal-error"),i){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":hr(r.newEmail,n,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":hr(r.mfaInfo,n,"internal-error");default:hr(r.email,n,"internal-error")}let s=null;return r.mfaInfo&&(s=Xi._fromServerResponse(di(n),r.mfaInfo)),{data:{email:("VERIFY_AND_CHANGE_EMAIL"===r.requestType?r.newEmail:r.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===r.requestType?r.email:r.newEmail)||null,multiFactorInfo:s},operation:i}}async function rs(e,t,n){const{auth:r}=e,i={idToken:await e.getIdToken(),returnSecureToken:!0};t&&(i.email=t),n&&(i.password=n);const s=await Pr(e,vi(r,i));await e._updateTokensIfNecessary(s,!0)}class is{constructor(e,t,n={}){this.isNewUser=e,this.providerId=t,this.profile=n}}class ss extends is{constructor(e,t,n,r){super(e,t,n),this.username=r}}class os extends is{constructor(e,t){super(e,"facebook.com",t)}}class as extends ss{constructor(e,t){super(e,"github.com",t,"string"==typeof(null==t?void 0:t.login)?null==t?void 0:t.login:null)}}class ls extends is{constructor(e,t){super(e,"google.com",t)}}class us extends ss{constructor(e,t,n){super(e,"twitter.com",t,n)}}function cs(e){const{user:t,_tokenResponse:n}=e;return t.isAnonymous&&!n?{providerId:null,isNewUser:!1,profile:null}:function(e){var t,n;if(!e)return null;const{providerId:r}=e,i=e.rawUserInfo?JSON.parse(e.rawUserInfo):{},s=e.isNewUser||"identitytoolkit#SignupNewUserResponse"===e.kind;if(!r&&(null==e?void 0:e.idToken)){const r=null===(n=null===(t=Rr(e.idToken))||void 0===t?void 0:t.firebase)||void 0===n?void 0:n.sign_in_provider;if(r)return new is(s,"anonymous"!==r&&"custom"!==r?r:null)}if(!r)return null;switch(r){case"facebook.com":return new os(s,i);case"github.com":return new as(s,i);case"google.com":return new ls(s,i);case"twitter.com":return new us(s,i,e.screenName||null);case"custom":case"anonymous":return new is(s,null);default:return new is(s,r,i)}}(n)}class hs{constructor(e,t,n){this.type=e,this.credential=t,this.user=n}static _fromIdtoken(e,t){return new hs("enroll",e,t)}static _fromMfaPendingCredential(e){return new hs("signin",e)}toJSON(){return{multiFactorSession:{["enroll"===this.type?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(e){var t,n;if(null==e?void 0:e.multiFactorSession){if(null===(t=e.multiFactorSession)||void 0===t?void 0:t.pendingCredential)return hs._fromMfaPendingCredential(e.multiFactorSession.pendingCredential);if(null===(n=e.multiFactorSession)||void 0===n?void 0:n.idToken)return hs._fromIdtoken(e.multiFactorSession.idToken)}return null}}class ds{constructor(e,t,n){this.session=e,this.hints=t,this.signInResolver=n}static _fromError(e,t){const n=di(e),r=t.customData._serverResponse,i=(r.mfaInfo||[]).map((e=>Xi._fromServerResponse(n,e)));hr(r.mfaPendingCredential,n,"internal-error");const s=hs._fromMfaPendingCredential(r.mfaPendingCredential);return new ds(s,i,(async e=>{const i=await e._process(n,s);delete r.mfaInfo,delete r.mfaPendingCredential;const o=Object.assign(Object.assign({},r),{idToken:i.idToken,refreshToken:i.refreshToken});switch(t.operationType){case"signIn":const e=await zi._fromIdTokenResponse(n,t.operationType,o);return await n._updateCurrentUser(e.user),e;case"reauthenticate":return hr(t.user,n,"internal-error"),zi._forOperation(t.user,t.operationType,o);default:or(n,"internal-error")}}))}async resolveSignIn(e){const t=e;return this.signInResolver(t)}}class fs{constructor(e){this.user=e,this.enrolledFactors=[],e._onReload((t=>{t.mfaInfo&&(this.enrolledFactors=t.mfaInfo.map((t=>Xi._fromServerResponse(e.auth,t))))}))}static _fromUser(e){return new fs(e)}async getSession(){return hs._fromIdtoken(await this.user.getIdToken(),this.user)}async enroll(e,t){const n=e,r=await this.getSession(),i=await Pr(this.user,n._process(this.user.auth,r,t));return await this.user._updateTokensIfNecessary(i),this.user.reload()}async unenroll(e){const t="string"==typeof e?e:e.uid,n=await this.user.getIdToken();try{const e=await Pr(this.user,function(e,t){return Ir(e,"POST","/v2/accounts/mfaEnrollment:withdraw",Er(e,t))}(this.user.auth,{idToken:n,mfaEnrollmentId:t}));this.enrolledFactors=this.enrolledFactors.filter((({uid:e})=>e!==t)),await this.user._updateTokensIfNecessary(e),await this.user.reload()}catch(e){throw e}}}const ps=new WeakMap,ms="__sak";class gs{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(ms,"1"),this.storage.removeItem(ms),Promise.resolve(!0)):Promise.resolve(!1)}catch(e){return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}class ys extends gs{constructor(){super((()=>window.localStorage),"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function(){const e=wt();return Wr(e)||Zr(e)}()&&function(){try{return!(!window||window===window.top)}catch(e){return!1}}(),this.fallbackToPolling=ei(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const n=this.storage.getItem(t),r=this.localCache[t];n!==r&&e(t,r,n)}}onStorageEvent(e,t=!1){if(!e.key)return void this.forAllChangedKeys(((e,t,n)=>{this.notifyListeners(e,n)}));const n=e.key;if(t?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const r=this.storage.getItem(n);if(e.newValue!==r)null!==e.newValue?this.storage.setItem(n,e.newValue):this.storage.removeItem(n);else if(this.localCache[n]===e.newValue&&!t)return}const r=()=>{const e=this.storage.getItem(n);(t||this.localCache[n]!==e)&&this.notifyListeners(n,e)},i=this.storage.getItem(n);It()&&10===document.documentMode&&i!==e.newValue&&e.newValue!==e.oldValue?setTimeout(r,10):r()}notifyListeners(e,t){this.localCache[e]=t;const n=this.listeners[e];if(n)for(const e of Array.from(n))e(t?JSON.parse(t):t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval((()=>{this.forAllChangedKeys(((e,t,n)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:n}),!0)}))}),1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}ys.type="LOCAL";const vs=ys;class ws extends gs{constructor(){super((()=>window.sessionStorage),"SESSION")}_addListener(e,t){}_removeListener(e,t){}}ws.type="SESSION";const bs=ws;class _s{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find((t=>t.isListeningto(e)));if(t)return t;const n=new _s(e);return this.receivers.push(n),n}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:n,eventType:r,data:i}=t.data,s=this.handlersMap[r];if(!(null==s?void 0:s.size))return;t.ports[0].postMessage({status:"ack",eventId:n,eventType:r});const o=Array.from(s).map((async e=>e(t.origin,i))),a=await function(e){return Promise.all(e.map((async e=>{try{return{fulfilled:!0,value:await e}}catch(e){return{fulfilled:!1,reason:e}}})))}(o);t.ports[0].postMessage({status:"done",eventId:n,eventType:r,response:a})}_subscribe(e,t){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),t&&0!==this.handlersMap[e].size||delete this.handlersMap[e],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}function Es(e="",t=10){let n="";for(let e=0;e<t;e++)n+=Math.floor(10*Math.random());return e+n}_s.receivers=[];class Is{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,n=50){const r="undefined"!=typeof MessageChannel?new MessageChannel:null;if(!r)throw new Error("connection_unavailable");let i,s;return new Promise(((o,a)=>{const l=Es("",20);r.port1.start();const u=setTimeout((()=>{a(new Error("unsupported_event"))}),n);s={messageChannel:r,onMessage(e){const t=e;if(t.data.eventId===l)switch(t.data.status){case"ack":clearTimeout(u),i=setTimeout((()=>{a(new Error("timeout"))}),3e3);break;case"done":clearTimeout(i),o(t.data.response);break;default:clearTimeout(u),clearTimeout(i),a(new Error("invalid_response"))}}},this.handlers.add(s),r.port1.addEventListener("message",s.onMessage),this.target.postMessage({eventType:e,eventId:l,data:t},[r.port2])})).finally((()=>{s&&this.removeMessageHandler(s)}))}}function ks(){return window}function Ss(){return void 0!==ks().WorkerGlobalScope&&"function"==typeof ks().importScripts}const Ts="firebaseLocalStorageDb",xs="firebaseLocalStorage",Cs="fbase_key";class As{constructor(e){this.request=e}toPromise(){return new Promise(((e,t)=>{this.request.addEventListener("success",(()=>{e(this.request.result)})),this.request.addEventListener("error",(()=>{t(this.request.error)}))}))}}function Ns(e,t){return e.transaction([xs],t?"readwrite":"readonly").objectStore(xs)}function Rs(){const e=indexedDB.open(Ts,1);return new Promise(((t,n)=>{e.addEventListener("error",(()=>{n(e.error)})),e.addEventListener("upgradeneeded",(()=>{const t=e.result;try{t.createObjectStore(xs,{keyPath:Cs})}catch(e){n(e)}})),e.addEventListener("success",(async()=>{const n=e.result;n.objectStoreNames.contains(xs)?t(n):(n.close(),await function(){const e=indexedDB.deleteDatabase(Ts);return new As(e).toPromise()}(),t(await Rs()))}))}))}async function Ps(e,t,n){const r=Ns(e,!0).put({[Cs]:t,value:n});return new As(r).toPromise()}function Ds(e,t){const n=Ns(e,!0).delete(t);return new As(n).toPromise()}class Os{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then((()=>{}),(()=>{}))}async _openDb(){return this.db||(this.db=await Rs()),this.db}async _withRetries(e){let t=0;for(;;)try{const t=await this._openDb();return await e(t)}catch(e){if(t++>3)throw e;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return Ss()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=_s._getInstance(Ss()?self:null),this.receiver._subscribe("keyChanged",(async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)}))),this.receiver._subscribe("ping",(async(e,t)=>["keyChanged"]))}async initializeSender(){var e,t;if(this.activeServiceWorker=await async function(){if(!(null===navigator||void 0===navigator?void 0:navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch(e){return null}}(),!this.activeServiceWorker)return;this.sender=new Is(this.activeServiceWorker);const n=await this.sender._send("ping",{},800);n&&(null===(e=n[0])||void 0===e?void 0:e.fulfilled)&&(null===(t=n[0])||void 0===t?void 0:t.value.includes("keyChanged"))&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){var t;if(this.sender&&this.activeServiceWorker&&((null===(t=null===navigator||void 0===navigator?void 0:navigator.serviceWorker)||void 0===t?void 0:t.controller)||null)===this.activeServiceWorker)try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch(t){}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Rs();return await Ps(e,ms,"1"),await Ds(e,ms),!0}catch(e){}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite((async()=>(await this._withRetries((n=>Ps(n,e,t))),this.localCache[e]=t,this.notifyServiceWorker(e))))}async _get(e){const t=await this._withRetries((t=>async function(e,t){const n=Ns(e,!1).get(t),r=await new As(n).toPromise();return void 0===r?null:r.value}(t,e)));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite((async()=>(await this._withRetries((t=>Ds(t,e))),delete this.localCache[e],this.notifyServiceWorker(e))))}async _poll(){const e=await this._withRetries((e=>{const t=Ns(e,!1).getAll();return new As(t).toPromise()}));if(!e)return[];if(0!==this.pendingWrites)return[];const t=[],n=new Set;for(const{fbase_key:r,value:i}of e)n.add(r),JSON.stringify(this.localCache[r])!==JSON.stringify(i)&&(this.notifyListeners(r,i),t.push(r));for(const e of Object.keys(this.localCache))this.localCache[e]&&!n.has(e)&&(this.notifyListeners(e,null),t.push(e));return t}notifyListeners(e,t){this.localCache[e]=t;const n=this.listeners[e];if(n)for(const e of Array.from(n))e(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval((async()=>this._poll()),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&this.stopPolling()}}Os.type="LOCAL";const Ls=Os,Ms=1e12;class Fs{constructor(e){this.auth=e,this.counter=Ms,this._widgets=new Map}render(e,t){const n=this.counter;return this._widgets.set(n,new Us(e,this.auth.name,t||{})),this.counter++,n}reset(e){var t;const n=e||Ms;null===(t=this._widgets.get(n))||void 0===t||t.delete(),this._widgets.delete(n)}getResponse(e){var t;const n=e||Ms;return(null===(t=this._widgets.get(n))||void 0===t?void 0:t.getResponse())||""}async execute(e){var t;const n=e||Ms;return null===(t=this._widgets.get(n))||void 0===t||t.execute(),""}}class Us{constructor(e,t,n){this.params=n,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const r="string"==typeof e?document.getElementById(e):e;hr(r,"argument-error",{appName:t}),this.container=r,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),this.timerId||(this.timerId=window.setTimeout((()=>{this.responseToken=function(e){const t=[],n="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let e=0;e<50;e++)t.push(n.charAt(Math.floor(62*Math.random())));return t.join("")}();const{callback:e,"expired-callback":t}=this.params;if(e)try{e(this.responseToken)}catch(e){}this.timerId=window.setTimeout((()=>{if(this.timerId=null,this.responseToken=null,t)try{t()}catch(e){}this.isVisible&&this.execute()}),6e4)}),500))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}const Vs=ai("rcb"),zs=new yr(3e4,6e4);class Bs{constructor(){var e;this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!!(null===(e=ks().grecaptcha)||void 0===e?void 0:e.render)}load(e,t=""){return hr(function(e){return e.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(e)}(t),e,"argument-error"),this.shouldResolveImmediately(t)&&ri(ks().grecaptcha)?Promise.resolve(ks().grecaptcha):new Promise(((n,r)=>{const i=ks().setTimeout((()=>{r(ar(e,"network-request-failed"))}),zs.get());ks()[Vs]=()=>{ks().clearTimeout(i),delete ks()[Vs];const s=ks().grecaptcha;if(!s||!ri(s))return void r(ar(e,"internal-error"));const o=s.render;s.render=(e,t)=>{const n=o(e,t);return this.counter++,n},this.hostLanguage=t,n(s)},oi(`https://www.google.com/recaptcha/api.js??${Rt({onload:Vs,render:"explicit",hl:t})}`).catch((()=>{clearTimeout(i),r(ar(e,"internal-error"))}))}))}clearedOneInstance(){this.counter--}shouldResolveImmediately(e){var t;return!!(null===(t=ks().grecaptcha)||void 0===t?void 0:t.render)&&(e===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}class js{async load(e){return new Fs(e)}clearedOneInstance(){}}const qs="recaptcha",$s={theme:"light",type:"image"};class Ks{constructor(e,t,n=Object.assign({},$s)){this.parameters=n,this.type=qs,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=di(e),this.isInvisible="invisible"===this.parameters.size,hr("undefined"!=typeof document,this.auth,"operation-not-supported-in-this-environment");const r="string"==typeof t?document.getElementById(t):t;hr(r,this.auth,"argument-error"),this.container=r,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new js:new Bs,this.validateStartingState()}async verify(){this.assertNotDestroyed();const e=await this.render(),t=this.getAssertedRecaptcha();return t.getResponse(e)||new Promise((n=>{const r=e=>{e&&(this.tokenChangeListeners.delete(r),n(e))};this.tokenChangeListeners.add(r),this.isInvisible&&t.execute(e)}))}render(){try{this.assertNotDestroyed()}catch(e){return Promise.reject(e)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch((e=>{throw this.renderPromise=null,e}))),this.renderPromise}_reset(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach((e=>{this.container.removeChild(e)}))}validateStartingState(){hr(!this.parameters.sitekey,this.auth,"argument-error"),hr(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),hr("undefined"!=typeof document,this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(e){return t=>{if(this.tokenChangeListeners.forEach((e=>e(t))),"function"==typeof e)e(t);else if("string"==typeof e){const n=ks()[e];"function"==typeof n&&n(t)}}}assertNotDestroyed(){hr(!this.destroyed,this.auth,"internal-error")}async makeRenderPromise(){if(await this.init(),!this.widgetId){let e=this.container;if(!this.isInvisible){const t=document.createElement("div");e.appendChild(t),e=t}this.widgetId=this.getAssertedRecaptcha().render(e,this.parameters)}return this.widgetId}async init(){hr(mr()&&!Ss(),this.auth,"internal-error"),await function(){let e=null;return new Promise((t=>{"complete"!==document.readyState?(e=()=>t(),window.addEventListener("load",e)):t()})).catch((t=>{throw e&&window.removeEventListener("load",e),t}))}(),this.recaptcha=await this._recaptchaLoader.load(this.auth,this.auth.languageCode||void 0);const e=await async function(e){return(await Ir(e,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""}(this.auth);hr(e,this.auth,"internal-error"),this.parameters.sitekey=e}getAssertedRecaptcha(){return hr(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}class Gs{constructor(e,t){this.verificationId=e,this.onConfirmation=t}confirm(e){const t=xi._fromVerification(this.verificationId,e);return this.onConfirmation(t)}}async function Ws(e,t,n){var r;const i=await n.verify();try{let s;if(hr("string"==typeof i,e,"argument-error"),hr(n.type===qs,e,"argument-error"),s="string"==typeof t?{phoneNumber:t}:t,"session"in s){const t=s.session;if("phoneNumber"in s){hr("enroll"===t.type,e,"internal-error");const n=await function(e,t){return Ir(e,"POST","/v2/accounts/mfaEnrollment:start",Er(e,t))}(e,{idToken:t.credential,phoneEnrollmentInfo:{phoneNumber:s.phoneNumber,recaptchaToken:i}});return n.phoneSessionInfo.sessionInfo}{hr("signin"===t.type,e,"internal-error");const n=(null===(r=s.multiFactorHint)||void 0===r?void 0:r.uid)||s.multiFactorUid;hr(n,e,"missing-multi-factor-info");const o=await function(e,t){return Ir(e,"POST","/v2/accounts/mfaSignIn:start",Er(e,t))}(e,{mfaPendingCredential:t.credential,mfaEnrollmentId:n,phoneSignInInfo:{recaptchaToken:i}});return o.phoneResponseInfo.sessionInfo}}{const{sessionInfo:t}=await async function(e,t){return Ir(e,"POST","/v1/accounts:sendVerificationCode",Er(e,t))}(e,{phoneNumber:s.phoneNumber,recaptchaToken:i});return t}}finally{n._reset()}}class Hs{constructor(e){this.providerId=Hs.PROVIDER_ID,this.auth=di(e)}verifyPhoneNumber(e,t){return Ws(this.auth,e,Ft(t))}static credential(e,t){return xi._fromVerification(e,t)}static credentialFromResult(e){const t=e;return Hs.credentialFromTaggedObject(t)}static credentialFromError(e){return Hs.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{phoneNumber:t,temporaryProof:n}=e;return t&&n?xi._fromTokenResponse(t,n):null}}function Qs(e,t){return t?zr(t):(hr(e._popupRedirectResolver,e,"argument-error"),e._popupRedirectResolver)}Hs.PROVIDER_ID="phone",Hs.PHONE_SIGN_IN_METHOD="phone";class Ys extends gi{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return ki(e,this._buildIdpRequest())}_linkToIdToken(e,t){return ki(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return ki(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function Js(e){return Hi(e.auth,new Ys(e),e.bypassAuthState)}function Xs(e){const{auth:t,user:n}=e;return hr(n,t,"internal-error"),Wi(n,new Ys(e),e.bypassAuthState)}async function Zs(e){const{auth:t,user:n}=e;return hr(n,t,"internal-error"),Ki(n,new Ys(e),e.bypassAuthState)}class eo{constructor(e,t,n,r,i=!1){this.auth=e,this.resolver=n,this.user=r,this.bypassAuthState=i,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise((async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(e){this.reject(e)}}))}async onAuthEvent(e){const{urlResponse:t,sessionId:n,postBody:r,tenantId:i,error:s,type:o}=e;if(s)return void this.reject(s);const a={auth:this.auth,requestUri:t,sessionId:n,tenantId:i||void 0,postBody:r||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(o)(a))}catch(e){this.reject(e)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return Js;case"linkViaPopup":case"linkViaRedirect":return Zs;case"reauthViaPopup":case"reauthViaRedirect":return Xs;default:or(this.auth,"internal-error")}}resolve(e){fr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){fr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const to=new yr(2e3,1e4);class no extends eo{constructor(e,t,n,r,i){super(e,t,r,i),this.provider=n,this.authWindow=null,this.pollId=null,no.currentPopupAction&&no.currentPopupAction.cancel(),no.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return hr(e,this.auth,"internal-error"),e}async onExecution(){fr(1===this.filter.length,"Popup operations only handle one event");const e=Es();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch((e=>{this.reject(e)})),this.resolver._isIframeWebStorageSupported(this.auth,(e=>{e||this.reject(ar(this.auth,"web-storage-unsupported"))})),this.pollUserCancellation()}get eventId(){var e;return(null===(e=this.authWindow)||void 0===e?void 0:e.associatedEvent)||null}cancel(){this.reject(ar(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,no.currentPopupAction=null}pollUserCancellation(){const e=()=>{var t,n;(null===(n=null===(t=this.authWindow)||void 0===t?void 0:t.window)||void 0===n?void 0:n.closed)?this.pollId=window.setTimeout((()=>{this.pollId=null,this.reject(ar(this.auth,"popup-closed-by-user"))}),8e3):this.pollId=window.setTimeout(e,to.get())};e()}}no.currentPopupAction=null;const ro="pendingRedirect",io=new Map;class so extends eo{constructor(e,t,n=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,n),this.eventId=null}async execute(){let e=io.get(this.auth._key());if(!e){try{const t=await async function(e,t){const n=uo(t),r=lo(e);if(!await r._isAvailable())return!1;const i="true"===await r._get(n);return await r._remove(n),i}(this.resolver,this.auth),n=t?await super.execute():null;e=()=>Promise.resolve(n)}catch(t){e=()=>Promise.reject(t)}io.set(this.auth._key(),e)}return this.bypassAuthState||io.set(this.auth._key(),(()=>Promise.resolve(null))),e()}async onAuthEvent(e){if("signInViaRedirect"===e.type)return super.onAuthEvent(e);if("unknown"!==e.type){if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}else this.resolve(null)}async onExecution(){}cleanUp(){}}async function oo(e,t){return lo(e)._set(uo(t),"true")}function ao(e,t){io.set(e._key(),t)}function lo(e){return zr(e._redirectPersistence)}function uo(e){return qr(ro,e.config.apiKey,e.name)}async function co(e,t,n=!1){const r=di(e),i=Qs(r,t),s=new so(r,i,n),o=await s.execute();return o&&!n&&(delete o.user._redirectEventId,await r._persistUserIfCurrent(o.user),await r._setRedirectUser(null,t)),o}async function ho(e){const t=Es(`${e.uid}:::`);return e._redirectEventId=t,await e.auth._setRedirectUser(e),await e.auth._persistUserIfCurrent(e),t}class fo{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach((n=>{this.isEventForConsumer(e,n)&&(t=!0,this.sendToConsumer(e,n),this.saveEventToCache(e))})),this.hasHandledPotentialRedirect||!function(e){switch(e.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return mo(e);default:return!1}}(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var n;if(e.error&&!mo(e)){const r=(null===(n=e.error.code)||void 0===n?void 0:n.split("auth/")[1])||"internal-error";t.onError(ar(this.auth,r))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const n=null===t.eventId||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&n}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(po(e))}saveEventToCache(e){this.cachedEventUids.add(po(e)),this.lastProcessedEventTime=Date.now()}}function po(e){return[e.type,e.eventId,e.sessionId,e.tenantId].filter((e=>e)).join("-")}function mo({type:e,error:t}){return"unknown"===e&&"auth/no-auth-event"===(null==t?void 0:t.code)}async function go(e,t={}){return Ir(e,"GET","/v1/projects",t)}const yo=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,vo=/^https?/;function wo(e){const t=pr(),{protocol:n,hostname:r}=new URL(t);if(e.startsWith("chrome-extension://")){const i=new URL(e);return""===i.hostname&&""===r?"chrome-extension:"===n&&e.replace("chrome-extension://","")===t.replace("chrome-extension://",""):"chrome-extension:"===n&&i.hostname===r}if(!vo.test(n))return!1;if(yo.test(e))return r===e;const i=e.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}const bo=new yr(3e4,6e4);function _o(){const e=ks().___jsl;if(null==e?void 0:e.H)for(const t of Object.keys(e.H))if(e.H[t].r=e.H[t].r||[],e.H[t].L=e.H[t].L||[],e.H[t].r=[...e.H[t].L],e.CP)for(let t=0;t<e.CP.length;t++)e.CP[t]=null}let Eo=null;function Io(e){return Eo=Eo||function(e){return new Promise(((t,n)=>{var r,i,s;function o(){_o(),gapi.load("gapi.iframes",{callback:()=>{t(gapi.iframes.getContext())},ontimeout:()=>{_o(),n(ar(e,"network-request-failed"))},timeout:bo.get()})}if(null===(i=null===(r=ks().gapi)||void 0===r?void 0:r.iframes)||void 0===i?void 0:i.Iframe)t(gapi.iframes.getContext());else{if(!(null===(s=ks().gapi)||void 0===s?void 0:s.load)){const t=ai("iframefcb");return ks()[t]=()=>{gapi.load?o():n(ar(e,"network-request-failed"))},oi(`https://apis.google.com/js/api.js?onload=${t}`).catch((e=>n(e)))}o()}})).catch((e=>{throw Eo=null,e}))}(e),Eo}const ko=new yr(5e3,15e3),So={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},To=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function xo(e){const t=e.config;hr(t.authDomain,e,"auth-domain-config-required");const n=t.emulator?vr(t,"emulator/auth/iframe"):`https://${e.config.authDomain}/__/auth/iframe`,r={apiKey:t.apiKey,appName:e.name,v:An},i=To.get(e.config.apiHost);i&&(r.eid=i);const s=e._getFrameworks();return s.length&&(r.fw=s.join(",")),`${n}?${Rt(r).slice(1)}`}const Co={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class Ao{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch(e){}}}const No="__/auth/handler",Ro="emulator/auth/handler",Po=encodeURIComponent("fac");async function Do(e,t,n,r,i,s){hr(e.config.authDomain,e,"auth-domain-config-required"),hr(e.config.apiKey,e,"invalid-api-key");const o={apiKey:e.config.apiKey,appName:e.name,authType:n,redirectUrl:r,v:An,eventId:i};if(t instanceof Ni){t.setDefaultLanguage(e.languageCode),o.providerId=t.providerId||"",function(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}(t.getCustomParameters())||(o.customParameters=JSON.stringify(t.getCustomParameters()));for(const[e,t]of Object.entries(s||{}))o[e]=t}if(t instanceof Ri){const e=t.getScopes().filter((e=>""!==e));e.length>0&&(o.scopes=e.join(","))}e.tenantId&&(o.tid=e.tenantId);const a=o;for(const e of Object.keys(a))void 0===a[e]&&delete a[e];const l=await e._getAppCheckToken(),u=l?`#${Po}=${encodeURIComponent(l)}`:"";return`${function({config:e}){return e.emulator?vr(e,Ro):`https://${e.authDomain}/${No}`}(e)}?${Rt(a).slice(1)}${u}`}const Oo="webStorageSupport",Lo=class{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=bs,this._completeRedirectFn=co,this._overrideRedirectResult=ao}async _openPopup(e,t,n,r){var i;return fr(null===(i=this.eventManagers[e._key()])||void 0===i?void 0:i.manager,"_initialize() not called before _openPopup()"),function(e,t,n,r=500,i=600){const s=Math.max((window.screen.availHeight-i)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString();let a="";const l=Object.assign(Object.assign({},Co),{width:r.toString(),height:i.toString(),top:s,left:o}),u=wt().toLowerCase();n&&(a=Hr(u)?"_blank":n),Gr(u)&&(t=t||"http://localhost",l.scrollbars="yes");const c=Object.entries(l).reduce(((e,[t,n])=>`${e}${t}=${n},`),"");if(function(e=wt()){var t;return Zr(e)&&!!(null===(t=window.navigator)||void 0===t?void 0:t.standalone)}(u)&&"_self"!==a)return function(e,t){const n=document.createElement("a");n.href=e,n.target=t;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}(t||"",a),new Ao(null);const h=window.open(t||"",a,c);hr(h,e,"popup-blocked");try{h.focus()}catch(e){}return new Ao(h)}(e,await Do(e,t,n,pr(),r),Es())}async _openRedirect(e,t,n,r){return await this._originValidation(e),i=await Do(e,t,n,pr(),r),ks().location.href=i,new Promise((()=>{}));var i}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:e,promise:n}=this.eventManagers[t];return e?Promise.resolve(e):(fr(n,"If manager is not set, promise should be"),n)}const n=this.initAndGetManager(e);return this.eventManagers[t]={promise:n},n.catch((()=>{delete this.eventManagers[t]})),n}async initAndGetManager(e){const t=await async function(e){const t=await Io(e),n=ks().gapi;return hr(n,e,"internal-error"),t.open({where:document.body,url:xo(e),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:So,dontclear:!0},(t=>new Promise((async(n,r)=>{await t.restyle({setHideOnLeave:!1});const i=ar(e,"network-request-failed"),s=ks().setTimeout((()=>{r(i)}),ko.get());function o(){ks().clearTimeout(s),n(t)}t.ping(o).then(o,(()=>{r(i)}))}))))}(e),n=new fo(e);return t.register("authEvent",(t=>(hr(null==t?void 0:t.authEvent,e,"invalid-auth-event"),{status:n.onEvent(t.authEvent)?"ACK":"ERROR"})),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:n},this.iframes[e._key()]=t,n}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(Oo,{type:Oo},(n=>{var r;const i=null===(r=null==n?void 0:n[0])||void 0===r?void 0:r[Oo];void 0!==i&&t(!!i),or(e,"internal-error")}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=async function(e){if(e.config.emulator)return;const{authorizedDomains:t}=await go(e);for(const e of t)try{if(wo(e))return}catch(e){}or(e,"unauthorized-domain")}(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return ei()||Wr()||Zr()}};class Mo{constructor(e){this.factorId=e}_process(e,t,n){switch(t.type){case"enroll":return this._finalizeEnroll(e,t.credential,n);case"signin":return this._finalizeSignIn(e,t.credential);default:return dr("unexpected MultiFactorSessionType")}}}class Fo extends Mo{constructor(e){super("phone"),this.credential=e}static _fromCredential(e){return new Fo(e)}_finalizeEnroll(e,t,n){return function(e,t){return Ir(e,"POST","/v2/accounts/mfaEnrollment:finalize",Er(e,t))}(e,{idToken:t,displayName:n,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(e,t){return function(e,t){return Ir(e,"POST","/v2/accounts/mfaSignIn:finalize",Er(e,t))}(e,{mfaPendingCredential:t,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}class Uo{constructor(){}static assertion(e){return Fo._fromCredential(e)}}Uo.FACTOR_ID="phone";var Vo,zo,Bo="@firebase/auth",jo="1.1.0";class qo{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),(null===(e=this.auth.currentUser)||void 0===e?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged((t=>{e((null==t?void 0:t.stsTokenManager.accessToken)||null)}));this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){hr(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function $o(){return window}null===(Vo=gt())||void 0===Vo||Vo._authIdTokenMaxAge,zo="Browser",In(new Ut("auth",((e,{options:t})=>{const n=e.getProvider("app").getImmediate(),r=e.getProvider("heartbeat"),i=e.getProvider("app-check-internal"),{apiKey:s,authDomain:o}=n.options;hr(s&&!s.includes(":"),"invalid-api-key",{appName:n.name});const a={apiKey:s,authDomain:o,clientPlatform:zo,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:ti(zo)},l=new hi(n,r,i,a);return function(e,t){const n=(null==t?void 0:t.persistence)||[],r=(Array.isArray(n)?n:[n]).map(zr);(null==t?void 0:t.errorMap)&&e._updateErrorMap(t.errorMap),e._initializeWithPersistence(r,null==t?void 0:t.popupRedirectResolver)}(l,t),l}),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback(((e,t,n)=>{e.getProvider("auth-internal").initialize()}))),In(new Ut("auth-internal",(e=>(e=>new qo(e))(di(e.getProvider("auth").getImmediate()))),"PRIVATE").setInstantiationMode("EXPLICIT")),On(Bo,jo,function(e){switch(e){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}(zo)),On(Bo,jo,"esm2017");class Ko extends fo{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise((e=>{this.resolveInialized=e}))}addPassiveListener(e){this.passiveListeners.add(e)}removePassiveListener(e){this.passiveListeners.delete(e)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(e){return this.resolveInialized(),this.passiveListeners.forEach((t=>t(e))),super.onEvent(e)}async initialized(){await this.initPromise}}async function Go(e){const t=await Ho()._get(Qo(e));return t&&await Ho()._remove(Qo(e)),t}function Wo(){const e=[];for(let t=0;t<20;t++){const t=Math.floor(62*Math.random());e.push("1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ".charAt(t))}return e.join("")}function Ho(){return zr(vs)}function Qo(e){return qr("authEvent",e.config.apiKey,e.name)}function Yo(e){if(!(null==e?void 0:e.includes("?")))return{};const[t,...n]=e.split("?");return Pt(n.join("?"))}const Jo=class{constructor(){this._redirectPersistence=bs,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=co,this._overrideRedirectResult=ao}async _initialize(e){const t=e._key();let n=this.eventManagers.get(t);return n||(n=new Ko(e),this.eventManagers.set(t,n),this.attachCallbackListeners(e,n)),n}_openPopup(e){or(e,"operation-not-supported-in-this-environment")}async _openRedirect(e,t,n,r){!function(e){var t,n,r,i,s,o,a,l,u,c;const h=$o();hr("function"==typeof(null===(t=null==h?void 0:h.universalLinks)||void 0===t?void 0:t.subscribe),e,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),hr(void 0!==(null===(n=null==h?void 0:h.BuildInfo)||void 0===n?void 0:n.packageName),e,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),hr("function"==typeof(null===(s=null===(i=null===(r=null==h?void 0:h.cordova)||void 0===r?void 0:r.plugins)||void 0===i?void 0:i.browsertab)||void 0===s?void 0:s.openUrl),e,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),hr("function"==typeof(null===(l=null===(a=null===(o=null==h?void 0:h.cordova)||void 0===o?void 0:o.plugins)||void 0===a?void 0:a.browsertab)||void 0===l?void 0:l.isAvailable),e,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),hr("function"==typeof(null===(c=null===(u=null==h?void 0:h.cordova)||void 0===u?void 0:u.InAppBrowser)||void 0===c?void 0:c.open),e,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}(e);const i=await this._initialize(e);await i.initialized(),i.resetRedirect(),io.clear(),await this._originValidation(e);const s=function(e,t,n=null){return{type:t,eventId:n,urlResponse:null,sessionId:Wo(),postBody:null,tenantId:e.tenantId,error:ar(e,"no-auth-event")}}(e,n,r);await function(e,t){return Ho()._set(Qo(e),t)}(e,s);const o=await async function(e,t,n){var r;const{BuildInfo:i}=$o();fr(t.sessionId,"AuthEvent did not contain a session ID");const s=await async function(e){const t=function(e){if(fr(/[0-9a-zA-Z]+/.test(e),"Can only convert alpha-numeric strings"),"undefined"!=typeof TextEncoder)return(new TextEncoder).encode(e);const t=new ArrayBuffer(e.length),n=new Uint8Array(t);for(let t=0;t<e.length;t++)n[t]=e.charCodeAt(t);return n}(e),n=await crypto.subtle.digest("SHA-256",t);return Array.from(new Uint8Array(n)).map((e=>e.toString(16).padStart(2,"0"))).join("")}(t.sessionId),o={};return Zr()?o.ibi=i.packageName:Yr()?o.apn=i.packageName:or(e,"operation-not-supported-in-this-environment"),i.displayName&&(o.appDisplayName=i.displayName),o.sessionId=s,Do(e,n,t.type,void 0,null!==(r=t.eventId)&&void 0!==r?r:void 0,o)}(e,s,t);return async function(e,t,n){const{cordova:r}=$o();let i=()=>{};try{await new Promise(((s,o)=>{let a=null;function l(){var e;s();const t=null===(e=r.plugins.browsertab)||void 0===e?void 0:e.close;"function"==typeof t&&t(),"function"==typeof(null==n?void 0:n.close)&&n.close()}function u(){a||(a=window.setTimeout((()=>{o(ar(e,"redirect-cancelled-by-user"))}),2e3))}function c(){"visible"===(null===document||void 0===document?void 0:document.visibilityState)&&u()}t.addPassiveListener(l),document.addEventListener("resume",u,!1),Yr()&&document.addEventListener("visibilitychange",c,!1),i=()=>{t.removePassiveListener(l),document.removeEventListener("resume",u,!1),document.removeEventListener("visibilitychange",c,!1),a&&window.clearTimeout(a)}}))}finally{i()}}(e,i,await function(e){const{cordova:t}=$o();return new Promise((n=>{t.plugins.browsertab.isAvailable((r=>{let i=null;r?t.plugins.browsertab.openUrl(e):i=t.InAppBrowser.open(e,function(e=wt()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(e)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(e)}()?"_blank":"_system","location=yes"),n(i)}))}))}(o))}_isIframeWebStorageSupported(e,t){throw new Error("Method not implemented.")}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=async function(e){const{BuildInfo:t}=$o(),n={};Zr()?n.iosBundleId=t.packageName:Yr()?n.androidPackageName=t.packageName:or(e,"operation-not-supported-in-this-environment"),await go(e,n)}(e)),this.originValidationPromises[t]}attachCallbackListeners(e,t){const{universalLinks:n,handleOpenURL:r,BuildInfo:i}=$o(),s=setTimeout((async()=>{await Go(e),t.onEvent(Xo())}),500),o=async n=>{clearTimeout(s);const r=await Go(e);let i=null;r&&(null==n?void 0:n.url)&&(i=function(e,t){var n,r;const i=function(e){const t=Yo(e),n=t.link?decodeURIComponent(t.link):void 0,r=Yo(n).link,i=t.deep_link_id?decodeURIComponent(t.deep_link_id):void 0;return Yo(i).link||i||r||n||e}(t);if(i.includes("/__/auth/callback")){const t=Yo(i),s=t.firebaseError?function(e){try{return JSON.parse(e)}catch(e){return null}}(decodeURIComponent(t.firebaseError)):null,o=null===(r=null===(n=null==s?void 0:s.code)||void 0===n?void 0:n.split("auth/"))||void 0===r?void 0:r[1],a=o?ar(o):null;return a?{type:e.type,eventId:e.eventId,tenantId:e.tenantId,error:a,urlResponse:null,sessionId:null,postBody:null}:{type:e.type,eventId:e.eventId,tenantId:e.tenantId,sessionId:e.sessionId,urlResponse:i,postBody:null}}return null}(r,n.url)),t.onEvent(i||Xo())};void 0!==n&&"function"==typeof n.subscribe&&n.subscribe(null,o);const a=r,l=`${i.packageName.toLowerCase()}://`;$o().handleOpenURL=async e=>{if(e.toLowerCase().startsWith(l)&&o({url:e}),"function"==typeof a)try{a(e)}catch(e){console.error(e)}}}};function Xo(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:ar("no-auth-event")}}function Zo(){var e;return(null===(e=null===self||void 0===self?void 0:self.location)||void 0===e?void 0:e.protocol)||null}function ea(e=wt()){return!("file:"!==Zo()&&"ionic:"!==Zo()&&"capacitor:"!==Zo()||!e.toLowerCase().match(/iphone|ipad|ipod|android/))}function ta(){try{const e=self.localStorage,t=Es();if(e)return e.setItem(t,"1"),e.removeItem(t),!function(e=wt()){return It()&&11===(null===document||void 0===document?void 0:document.documentMode)||function(e=wt()){return/Edge\/\d+/.test(e)}(e)}()||kt()}catch(e){return na()&&kt()}return!1}function na(){return void 0!==i.g&&"WorkerGlobalScope"in i.g&&"importScripts"in i.g}function ra(){return("http:"===Zo()||"https:"===Zo()||_t()||ea())&&!(Et()||bt())&&ta()&&!na()}function ia(){return ea()&&"undefined"!=typeof document}const sa={LOCAL:"local",NONE:"none",SESSION:"session"},oa=hr,aa="persistence";async function la(e){await e._initializationPromise;const t=ua(),n=qr(aa,e.config.apiKey,e.name);t&&t.setItem(n,e._getPersistence())}function ua(){var e;try{return(null===(e="undefined"!=typeof window?window:null)||void 0===e?void 0:e.sessionStorage)||null}catch(e){return null}}const ca=hr;class ha{constructor(){this.browserResolver=zr(Lo),this.cordovaResolver=zr(Jo),this.underlyingResolver=null,this._redirectPersistence=bs,this._completeRedirectFn=co,this._overrideRedirectResult=ao}async _initialize(e){return await this.selectUnderlyingResolver(),this.assertedUnderlyingResolver._initialize(e)}async _openPopup(e,t,n,r){return await this.selectUnderlyingResolver(),this.assertedUnderlyingResolver._openPopup(e,t,n,r)}async _openRedirect(e,t,n,r){return await this.selectUnderlyingResolver(),this.assertedUnderlyingResolver._openRedirect(e,t,n,r)}_isIframeWebStorageSupported(e,t){this.assertedUnderlyingResolver._isIframeWebStorageSupported(e,t)}_originValidation(e){return this.assertedUnderlyingResolver._originValidation(e)}get _shouldInitProactively(){return ia()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return ca(this.underlyingResolver,"internal-error"),this.underlyingResolver}async selectUnderlyingResolver(){if(this.underlyingResolver)return;const e=await async function(){return!!ia()&&new Promise((e=>{const t=setTimeout((()=>{e(!1)}),1e3);document.addEventListener("deviceready",(()=>{clearTimeout(t),e(!0)}))}))}();this.underlyingResolver=e?this.cordovaResolver:this.browserResolver}}function da(e){return e.unwrap()}function fa(e){const{_tokenResponse:t}=e instanceof St?e.customData:e;if(!t)return null;if(!(e instanceof St)&&"temporaryProof"in t&&"phoneNumber"in t)return Hs.credentialFromResult(e);const n=t.providerId;if(!n||n===er.PASSWORD)return null;let r;switch(n){case er.GOOGLE:r=Oi;break;case er.FACEBOOK:r=Di;break;case er.GITHUB:r=Li;break;case er.TWITTER:r=Ui;break;default:const{oauthIdToken:e,oauthAccessToken:i,oauthTokenSecret:s,pendingToken:o,nonce:a}=t;return i||s||e||o?o?n.startsWith("saml.")?Mi._create(n,o):Si._fromParams({providerId:n,signInMethod:n,pendingToken:o,idToken:e,accessToken:i}):new Pi(n).credential({idToken:e,accessToken:i,rawNonce:a}):null}return e instanceof St?r.credentialFromError(e):r.credentialFromResult(e)}function pa(e,t){return t.catch((t=>{throw t instanceof St&&function(e,t){var n;const r=null===(n=t.customData)||void 0===n?void 0:n._tokenResponse;if("auth/multi-factor-auth-required"===(null==t?void 0:t.code))t.resolver=new ga(e,function(e,t){var n;const r=Ft(e),i=t;return hr(t.customData.operationType,r,"argument-error"),hr(null===(n=i.customData._serverResponse)||void 0===n?void 0:n.mfaPendingCredential,r,"argument-error"),ds._fromError(r,i)}(e,t));else if(r){const e=fa(t),n=t;e&&(n.credential=e,n.tenantId=r.tenantId||void 0,n.email=r.email||void 0,n.phoneNumber=r.phoneNumber||void 0)}}(e,t),t})).then((e=>{const t=e.operationType,n=e.user;return{operationType:t,credential:(r=e,fa(r)),additionalUserInfo:cs(e),user:ya.getOrCreate(n)};var r}))}async function ma(e,t){const n=await t;return{verificationId:n.verificationId,confirm:t=>pa(e,n.confirm(t))}}class ga{constructor(e,t){this.resolver=t,this.auth=e.wrapped()}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(e){return pa(da(this.auth),this.resolver.resolveSignIn(e))}}class ya{constructor(e){this._delegate=e,this.multiFactor=function(e){const t=Ft(e);return ps.has(t)||ps.set(t,fs._fromUser(t)),ps.get(t)}(e)}static getOrCreate(e){return ya.USER_MAP.has(e)||ya.USER_MAP.set(e,new ya(e)),ya.USER_MAP.get(e)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(e){return this._delegate.getIdTokenResult(e)}getIdToken(e){return this._delegate.getIdToken(e)}linkAndRetrieveDataWithCredential(e){return this.linkWithCredential(e)}async linkWithCredential(e){return pa(this.auth,Yi(this._delegate,e))}async linkWithPhoneNumber(e,t){return ma(this.auth,async function(e,t,n){const r=Ft(e);await Gi(!1,r,"phone");const i=await Ws(r.auth,t,Ft(n));return new Gs(i,(e=>Yi(r,e)))}(this._delegate,e,t))}async linkWithPopup(e){return pa(this.auth,async function(e,t,n){const r=Ft(e);ur(r.auth,t,Ni);const i=Qs(r.auth,n);return new no(r.auth,"linkViaPopup",t,i,r).executeNotNull()}(this._delegate,e,ha))}async linkWithRedirect(e){return await la(di(this.auth)),function(e,t,n){return async function(e,t,n){const r=Ft(e);ur(r.auth,t,Ni),await r.auth._initializationPromise;const i=Qs(r.auth,n);await Gi(!1,r,t.providerId),await oo(i,r.auth);const s=await ho(r);return i._openRedirect(r.auth,t,"linkViaRedirect",s)}(e,t,n)}(this._delegate,e,ha)}reauthenticateAndRetrieveDataWithCredential(e){return this.reauthenticateWithCredential(e)}async reauthenticateWithCredential(e){return pa(this.auth,Ji(this._delegate,e))}reauthenticateWithPhoneNumber(e,t){return ma(this.auth,async function(e,t,n){const r=Ft(e),i=await Ws(r.auth,t,Ft(n));return new Gs(i,(e=>Ji(r,e)))}(this._delegate,e,t))}reauthenticateWithPopup(e){return pa(this.auth,async function(e,t,n){const r=Ft(e);ur(r.auth,t,Ni);const i=Qs(r.auth,n);return new no(r.auth,"reauthViaPopup",t,i,r).executeNotNull()}(this._delegate,e,ha))}async reauthenticateWithRedirect(e){return await la(di(this.auth)),function(e,t,n){return async function(e,t,n){const r=Ft(e);ur(r.auth,t,Ni),await r.auth._initializationPromise;const i=Qs(r.auth,n);await oo(i,r.auth);const s=await ho(r);return i._openRedirect(r.auth,t,"reauthViaRedirect",s)}(e,t,n)}(this._delegate,e,ha)}sendEmailVerification(e){return async function(e,t){const n=Ft(e),r={requestType:"VERIFY_EMAIL",idToken:await e.getIdToken()};t&&ts(n.auth,r,t);const{email:i}=await async function(e,t){return bi(e,t)}(n.auth,r);i!==e.email&&await e.reload()}(this._delegate,e)}async unlink(e){return await async function(e,t){const n=Ft(e);await Gi(!0,n,t);const{providerUserInfo:r}=await async function(e,t){return Ir(e,"POST","/v1/accounts:update",t)}(n.auth,{idToken:await n.getIdToken(),deleteProvider:[t]}),i=$i(r||[]);return n.providerData=n.providerData.filter((e=>i.has(e.providerId))),i.has("phone")||(n.phoneNumber=null),await n.auth._persistUserIfCurrent(n),n}(this._delegate,e),this}updateEmail(e){return function(e,t){return rs(Ft(e),t,null)}(this._delegate,e)}updatePassword(e){return function(e,t){return rs(Ft(e),null,t)}(this._delegate,e)}updatePhoneNumber(e){return async function(e,t){await Ki(Ft(e),t)}(this._delegate,e)}updateProfile(e){return async function(e,{displayName:t,photoURL:n}){if(void 0===t&&void 0===n)return;const r=Ft(e),i={idToken:await r.getIdToken(),displayName:t,photoUrl:n,returnSecureToken:!0},s=await Pr(r,async function(e,t){return Ir(e,"POST","/v1/accounts:update",t)}(r.auth,i));r.displayName=s.displayName||null,r.photoURL=s.photoUrl||null;const o=r.providerData.find((({providerId:e})=>"password"===e));o&&(o.displayName=r.displayName,o.photoURL=r.photoURL),await r._updateTokensIfNecessary(s)}(this._delegate,e)}verifyBeforeUpdateEmail(e,t){return async function(e,t,n){const r=Ft(e),i={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:await e.getIdToken(),newEmail:t};n&&ts(r.auth,i,n);const{email:s}=await async function(e,t){return bi(e,t)}(r.auth,i);s!==e.email&&await e.reload()}(this._delegate,e,t)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}}ya.USER_MAP=new WeakMap;const va=hr;class wa{constructor(e,t){if(this.app=e,t.isInitialized())return this._delegate=t.getImmediate(),void this.linkUnderlyingAuth();const{apiKey:n}=e.options;va(n,"invalid-api-key",{appName:e.name}),va(n,"invalid-api-key",{appName:e.name});const r="undefined"!=typeof window?ha:void 0;this._delegate=t.initialize({options:{persistence:_a(n,e.name),popupRedirectResolver:r}}),this._delegate._updateErrorMap(tr),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?ya.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(e){this._delegate.languageCode=e}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(e){this._delegate.tenantId=e}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(e,t){!function(e,t,n){const r=di(e);hr(r._canInitEmulator,r,"emulator-config-failed"),hr(/^https?:\/\//.test(t),r,"invalid-emulator-scheme");const i=!!(null==n?void 0:n.disableWarnings),s=pi(t),{host:o,port:a}=function(e){const t=pi(e),n=/(\/\/)?([^?#/]+)/.exec(e.substr(t.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){const e=i[1];return{host:e,port:mi(r.substr(e.length+1))}}{const[e,t]=r.split(":");return{host:e,port:mi(t)}}}(t),l=null===a?"":`:${a}`;r.config.emulator={url:`${s}//${o}${l}/`},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:o,port:a,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:i})}),i||function(){function e(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}"undefined"!=typeof console&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),"undefined"!=typeof window&&"undefined"!=typeof document&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",e):e())}()}(this._delegate,e,t)}applyActionCode(e){return async function(e,t){await async function(e,t){return Ir(e,"POST","/v1/accounts:update",Er(e,t))}(Ft(e),{oobCode:t})}(this._delegate,e)}checkActionCode(e){return ns(this._delegate,e)}confirmPasswordReset(e,t){return async function(e,t,n){await yi(Ft(e),{oobCode:t,newPassword:n})}(this._delegate,e,t)}async createUserWithEmailAndPassword(e,t){return pa(this._delegate,async function(e,t,n){var r;const i=di(e),s={returnSecureToken:!0,email:t,password:n,clientType:"CLIENT_TYPE_WEB"};let o;if(null===(r=i._getRecaptchaConfig())||void 0===r?void 0:r.emailPasswordEnabled){const e=await ui(i,s,"signUpPassword");o=Vi(i,e)}else o=Vi(i,s).catch((async e=>{if("auth/missing-recaptcha-token"===e.code){console.log("Sign-up is protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the sign-up flow.");const e=await ui(i,s,"signUpPassword");return Vi(i,e)}return Promise.reject(e)}));const a=await o.catch((e=>Promise.reject(e))),l=await zi._fromIdTokenResponse(i,"signIn",a);return await i._updateCurrentUser(l.user),l}(this._delegate,e,t))}fetchProvidersForEmail(e){return this.fetchSignInMethodsForEmail(e)}fetchSignInMethodsForEmail(e){return async function(e,t){const n={identifier:t,continueUri:mr()?pr():"http://localhost"},{signinMethods:r}=await async function(e,t){return Ir(e,"POST","/v1/accounts:createAuthUri",Er(e,t))}(Ft(e),n);return r||[]}(this._delegate,e)}isSignInWithEmailLink(e){return function(e,t){const n=Ci.parseLink(t);return"EMAIL_SIGNIN"===(null==n?void 0:n.operation)}(this._delegate,e)}async getRedirectResult(){va(ra(),this._delegate,"operation-not-supported-in-this-environment");const e=await async function(e,t){return await di(e)._initializationPromise,co(e,t,!1)}(this._delegate,ha);return e?pa(this._delegate,Promise.resolve(e)):{credential:null,user:null}}addFrameworkForLogging(e){!function(e,t){di(e)._logFramework(t)}(this._delegate,e)}onAuthStateChanged(e,t,n){const{next:r,error:i,complete:s}=ba(e,t,n);return this._delegate.onAuthStateChanged(r,i,s)}onIdTokenChanged(e,t,n){const{next:r,error:i,complete:s}=ba(e,t,n);return this._delegate.onIdTokenChanged(r,i,s)}sendSignInLinkToEmail(e,t){return async function(e,t,n){var r;const i=di(e),s={requestType:"EMAIL_SIGNIN",email:t,clientType:"CLIENT_TYPE_WEB"};function o(e,t){hr(t.handleCodeInApp,i,"argument-error"),t&&ts(i,e,t)}if(null===(r=i._getRecaptchaConfig())||void 0===r?void 0:r.emailPasswordEnabled){const e=await ui(i,s,"getOobCode",!0);o(e,n),await Ei(i,e)}else o(s,n),await Ei(i,s).catch((async e=>{if("auth/missing-recaptcha-token"!==e.code)return Promise.reject(e);{console.log("Email link sign-in is protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the sign-in flow.");const e=await ui(i,s,"getOobCode",!0);o(e,n),await Ei(i,e)}}))}(this._delegate,e,t)}sendPasswordResetEmail(e,t){return async function(e,t,n){var r;const i=di(e),s={requestType:"PASSWORD_RESET",email:t,clientType:"CLIENT_TYPE_WEB"};if(null===(r=i._getRecaptchaConfig())||void 0===r?void 0:r.emailPasswordEnabled){const e=await ui(i,s,"getOobCode",!0);n&&ts(i,e,n),await _i(i,e)}else n&&ts(i,s,n),await _i(i,s).catch((async e=>{if("auth/missing-recaptcha-token"!==e.code)return Promise.reject(e);{console.log("Password resets are protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the password reset flow.");const e=await ui(i,s,"getOobCode",!0);n&&ts(i,e,n),await _i(i,e)}}))}(this._delegate,e,t||void 0)}async setPersistence(e){let t;switch(function(e,t){oa(Object.values(sa).includes(t),e,"invalid-persistence-type"),Et()?oa(t!==sa.SESSION,e,"unsupported-persistence-type"):bt()?oa(t===sa.NONE,e,"unsupported-persistence-type"):na()?oa(t===sa.NONE||t===sa.LOCAL&&kt(),e,"unsupported-persistence-type"):oa(t===sa.NONE||ta(),e,"unsupported-persistence-type")}(this._delegate,e),e){case sa.SESSION:t=bs;break;case sa.LOCAL:t=await zr(Ls)._isAvailable()?Ls:vs;break;case sa.NONE:t=jr;break;default:return or("argument-error",{appName:this._delegate.name})}return this._delegate.setPersistence(t)}signInAndRetrieveDataWithCredential(e){return this.signInWithCredential(e)}signInAnonymously(){return pa(this._delegate,async function(e){var t;const n=di(e);if(await n._initializationPromise,null===(t=n.currentUser)||void 0===t?void 0:t.isAnonymous)return new zi({user:n.currentUser,providerId:null,operationType:"signIn"});const r=await Vi(n,{returnSecureToken:!0}),i=await zi._fromIdTokenResponse(n,"signIn",r,!0);return await n._updateCurrentUser(i.user),i}(this._delegate))}signInWithCredential(e){return pa(this._delegate,Qi(this._delegate,e))}signInWithCustomToken(e){return pa(this._delegate,async function(e,t){const n=di(e),r=await async function(e,t){return Sr(e,"POST","/v1/accounts:signInWithCustomToken",Er(e,t))}(n,{token:t,returnSecureToken:!0}),i=await zi._fromIdTokenResponse(n,"signIn",r);return await n._updateCurrentUser(i.user),i}(this._delegate,e))}signInWithEmailAndPassword(e,t){return pa(this._delegate,function(e,t,n){return Qi(Ft(e),Ai.credential(t,n))}(this._delegate,e,t))}signInWithEmailLink(e,t){return pa(this._delegate,async function(e,t,n){const r=Ft(e),i=Ai.credentialWithLink(t,n||pr());return hr(i._tenantId===(r.tenantId||null),r,"tenant-id-mismatch"),Qi(r,i)}(this._delegate,e,t))}signInWithPhoneNumber(e,t){return ma(this._delegate,async function(e,t,n){const r=di(e),i=await Ws(r,t,Ft(n));return new Gs(i,(e=>Qi(r,e)))}(this._delegate,e,t))}async signInWithPopup(e){return va(ra(),this._delegate,"operation-not-supported-in-this-environment"),pa(this._delegate,async function(e,t,n){const r=di(e);ur(e,t,Ni);const i=Qs(r,n);return new no(r,"signInViaPopup",t,i).executeNotNull()}(this._delegate,e,ha))}async signInWithRedirect(e){return va(ra(),this._delegate,"operation-not-supported-in-this-environment"),await la(this._delegate),function(e,t,n){return async function(e,t,n){const r=di(e);ur(e,t,Ni),await r._initializationPromise;const i=Qs(r,n);return await oo(i,r),i._openRedirect(r,t,"signInViaRedirect")}(e,t,n)}(this._delegate,e,ha)}updateCurrentUser(e){return this._delegate.updateCurrentUser(e)}verifyPasswordResetCode(e){return async function(e,t){const{data:n}=await ns(Ft(e),t);return n.email}(this._delegate,e)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}function ba(e,t,n){let r=e;"function"!=typeof e&&({next:r,error:t,complete:n}=e);const i=r;return{next:e=>i(e&&ya.getOrCreate(e)),error:t,complete:n}}function _a(e,t){const n=function(e,t){const n=ua();if(!n)return[];const r=qr(aa,e,t);switch(n.getItem(r)){case sa.NONE:return[jr];case sa.LOCAL:return[Ls,bs];case sa.SESSION:return[bs];default:return[]}}(e,t);if("undefined"==typeof self||n.includes(Ls)||n.push(Ls),"undefined"!=typeof window)for(const e of[vs,bs])n.includes(e)||n.push(e);return n.includes(jr)||n.push(jr),n}wa.Persistence=sa;class Ea{constructor(){this.providerId="phone",this._delegate=new Hs(da(Xn.auth()))}static credential(e,t){return Hs.credential(e,t)}verifyPhoneNumber(e,t){return this._delegate.verifyPhoneNumber(e,t)}unwrap(){return this._delegate}}Ea.PHONE_SIGN_IN_METHOD=Hs.PHONE_SIGN_IN_METHOD,Ea.PROVIDER_ID=Hs.PROVIDER_ID;const Ia=hr;var ka;(ka=Xn).INTERNAL.registerComponent(new Ut("auth-compat",(e=>{const t=e.getProvider("app-compat").getImmediate(),n=e.getProvider("auth");return new wa(t,n)}),"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"}},EmailAuthProvider:Ai,FacebookAuthProvider:Di,GithubAuthProvider:Li,GoogleAuthProvider:Oi,OAuthProvider:Pi,SAMLAuthProvider:Fi,PhoneAuthProvider:Ea,PhoneMultiFactorGenerator:Uo,RecaptchaVerifier:class{constructor(e,t,n=Xn.app()){var r;Ia(null===(r=n.options)||void 0===r?void 0:r.apiKey,"invalid-api-key",{appName:n.name}),this._delegate=new Ks(n.auth(),e,t),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}},TwitterAuthProvider:Ui,Auth:wa,AuthCredential:gi,Error:St}).setInstantiationMode("LAZY").setMultipleInstances(!1)),ka.registerVersion("@firebase/auth-compat","0.4.4");var Sa,Ta="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},xa={},Ca=Ca||{},Aa=Ta||self;function Na(e){var t=typeof e;return"array"==(t="object"!=t?t:e?Array.isArray(e)?"array":t:"null")||"object"==t&&"number"==typeof e.length}function Ra(e){var t=typeof e;return"object"==t&&null!=e||"function"==t}var Pa="closure_uid_"+(1e9*Math.random()>>>0),Da=0;function Oa(e,t,n){return e.call.apply(e.bind,arguments)}function La(e,t,n){if(!e)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,r),e.apply(t,n)}}return function(){return e.apply(t,arguments)}}function Ma(e,t,n){return(Ma=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?Oa:La).apply(null,arguments)}function Fa(e,t){var n=Array.prototype.slice.call(arguments,1);return function(){var t=n.slice();return t.push.apply(t,arguments),e.apply(this,t)}}function Ua(e,t){function n(){}n.prototype=t.prototype,e.$=t.prototype,e.prototype=new n,e.prototype.constructor=e,e.ac=function(e,n,r){for(var i=Array(arguments.length-2),s=2;s<arguments.length;s++)i[s-2]=arguments[s];return t.prototype[n].apply(e,i)}}function Va(){this.s=this.s,this.o=this.o}Va.prototype.s=!1,Va.prototype.sa=function(){var e;!this.s&&(this.s=!0,this.N(),0)&&(e=this,Object.prototype.hasOwnProperty.call(e,Pa)&&e[Pa]||(e[Pa]=++Da))},Va.prototype.N=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const za=Array.prototype.indexOf?function(e,t){return Array.prototype.indexOf.call(e,t,void 0)}:function(e,t){if("string"==typeof e)return"string"!=typeof t||1!=t.length?-1:e.indexOf(t,0);for(let n=0;n<e.length;n++)if(n in e&&e[n]===t)return n;return-1};function Ba(e){const t=e.length;if(0<t){const n=Array(t);for(let r=0;r<t;r++)n[r]=e[r];return n}return[]}function ja(e,t){for(let t=1;t<arguments.length;t++){const n=arguments[t];if(Na(n)){const t=e.length||0,r=n.length||0;e.length=t+r;for(let i=0;i<r;i++)e[t+i]=n[i]}else e.push(n)}}function qa(e,t){this.type=e,this.g=this.target=t,this.defaultPrevented=!1}qa.prototype.h=function(){this.defaultPrevented=!0};var $a=function(){if(!Aa.addEventListener||!Object.defineProperty)return!1;var e=!1,t=Object.defineProperty({},"passive",{get:function(){e=!0}});try{Aa.addEventListener("test",(()=>{}),t),Aa.removeEventListener("test",(()=>{}),t)}catch(e){}return e}();function Ka(e){return/^[\s\xa0]*$/.test(e)}function Ga(){var e=Aa.navigator;return e&&(e=e.userAgent)?e:""}function Wa(e){return-1!=Ga().indexOf(e)}function Ha(e){return Ha[" "](e),e}Ha[" "]=function(){};var Qa,Ya,Ja,Xa=Wa("Opera"),Za=Wa("Trident")||Wa("MSIE"),el=Wa("Edge"),tl=el||Za,nl=Wa("Gecko")&&!(-1!=Ga().toLowerCase().indexOf("webkit")&&!Wa("Edge"))&&!(Wa("Trident")||Wa("MSIE"))&&!Wa("Edge"),rl=-1!=Ga().toLowerCase().indexOf("webkit")&&!Wa("Edge");function il(){var e=Aa.document;return e?e.documentMode:void 0}e:{var sl="",ol=(Ya=Ga(),nl?/rv:([^\);]+)(\)|;)/.exec(Ya):el?/Edge\/([\d\.]+)/.exec(Ya):Za?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(Ya):rl?/WebKit\/(\S+)/.exec(Ya):Xa?/(?:Version)[ \/]?(\S+)/.exec(Ya):void 0);if(ol&&(sl=ol?ol[1]:""),Za){var al=il();if(null!=al&&al>parseFloat(sl)){Qa=String(al);break e}}Qa=sl}Aa.document&&Za?Ja=il()||parseInt(Qa,10)||void 0:Ja=void 0;var ll=Ja;function ul(e,t){if(qa.call(this,e?e.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,e){var n=this.type=e.type,r=e.changedTouches&&e.changedTouches.length?e.changedTouches[0]:null;if(this.target=e.target||e.srcElement,this.g=t,t=e.relatedTarget){if(nl){e:{try{Ha(t.nodeName);var i=!0;break e}catch(e){}i=!1}i||(t=null)}}else"mouseover"==n?t=e.fromElement:"mouseout"==n&&(t=e.toElement);this.relatedTarget=t,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==e.clientX?e.clientX:e.pageX,this.clientY=void 0!==e.clientY?e.clientY:e.pageY,this.screenX=e.screenX||0,this.screenY=e.screenY||0),this.button=e.button,this.key=e.key||"",this.ctrlKey=e.ctrlKey,this.altKey=e.altKey,this.shiftKey=e.shiftKey,this.metaKey=e.metaKey,this.pointerId=e.pointerId||0,this.pointerType="string"==typeof e.pointerType?e.pointerType:cl[e.pointerType]||"",this.state=e.state,this.i=e,e.defaultPrevented&&ul.$.h.call(this)}}Ua(ul,qa);var cl={2:"touch",3:"pen",4:"mouse"};ul.prototype.h=function(){ul.$.h.call(this);var e=this.i;e.preventDefault?e.preventDefault():e.returnValue=!1};var hl="closure_listenable_"+(1e6*Math.random()|0),dl=0;function fl(e,t,n,r,i){this.listener=e,this.proxy=null,this.src=t,this.type=n,this.capture=!!r,this.la=i,this.key=++dl,this.fa=this.ia=!1}function pl(e){e.fa=!0,e.listener=null,e.proxy=null,e.src=null,e.la=null}function ml(e,t,n){for(const r in e)t.call(n,e[r],r,e)}function gl(e){const t={};for(const n in e)t[n]=e[n];return t}const yl="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function vl(e,t){let n,r;for(let t=1;t<arguments.length;t++){for(n in r=arguments[t],r)e[n]=r[n];for(let t=0;t<yl.length;t++)n=yl[t],Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}}function wl(e){this.src=e,this.g={},this.h=0}function bl(e,t){var n=t.type;if(n in e.g){var r,i=e.g[n],s=za(i,t);(r=0<=s)&&Array.prototype.splice.call(i,s,1),r&&(pl(t),0==e.g[n].length&&(delete e.g[n],e.h--))}}function _l(e,t,n,r){for(var i=0;i<e.length;++i){var s=e[i];if(!s.fa&&s.listener==t&&s.capture==!!n&&s.la==r)return i}return-1}wl.prototype.add=function(e,t,n,r,i){var s=e.toString();(e=this.g[s])||(e=this.g[s]=[],this.h++);var o=_l(e,t,r,i);return-1<o?(t=e[o],n||(t.ia=!1)):((t=new fl(t,this.src,s,!!r,i)).ia=n,e.push(t)),t};var El="closure_lm_"+(1e6*Math.random()|0),Il={};function kl(e,t,n,r,i){if(r&&r.once)return Tl(e,t,n,r,i);if(Array.isArray(t)){for(var s=0;s<t.length;s++)kl(e,t[s],n,r,i);return null}return n=Dl(n),e&&e[hl]?e.O(t,n,Ra(r)?!!r.capture:!!r,i):Sl(e,t,n,!1,r,i)}function Sl(e,t,n,r,i,s){if(!t)throw Error("Invalid event type");var o=Ra(i)?!!i.capture:!!i,a=Rl(e);if(a||(e[El]=a=new wl(e)),(n=a.add(t,n,r,o,s)).proxy)return n;if(r=function(){const e=Nl;return function t(n){return e.call(t.src,t.listener,n)}}(),n.proxy=r,r.src=e,r.listener=n,e.addEventListener)$a||(i=o),void 0===i&&(i=!1),e.addEventListener(t.toString(),r,i);else if(e.attachEvent)e.attachEvent(Al(t.toString()),r);else{if(!e.addListener||!e.removeListener)throw Error("addEventListener and attachEvent are unavailable.");e.addListener(r)}return n}function Tl(e,t,n,r,i){if(Array.isArray(t)){for(var s=0;s<t.length;s++)Tl(e,t[s],n,r,i);return null}return n=Dl(n),e&&e[hl]?e.P(t,n,Ra(r)?!!r.capture:!!r,i):Sl(e,t,n,!0,r,i)}function xl(e,t,n,r,i){if(Array.isArray(t))for(var s=0;s<t.length;s++)xl(e,t[s],n,r,i);else r=Ra(r)?!!r.capture:!!r,n=Dl(n),e&&e[hl]?(e=e.i,(t=String(t).toString())in e.g&&-1<(n=_l(s=e.g[t],n,r,i))&&(pl(s[n]),Array.prototype.splice.call(s,n,1),0==s.length&&(delete e.g[t],e.h--))):e&&(e=Rl(e))&&(t=e.g[t.toString()],e=-1,t&&(e=_l(t,n,r,i)),(n=-1<e?t[e]:null)&&Cl(n))}function Cl(e){if("number"!=typeof e&&e&&!e.fa){var t=e.src;if(t&&t[hl])bl(t.i,e);else{var n=e.type,r=e.proxy;t.removeEventListener?t.removeEventListener(n,r,e.capture):t.detachEvent?t.detachEvent(Al(n),r):t.addListener&&t.removeListener&&t.removeListener(r),(n=Rl(t))?(bl(n,e),0==n.h&&(n.src=null,t[El]=null)):pl(e)}}}function Al(e){return e in Il?Il[e]:Il[e]="on"+e}function Nl(e,t){if(e.fa)e=!0;else{t=new ul(t,this);var n=e.listener,r=e.la||e.src;e.ia&&Cl(e),e=n.call(r,t)}return e}function Rl(e){return(e=e[El])instanceof wl?e:null}var Pl="__closure_events_fn_"+(1e9*Math.random()>>>0);function Dl(e){return"function"==typeof e?e:(e[Pl]||(e[Pl]=function(t){return e.handleEvent(t)}),e[Pl])}function Ol(){Va.call(this),this.i=new wl(this),this.S=this,this.J=null}function Ll(e,t){var n,r=e.J;if(r)for(n=[];r;r=r.J)n.push(r);if(e=e.S,r=t.type||t,"string"==typeof t)t=new qa(t,e);else if(t instanceof qa)t.target=t.target||e;else{var i=t;vl(t=new qa(r,e),i)}if(i=!0,n)for(var s=n.length-1;0<=s;s--){var o=t.g=n[s];i=Ml(o,r,!0,t)&&i}if(i=Ml(o=t.g=e,r,!0,t)&&i,i=Ml(o,r,!1,t)&&i,n)for(s=0;s<n.length;s++)i=Ml(o=t.g=n[s],r,!1,t)&&i}function Ml(e,t,n,r){if(!(t=e.i.g[String(t)]))return!0;t=t.concat();for(var i=!0,s=0;s<t.length;++s){var o=t[s];if(o&&!o.fa&&o.capture==n){var a=o.listener,l=o.la||o.src;o.ia&&bl(e.i,o),i=!1!==a.call(l,r)&&i}}return i&&!r.defaultPrevented}Ua(Ol,Va),Ol.prototype[hl]=!0,Ol.prototype.removeEventListener=function(e,t,n,r){xl(this,e,t,n,r)},Ol.prototype.N=function(){if(Ol.$.N.call(this),this.i){var e,t=this.i;for(e in t.g){for(var n=t.g[e],r=0;r<n.length;r++)pl(n[r]);delete t.g[e],t.h--}}this.J=null},Ol.prototype.O=function(e,t,n,r){return this.i.add(String(e),t,!1,n,r)},Ol.prototype.P=function(e,t,n,r){return this.i.add(String(e),t,!0,n,r)};var Fl=Aa.JSON.stringify;function Ul(){var e=Kl;let t=null;return e.g&&(t=e.g,e.g=e.g.next,e.g||(e.h=null),t.next=null),t}var Vl=new class{constructor(e,t){this.i=e,this.j=t,this.h=0,this.g=null}get(){let e;return 0<this.h?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e}}((()=>new zl),(e=>e.reset()));class zl{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}function Bl(e){var t=1;e=e.split(":");const n=[];for(;0<t&&e.length;)n.push(e.shift()),t--;return e.length&&n.push(e.join(":")),n}function jl(e){Aa.setTimeout((()=>{throw e}),0)}let ql,$l=!1,Kl=new class{constructor(){this.h=this.g=null}add(e,t){const n=Vl.get();n.set(e,t),this.h?this.h.next=n:this.g=n,this.h=n}},Gl=()=>{const e=Aa.Promise.resolve(void 0);ql=()=>{e.then(Wl)}};var Wl=()=>{for(var e;e=Ul();){try{e.h.call(e.g)}catch(e){jl(e)}var t=Vl;t.j(e),100>t.h&&(t.h++,e.next=t.g,t.g=e)}$l=!1};function Hl(e,t){Ol.call(this),this.h=e||1,this.g=t||Aa,this.j=Ma(this.qb,this),this.l=Date.now()}function Ql(e){e.ga=!1,e.T&&(e.g.clearTimeout(e.T),e.T=null)}function Yl(e,t,n){if("function"==typeof e)n&&(e=Ma(e,n));else{if(!e||"function"!=typeof e.handleEvent)throw Error("Invalid listener argument");e=Ma(e.handleEvent,e)}return 2147483647<Number(t)?-1:Aa.setTimeout(e,t||0)}function Jl(e){e.g=Yl((()=>{e.g=null,e.i&&(e.i=!1,Jl(e))}),e.j);const t=e.h;e.h=null,e.m.apply(null,t)}Ua(Hl,Ol),(Sa=Hl.prototype).ga=!1,Sa.T=null,Sa.qb=function(){if(this.ga){var e=Date.now()-this.l;0<e&&e<.8*this.h?this.T=this.g.setTimeout(this.j,this.h-e):(this.T&&(this.g.clearTimeout(this.T),this.T=null),Ll(this,"tick"),this.ga&&(Ql(this),this.start()))}},Sa.start=function(){this.ga=!0,this.T||(this.T=this.g.setTimeout(this.j,this.h),this.l=Date.now())},Sa.N=function(){Hl.$.N.call(this),Ql(this),delete this.g};class Xl extends Va{constructor(e,t){super(),this.m=e,this.j=t,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:Jl(this)}N(){super.N(),this.g&&(Aa.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Zl(e){Va.call(this),this.h=e,this.g={}}Ua(Zl,Va);var eu=[];function tu(e,t,n,r){Array.isArray(n)||(n&&(eu[0]=n.toString()),n=eu);for(var i=0;i<n.length;i++){var s=kl(t,n[i],r||e.handleEvent,!1,e.h||e);if(!s)break;e.g[s.key]=s}}function nu(e){ml(e.g,(function(e,t){this.g.hasOwnProperty(t)&&Cl(e)}),e),e.g={}}function ru(){this.g=!0}function iu(e,t,n,r){e.info((function(){return"XMLHTTP TEXT ("+t+"): "+function(e,t){if(!e.g)return t;if(!t)return null;try{var n=JSON.parse(t);if(n)for(e=0;e<n.length;e++)if(Array.isArray(n[e])){var r=n[e];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var s=i[0];if("noop"!=s&&"stop"!=s&&"close"!=s)for(var o=1;o<i.length;o++)i[o]=""}}}return Fl(n)}catch(e){return t}}(e,n)+(r?" "+r:"")}))}Zl.prototype.N=function(){Zl.$.N.call(this),nu(this)},Zl.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},ru.prototype.Ea=function(){this.g=!1},ru.prototype.info=function(){};var su={},ou=null;function au(){return ou=ou||new Ol}function lu(e){qa.call(this,su.Ta,e)}function uu(e){const t=au();Ll(t,new lu(t))}function cu(e,t){qa.call(this,su.STAT_EVENT,e),this.stat=t}function hu(e){const t=au();Ll(t,new cu(t,e))}function du(e,t){qa.call(this,su.Ua,e),this.size=t}function fu(e,t){if("function"!=typeof e)throw Error("Fn must not be null and must be a function");return Aa.setTimeout((function(){e()}),t)}su.Ta="serverreachability",Ua(lu,qa),su.STAT_EVENT="statevent",Ua(cu,qa),su.Ua="timingevent",Ua(du,qa);var pu={NO_ERROR:0,rb:1,Eb:2,Db:3,yb:4,Cb:5,Fb:6,Qa:7,TIMEOUT:8,Ib:9},mu={wb:"complete",Sb:"success",Ra:"error",Qa:"abort",Kb:"ready",Lb:"readystatechange",TIMEOUT:"timeout",Gb:"incrementaldata",Jb:"progress",zb:"downloadprogress",$b:"uploadprogress"};function gu(){}function yu(e){return e.h||(e.h=e.i())}function vu(){}gu.prototype.h=null;var wu,bu={OPEN:"a",vb:"b",Ra:"c",Hb:"d"};function _u(){qa.call(this,"d")}function Eu(){qa.call(this,"c")}function Iu(){}function ku(e,t,n,r){this.l=e,this.j=t,this.m=n,this.W=r||1,this.U=new Zl(this),this.P=Tu,e=tl?125:void 0,this.V=new Hl(e),this.I=null,this.i=!1,this.s=this.A=this.v=this.L=this.G=this.Y=this.B=null,this.F=[],this.g=null,this.C=0,this.o=this.u=null,this.ca=-1,this.J=!1,this.O=0,this.M=null,this.ba=this.K=this.aa=this.S=!1,this.h=new Su}function Su(){this.i=null,this.g="",this.h=!1}Ua(_u,qa),Ua(Eu,qa),Ua(Iu,gu),Iu.prototype.g=function(){return new XMLHttpRequest},Iu.prototype.i=function(){return{}},wu=new Iu;var Tu=45e3,xu={},Cu={};function Au(e,t,n){e.L=1,e.v=Hu(qu(t)),e.s=n,e.S=!0,Nu(e,null)}function Nu(e,t){e.G=Date.now(),Ou(e),e.A=qu(e.v);var n=e.A,r=e.W;Array.isArray(r)||(r=[String(r)]),ac(n.i,"t",r),e.C=0,n=e.l.J,e.h=new Su,e.g=oh(e.l,n?t:null,!e.s),0<e.O&&(e.M=new Xl(Ma(e.Pa,e,e.g),e.O)),tu(e.U,e.g,"readystatechange",e.nb),t=e.I?gl(e.I):{},e.s?(e.u||(e.u="POST"),t["Content-Type"]="application/x-www-form-urlencoded",e.g.ha(e.A,e.u,e.s,t)):(e.u="GET",e.g.ha(e.A,e.u,null,t)),uu(),function(e,t,n,r,i,s){e.info((function(){if(e.g)if(s)for(var o="",a=s.split("&"),l=0;l<a.length;l++){var u=a[l].split("=");if(1<u.length){var c=u[0];u=u[1];var h=c.split("_");o=2<=h.length&&"type"==h[1]?o+(c+"=")+u+"&":o+(c+"=redacted&")}}else o=null;else o=s;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+t+"\n"+n+"\n"+o}))}(e.j,e.u,e.A,e.m,e.W,e.s)}function Ru(e){return!!e.g&&"GET"==e.u&&2!=e.L&&e.l.Ha}function Pu(e,t,n){let r,i=!0;for(;!e.J&&e.C<n.length;){if(r=Du(e,n),r==Cu){4==t&&(e.o=4,hu(14),i=!1),iu(e.j,e.m,null,"[Incomplete Response]");break}if(r==xu){e.o=4,hu(15),iu(e.j,e.m,n,"[Invalid Chunk]"),i=!1;break}iu(e.j,e.m,r,null),Vu(e,r)}Ru(e)&&r!=Cu&&r!=xu&&(e.h.g="",e.C=0),4!=t||0!=n.length||e.h.h||(e.o=1,hu(16),i=!1),e.i=e.i&&i,i?0<n.length&&!e.ba&&(e.ba=!0,(t=e.l).g==e&&t.ca&&!t.M&&(t.l.info("Great, no buffering proxy detected. Bytes received: "+n.length),Xc(t),t.M=!0,hu(11))):(iu(e.j,e.m,n,"[Invalid Chunked Response]"),Uu(e),Fu(e))}function Du(e,t){var n=e.C,r=t.indexOf("\n",n);return-1==r?Cu:(n=Number(t.substring(n,r)),isNaN(n)?xu:(r+=1)+n>t.length?Cu:(t=t.slice(r,r+n),e.C=r+n,t))}function Ou(e){e.Y=Date.now()+e.P,Lu(e,e.P)}function Lu(e,t){if(null!=e.B)throw Error("WatchDog timer not null");e.B=fu(Ma(e.lb,e),t)}function Mu(e){e.B&&(Aa.clearTimeout(e.B),e.B=null)}function Fu(e){0==e.l.H||e.J||th(e.l,e)}function Uu(e){Mu(e);var t=e.M;t&&"function"==typeof t.sa&&t.sa(),e.M=null,Ql(e.V),nu(e.U),e.g&&(t=e.g,e.g=null,t.abort(),t.sa())}function Vu(e,t){try{var n=e.l;if(0!=n.H&&(n.g==e||fc(n.i,e)))if(!e.K&&fc(n.i,e)&&3==n.H){try{var r=n.Ja.g.parse(t)}catch(e){r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0]){e:if(!n.u){if(n.g){if(!(n.g.G+3e3<e.G))break e;eh(n),$c(n)}Jc(n),hu(18)}}else n.Fa=i[1],0<n.Fa-n.V&&37500>i[2]&&n.G&&0==n.A&&!n.v&&(n.v=fu(Ma(n.ib,n),6e3));if(1>=dc(n.i)&&n.oa){try{n.oa()}catch(e){}n.oa=void 0}}else rh(n,11)}else if((e.K||n.g==e)&&eh(n),!Ka(t))for(i=n.Ja.g.parse(t),t=0;t<i.length;t++){let u=i[t];if(n.V=u[0],u=u[1],2==n.H)if("c"==u[0]){n.K=u[1],n.pa=u[2];const t=u[3];null!=t&&(n.ra=t,n.l.info("VER="+n.ra));const i=u[4];null!=i&&(n.Ga=i,n.l.info("SVER="+n.Ga));const c=u[5];null!=c&&"number"==typeof c&&0<c&&(r=1.5*c,n.L=r,n.l.info("backChannelRequestTimeoutMs_="+r)),r=n;const h=e.g;if(h){const e=h.g?h.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(e){var s=r.i;s.g||-1==e.indexOf("spdy")&&-1==e.indexOf("quic")&&-1==e.indexOf("h2")||(s.j=s.l,s.g=new Set,s.h&&(pc(s,s.h),s.h=null))}if(r.F){const e=h.g?h.g.getResponseHeader("X-HTTP-Session-Id"):null;e&&(r.Da=e,Wu(r.I,r.F,e))}}n.H=3,n.h&&n.h.Ba(),n.ca&&(n.S=Date.now()-e.G,n.l.info("Handshake RTT: "+n.S+"ms"));var o=e;if((r=n).wa=sh(r,r.J?r.pa:null,r.Y),o.K){mc(r.i,o);var a=o,l=r.L;l&&a.setTimeout(l),a.B&&(Mu(a),Ou(a)),r.g=o}else Yc(r);0<n.j.length&&Gc(n)}else"stop"!=u[0]&&"close"!=u[0]||rh(n,7);else 3==n.H&&("stop"==u[0]||"close"==u[0]?"stop"==u[0]?rh(n,7):qc(n):"noop"!=u[0]&&n.h&&n.h.Aa(u),n.A=0)}uu()}catch(e){}}function zu(e,t){if(e.forEach&&"function"==typeof e.forEach)e.forEach(t,void 0);else if(Na(e)||"string"==typeof e)Array.prototype.forEach.call(e,t,void 0);else for(var n=function(e){if(e.ta&&"function"==typeof e.ta)return e.ta();if(!e.Z||"function"!=typeof e.Z){if("undefined"!=typeof Map&&e instanceof Map)return Array.from(e.keys());if(!("undefined"!=typeof Set&&e instanceof Set)){if(Na(e)||"string"==typeof e){var t=[];e=e.length;for(var n=0;n<e;n++)t.push(n);return t}t=[],n=0;for(const r in e)t[n++]=r;return t}}}(e),r=function(e){if(e.Z&&"function"==typeof e.Z)return e.Z();if("undefined"!=typeof Map&&e instanceof Map||"undefined"!=typeof Set&&e instanceof Set)return Array.from(e.values());if("string"==typeof e)return e.split("");if(Na(e)){for(var t=[],n=e.length,r=0;r<n;r++)t.push(e[r]);return t}for(r in t=[],n=0,e)t[n++]=e[r];return t}(e),i=r.length,s=0;s<i;s++)t.call(void 0,r[s],n&&n[s],e)}(Sa=ku.prototype).setTimeout=function(e){this.P=e},Sa.nb=function(e){e=e.target;const t=this.M;t&&3==Fc(e)?t.l():this.Pa(e)},Sa.Pa=function(e){try{if(e==this.g)e:{const c=Fc(this.g);var t=this.g.Ia();if(this.g.da(),!(3>c)&&(3!=c||tl||this.g&&(this.h.h||this.g.ja()||Uc(this.g)))){this.J||4!=c||7==t||uu(),Mu(this);var n=this.g.da();this.ca=n;t:if(Ru(this)){var r=Uc(this.g);e="";var i=r.length,s=4==Fc(this.g);if(!this.h.i){if("undefined"==typeof TextDecoder){Uu(this),Fu(this);var o="";break t}this.h.i=new Aa.TextDecoder}for(t=0;t<i;t++)this.h.h=!0,e+=this.h.i.decode(r[t],{stream:s&&t==i-1});r.splice(0,i),this.h.g+=e,this.C=0,o=this.h.g}else o=this.g.ja();if(this.i=200==n,function(e,t,n,r,i,s,o){e.info((function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+t+"\n"+n+"\n"+s+" "+o}))}(this.j,this.u,this.A,this.m,this.W,c,n),this.i){if(this.aa&&!this.K){t:{if(this.g){var a,l=this.g;if((a=l.g?l.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!Ka(a)){var u=a;break t}}u=null}if(!(n=u)){this.i=!1,this.o=3,hu(12),Uu(this),Fu(this);break e}iu(this.j,this.m,n,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Vu(this,n)}this.S?(Pu(this,c,o),tl&&this.i&&3==c&&(tu(this.U,this.V,"tick",this.mb),this.V.start())):(iu(this.j,this.m,o,null),Vu(this,o)),4==c&&Uu(this),this.i&&!this.J&&(4==c?th(this.l,this):(this.i=!1,Ou(this)))}else(function(e){const t={};e=(e.g&&2<=Fc(e)&&e.g.getAllResponseHeaders()||"").split("\r\n");for(let r=0;r<e.length;r++){if(Ka(e[r]))continue;var n=Bl(e[r]);const i=n[0];if("string"!=typeof(n=n[1]))continue;n=n.trim();const s=t[i]||[];t[i]=s,s.push(n)}!function(e,t){for(const n in e)t.call(void 0,e[n],n,e)}(t,(function(e){return e.join(", ")}))})(this.g),400==n&&0<o.indexOf("Unknown SID")?(this.o=3,hu(12)):(this.o=0,hu(13)),Uu(this),Fu(this)}}}catch(e){}},Sa.mb=function(){if(this.g){var e=Fc(this.g),t=this.g.ja();this.C<t.length&&(Mu(this),Pu(this,e,t),this.i&&4!=e&&Ou(this))}},Sa.cancel=function(){this.J=!0,Uu(this)},Sa.lb=function(){this.B=null;const e=Date.now();0<=e-this.Y?(function(e,t){e.info((function(){return"TIMEOUT: "+t}))}(this.j,this.A),2!=this.L&&(uu(),hu(17)),Uu(this),this.o=2,Fu(this)):Lu(this,this.Y-e)};var Bu=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function ju(e){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,e instanceof ju){this.h=e.h,$u(this,e.j),this.s=e.s,this.g=e.g,Ku(this,e.m),this.l=e.l;var t=e.i,n=new rc;n.i=t.i,t.g&&(n.g=new Map(t.g),n.h=t.h),Gu(this,n),this.o=e.o}else e&&(t=String(e).match(Bu))?(this.h=!1,$u(this,t[1]||"",!0),this.s=Qu(t[2]||""),this.g=Qu(t[3]||"",!0),Ku(this,t[4]),this.l=Qu(t[5]||"",!0),Gu(this,t[6]||"",!0),this.o=Qu(t[7]||"")):(this.h=!1,this.i=new rc(null,this.h))}function qu(e){return new ju(e)}function $u(e,t,n){e.j=n?Qu(t,!0):t,e.j&&(e.j=e.j.replace(/:$/,""))}function Ku(e,t){if(t){if(t=Number(t),isNaN(t)||0>t)throw Error("Bad port number "+t);e.m=t}else e.m=null}function Gu(e,t,n){t instanceof rc?(e.i=t,function(e,t){t&&!e.j&&(ic(e),e.i=null,e.g.forEach((function(e,t){var n=t.toLowerCase();t!=n&&(sc(this,t),ac(this,n,e))}),e)),e.j=t}(e.i,e.h)):(n||(t=Yu(t,tc)),e.i=new rc(t,e.h))}function Wu(e,t,n){e.i.set(t,n)}function Hu(e){return Wu(e,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),e}function Qu(e,t){return e?t?decodeURI(e.replace(/%25/g,"%2525")):decodeURIComponent(e):""}function Yu(e,t,n){return"string"==typeof e?(e=encodeURI(e).replace(t,Ju),n&&(e=e.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),e):null}function Ju(e){return"%"+((e=e.charCodeAt(0))>>4&15).toString(16)+(15&e).toString(16)}ju.prototype.toString=function(){var e=[],t=this.j;t&&e.push(Yu(t,Xu,!0),":");var n=this.g;return(n||"file"==t)&&(e.push("//"),(t=this.s)&&e.push(Yu(t,Xu,!0),"@"),e.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.m)&&e.push(":",String(n))),(n=this.l)&&(this.g&&"/"!=n.charAt(0)&&e.push("/"),e.push(Yu(n,"/"==n.charAt(0)?ec:Zu,!0))),(n=this.i.toString())&&e.push("?",n),(n=this.o)&&e.push("#",Yu(n,nc)),e.join("")};var Xu=/[#\/\?@]/g,Zu=/[#\?:]/g,ec=/[#\?]/g,tc=/[#\?@]/g,nc=/#/g;function rc(e,t){this.h=this.g=null,this.i=e||null,this.j=!!t}function ic(e){e.g||(e.g=new Map,e.h=0,e.i&&function(e,t){if(e){e=e.split("&");for(var n=0;n<e.length;n++){var r=e[n].indexOf("="),i=null;if(0<=r){var s=e[n].substring(0,r);i=e[n].substring(r+1)}else s=e[n];t(s,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(e.i,(function(t,n){e.add(decodeURIComponent(t.replace(/\+/g," ")),n)})))}function sc(e,t){ic(e),t=lc(e,t),e.g.has(t)&&(e.i=null,e.h-=e.g.get(t).length,e.g.delete(t))}function oc(e,t){return ic(e),t=lc(e,t),e.g.has(t)}function ac(e,t,n){sc(e,t),0<n.length&&(e.i=null,e.g.set(lc(e,t),Ba(n)),e.h+=n.length)}function lc(e,t){return t=String(t),e.j&&(t=t.toLowerCase()),t}function uc(e){this.l=e||cc,e=Aa.PerformanceNavigationTiming?0<(e=Aa.performance.getEntriesByType("navigation")).length&&("hq"==e[0].nextHopProtocol||"h2"==e[0].nextHopProtocol):!!(Aa.g&&Aa.g.Ka&&Aa.g.Ka()&&Aa.g.Ka().ec),this.j=e?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}(Sa=rc.prototype).add=function(e,t){ic(this),this.i=null,e=lc(this,e);var n=this.g.get(e);return n||this.g.set(e,n=[]),n.push(t),this.h+=1,this},Sa.forEach=function(e,t){ic(this),this.g.forEach((function(n,r){n.forEach((function(n){e.call(t,n,r,this)}),this)}),this)},Sa.ta=function(){ic(this);const e=Array.from(this.g.values()),t=Array.from(this.g.keys()),n=[];for(let r=0;r<t.length;r++){const i=e[r];for(let e=0;e<i.length;e++)n.push(t[r])}return n},Sa.Z=function(e){ic(this);let t=[];if("string"==typeof e)oc(this,e)&&(t=t.concat(this.g.get(lc(this,e))));else{e=Array.from(this.g.values());for(let n=0;n<e.length;n++)t=t.concat(e[n])}return t},Sa.set=function(e,t){return ic(this),this.i=null,oc(this,e=lc(this,e))&&(this.h-=this.g.get(e).length),this.g.set(e,[t]),this.h+=1,this},Sa.get=function(e,t){return e&&0<(e=this.Z(e)).length?String(e[0]):t},Sa.toString=function(){if(this.i)return this.i;if(!this.g)return"";const e=[],t=Array.from(this.g.keys());for(var n=0;n<t.length;n++){var r=t[n];const s=encodeURIComponent(String(r)),o=this.Z(r);for(r=0;r<o.length;r++){var i=s;""!==o[r]&&(i+="="+encodeURIComponent(String(o[r]))),e.push(i)}}return this.i=e.join("&")};var cc=10;function hc(e){return!!e.h||!!e.g&&e.g.size>=e.j}function dc(e){return e.h?1:e.g?e.g.size:0}function fc(e,t){return e.h?e.h==t:!!e.g&&e.g.has(t)}function pc(e,t){e.g?e.g.add(t):e.h=t}function mc(e,t){e.h&&e.h==t?e.h=null:e.g&&e.g.has(t)&&e.g.delete(t)}function gc(e){if(null!=e.h)return e.i.concat(e.h.F);if(null!=e.g&&0!==e.g.size){let t=e.i;for(const n of e.g.values())t=t.concat(n.F);return t}return Ba(e.i)}uc.prototype.cancel=function(){if(this.i=gc(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const e of this.g.values())e.cancel();this.g.clear()}};var yc=class{stringify(e){return Aa.JSON.stringify(e,void 0)}parse(e){return Aa.JSON.parse(e,void 0)}};function vc(){this.g=new yc}function wc(e,t,n){const r=n||"";try{zu(e,(function(e,n){let i=e;Ra(e)&&(i=Fl(e)),t.push(r+n+"="+encodeURIComponent(i))}))}catch(e){throw t.push(r+"type="+encodeURIComponent("_badmap")),e}}function bc(e,t,n,r,i){try{t.onload=null,t.onerror=null,t.onabort=null,t.ontimeout=null,i(r)}catch(e){}}function _c(e){this.l=e.fc||null,this.j=e.ob||!1}function Ec(e,t){Ol.call(this),this.F=e,this.u=t,this.m=void 0,this.readyState=Ic,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}Ua(_c,gu),_c.prototype.g=function(){return new Ec(this.l,this.j)},_c.prototype.i=function(e){return function(){return e}}({}),Ua(Ec,Ol);var Ic=0;function kc(e){e.j.read().then(e.Xa.bind(e)).catch(e.ka.bind(e))}function Sc(e){e.readyState=4,e.l=null,e.j=null,e.A=null,Tc(e)}function Tc(e){e.onreadystatechange&&e.onreadystatechange.call(e)}(Sa=Ec.prototype).open=function(e,t){if(this.readyState!=Ic)throw this.abort(),Error("Error reopening a connection");this.C=e,this.B=t,this.readyState=1,Tc(this)},Sa.send=function(e){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const t={headers:this.v,method:this.C,credentials:this.m,cache:void 0};e&&(t.body=e),(this.F||Aa).fetch(new Request(this.B,t)).then(this.$a.bind(this),this.ka.bind(this))},Sa.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch((()=>{})),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,Sc(this)),this.readyState=Ic},Sa.$a=function(e){if(this.g&&(this.l=e,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=e.headers,this.readyState=2,Tc(this)),this.g&&(this.readyState=3,Tc(this),this.g)))if("arraybuffer"===this.responseType)e.arrayBuffer().then(this.Ya.bind(this),this.ka.bind(this));else if(void 0!==Aa.ReadableStream&&"body"in e){if(this.j=e.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;kc(this)}else e.text().then(this.Za.bind(this),this.ka.bind(this))},Sa.Xa=function(e){if(this.g){if(this.u&&e.value)this.response.push(e.value);else if(!this.u){var t=e.value?e.value:new Uint8Array(0);(t=this.A.decode(t,{stream:!e.done}))&&(this.response=this.responseText+=t)}e.done?Sc(this):Tc(this),3==this.readyState&&kc(this)}},Sa.Za=function(e){this.g&&(this.response=this.responseText=e,Sc(this))},Sa.Ya=function(e){this.g&&(this.response=e,Sc(this))},Sa.ka=function(){this.g&&Sc(this)},Sa.setRequestHeader=function(e,t){this.v.append(e,t)},Sa.getResponseHeader=function(e){return this.h&&this.h.get(e.toLowerCase())||""},Sa.getAllResponseHeaders=function(){if(!this.h)return"";const e=[],t=this.h.entries();for(var n=t.next();!n.done;)n=n.value,e.push(n[0]+": "+n[1]),n=t.next();return e.join("\r\n")},Object.defineProperty(Ec.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(e){this.m=e?"include":"same-origin"}});var xc=Aa.JSON.parse;function Cc(e){Ol.call(this),this.headers=new Map,this.u=e||null,this.h=!1,this.C=this.g=null,this.I="",this.m=0,this.j="",this.l=this.G=this.v=this.F=!1,this.B=0,this.A=null,this.K=Ac,this.L=this.M=!1}Ua(Cc,Ol);var Ac="",Nc=/^https?$/i,Rc=["POST","PUT"];function Pc(e,t){e.h=!1,e.g&&(e.l=!0,e.g.abort(),e.l=!1),e.j=t,e.m=5,Dc(e),Lc(e)}function Dc(e){e.F||(e.F=!0,Ll(e,"complete"),Ll(e,"error"))}function Oc(e){if(e.h&&void 0!==Ca&&(!e.C[1]||4!=Fc(e)||2!=e.da()))if(e.v&&4==Fc(e))Yl(e.La,0,e);else if(Ll(e,"readystatechange"),4==Fc(e)){e.h=!1;try{const o=e.da();e:switch(o){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var t=!0;break e;default:t=!1}var n;if(!(n=t)){var r;if(r=0===o){var i=String(e.I).match(Bu)[1]||null;!i&&Aa.self&&Aa.self.location&&(i=Aa.self.location.protocol.slice(0,-1)),r=!Nc.test(i?i.toLowerCase():"")}n=r}if(n)Ll(e,"complete"),Ll(e,"success");else{e.m=6;try{var s=2<Fc(e)?e.g.statusText:""}catch(e){s=""}e.j=s+" ["+e.da()+"]",Dc(e)}}finally{Lc(e)}}}function Lc(e,t){if(e.g){Mc(e);const n=e.g,r=e.C[0]?()=>{}:null;e.g=null,e.C=null,t||Ll(e,"ready");try{n.onreadystatechange=r}catch(e){}}}function Mc(e){e.g&&e.L&&(e.g.ontimeout=null),e.A&&(Aa.clearTimeout(e.A),e.A=null)}function Fc(e){return e.g?e.g.readyState:0}function Uc(e){try{if(!e.g)return null;if("response"in e.g)return e.g.response;switch(e.K){case Ac:case"text":return e.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in e.g)return e.g.mozResponseArrayBuffer}return null}catch(e){return null}}function Vc(e){let t="";return ml(e,(function(e,n){t+=n,t+=":",t+=e,t+="\r\n"})),t}function zc(e,t,n){e:{for(r in n){var r=!1;break e}r=!0}r||(n=Vc(n),"string"==typeof e?null!=n&&encodeURIComponent(String(n)):Wu(e,t,n))}function Bc(e,t,n){return n&&n.internalChannelParams&&n.internalChannelParams[e]||t}function jc(e){this.Ga=0,this.j=[],this.l=new ru,this.pa=this.wa=this.I=this.Y=this.g=this.Da=this.F=this.na=this.o=this.U=this.s=null,this.fb=this.W=0,this.cb=Bc("failFast",!1,e),this.G=this.v=this.u=this.m=this.h=null,this.aa=!0,this.Fa=this.V=-1,this.ba=this.A=this.C=0,this.ab=Bc("baseRetryDelayMs",5e3,e),this.hb=Bc("retryDelaySeedMs",1e4,e),this.eb=Bc("forwardChannelMaxRetries",2,e),this.xa=Bc("forwardChannelRequestTimeoutMs",2e4,e),this.va=e&&e.xmlHttpFactory||void 0,this.Ha=e&&e.dc||!1,this.L=void 0,this.J=e&&e.supportsCrossDomainXhr||!1,this.K="",this.i=new uc(e&&e.concurrentRequestLimit),this.Ja=new vc,this.P=e&&e.fastHandshake||!1,this.O=e&&e.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.bb=e&&e.bc||!1,e&&e.Ea&&this.l.Ea(),e&&e.forceLongPolling&&(this.aa=!1),this.ca=!this.P&&this.aa&&e&&e.detectBufferingProxy||!1,this.qa=void 0,e&&e.longPollingTimeout&&0<e.longPollingTimeout&&(this.qa=e.longPollingTimeout),this.oa=void 0,this.S=0,this.M=!1,this.ma=this.B=null}function qc(e){if(Kc(e),3==e.H){var t=e.W++,n=qu(e.I);if(Wu(n,"SID",e.K),Wu(n,"RID",t),Wu(n,"TYPE","terminate"),Hc(e,n),(t=new ku(e,e.l,t)).L=2,t.v=Hu(qu(n)),n=!1,Aa.navigator&&Aa.navigator.sendBeacon)try{n=Aa.navigator.sendBeacon(t.v.toString(),"")}catch(e){}!n&&Aa.Image&&((new Image).src=t.v,n=!0),n||(t.g=oh(t.l,null),t.g.ha(t.v)),t.G=Date.now(),Ou(t)}ih(e)}function $c(e){e.g&&(Xc(e),e.g.cancel(),e.g=null)}function Kc(e){$c(e),e.u&&(Aa.clearTimeout(e.u),e.u=null),eh(e),e.i.cancel(),e.m&&("number"==typeof e.m&&Aa.clearTimeout(e.m),e.m=null)}function Gc(e){if(!hc(e.i)&&!e.m){e.m=!0;var t=e.Na;ql||Gl(),$l||(ql(),$l=!0),Kl.add(t,e),e.C=0}}function Wc(e,t){var n;n=t?t.m:e.W++;const r=qu(e.I);Wu(r,"SID",e.K),Wu(r,"RID",n),Wu(r,"AID",e.V),Hc(e,r),e.o&&e.s&&zc(r,e.o,e.s),n=new ku(e,e.l,n,e.C+1),null===e.o&&(n.I=e.s),t&&(e.j=t.F.concat(e.j)),t=Qc(e,n,1e3),n.setTimeout(Math.round(.5*e.xa)+Math.round(.5*e.xa*Math.random())),pc(e.i,n),Au(n,r,t)}function Hc(e,t){e.na&&ml(e.na,(function(e,n){Wu(t,n,e)})),e.h&&zu({},(function(e,n){Wu(t,n,e)}))}function Qc(e,t,n){n=Math.min(e.j.length,n);var r=e.h?Ma(e.h.Va,e.h,e):null;e:{var i=e.j;let t=-1;for(;;){const e=["count="+n];-1==t?0<n?(t=i[0].g,e.push("ofs="+t)):t=0:e.push("ofs="+t);let s=!0;for(let o=0;o<n;o++){let n=i[o].g;const a=i[o].map;if(n-=t,0>n)t=Math.max(0,i[o].g-100),s=!1;else try{wc(a,e,"req"+n+"_")}catch(e){r&&r(a)}}if(s){r=e.join("&");break e}}}return e=e.j.splice(0,n),t.F=e,r}function Yc(e){if(!e.g&&!e.u){e.ba=1;var t=e.Ma;ql||Gl(),$l||(ql(),$l=!0),Kl.add(t,e),e.A=0}}function Jc(e){return!(e.g||e.u||3<=e.A||(e.ba++,e.u=fu(Ma(e.Ma,e),nh(e,e.A)),e.A++,0))}function Xc(e){null!=e.B&&(Aa.clearTimeout(e.B),e.B=null)}function Zc(e){e.g=new ku(e,e.l,"rpc",e.ba),null===e.o&&(e.g.I=e.s),e.g.O=0;var t=qu(e.wa);Wu(t,"RID","rpc"),Wu(t,"SID",e.K),Wu(t,"AID",e.V),Wu(t,"CI",e.G?"0":"1"),!e.G&&e.qa&&Wu(t,"TO",e.qa),Wu(t,"TYPE","xmlhttp"),Hc(e,t),e.o&&e.s&&zc(t,e.o,e.s),e.L&&e.g.setTimeout(e.L);var n=e.g;e=e.pa,n.L=1,n.v=Hu(qu(t)),n.s=null,n.S=!0,Nu(n,e)}function eh(e){null!=e.v&&(Aa.clearTimeout(e.v),e.v=null)}function th(e,t){var n=null;if(e.g==t){eh(e),Xc(e),e.g=null;var r=2}else{if(!fc(e.i,t))return;n=t.F,mc(e.i,t),r=1}if(0!=e.H)if(t.i)if(1==r){n=t.s?t.s.length:0,t=Date.now()-t.G;var i=e.C;Ll(r=au(),new du(r,n)),Gc(e)}else Yc(e);else if(3==(i=t.o)||0==i&&0<t.ca||!(1==r&&function(e,t){return!(dc(e.i)>=e.i.j-(e.m?1:0)||(e.m?(e.j=t.F.concat(e.j),0):1==e.H||2==e.H||e.C>=(e.cb?0:e.eb)||(e.m=fu(Ma(e.Na,e,t),nh(e,e.C)),e.C++,0)))}(e,t)||2==r&&Jc(e)))switch(n&&0<n.length&&(t=e.i,t.i=t.i.concat(n)),i){case 1:rh(e,5);break;case 4:rh(e,10);break;case 3:rh(e,6);break;default:rh(e,2)}}function nh(e,t){let n=e.ab+Math.floor(Math.random()*e.hb);return e.isActive()||(n*=2),n*t}function rh(e,t){if(e.l.info("Error code "+t),2==t){var n=null;e.h&&(n=null);var r=Ma(e.pb,e);n||(n=new ju("//www.google.com/images/cleardot.gif"),Aa.location&&"http"==Aa.location.protocol||$u(n,"https"),Hu(n)),function(e,t){const n=new ru;if(Aa.Image){const r=new Image;r.onload=Fa(bc,n,r,"TestLoadImage: loaded",!0,t),r.onerror=Fa(bc,n,r,"TestLoadImage: error",!1,t),r.onabort=Fa(bc,n,r,"TestLoadImage: abort",!1,t),r.ontimeout=Fa(bc,n,r,"TestLoadImage: timeout",!1,t),Aa.setTimeout((function(){r.ontimeout&&r.ontimeout()}),1e4),r.src=e}else t(!1)}(n.toString(),r)}else hu(2);e.H=0,e.h&&e.h.za(t),ih(e),Kc(e)}function ih(e){if(e.H=0,e.ma=[],e.h){const t=gc(e.i);0==t.length&&0==e.j.length||(ja(e.ma,t),ja(e.ma,e.j),e.i.i.length=0,Ba(e.j),e.j.length=0),e.h.ya()}}function sh(e,t,n){var r=n instanceof ju?qu(n):new ju(n);if(""!=r.g)t&&(r.g=t+"."+r.g),Ku(r,r.m);else{var i=Aa.location;r=i.protocol,t=t?t+"."+i.hostname:i.hostname,i=+i.port;var s=new ju(null);r&&$u(s,r),t&&(s.g=t),i&&Ku(s,i),n&&(s.l=n),r=s}return n=e.F,t=e.Da,n&&t&&Wu(r,n,t),Wu(r,"VER",e.ra),Hc(e,r),r}function oh(e,t,n){if(t&&!e.J)throw Error("Can't create secondary domain capable XhrIo object.");return(t=n&&e.Ha&&!e.va?new Cc(new _c({ob:!0})):new Cc(e.va)).Oa(e.J),t}function ah(){}function lh(){if(Za&&!(10<=Number(ll)))throw Error("Environmental error: no available transport.")}function uh(e,t){Ol.call(this),this.g=new jc(t),this.l=e,this.h=t&&t.messageUrlParams||null,e=t&&t.messageHeaders||null,t&&t.clientProtocolHeaderRequired&&(e?e["X-Client-Protocol"]="webchannel":e={"X-Client-Protocol":"webchannel"}),this.g.s=e,e=t&&t.initMessageHeaders||null,t&&t.messageContentType&&(e?e["X-WebChannel-Content-Type"]=t.messageContentType:e={"X-WebChannel-Content-Type":t.messageContentType}),t&&t.Ca&&(e?e["X-WebChannel-Client-Profile"]=t.Ca:e={"X-WebChannel-Client-Profile":t.Ca}),this.g.U=e,(e=t&&t.cc)&&!Ka(e)&&(this.g.o=e),this.A=t&&t.supportsCrossDomainXhr||!1,this.v=t&&t.sendRawJson||!1,(t=t&&t.httpSessionIdParam)&&!Ka(t)&&(this.g.F=t,null!==(e=this.h)&&t in e&&t in(e=this.h)&&delete e[t]),this.j=new dh(this)}function ch(e){_u.call(this),e.__headers__&&(this.headers=e.__headers__,this.statusCode=e.__status__,delete e.__headers__,delete e.__status__);var t=e.__sm__;if(t){e:{for(const n in t){e=n;break e}e=void 0}(this.i=e)&&(e=this.i,t=null!==t&&e in t?t[e]:void 0),this.data=t}else this.data=e}function hh(){Eu.call(this),this.status=1}function dh(e){this.g=e}function fh(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.m=Array(this.blockSize),this.i=this.h=0,this.reset()}function ph(e,t,n){n||(n=0);var r=Array(16);if("string"==typeof t)for(var i=0;16>i;++i)r[i]=t.charCodeAt(n++)|t.charCodeAt(n++)<<8|t.charCodeAt(n++)<<16|t.charCodeAt(n++)<<24;else for(i=0;16>i;++i)r[i]=t[n++]|t[n++]<<8|t[n++]<<16|t[n++]<<24;t=e.g[0],n=e.g[1],i=e.g[2];var s=e.g[3],o=t+(s^n&(i^s))+r[0]+3614090360&4294967295;o=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=n+(o<<7&4294967295|o>>>25))+((o=s+(i^t&(n^i))+r[1]+3905402710&4294967295)<<12&4294967295|o>>>20))+((o=i+(n^s&(t^n))+r[2]+606105819&4294967295)<<17&4294967295|o>>>15))+((o=n+(t^i&(s^t))+r[3]+3250441966&4294967295)<<22&4294967295|o>>>10))+((o=t+(s^n&(i^s))+r[4]+4118548399&4294967295)<<7&4294967295|o>>>25))+((o=s+(i^t&(n^i))+r[5]+1200080426&4294967295)<<12&4294967295|o>>>20))+((o=i+(n^s&(t^n))+r[6]+2821735955&4294967295)<<17&4294967295|o>>>15))+((o=n+(t^i&(s^t))+r[7]+4249261313&4294967295)<<22&4294967295|o>>>10))+((o=t+(s^n&(i^s))+r[8]+1770035416&4294967295)<<7&4294967295|o>>>25))+((o=s+(i^t&(n^i))+r[9]+2336552879&4294967295)<<12&4294967295|o>>>20))+((o=i+(n^s&(t^n))+r[10]+4294925233&4294967295)<<17&4294967295|o>>>15))+((o=n+(t^i&(s^t))+r[11]+2304563134&4294967295)<<22&4294967295|o>>>10))+((o=t+(s^n&(i^s))+r[12]+1804603682&4294967295)<<7&4294967295|o>>>25))+((o=s+(i^t&(n^i))+r[13]+4254626195&4294967295)<<12&4294967295|o>>>20))+((o=i+(n^s&(t^n))+r[14]+2792965006&4294967295)<<17&4294967295|o>>>15))+((o=n+(t^i&(s^t))+r[15]+1236535329&4294967295)<<22&4294967295|o>>>10))+((o=t+(i^s&(n^i))+r[1]+4129170786&4294967295)<<5&4294967295|o>>>27))+((o=s+(n^i&(t^n))+r[6]+3225465664&4294967295)<<9&4294967295|o>>>23))+((o=i+(t^n&(s^t))+r[11]+643717713&4294967295)<<14&4294967295|o>>>18))+((o=n+(s^t&(i^s))+r[0]+3921069994&4294967295)<<20&4294967295|o>>>12))+((o=t+(i^s&(n^i))+r[5]+3593408605&4294967295)<<5&4294967295|o>>>27))+((o=s+(n^i&(t^n))+r[10]+38016083&4294967295)<<9&4294967295|o>>>23))+((o=i+(t^n&(s^t))+r[15]+3634488961&4294967295)<<14&4294967295|o>>>18))+((o=n+(s^t&(i^s))+r[4]+3889429448&4294967295)<<20&4294967295|o>>>12))+((o=t+(i^s&(n^i))+r[9]+568446438&4294967295)<<5&4294967295|o>>>27))+((o=s+(n^i&(t^n))+r[14]+3275163606&4294967295)<<9&4294967295|o>>>23))+((o=i+(t^n&(s^t))+r[3]+4107603335&4294967295)<<14&4294967295|o>>>18))+((o=n+(s^t&(i^s))+r[8]+1163531501&4294967295)<<20&4294967295|o>>>12))+((o=t+(i^s&(n^i))+r[13]+2850285829&4294967295)<<5&4294967295|o>>>27))+((o=s+(n^i&(t^n))+r[2]+4243563512&4294967295)<<9&4294967295|o>>>23))+((o=i+(t^n&(s^t))+r[7]+1735328473&4294967295)<<14&4294967295|o>>>18))+((o=n+(s^t&(i^s))+r[12]+2368359562&4294967295)<<20&4294967295|o>>>12))+((o=t+(n^i^s)+r[5]+4294588738&4294967295)<<4&4294967295|o>>>28))+((o=s+(t^n^i)+r[8]+2272392833&4294967295)<<11&4294967295|o>>>21))+((o=i+(s^t^n)+r[11]+1839030562&4294967295)<<16&4294967295|o>>>16))+((o=n+(i^s^t)+r[14]+4259657740&4294967295)<<23&4294967295|o>>>9))+((o=t+(n^i^s)+r[1]+2763975236&4294967295)<<4&4294967295|o>>>28))+((o=s+(t^n^i)+r[4]+1272893353&4294967295)<<11&4294967295|o>>>21))+((o=i+(s^t^n)+r[7]+4139469664&4294967295)<<16&4294967295|o>>>16))+((o=n+(i^s^t)+r[10]+3200236656&4294967295)<<23&4294967295|o>>>9))+((o=t+(n^i^s)+r[13]+681279174&4294967295)<<4&4294967295|o>>>28))+((o=s+(t^n^i)+r[0]+3936430074&4294967295)<<11&4294967295|o>>>21))+((o=i+(s^t^n)+r[3]+3572445317&4294967295)<<16&4294967295|o>>>16))+((o=n+(i^s^t)+r[6]+76029189&4294967295)<<23&4294967295|o>>>9))+((o=t+(n^i^s)+r[9]+3654602809&4294967295)<<4&4294967295|o>>>28))+((o=s+(t^n^i)+r[12]+3873151461&4294967295)<<11&4294967295|o>>>21))+((o=i+(s^t^n)+r[15]+530742520&4294967295)<<16&4294967295|o>>>16))+((o=n+(i^s^t)+r[2]+3299628645&4294967295)<<23&4294967295|o>>>9))+((o=t+(i^(n|~s))+r[0]+4096336452&4294967295)<<6&4294967295|o>>>26))+((o=s+(n^(t|~i))+r[7]+1126891415&4294967295)<<10&4294967295|o>>>22))+((o=i+(t^(s|~n))+r[14]+2878612391&4294967295)<<15&4294967295|o>>>17))+((o=n+(s^(i|~t))+r[5]+4237533241&4294967295)<<21&4294967295|o>>>11))+((o=t+(i^(n|~s))+r[12]+1700485571&4294967295)<<6&4294967295|o>>>26))+((o=s+(n^(t|~i))+r[3]+2399980690&4294967295)<<10&4294967295|o>>>22))+((o=i+(t^(s|~n))+r[10]+4293915773&4294967295)<<15&4294967295|o>>>17))+((o=n+(s^(i|~t))+r[1]+2240044497&4294967295)<<21&4294967295|o>>>11))+((o=t+(i^(n|~s))+r[8]+1873313359&4294967295)<<6&4294967295|o>>>26))+((o=s+(n^(t|~i))+r[15]+4264355552&4294967295)<<10&4294967295|o>>>22))+((o=i+(t^(s|~n))+r[6]+2734768916&4294967295)<<15&4294967295|o>>>17))+((o=n+(s^(i|~t))+r[13]+1309151649&4294967295)<<21&4294967295|o>>>11))+((s=(t=n+((o=t+(i^(n|~s))+r[4]+4149444226&4294967295)<<6&4294967295|o>>>26))+((o=s+(n^(t|~i))+r[11]+3174756917&4294967295)<<10&4294967295|o>>>22))^((i=s+((o=i+(t^(s|~n))+r[2]+718787259&4294967295)<<15&4294967295|o>>>17))|~t))+r[9]+3951481745&4294967295,e.g[0]=e.g[0]+t&4294967295,e.g[1]=e.g[1]+(i+(o<<21&4294967295|o>>>11))&4294967295,e.g[2]=e.g[2]+i&4294967295,e.g[3]=e.g[3]+s&4294967295}function mh(e,t){this.h=t;for(var n=[],r=!0,i=e.length-1;0<=i;i--){var s=0|e[i];r&&s==t||(n[i]=s,r=!1)}this.g=n}(Sa=Cc.prototype).Oa=function(e){this.M=e},Sa.ha=function(e,t,n,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.I+"; newUri="+e);t=t?t.toUpperCase():"GET",this.I=e,this.j="",this.m=0,this.F=!1,this.h=!0,this.g=this.u?this.u.g():wu.g(),this.C=this.u?yu(this.u):yu(wu),this.g.onreadystatechange=Ma(this.La,this);try{this.G=!0,this.g.open(t,String(e),!0),this.G=!1}catch(e){return void Pc(this,e)}if(e=n||"",n=new Map(this.headers),r)if(Object.getPrototypeOf(r)===Object.prototype)for(var i in r)n.set(i,r[i]);else{if("function"!=typeof r.keys||"function"!=typeof r.get)throw Error("Unknown input type for opt_headers: "+String(r));for(const e of r.keys())n.set(e,r.get(e))}r=Array.from(n.keys()).find((e=>"content-type"==e.toLowerCase())),i=Aa.FormData&&e instanceof Aa.FormData,!(0<=za(Rc,t))||r||i||n.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[e,t]of n)this.g.setRequestHeader(e,t);this.K&&(this.g.responseType=this.K),"withCredentials"in this.g&&this.g.withCredentials!==this.M&&(this.g.withCredentials=this.M);try{Mc(this),0<this.B&&((this.L=function(e){return Za&&"number"==typeof e.timeout&&void 0!==e.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=Ma(this.ua,this)):this.A=Yl(this.ua,this.B,this)),this.v=!0,this.g.send(e),this.v=!1}catch(e){Pc(this,e)}},Sa.ua=function(){void 0!==Ca&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,Ll(this,"timeout"),this.abort(8))},Sa.abort=function(e){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=e||7,Ll(this,"complete"),Ll(this,"abort"),Lc(this))},Sa.N=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),Lc(this,!0)),Cc.$.N.call(this)},Sa.La=function(){this.s||(this.G||this.v||this.l?Oc(this):this.kb())},Sa.kb=function(){Oc(this)},Sa.isActive=function(){return!!this.g},Sa.da=function(){try{return 2<Fc(this)?this.g.status:-1}catch(e){return-1}},Sa.ja=function(){try{return this.g?this.g.responseText:""}catch(e){return""}},Sa.Wa=function(e){if(this.g){var t=this.g.responseText;return e&&0==t.indexOf(e)&&(t=t.substring(e.length)),xc(t)}},Sa.Ia=function(){return this.m},Sa.Sa=function(){return"string"==typeof this.j?this.j:String(this.j)},(Sa=jc.prototype).ra=8,Sa.H=1,Sa.Na=function(e){if(this.m)if(this.m=null,1==this.H){if(!e){this.W=Math.floor(1e5*Math.random()),e=this.W++;const i=new ku(this,this.l,e);let s=this.s;if(this.U&&(s?(s=gl(s),vl(s,this.U)):s=this.U),null!==this.o||this.O||(i.I=s,s=null),this.P)e:{for(var t=0,n=0;n<this.j.length;n++){var r=this.j[n];if(void 0===(r="__data__"in r.map&&"string"==typeof(r=r.map.__data__)?r.length:void 0))break;if(4096<(t+=r)){t=n;break e}if(4096===t||n===this.j.length-1){t=n+1;break e}}t=1e3}else t=1e3;t=Qc(this,i,t),Wu(n=qu(this.I),"RID",e),Wu(n,"CVER",22),this.F&&Wu(n,"X-HTTP-Session-Id",this.F),Hc(this,n),s&&(this.O?t="headers="+encodeURIComponent(String(Vc(s)))+"&"+t:this.o&&zc(n,this.o,s)),pc(this.i,i),this.bb&&Wu(n,"TYPE","init"),this.P?(Wu(n,"$req",t),Wu(n,"SID","null"),i.aa=!0,Au(i,n,null)):Au(i,n,t),this.H=2}}else 3==this.H&&(e?Wc(this,e):0==this.j.length||hc(this.i)||Wc(this))},Sa.Ma=function(){if(this.u=null,Zc(this),this.ca&&!(this.M||null==this.g||0>=this.S)){var e=2*this.S;this.l.info("BP detection timer enabled: "+e),this.B=fu(Ma(this.jb,this),e)}},Sa.jb=function(){this.B&&(this.B=null,this.l.info("BP detection timeout reached."),this.l.info("Buffering proxy detected and switch to long-polling!"),this.G=!1,this.M=!0,hu(10),$c(this),Zc(this))},Sa.ib=function(){null!=this.v&&(this.v=null,$c(this),Jc(this),hu(19))},Sa.pb=function(e){e?(this.l.info("Successfully pinged google.com"),hu(2)):(this.l.info("Failed to ping google.com"),hu(1))},Sa.isActive=function(){return!!this.h&&this.h.isActive(this)},(Sa=ah.prototype).Ba=function(){},Sa.Aa=function(){},Sa.za=function(){},Sa.ya=function(){},Sa.isActive=function(){return!0},Sa.Va=function(){},lh.prototype.g=function(e,t){return new uh(e,t)},Ua(uh,Ol),uh.prototype.m=function(){this.g.h=this.j,this.A&&(this.g.J=!0);var e=this.g,t=this.l,n=this.h||void 0;hu(0),e.Y=t,e.na=n||{},e.G=e.aa,e.I=sh(e,null,e.Y),Gc(e)},uh.prototype.close=function(){qc(this.g)},uh.prototype.u=function(e){var t=this.g;if("string"==typeof e){var n={};n.__data__=e,e=n}else this.v&&((n={}).__data__=Fl(e),e=n);t.j.push(new class{constructor(e,t){this.g=e,this.map=t}}(t.fb++,e)),3==t.H&&Gc(t)},uh.prototype.N=function(){this.g.h=null,delete this.j,qc(this.g),delete this.g,uh.$.N.call(this)},Ua(ch,_u),Ua(hh,Eu),Ua(dh,ah),dh.prototype.Ba=function(){Ll(this.g,"a")},dh.prototype.Aa=function(e){Ll(this.g,new ch(e))},dh.prototype.za=function(e){Ll(this.g,new hh)},dh.prototype.ya=function(){Ll(this.g,"b")},Ua(fh,(function(){this.blockSize=-1})),fh.prototype.reset=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.i=this.h=0},fh.prototype.j=function(e,t){void 0===t&&(t=e.length);for(var n=t-this.blockSize,r=this.m,i=this.h,s=0;s<t;){if(0==i)for(;s<=n;)ph(this,e,s),s+=this.blockSize;if("string"==typeof e){for(;s<t;)if(r[i++]=e.charCodeAt(s++),i==this.blockSize){ph(this,r),i=0;break}}else for(;s<t;)if(r[i++]=e[s++],i==this.blockSize){ph(this,r),i=0;break}}this.h=i,this.i+=t},fh.prototype.l=function(){var e=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);e[0]=128;for(var t=1;t<e.length-8;++t)e[t]=0;var n=8*this.i;for(t=e.length-8;t<e.length;++t)e[t]=255&n,n/=256;for(this.j(e),e=Array(16),t=n=0;4>t;++t)for(var r=0;32>r;r+=8)e[n++]=this.g[t]>>>r&255;return e};var gh={};function yh(e){return-128<=e&&128>e?function(e,t){var n=gh;return Object.prototype.hasOwnProperty.call(n,e)?n[e]:n[e]=function(e){return new mh([0|e],0>e?-1:0)}(e)}(e):new mh([0|e],0>e?-1:0)}function vh(e){if(isNaN(e)||!isFinite(e))return bh;if(0>e)return Sh(vh(-e));for(var t=[],n=1,r=0;e>=n;r++)t[r]=e/n|0,n*=wh;return new mh(t,0)}var wh=4294967296,bh=yh(0),_h=yh(1),Eh=yh(16777216);function Ih(e){if(0!=e.h)return!1;for(var t=0;t<e.g.length;t++)if(0!=e.g[t])return!1;return!0}function kh(e){return-1==e.h}function Sh(e){for(var t=e.g.length,n=[],r=0;r<t;r++)n[r]=~e.g[r];return new mh(n,~e.h).add(_h)}function Th(e,t){return e.add(Sh(t))}function xh(e,t){for(;(65535&e[t])!=e[t];)e[t+1]+=e[t]>>>16,e[t]&=65535,t++}function Ch(e,t){this.g=e,this.h=t}function Ah(e,t){if(Ih(t))throw Error("division by zero");if(Ih(e))return new Ch(bh,bh);if(kh(e))return t=Ah(Sh(e),t),new Ch(Sh(t.g),Sh(t.h));if(kh(t))return t=Ah(e,Sh(t)),new Ch(Sh(t.g),t.h);if(30<e.g.length){if(kh(e)||kh(t))throw Error("slowDivide_ only works with positive integers.");for(var n=_h,r=t;0>=r.X(e);)n=Nh(n),r=Nh(r);var i=Rh(n,1),s=Rh(r,1);for(r=Rh(r,2),n=Rh(n,2);!Ih(r);){var o=s.add(r);0>=o.X(e)&&(i=i.add(n),s=o),r=Rh(r,1),n=Rh(n,1)}return t=Th(e,i.R(t)),new Ch(i,t)}for(i=bh;0<=e.X(t);){for(n=Math.max(1,Math.floor(e.ea()/t.ea())),r=48>=(r=Math.ceil(Math.log(n)/Math.LN2))?1:Math.pow(2,r-48),o=(s=vh(n)).R(t);kh(o)||0<o.X(e);)o=(s=vh(n-=r)).R(t);Ih(s)&&(s=_h),i=i.add(s),e=Th(e,o)}return new Ch(i,e)}function Nh(e){for(var t=e.g.length+1,n=[],r=0;r<t;r++)n[r]=e.D(r)<<1|e.D(r-1)>>>31;return new mh(n,e.h)}function Rh(e,t){var n=t>>5;t%=32;for(var r=e.g.length-n,i=[],s=0;s<r;s++)i[s]=0<t?e.D(s+n)>>>t|e.D(s+n+1)<<32-t:e.D(s+n);return new mh(i,e.h)}(Sa=mh.prototype).ea=function(){if(kh(this))return-Sh(this).ea();for(var e=0,t=1,n=0;n<this.g.length;n++){var r=this.D(n);e+=(0<=r?r:wh+r)*t,t*=wh}return e},Sa.toString=function(e){if(2>(e=e||10)||36<e)throw Error("radix out of range: "+e);if(Ih(this))return"0";if(kh(this))return"-"+Sh(this).toString(e);for(var t=vh(Math.pow(e,6)),n=this,r="";;){var i=Ah(n,t).g,s=((0<(n=Th(n,i.R(t))).g.length?n.g[0]:n.h)>>>0).toString(e);if(Ih(n=i))return s+r;for(;6>s.length;)s="0"+s;r=s+r}},Sa.D=function(e){return 0>e?0:e<this.g.length?this.g[e]:this.h},Sa.X=function(e){return kh(e=Th(this,e))?-1:Ih(e)?0:1},Sa.abs=function(){return kh(this)?Sh(this):this},Sa.add=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],r=0,i=0;i<=t;i++){var s=r+(65535&this.D(i))+(65535&e.D(i)),o=(s>>>16)+(this.D(i)>>>16)+(e.D(i)>>>16);r=o>>>16,s&=65535,o&=65535,n[i]=o<<16|s}return new mh(n,-2147483648&n[n.length-1]?-1:0)},Sa.R=function(e){if(Ih(this)||Ih(e))return bh;if(kh(this))return kh(e)?Sh(this).R(Sh(e)):Sh(Sh(this).R(e));if(kh(e))return Sh(this.R(Sh(e)));if(0>this.X(Eh)&&0>e.X(Eh))return vh(this.ea()*e.ea());for(var t=this.g.length+e.g.length,n=[],r=0;r<2*t;r++)n[r]=0;for(r=0;r<this.g.length;r++)for(var i=0;i<e.g.length;i++){var s=this.D(r)>>>16,o=65535&this.D(r),a=e.D(i)>>>16,l=65535&e.D(i);n[2*r+2*i]+=o*l,xh(n,2*r+2*i),n[2*r+2*i+1]+=s*l,xh(n,2*r+2*i+1),n[2*r+2*i+1]+=o*a,xh(n,2*r+2*i+1),n[2*r+2*i+2]+=s*a,xh(n,2*r+2*i+2)}for(r=0;r<t;r++)n[r]=n[2*r+1]<<16|n[2*r];for(r=t;r<2*t;r++)n[r]=0;return new mh(n,0)},Sa.gb=function(e){return Ah(this,e).h},Sa.and=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],r=0;r<t;r++)n[r]=this.D(r)&e.D(r);return new mh(n,this.h&e.h)},Sa.or=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],r=0;r<t;r++)n[r]=this.D(r)|e.D(r);return new mh(n,this.h|e.h)},Sa.xor=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],r=0;r<t;r++)n[r]=this.D(r)^e.D(r);return new mh(n,this.h^e.h)},lh.prototype.createWebChannel=lh.prototype.g,uh.prototype.send=uh.prototype.u,uh.prototype.open=uh.prototype.m,uh.prototype.close=uh.prototype.close,pu.NO_ERROR=0,pu.TIMEOUT=8,pu.HTTP_ERROR=6,mu.COMPLETE="complete",vu.EventType=bu,bu.OPEN="a",bu.CLOSE="b",bu.ERROR="c",bu.MESSAGE="d",Ol.prototype.listen=Ol.prototype.O,Cc.prototype.listenOnce=Cc.prototype.P,Cc.prototype.getLastError=Cc.prototype.Sa,Cc.prototype.getLastErrorCode=Cc.prototype.Ia,Cc.prototype.getStatus=Cc.prototype.da,Cc.prototype.getResponseJson=Cc.prototype.Wa,Cc.prototype.getResponseText=Cc.prototype.ja,Cc.prototype.send=Cc.prototype.ha,Cc.prototype.setWithCredentials=Cc.prototype.Oa,fh.prototype.digest=fh.prototype.l,fh.prototype.reset=fh.prototype.reset,fh.prototype.update=fh.prototype.j,mh.prototype.add=mh.prototype.add,mh.prototype.multiply=mh.prototype.R,mh.prototype.modulo=mh.prototype.gb,mh.prototype.compare=mh.prototype.X,mh.prototype.toNumber=mh.prototype.ea,mh.prototype.toString=mh.prototype.toString,mh.prototype.getBits=mh.prototype.D,mh.fromNumber=vh,mh.fromString=function e(t,n){if(0==t.length)throw Error("number format error: empty string");if(2>(n=n||10)||36<n)throw Error("radix out of range: "+n);if("-"==t.charAt(0))return Sh(e(t.substring(1),n));if(0<=t.indexOf("-"))throw Error('number format error: interior "-" character');for(var r=vh(Math.pow(n,8)),i=bh,s=0;s<t.length;s+=8){var o=Math.min(8,t.length-s),a=parseInt(t.substring(s,s+o),n);8>o?(o=vh(Math.pow(n,o)),i=i.R(o).add(vh(a))):i=(i=i.R(r)).add(vh(a))}return i};var Ph=xa.createWebChannelTransport=function(){return new lh},Dh=xa.getStatEventTarget=function(){return au()},Oh=xa.ErrorCode=pu,Lh=xa.EventType=mu,Mh=xa.Event=su,Fh=xa.Stat={xb:0,Ab:1,Bb:2,Ub:3,Zb:4,Wb:5,Xb:6,Vb:7,Tb:8,Yb:9,PROXY:10,NOPROXY:11,Rb:12,Nb:13,Ob:14,Mb:15,Pb:16,Qb:17,tb:18,sb:19,ub:20},Uh=xa.FetchXmlHttpFactory=_c,Vh=xa.WebChannel=vu,zh=xa.XhrIo=Cc,Bh=xa.Md5=fh,jh=xa.Integer=mh;const qh="@firebase/firestore";class $h{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}$h.UNAUTHENTICATED=new $h(null),$h.GOOGLE_CREDENTIALS=new $h("google-credentials-uid"),$h.FIRST_PARTY=new $h("first-party-uid"),$h.MOCK_USER=new $h("mock-user");let Kh="10.1.0";const Gh=new Ht("@firebase/firestore");function Wh(){return Gh.logLevel}function Hh(e,...t){if(Gh.logLevel<=qt.DEBUG){const n=t.map(Jh);Gh.debug(`Firestore (${Kh}): ${e}`,...n)}}function Qh(e,...t){if(Gh.logLevel<=qt.ERROR){const n=t.map(Jh);Gh.error(`Firestore (${Kh}): ${e}`,...n)}}function Yh(e,...t){if(Gh.logLevel<=qt.WARN){const n=t.map(Jh);Gh.warn(`Firestore (${Kh}): ${e}`,...n)}}function Jh(e){if("string"==typeof e)return e;try{return function(e){return JSON.stringify(e)}(e)}catch(t){return e}}function Xh(e="Unexpected state"){const t=`FIRESTORE (${Kh}) INTERNAL ASSERTION FAILED: `+e;throw Qh(t),new Error(t)}function Zh(e,t){e||Xh()}function ed(e,t){return e}const td={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class nd extends St{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class rd{constructor(){this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}}class id{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class sd{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable((()=>t($h.UNAUTHENTICATED)))}shutdown(){}}class od{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable((()=>t(this.token.user)))}shutdown(){this.changeListener=null}}class ad{constructor(e){this.t=e,this.currentUser=$h.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){let n=this.i;const r=e=>this.i!==n?(n=this.i,t(e)):Promise.resolve();let i=new rd;this.o=()=>{this.i++,this.currentUser=this.u(),i.resolve(),i=new rd,e.enqueueRetryable((()=>r(this.currentUser)))};const s=()=>{const t=i;e.enqueueRetryable((async()=>{await t.promise,await r(this.currentUser)}))},o=e=>{Hh("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=e,this.auth.addAuthTokenListener(this.o),s()};this.t.onInit((e=>o(e))),setTimeout((()=>{if(!this.auth){const e=this.t.getImmediate({optional:!0});e?o(e):(Hh("FirebaseAuthCredentialsProvider","Auth not yet detected"),i.resolve(),i=new rd)}}),0),s()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then((t=>this.i!==e?(Hh("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):t?(Zh("string"==typeof t.accessToken),new id(t.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return Zh(null===e||"string"==typeof e),new $h(e)}}class ld{constructor(e,t,n){this.l=e,this.h=t,this.P=n,this.type="FirstParty",this.user=$h.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class ud{constructor(e,t,n){this.l=e,this.h=t,this.P=n}getToken(){return Promise.resolve(new ld(this.l,this.h,this.P))}start(e,t){e.enqueueRetryable((()=>t($h.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class cd{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class hd{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,t){const n=e=>{null!=e.error&&Hh("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${e.error.message}`);const n=e.token!==this.R;return this.R=e.token,Hh("FirebaseAppCheckTokenProvider",`Received ${n?"new":"existing"} token.`),n?t(e.token):Promise.resolve()};this.o=t=>{e.enqueueRetryable((()=>n(t)))};const r=e=>{Hh("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=e,this.appCheck.addTokenListener(this.o)};this.A.onInit((e=>r(e))),setTimeout((()=>{if(!this.appCheck){const e=this.A.getImmediate({optional:!0});e?r(e):Hh("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((e=>e?(Zh("string"==typeof e.token),this.R=e.token,new cd(e.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}function dd(e){const t="undefined"!=typeof self&&(self.crypto||self.msCrypto),n=new Uint8Array(e);if(t&&"function"==typeof t.getRandomValues)t.getRandomValues(n);else for(let t=0;t<e;t++)n[t]=Math.floor(256*Math.random());return n}class fd{static V(){const e=62*Math.floor(256/62);let t="";for(;t.length<20;){const n=dd(40);for(let r=0;r<n.length;++r)t.length<20&&n[r]<e&&(t+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".charAt(n[r]%62))}return t}}function pd(e,t){return e<t?-1:e>t?1:0}function md(e,t,n){return e.length===t.length&&e.every(((e,r)=>n(e,t[r])))}function gd(e){return e+"\0"}class yd{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new nd(td.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new nd(td.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new nd(td.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new nd(td.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return yd.fromMillis(Date.now())}static fromDate(e){return yd.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),n=Math.floor(1e6*(e-1e3*t));return new yd(t,n)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?pd(this.nanoseconds,e.nanoseconds):pd(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class vd{constructor(e){this.timestamp=e}static fromTimestamp(e){return new vd(e)}static min(){return new vd(new yd(0,0))}static max(){return new vd(new yd(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}class wd{constructor(e,t,n){void 0===t?t=0:t>e.length&&Xh(),void 0===n?n=e.length-t:n>e.length-t&&Xh(),this.segments=e,this.offset=t,this.len=n}get length(){return this.len}isEqual(e){return 0===wd.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof wd?e.forEach((e=>{t.push(e)})):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=void 0===e?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,n=this.limit();t<n;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const n=Math.min(e.length,t.length);for(let r=0;r<n;r++){const n=e.get(r),i=t.get(r);if(n<i)return-1;if(n>i)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class bd extends wd{construct(e,t,n){return new bd(e,t,n)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...e){const t=[];for(const n of e){if(n.indexOf("//")>=0)throw new nd(td.INVALID_ARGUMENT,`Invalid segment (${n}). Paths must not contain // in them.`);t.push(...n.split("/").filter((e=>e.length>0)))}return new bd(t)}static emptyPath(){return new bd([])}}const _d=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Ed extends wd{construct(e,t,n){return new Ed(e,t,n)}static isValidIdentifier(e){return _d.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Ed.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new Ed(["__name__"])}static fromServerFormat(e){const t=[];let n="",r=0;const i=()=>{if(0===n.length)throw new nd(td.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(n),n=""};let s=!1;for(;r<e.length;){const t=e[r];if("\\"===t){if(r+1===e.length)throw new nd(td.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const t=e[r+1];if("\\"!==t&&"."!==t&&"`"!==t)throw new nd(td.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);n+=t,r+=2}else"`"===t?(s=!s,r++):"."!==t||s?(n+=t,r++):(i(),r++)}if(i(),s)throw new nd(td.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Ed(t)}static emptyPath(){return new Ed([])}}class Id{constructor(e){this.path=e}static fromPath(e){return new Id(bd.fromString(e))}static fromName(e){return new Id(bd.fromString(e).popFirst(5))}static empty(){return new Id(bd.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===bd.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return bd.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Id(new bd(e.slice()))}}class kd{constructor(e,t,n,r){this.indexId=e,this.collectionGroup=t,this.fields=n,this.indexState=r}}function Sd(e){return e.fields.find((e=>2===e.kind))}function Td(e){return e.fields.filter((e=>2!==e.kind))}kd.UNKNOWN_ID=-1;class xd{constructor(e,t){this.fieldPath=e,this.kind=t}}class Cd{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new Cd(0,Rd.min())}}function Ad(e,t){const n=e.toTimestamp().seconds,r=e.toTimestamp().nanoseconds+1,i=vd.fromTimestamp(1e9===r?new yd(n+1,0):new yd(n,r));return new Rd(i,Id.empty(),t)}function Nd(e){return new Rd(e.readTime,e.key,-1)}class Rd{constructor(e,t,n){this.readTime=e,this.documentKey=t,this.largestBatchId=n}static min(){return new Rd(vd.min(),Id.empty(),-1)}static max(){return new Rd(vd.max(),Id.empty(),-1)}}function Pd(e,t){let n=e.readTime.compareTo(t.readTime);return 0!==n?n:(n=Id.comparator(e.documentKey,t.documentKey),0!==n?n:pd(e.largestBatchId,t.largestBatchId))}const Dd="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class Od{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}async function Ld(e){if(e.code!==td.FAILED_PRECONDITION||e.message!==Dd)throw e;Hh("LocalStore","Unexpectedly lost primary lease")}class Md{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((e=>{this.isDone=!0,this.result=e,this.nextCallback&&this.nextCallback(e)}),(e=>{this.isDone=!0,this.error=e,this.catchCallback&&this.catchCallback(e)}))}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&Xh(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new Md(((n,r)=>{this.nextCallback=t=>{this.wrapSuccess(e,t).next(n,r)},this.catchCallback=e=>{this.wrapFailure(t,e).next(n,r)}}))}toPromise(){return new Promise(((e,t)=>{this.next(e,t)}))}wrapUserFunction(e){try{const t=e();return t instanceof Md?t:Md.resolve(t)}catch(e){return Md.reject(e)}}wrapSuccess(e,t){return e?this.wrapUserFunction((()=>e(t))):Md.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction((()=>e(t))):Md.reject(t)}static resolve(e){return new Md(((t,n)=>{t(e)}))}static reject(e){return new Md(((t,n)=>{n(e)}))}static waitFor(e){return new Md(((t,n)=>{let r=0,i=0,s=!1;e.forEach((e=>{++r,e.next((()=>{++i,s&&i===r&&t()}),(e=>n(e)))})),s=!0,i===r&&t()}))}static or(e){let t=Md.resolve(!1);for(const n of e)t=t.next((e=>e?Md.resolve(e):n()));return t}static forEach(e,t){const n=[];return e.forEach(((e,r)=>{n.push(t.call(this,e,r))})),this.waitFor(n)}static mapArray(e,t){return new Md(((n,r)=>{const i=e.length,s=new Array(i);let o=0;for(let a=0;a<i;a++){const l=a;t(e[l]).next((e=>{s[l]=e,++o,o===i&&n(s)}),(e=>r(e)))}}))}static doWhile(e,t){return new Md(((n,r)=>{const i=()=>{!0===e()?t().next((()=>{i()}),r):n()};i()}))}}class Fd{constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.m=new rd,this.transaction.oncomplete=()=>{this.m.resolve()},this.transaction.onabort=()=>{t.error?this.m.reject(new zd(e,t.error)):this.m.resolve()},this.transaction.onerror=t=>{const n=Kd(t.target.error);this.m.reject(new zd(e,n))}}static open(e,t,n,r){try{return new Fd(t,e.transaction(r,n))}catch(e){throw new zd(t,e)}}get g(){return this.m.promise}abort(e){e&&this.m.reject(e),this.aborted||(Hh("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}p(){const e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}store(e){const t=this.transaction.objectStore(e);return new jd(t)}}class Ud{constructor(e,t,n){this.name=e,this.version=t,this.S=n,12.2===Ud.D(wt())&&Qh("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return Hh("SimpleDb","Removing database:",e),qd(window.indexedDB.deleteDatabase(e)).toPromise()}static v(){if(!kt())return!1;if(Ud.C())return!0;const e=wt(),t=Ud.D(e),n=0<t&&t<10,r=Ud.F(e),i=0<r&&r<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||n||i)}static C(){var e;return"undefined"!=typeof process&&"YES"===(null===(e=process.env)||void 0===e?void 0:e.M)}static O(e,t){return e.store(t)}static D(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),n=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(n)}static F(e){const t=e.match(/Android ([\d.]+)/i),n=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(n)}async N(e){return this.db||(Hh("SimpleDb","Opening database:",this.name),this.db=await new Promise(((t,n)=>{const r=indexedDB.open(this.name,this.version);r.onsuccess=e=>{const n=e.target.result;t(n)},r.onblocked=()=>{n(new zd(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},r.onerror=t=>{const r=t.target.error;"VersionError"===r.name?n(new nd(td.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):"InvalidStateError"===r.name?n(new nd(td.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+r)):n(new zd(e,r))},r.onupgradeneeded=e=>{Hh("SimpleDb",'Database "'+this.name+'" requires upgrade from version:',e.oldVersion);const t=e.target.result;this.S.B(t,r.transaction,e.oldVersion,this.version).next((()=>{Hh("SimpleDb","Database upgrade to version "+this.version+" complete")}))}}))),this.L&&(this.db.onversionchange=e=>this.L(e)),this.db}k(e){this.L=e,this.db&&(this.db.onversionchange=t=>e(t))}async runTransaction(e,t,n,r){const i="readonly"===t;let s=0;for(;;){++s;try{this.db=await this.N(e);const t=Fd.open(this.db,e,i?"readonly":"readwrite",n),s=r(t).next((e=>(t.p(),e))).catch((e=>(t.abort(e),Md.reject(e)))).toPromise();return s.catch((()=>{})),await t.g,s}catch(e){const t=e,n="FirebaseError"!==t.name&&s<3;if(Hh("SimpleDb","Transaction failed with error:",t.message,"Retrying:",n),this.close(),!n)return Promise.reject(t)}}}close(){this.db&&this.db.close(),this.db=void 0}}class Vd{constructor(e){this.q=e,this.K=!1,this.$=null}get isDone(){return this.K}get U(){return this.$}set cursor(e){this.q=e}done(){this.K=!0}W(e){this.$=e}delete(){return qd(this.q.delete())}}class zd extends nd{constructor(e,t){super(td.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}}function Bd(e){return"IndexedDbTransactionError"===e.name}class jd{constructor(e){this.store=e}put(e,t){let n;return void 0!==t?(Hh("SimpleDb","PUT",this.store.name,e,t),n=this.store.put(t,e)):(Hh("SimpleDb","PUT",this.store.name,"<auto-key>",e),n=this.store.put(e)),qd(n)}add(e){return Hh("SimpleDb","ADD",this.store.name,e,e),qd(this.store.add(e))}get(e){return qd(this.store.get(e)).next((t=>(void 0===t&&(t=null),Hh("SimpleDb","GET",this.store.name,e,t),t)))}delete(e){return Hh("SimpleDb","DELETE",this.store.name,e),qd(this.store.delete(e))}count(){return Hh("SimpleDb","COUNT",this.store.name),qd(this.store.count())}G(e,t){const n=this.options(e,t);if(n.index||"function"!=typeof this.store.getAll){const e=this.cursor(n),t=[];return this.j(e,((e,n)=>{t.push(n)})).next((()=>t))}{const e=this.store.getAll(n.range);return new Md(((t,n)=>{e.onerror=e=>{n(e.target.error)},e.onsuccess=e=>{t(e.target.result)}}))}}H(e,t){const n=this.store.getAll(e,null===t?void 0:t);return new Md(((e,t)=>{n.onerror=e=>{t(e.target.error)},n.onsuccess=t=>{e(t.target.result)}}))}J(e,t){Hh("SimpleDb","DELETE ALL",this.store.name);const n=this.options(e,t);n.Y=!1;const r=this.cursor(n);return this.j(r,((e,t,n)=>n.delete()))}Z(e,t){let n;t?n=e:(n={},t=e);const r=this.cursor(n);return this.j(r,t)}X(e){const t=this.cursor({});return new Md(((n,r)=>{t.onerror=e=>{const t=Kd(e.target.error);r(t)},t.onsuccess=t=>{const r=t.target.result;r?e(r.primaryKey,r.value).next((e=>{e?r.continue():n()})):n()}}))}j(e,t){const n=[];return new Md(((r,i)=>{e.onerror=e=>{i(e.target.error)},e.onsuccess=e=>{const i=e.target.result;if(!i)return void r();const s=new Vd(i),o=t(i.primaryKey,i.value,s);if(o instanceof Md){const e=o.catch((e=>(s.done(),Md.reject(e))));n.push(e)}s.isDone?r():null===s.U?i.continue():i.continue(s.U)}})).next((()=>Md.waitFor(n)))}options(e,t){let n;return void 0!==e&&("string"==typeof e?n=e:t=e),{index:n,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const n=this.store.index(e.index);return e.Y?n.openKeyCursor(e.range,t):n.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function qd(e){return new Md(((t,n)=>{e.onsuccess=e=>{const n=e.target.result;t(n)},e.onerror=e=>{const t=Kd(e.target.error);n(t)}}))}let $d=!1;function Kd(e){const t=Ud.D(wt());if(t>=12.2&&t<13){const t="An internal error was encountered in the Indexed Database server";if(e.message.indexOf(t)>=0){const e=new nd("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return $d||($d=!0,setTimeout((()=>{throw e}),0)),e}}return e}class Gd{constructor(e,t){this.asyncQueue=e,this.ee=t,this.task=null}start(){this.te(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return null!==this.task}te(e){Hh("IndexBackiller",`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,(async()=>{this.task=null;try{Hh("IndexBackiller",`Documents written: ${await this.ee.ne()}`)}catch(e){Bd(e)?Hh("IndexBackiller","Ignoring IndexedDB error during index backfill: ",e):await Ld(e)}await this.te(6e4)}))}}class Wd{constructor(e,t){this.localStore=e,this.persistence=t}async ne(e=50){return this.persistence.runTransaction("Backfill Indexes","readwrite-primary",(t=>this.re(t,e)))}re(e,t){const n=new Set;let r=t,i=!0;return Md.doWhile((()=>!0===i&&r>0),(()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next((t=>{if(null!==t&&!n.has(t))return Hh("IndexBackiller",`Processing collection: ${t}`),this.ie(e,t,r).next((e=>{r-=e,n.add(t)}));i=!1})))).next((()=>t-r))}ie(e,t,n){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next((r=>this.localStore.localDocuments.getNextDocuments(e,t,r,n).next((n=>{const i=n.changes;return this.localStore.indexManager.updateIndexEntries(e,i).next((()=>this.se(r,n))).next((n=>(Hh("IndexBackiller",`Updating offset: ${n}`),this.localStore.indexManager.updateCollectionGroup(e,t,n)))).next((()=>i.size))}))))}se(e,t){let n=e;return t.changes.forEach(((e,t)=>{const r=Nd(t);Pd(r,n)>0&&(n=r)})),new Rd(n.readTime,n.documentKey,Math.max(t.batchId,e.largestBatchId))}}class Hd{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=e=>this.oe(e),this._e=e=>t.writeSequenceNumber(e))}oe(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this._e&&this._e(e),e}}function Qd(e){return null==e}function Yd(e){return 0===e&&1/e==-1/0}function Jd(e){return"number"==typeof e&&Number.isInteger(e)&&!Yd(e)&&e<=Number.MAX_SAFE_INTEGER&&e>=Number.MIN_SAFE_INTEGER}function Xd(e){let t="";for(let n=0;n<e.length;n++)t.length>0&&(t=ef(t)),t=Zd(e.get(n),t);return ef(t)}function Zd(e,t){let n=t;const r=e.length;for(let t=0;t<r;t++){const r=e.charAt(t);switch(r){case"\0":n+="";break;case"":n+="";break;default:n+=r}}return n}function ef(e){return e+""}function tf(e){const t=e.length;if(Zh(t>=2),2===t)return Zh(""===e.charAt(0)&&""===e.charAt(1)),bd.emptyPath();const n=t-2,r=[];let i="";for(let s=0;s<t;){const t=e.indexOf("",s);switch((t<0||t>n)&&Xh(),e.charAt(t+1)){case"":const n=e.substring(s,t);let o;0===i.length?o=n:(i+=n,o=i,i=""),r.push(o);break;case"":i+=e.substring(s,t),i+="\0";break;case"":i+=e.substring(s,t+1);break;default:Xh()}s=t+2}return new bd(r)}Hd.ae=-1;const nf=["userId","batchId"];function rf(e,t){return[e,Xd(t)]}function sf(e,t,n){return[e,Xd(t),n]}const of={},af=["prefixPath","collectionGroup","readTime","documentId"],lf=["prefixPath","collectionGroup","documentId"],uf=["collectionGroup","readTime","prefixPath","documentId"],cf=["canonicalId","targetId"],hf=["targetId","path"],df=["path","targetId"],ff=["collectionId","parent"],pf=["indexId","uid"],mf=["uid","sequenceNumber"],gf=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],yf=["indexId","uid","orderedDocumentKey"],vf=["userId","collectionPath","documentId"],wf=["userId","collectionPath","largestBatchId"],bf=["userId","collectionGroup","largestBatchId"],_f=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],Ef=[..._f,"documentOverlays"],If=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],kf=If,Sf=[...kf,"indexConfiguration","indexState","indexEntries"];class Tf extends Od{constructor(e,t){super(),this.ue=e,this.currentSequenceNumber=t}}function xf(e,t){const n=ed(e);return Ud.O(n.ue,t)}function Cf(e){let t=0;for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t++;return t}function Af(e,t){for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t(n,e[n])}function Nf(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}class Rf{constructor(e,t){this.comparator=e,this.root=t||Df.EMPTY}insert(e,t){return new Rf(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Df.BLACK,null,null))}remove(e){return new Rf(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Df.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const n=this.comparator(e,t.key);if(0===n)return t.value;n<0?t=t.left:n>0&&(t=t.right)}return null}indexOf(e){let t=0,n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(0===r)return t+n.left.size;r<0?n=n.left:(t+=n.left.size+1,n=n.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((t,n)=>(e(t,n),!1)))}toString(){const e=[];return this.inorderTraversal(((t,n)=>(e.push(`${t}:${n}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Pf(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Pf(this.root,e,this.comparator,!1)}getReverseIterator(){return new Pf(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Pf(this.root,e,this.comparator,!0)}}class Pf{constructor(e,t,n,r){this.isReverse=r,this.nodeStack=[];let i=1;for(;!e.isEmpty();)if(i=t?n(e.key,t):1,t&&r&&(i*=-1),i<0)e=this.isReverse?e.left:e.right;else{if(0===i){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Df{constructor(e,t,n,r,i){this.key=e,this.value=t,this.color=null!=n?n:Df.RED,this.left=null!=r?r:Df.EMPTY,this.right=null!=i?i:Df.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,n,r,i){return new Df(null!=e?e:this.key,null!=t?t:this.value,null!=n?n:this.color,null!=r?r:this.left,null!=i?i:this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,n){let r=this;const i=n(e,r.key);return r=i<0?r.copy(null,null,null,r.left.insert(e,t,n),null):0===i?r.copy(null,t,null,null,null):r.copy(null,null,null,null,r.right.insert(e,t,n)),r.fixUp()}removeMin(){if(this.left.isEmpty())return Df.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let n,r=this;if(t(e,r.key)<0)r.left.isEmpty()||r.left.isRed()||r.left.left.isRed()||(r=r.moveRedLeft()),r=r.copy(null,null,null,r.left.remove(e,t),null);else{if(r.left.isRed()&&(r=r.rotateRight()),r.right.isEmpty()||r.right.isRed()||r.right.left.isRed()||(r=r.moveRedRight()),0===t(e,r.key)){if(r.right.isEmpty())return Df.EMPTY;n=r.right.min(),r=r.copy(n.key,n.value,null,null,r.right.removeMin())}r=r.copy(null,null,null,null,r.right.remove(e,t))}return r.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Df.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Df.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Xh();if(this.right.isRed())throw Xh();const e=this.left.check();if(e!==this.right.check())throw Xh();return e+(this.isRed()?0:1)}}Df.EMPTY=null,Df.RED=!0,Df.BLACK=!1,Df.EMPTY=new class{constructor(){this.size=0}get key(){throw Xh()}get value(){throw Xh()}get color(){throw Xh()}get left(){throw Xh()}get right(){throw Xh()}copy(e,t,n,r,i){return this}insert(e,t,n){return new Df(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class Of{constructor(e){this.comparator=e,this.data=new Rf(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((t,n)=>(e(t),!1)))}forEachInRange(e,t){const n=this.data.getIteratorFrom(e[0]);for(;n.hasNext();){const r=n.getNext();if(this.comparator(r.key,e[1])>=0)return;t(r.key)}}forEachWhile(e,t){let n;for(n=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();n.hasNext();)if(!e(n.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new Lf(this.data.getIterator())}getIteratorFrom(e){return new Lf(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach((e=>{t=t.add(e)})),t}isEqual(e){if(!(e instanceof Of))return!1;if(this.size!==e.size)return!1;const t=this.data.getIterator(),n=e.data.getIterator();for(;t.hasNext();){const e=t.getNext().key,r=n.getNext().key;if(0!==this.comparator(e,r))return!1}return!0}toArray(){const e=[];return this.forEach((t=>{e.push(t)})),e}toString(){const e=[];return this.forEach((t=>e.push(t))),"SortedSet("+e.toString()+")"}copy(e){const t=new Of(this.comparator);return t.data=e,t}}class Lf{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function Mf(e){return e.hasNext()?e.getNext():void 0}class Ff{constructor(e){this.fields=e,e.sort(Ed.comparator)}static empty(){return new Ff([])}unionWith(e){let t=new Of(Ed.comparator);for(const e of this.fields)t=t.add(e);for(const n of e)t=t.add(n);return new Ff(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return md(this.fields,e.fields,((e,t)=>e.isEqual(t)))}}class Uf extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class Vf{constructor(e){this.binaryString=e}static fromBase64String(e){const t=function(e){try{return atob(e)}catch(e){throw"undefined"!=typeof DOMException&&e instanceof DOMException?new Uf("Invalid base64 string: "+e):e}}(e);return new Vf(t)}static fromUint8Array(e){const t=function(e){let t="";for(let n=0;n<e.length;++n)t+=String.fromCharCode(e[n]);return t}(e);return new Vf(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return e=this.binaryString,btoa(e);var e}toUint8Array(){return function(e){const t=new Uint8Array(e.length);for(let n=0;n<e.length;n++)t[n]=e.charCodeAt(n);return t}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return pd(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Vf.EMPTY_BYTE_STRING=new Vf("");const zf=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Bf(e){if(Zh(!!e),"string"==typeof e){let t=0;const n=zf.exec(e);if(Zh(!!n),n[1]){let e=n[1];e=(e+"000000000").substr(0,9),t=Number(e)}const r=new Date(e);return{seconds:Math.floor(r.getTime()/1e3),nanos:t}}return{seconds:jf(e.seconds),nanos:jf(e.nanos)}}function jf(e){return"number"==typeof e?e:"string"==typeof e?Number(e):0}function qf(e){return"string"==typeof e?Vf.fromBase64String(e):Vf.fromUint8Array(e)}function $f(e){var t,n;return"server_timestamp"===(null===(n=((null===(t=null==e?void 0:e.mapValue)||void 0===t?void 0:t.fields)||{}).__type__)||void 0===n?void 0:n.stringValue)}function Kf(e){const t=e.mapValue.fields.__previous_value__;return $f(t)?Kf(t):t}function Gf(e){const t=Bf(e.mapValue.fields.__local_write_time__.timestampValue);return new yd(t.seconds,t.nanos)}class Wf{constructor(e,t,n,r,i,s,o,a,l){this.databaseId=e,this.appId=t,this.persistenceKey=n,this.host=r,this.ssl=i,this.forceLongPolling=s,this.autoDetectLongPolling=o,this.longPollingOptions=a,this.useFetchStreams=l}}class Hf{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new Hf("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof Hf&&e.projectId===this.projectId&&e.database===this.database}}const Qf={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},Yf={nullValue:"NULL_VALUE"};function Jf(e){return"nullValue"in e?0:"booleanValue"in e?1:"integerValue"in e||"doubleValue"in e?2:"timestampValue"in e?3:"stringValue"in e?5:"bytesValue"in e?6:"referenceValue"in e?7:"geoPointValue"in e?8:"arrayValue"in e?9:"mapValue"in e?$f(e)?4:hp(e)?9007199254740991:10:Xh()}function Xf(e,t){if(e===t)return!0;const n=Jf(e);if(n!==Jf(t))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return e.booleanValue===t.booleanValue;case 4:return Gf(e).isEqual(Gf(t));case 3:return function(e,t){if("string"==typeof e.timestampValue&&"string"==typeof t.timestampValue&&e.timestampValue.length===t.timestampValue.length)return e.timestampValue===t.timestampValue;const n=Bf(e.timestampValue),r=Bf(t.timestampValue);return n.seconds===r.seconds&&n.nanos===r.nanos}(e,t);case 5:return e.stringValue===t.stringValue;case 6:return function(e,t){return qf(e.bytesValue).isEqual(qf(t.bytesValue))}(e,t);case 7:return e.referenceValue===t.referenceValue;case 8:return function(e,t){return jf(e.geoPointValue.latitude)===jf(t.geoPointValue.latitude)&&jf(e.geoPointValue.longitude)===jf(t.geoPointValue.longitude)}(e,t);case 2:return function(e,t){if("integerValue"in e&&"integerValue"in t)return jf(e.integerValue)===jf(t.integerValue);if("doubleValue"in e&&"doubleValue"in t){const n=jf(e.doubleValue),r=jf(t.doubleValue);return n===r?Yd(n)===Yd(r):isNaN(n)&&isNaN(r)}return!1}(e,t);case 9:return md(e.arrayValue.values||[],t.arrayValue.values||[],Xf);case 10:return function(e,t){const n=e.mapValue.fields||{},r=t.mapValue.fields||{};if(Cf(n)!==Cf(r))return!1;for(const e in n)if(n.hasOwnProperty(e)&&(void 0===r[e]||!Xf(n[e],r[e])))return!1;return!0}(e,t);default:return Xh()}}function Zf(e,t){return void 0!==(e.values||[]).find((e=>Xf(e,t)))}function ep(e,t){if(e===t)return 0;const n=Jf(e),r=Jf(t);if(n!==r)return pd(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return pd(e.booleanValue,t.booleanValue);case 2:return function(e,t){const n=jf(e.integerValue||e.doubleValue),r=jf(t.integerValue||t.doubleValue);return n<r?-1:n>r?1:n===r?0:isNaN(n)?isNaN(r)?0:-1:1}(e,t);case 3:return tp(e.timestampValue,t.timestampValue);case 4:return tp(Gf(e),Gf(t));case 5:return pd(e.stringValue,t.stringValue);case 6:return function(e,t){const n=qf(e),r=qf(t);return n.compareTo(r)}(e.bytesValue,t.bytesValue);case 7:return function(e,t){const n=e.split("/"),r=t.split("/");for(let e=0;e<n.length&&e<r.length;e++){const t=pd(n[e],r[e]);if(0!==t)return t}return pd(n.length,r.length)}(e.referenceValue,t.referenceValue);case 8:return function(e,t){const n=pd(jf(e.latitude),jf(t.latitude));return 0!==n?n:pd(jf(e.longitude),jf(t.longitude))}(e.geoPointValue,t.geoPointValue);case 9:return function(e,t){const n=e.values||[],r=t.values||[];for(let e=0;e<n.length&&e<r.length;++e){const t=ep(n[e],r[e]);if(t)return t}return pd(n.length,r.length)}(e.arrayValue,t.arrayValue);case 10:return function(e,t){if(e===Qf.mapValue&&t===Qf.mapValue)return 0;if(e===Qf.mapValue)return 1;if(t===Qf.mapValue)return-1;const n=e.fields||{},r=Object.keys(n),i=t.fields||{},s=Object.keys(i);r.sort(),s.sort();for(let e=0;e<r.length&&e<s.length;++e){const t=pd(r[e],s[e]);if(0!==t)return t;const o=ep(n[r[e]],i[s[e]]);if(0!==o)return o}return pd(r.length,s.length)}(e.mapValue,t.mapValue);default:throw Xh()}}function tp(e,t){if("string"==typeof e&&"string"==typeof t&&e.length===t.length)return pd(e,t);const n=Bf(e),r=Bf(t),i=pd(n.seconds,r.seconds);return 0!==i?i:pd(n.nanos,r.nanos)}function np(e){return rp(e)}function rp(e){return"nullValue"in e?"null":"booleanValue"in e?""+e.booleanValue:"integerValue"in e?""+e.integerValue:"doubleValue"in e?""+e.doubleValue:"timestampValue"in e?function(e){const t=Bf(e);return`time(${t.seconds},${t.nanos})`}(e.timestampValue):"stringValue"in e?e.stringValue:"bytesValue"in e?function(e){return qf(e).toBase64()}(e.bytesValue):"referenceValue"in e?function(e){return Id.fromName(e).toString()}(e.referenceValue):"geoPointValue"in e?function(e){return`geo(${e.latitude},${e.longitude})`}(e.geoPointValue):"arrayValue"in e?function(e){let t="[",n=!0;for(const r of e.values||[])n?n=!1:t+=",",t+=rp(r);return t+"]"}(e.arrayValue):"mapValue"in e?function(e){const t=Object.keys(e.fields||{}).sort();let n="{",r=!0;for(const i of t)r?r=!1:n+=",",n+=`${i}:${rp(e.fields[i])}`;return n+"}"}(e.mapValue):Xh()}function ip(e,t){return{referenceValue:`projects/${e.projectId}/databases/${e.database}/documents/${t.path.canonicalString()}`}}function sp(e){return!!e&&"integerValue"in e}function op(e){return!!e&&"arrayValue"in e}function ap(e){return!!e&&"nullValue"in e}function lp(e){return!!e&&"doubleValue"in e&&isNaN(Number(e.doubleValue))}function up(e){return!!e&&"mapValue"in e}function cp(e){if(e.geoPointValue)return{geoPointValue:Object.assign({},e.geoPointValue)};if(e.timestampValue&&"object"==typeof e.timestampValue)return{timestampValue:Object.assign({},e.timestampValue)};if(e.mapValue){const t={mapValue:{fields:{}}};return Af(e.mapValue.fields,((e,n)=>t.mapValue.fields[e]=cp(n))),t}if(e.arrayValue){const t={arrayValue:{values:[]}};for(let n=0;n<(e.arrayValue.values||[]).length;++n)t.arrayValue.values[n]=cp(e.arrayValue.values[n]);return t}return Object.assign({},e)}function hp(e){return"__max__"===(((e.mapValue||{}).fields||{}).__type__||{}).stringValue}function dp(e){return"nullValue"in e?Yf:"booleanValue"in e?{booleanValue:!1}:"integerValue"in e||"doubleValue"in e?{doubleValue:NaN}:"timestampValue"in e?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in e?{stringValue:""}:"bytesValue"in e?{bytesValue:""}:"referenceValue"in e?ip(Hf.empty(),Id.empty()):"geoPointValue"in e?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in e?{arrayValue:{}}:"mapValue"in e?{mapValue:{}}:Xh()}function fp(e){return"nullValue"in e?{booleanValue:!1}:"booleanValue"in e?{doubleValue:NaN}:"integerValue"in e||"doubleValue"in e?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in e?{stringValue:""}:"stringValue"in e?{bytesValue:""}:"bytesValue"in e?ip(Hf.empty(),Id.empty()):"referenceValue"in e?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in e?{arrayValue:{}}:"arrayValue"in e?{mapValue:{}}:"mapValue"in e?Qf:Xh()}function pp(e,t){const n=ep(e.value,t.value);return 0!==n?n:e.inclusive&&!t.inclusive?-1:!e.inclusive&&t.inclusive?1:0}function mp(e,t){const n=ep(e.value,t.value);return 0!==n?n:e.inclusive&&!t.inclusive?1:!e.inclusive&&t.inclusive?-1:0}class gp{constructor(e){this.value=e}static empty(){return new gp({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let n=0;n<e.length-1;++n)if(t=(t.mapValue.fields||{})[e.get(n)],!up(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=cp(t)}setAll(e){let t=Ed.emptyPath(),n={},r=[];e.forEach(((e,i)=>{if(!t.isImmediateParentOf(i)){const e=this.getFieldsMap(t);this.applyChanges(e,n,r),n={},r=[],t=i.popLast()}e?n[i.lastSegment()]=cp(e):r.push(i.lastSegment())}));const i=this.getFieldsMap(t);this.applyChanges(i,n,r)}delete(e){const t=this.field(e.popLast());up(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Xf(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let n=0;n<e.length;++n){let r=t.mapValue.fields[e.get(n)];up(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},t.mapValue.fields[e.get(n)]=r),t=r}return t.mapValue.fields}applyChanges(e,t,n){Af(t,((t,n)=>e[t]=n));for(const t of n)delete e[t]}clone(){return new gp(cp(this.value))}}function yp(e){const t=[];return Af(e.fields,((e,n)=>{const r=new Ed([e]);if(up(n)){const e=yp(n.mapValue).fields;if(0===e.length)t.push(r);else for(const n of e)t.push(r.child(n))}else t.push(r)})),new Ff(t)}class vp{constructor(e,t,n,r,i,s,o){this.key=e,this.documentType=t,this.version=n,this.readTime=r,this.createTime=i,this.data=s,this.documentState=o}static newInvalidDocument(e){return new vp(e,0,vd.min(),vd.min(),vd.min(),gp.empty(),0)}static newFoundDocument(e,t,n,r){return new vp(e,1,t,vd.min(),n,r,0)}static newNoDocument(e,t){return new vp(e,2,t,vd.min(),vd.min(),gp.empty(),0)}static newUnknownDocument(e,t){return new vp(e,3,t,vd.min(),vd.min(),gp.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(vd.min())||2!==this.documentType&&0!==this.documentType||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=gp.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=gp.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=vd.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof vp&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new vp(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class wp{constructor(e,t){this.position=e,this.inclusive=t}}function bp(e,t,n){let r=0;for(let i=0;i<e.position.length;i++){const s=t[i],o=e.position[i];if(r=s.field.isKeyField()?Id.comparator(Id.fromName(o.referenceValue),n.key):ep(o,n.data.field(s.field)),"desc"===s.dir&&(r*=-1),0!==r)break}return r}function _p(e,t){if(null===e)return null===t;if(null===t)return!1;if(e.inclusive!==t.inclusive||e.position.length!==t.position.length)return!1;for(let n=0;n<e.position.length;n++)if(!Xf(e.position[n],t.position[n]))return!1;return!0}class Ep{constructor(e,t="asc"){this.field=e,this.dir=t}}function Ip(e,t){return e.dir===t.dir&&e.field.isEqual(t.field)}class kp{}class Sp extends kp{constructor(e,t,n){super(),this.field=e,this.op=t,this.value=n}static create(e,t,n){return e.isKeyField()?"in"===t||"not-in"===t?this.createKeyFieldInFilter(e,t,n):new Lp(e,t,n):"array-contains"===t?new Vp(e,n):"in"===t?new zp(e,n):"not-in"===t?new Bp(e,n):"array-contains-any"===t?new jp(e,n):new Sp(e,t,n)}static createKeyFieldInFilter(e,t,n){return"in"===t?new Mp(e,n):new Fp(e,n)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&this.matchesComparison(ep(t,this.value)):null!==t&&Jf(this.value)===Jf(t)&&this.matchesComparison(ep(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return Xh()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}getFirstInequalityField(){return this.isInequality()?this.field:null}}class Tp extends kp{constructor(e,t){super(),this.filters=e,this.op=t,this.ce=null}static create(e,t){return new Tp(e,t)}matches(e){return xp(this)?void 0===this.filters.find((t=>!t.matches(e))):void 0!==this.filters.find((t=>t.matches(e)))}getFlattenedFilters(){return null!==this.ce||(this.ce=this.filters.reduce(((e,t)=>e.concat(t.getFlattenedFilters())),[])),this.ce}getFilters(){return Object.assign([],this.filters)}getFirstInequalityField(){const e=this.le((e=>e.isInequality()));return null!==e?e.field:null}le(e){for(const t of this.getFlattenedFilters())if(e(t))return t;return null}}function xp(e){return"and"===e.op}function Cp(e){return"or"===e.op}function Ap(e){return Np(e)&&xp(e)}function Np(e){for(const t of e.filters)if(t instanceof Tp)return!1;return!0}function Rp(e){if(e instanceof Sp)return e.field.canonicalString()+e.op.toString()+np(e.value);if(Ap(e))return e.filters.map((e=>Rp(e))).join(",");{const t=e.filters.map((e=>Rp(e))).join(",");return`${e.op}(${t})`}}function Pp(e,t){return e instanceof Sp?function(e,t){return t instanceof Sp&&e.op===t.op&&e.field.isEqual(t.field)&&Xf(e.value,t.value)}(e,t):e instanceof Tp?function(e,t){return t instanceof Tp&&e.op===t.op&&e.filters.length===t.filters.length&&e.filters.reduce(((e,n,r)=>e&&Pp(n,t.filters[r])),!0)}(e,t):void Xh()}function Dp(e,t){const n=e.filters.concat(t);return Tp.create(n,e.op)}function Op(e){return e instanceof Sp?function(e){return`${e.field.canonicalString()} ${e.op} ${np(e.value)}`}(e):e instanceof Tp?function(e){return e.op.toString()+" {"+e.getFilters().map(Op).join(" ,")+"}"}(e):"Filter"}class Lp extends Sp{constructor(e,t,n){super(e,t,n),this.key=Id.fromName(n.referenceValue)}matches(e){const t=Id.comparator(e.key,this.key);return this.matchesComparison(t)}}class Mp extends Sp{constructor(e,t){super(e,"in",t),this.keys=Up(0,t)}matches(e){return this.keys.some((t=>t.isEqual(e.key)))}}class Fp extends Sp{constructor(e,t){super(e,"not-in",t),this.keys=Up(0,t)}matches(e){return!this.keys.some((t=>t.isEqual(e.key)))}}function Up(e,t){var n;return((null===(n=t.arrayValue)||void 0===n?void 0:n.values)||[]).map((e=>Id.fromName(e.referenceValue)))}class Vp extends Sp{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return op(t)&&Zf(t.arrayValue,this.value)}}class zp extends Sp{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&Zf(this.value.arrayValue,t)}}class Bp extends Sp{constructor(e,t){super(e,"not-in",t)}matches(e){if(Zf(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&!Zf(this.value.arrayValue,t)}}class jp extends Sp{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!op(t)||!t.arrayValue.values)&&t.arrayValue.values.some((e=>Zf(this.value.arrayValue,e)))}}class qp{constructor(e,t=null,n=[],r=[],i=null,s=null,o=null){this.path=e,this.collectionGroup=t,this.orderBy=n,this.filters=r,this.limit=i,this.startAt=s,this.endAt=o,this.he=null}}function $p(e,t=null,n=[],r=[],i=null,s=null,o=null){return new qp(e,t,n,r,i,s,o)}function Kp(e){const t=ed(e);if(null===t.he){let e=t.path.canonicalString();null!==t.collectionGroup&&(e+="|cg:"+t.collectionGroup),e+="|f:",e+=t.filters.map((e=>Rp(e))).join(","),e+="|ob:",e+=t.orderBy.map((e=>function(e){return e.field.canonicalString()+e.dir}(e))).join(","),Qd(t.limit)||(e+="|l:",e+=t.limit),t.startAt&&(e+="|lb:",e+=t.startAt.inclusive?"b:":"a:",e+=t.startAt.position.map((e=>np(e))).join(",")),t.endAt&&(e+="|ub:",e+=t.endAt.inclusive?"a:":"b:",e+=t.endAt.position.map((e=>np(e))).join(",")),t.he=e}return t.he}function Gp(e,t){if(e.limit!==t.limit)return!1;if(e.orderBy.length!==t.orderBy.length)return!1;for(let n=0;n<e.orderBy.length;n++)if(!Ip(e.orderBy[n],t.orderBy[n]))return!1;if(e.filters.length!==t.filters.length)return!1;for(let n=0;n<e.filters.length;n++)if(!Pp(e.filters[n],t.filters[n]))return!1;return e.collectionGroup===t.collectionGroup&&!!e.path.isEqual(t.path)&&!!_p(e.startAt,t.startAt)&&_p(e.endAt,t.endAt)}function Wp(e){return Id.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}function Hp(e,t){return e.filters.filter((e=>e instanceof Sp&&e.field.isEqual(t)))}function Qp(e,t,n){let r=Yf,i=!0;for(const n of Hp(e,t)){let e=Yf,t=!0;switch(n.op){case"<":case"<=":e=dp(n.value);break;case"==":case"in":case">=":e=n.value;break;case">":e=n.value,t=!1;break;case"!=":case"not-in":e=Yf}pp({value:r,inclusive:i},{value:e,inclusive:t})<0&&(r=e,i=t)}if(null!==n)for(let s=0;s<e.orderBy.length;++s)if(e.orderBy[s].field.isEqual(t)){const e=n.position[s];pp({value:r,inclusive:i},{value:e,inclusive:n.inclusive})<0&&(r=e,i=n.inclusive);break}return{value:r,inclusive:i}}function Yp(e,t,n){let r=Qf,i=!0;for(const n of Hp(e,t)){let e=Qf,t=!0;switch(n.op){case">=":case">":e=fp(n.value),t=!1;break;case"==":case"in":case"<=":e=n.value;break;case"<":e=n.value,t=!1;break;case"!=":case"not-in":e=Qf}mp({value:r,inclusive:i},{value:e,inclusive:t})>0&&(r=e,i=t)}if(null!==n)for(let s=0;s<e.orderBy.length;++s)if(e.orderBy[s].field.isEqual(t)){const e=n.position[s];mp({value:r,inclusive:i},{value:e,inclusive:n.inclusive})>0&&(r=e,i=n.inclusive);break}return{value:r,inclusive:i}}class Jp{constructor(e,t=null,n=[],r=[],i=null,s="F",o=null,a=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=n,this.filters=r,this.limit=i,this.limitType=s,this.startAt=o,this.endAt=a,this.Pe=null,this.Ie=null,this.startAt,this.endAt}}function Xp(e,t,n,r,i,s,o,a){return new Jp(e,t,n,r,i,s,o,a)}function Zp(e){return new Jp(e)}function em(e){return 0===e.filters.length&&null===e.limit&&null==e.startAt&&null==e.endAt&&(0===e.explicitOrderBy.length||1===e.explicitOrderBy.length&&e.explicitOrderBy[0].field.isKeyField())}function tm(e){return e.explicitOrderBy.length>0?e.explicitOrderBy[0].field:null}function nm(e){for(const t of e.filters){const e=t.getFirstInequalityField();if(null!==e)return e}return null}function rm(e){return null!==e.collectionGroup}function im(e){const t=ed(e);if(null===t.Pe){t.Pe=[];const e=nm(t),n=tm(t);if(null!==e&&null===n)e.isKeyField()||t.Pe.push(new Ep(e)),t.Pe.push(new Ep(Ed.keyField(),"asc"));else{let e=!1;for(const n of t.explicitOrderBy)t.Pe.push(n),n.field.isKeyField()&&(e=!0);if(!e){const e=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc";t.Pe.push(new Ep(Ed.keyField(),e))}}}return t.Pe}function sm(e){const t=ed(e);if(!t.Ie)if("F"===t.limitType)t.Ie=$p(t.path,t.collectionGroup,im(t),t.filters,t.limit,t.startAt,t.endAt);else{const e=[];for(const n of im(t)){const t="desc"===n.dir?"asc":"desc";e.push(new Ep(n.field,t))}const n=t.endAt?new wp(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new wp(t.startAt.position,t.startAt.inclusive):null;t.Ie=$p(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}return t.Ie}function om(e,t){t.getFirstInequalityField(),nm(e);const n=e.filters.concat([t]);return new Jp(e.path,e.collectionGroup,e.explicitOrderBy.slice(),n,e.limit,e.limitType,e.startAt,e.endAt)}function am(e,t,n){return new Jp(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),t,n,e.startAt,e.endAt)}function lm(e,t){return Gp(sm(e),sm(t))&&e.limitType===t.limitType}function um(e){return`${Kp(sm(e))}|lt:${e.limitType}`}function cm(e){return`Query(target=${function(e){let t=e.path.canonicalString();return null!==e.collectionGroup&&(t+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(t+=`, filters: [${e.filters.map((e=>Op(e))).join(", ")}]`),Qd(e.limit)||(t+=", limit: "+e.limit),e.orderBy.length>0&&(t+=`, orderBy: [${e.orderBy.map((e=>function(e){return`${e.field.canonicalString()} (${e.dir})`}(e))).join(", ")}]`),e.startAt&&(t+=", startAt: ",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((e=>np(e))).join(",")),e.endAt&&(t+=", endAt: ",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((e=>np(e))).join(",")),`Target(${t})`}(sm(e))}; limitType=${e.limitType})`}function hm(e,t){return t.isFoundDocument()&&function(e,t){const n=t.key.path;return null!==e.collectionGroup?t.key.hasCollectionId(e.collectionGroup)&&e.path.isPrefixOf(n):Id.isDocumentKey(e.path)?e.path.isEqual(n):e.path.isImmediateParentOf(n)}(e,t)&&function(e,t){for(const n of im(e))if(!n.field.isKeyField()&&null===t.data.field(n.field))return!1;return!0}(e,t)&&function(e,t){for(const n of e.filters)if(!n.matches(t))return!1;return!0}(e,t)&&function(e,t){return!(e.startAt&&!function(e,t,n){const r=bp(e,t,n);return e.inclusive?r<=0:r<0}(e.startAt,im(e),t)||e.endAt&&!function(e,t,n){const r=bp(e,t,n);return e.inclusive?r>=0:r>0}(e.endAt,im(e),t))}(e,t)}function dm(e){return e.collectionGroup||(e.path.length%2==1?e.path.lastSegment():e.path.get(e.path.length-2))}function fm(e){return(t,n)=>{let r=!1;for(const i of im(e)){const e=pm(i,t,n);if(0!==e)return e;r=r||i.field.isKeyField()}return 0}}function pm(e,t,n){const r=e.field.isKeyField()?Id.comparator(t.key,n.key):function(e,t,n){const r=t.data.field(e),i=n.data.field(e);return null!==r&&null!==i?ep(r,i):Xh()}(e.field,t,n);switch(e.dir){case"asc":return r;case"desc":return-1*r;default:return Xh()}}class mm{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),n=this.inner[t];if(void 0!==n)for(const[t,r]of n)if(this.equalsFn(t,e))return r}has(e){return void 0!==this.get(e)}set(e,t){const n=this.mapKeyFn(e),r=this.inner[n];if(void 0===r)return this.inner[n]=[[e,t]],void this.innerSize++;for(let n=0;n<r.length;n++)if(this.equalsFn(r[n][0],e))return void(r[n]=[e,t]);r.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),n=this.inner[t];if(void 0===n)return!1;for(let r=0;r<n.length;r++)if(this.equalsFn(n[r][0],e))return 1===n.length?delete this.inner[t]:n.splice(r,1),this.innerSize--,!0;return!1}forEach(e){Af(this.inner,((t,n)=>{for(const[t,r]of n)e(t,r)}))}isEmpty(){return Nf(this.inner)}size(){return this.innerSize}}const gm=new Rf(Id.comparator);function ym(){return gm}const vm=new Rf(Id.comparator);function wm(...e){let t=vm;for(const n of e)t=t.insert(n.key,n);return t}function bm(e){let t=vm;return e.forEach(((e,n)=>t=t.insert(e,n.overlayedDocument))),t}function _m(){return Im()}function Em(){return Im()}function Im(){return new mm((e=>e.toString()),((e,t)=>e.isEqual(t)))}const km=new Rf(Id.comparator),Sm=new Of(Id.comparator);function Tm(...e){let t=Sm;for(const n of e)t=t.add(n);return t}const xm=new Of(pd);function Cm(){return xm}function Am(e,t){if(e.useProto3Json){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Yd(t)?"-0":t}}function Nm(e){return{integerValue:""+e}}function Rm(e,t){return Jd(t)?Nm(t):Am(e,t)}class Pm{constructor(){this._=void 0}}function Dm(e,t,n){return e instanceof Mm?function(e,t){const n={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:e.seconds,nanos:e.nanoseconds}}}};return t&&$f(t)&&(t=Kf(t)),t&&(n.fields.__previous_value__=t),{mapValue:n}}(n,t):e instanceof Fm?Um(e,t):e instanceof Vm?zm(e,t):function(e,t){const n=Lm(e,t),r=jm(n)+jm(e.Te);return sp(n)&&sp(e.Te)?Nm(r):Am(e.serializer,r)}(e,t)}function Om(e,t,n){return e instanceof Fm?Um(e,t):e instanceof Vm?zm(e,t):n}function Lm(e,t){return e instanceof Bm?function(e){return sp(e)||function(e){return!!e&&"doubleValue"in e}(e)}(t)?t:{integerValue:0}:null}class Mm extends Pm{}class Fm extends Pm{constructor(e){super(),this.elements=e}}function Um(e,t){const n=qm(t);for(const t of e.elements)n.some((e=>Xf(e,t)))||n.push(t);return{arrayValue:{values:n}}}class Vm extends Pm{constructor(e){super(),this.elements=e}}function zm(e,t){let n=qm(t);for(const t of e.elements)n=n.filter((e=>!Xf(e,t)));return{arrayValue:{values:n}}}class Bm extends Pm{constructor(e,t){super(),this.serializer=e,this.Te=t}}function jm(e){return jf(e.integerValue||e.doubleValue)}function qm(e){return op(e)&&e.arrayValue.values?e.arrayValue.values.slice():[]}class $m{constructor(e,t){this.field=e,this.transform=t}}class Km{constructor(e,t){this.version=e,this.transformResults=t}}class Gm{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new Gm}static exists(e){return new Gm(void 0,e)}static updateTime(e){return new Gm(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Wm(e,t){return void 0!==e.updateTime?t.isFoundDocument()&&t.version.isEqual(e.updateTime):void 0===e.exists||e.exists===t.isFoundDocument()}class Hm{}function Qm(e,t){if(!e.hasLocalMutations||t&&0===t.fields.length)return null;if(null===t)return e.isNoDocument()?new sg(e.key,Gm.none()):new eg(e.key,e.data,Gm.none());{const n=e.data,r=gp.empty();let i=new Of(Ed.comparator);for(let e of t.fields)if(!i.has(e)){let t=n.field(e);null===t&&e.length>1&&(e=e.popLast(),t=n.field(e)),null===t?r.delete(e):r.set(e,t),i=i.add(e)}return new tg(e.key,r,new Ff(i.toArray()),Gm.none())}}function Ym(e,t,n){e instanceof eg?function(e,t,n){const r=e.value.clone(),i=rg(e.fieldTransforms,t,n.transformResults);r.setAll(i),t.convertToFoundDocument(n.version,r).setHasCommittedMutations()}(e,t,n):e instanceof tg?function(e,t,n){if(!Wm(e.precondition,t))return void t.convertToUnknownDocument(n.version);const r=rg(e.fieldTransforms,t,n.transformResults),i=t.data;i.setAll(ng(e)),i.setAll(r),t.convertToFoundDocument(n.version,i).setHasCommittedMutations()}(e,t,n):function(e,t,n){t.convertToNoDocument(n.version).setHasCommittedMutations()}(0,t,n)}function Jm(e,t,n,r){return e instanceof eg?function(e,t,n,r){if(!Wm(e.precondition,t))return n;const i=e.value.clone(),s=ig(e.fieldTransforms,r,t);return i.setAll(s),t.convertToFoundDocument(t.version,i).setHasLocalMutations(),null}(e,t,n,r):e instanceof tg?function(e,t,n,r){if(!Wm(e.precondition,t))return n;const i=ig(e.fieldTransforms,r,t),s=t.data;return s.setAll(ng(e)),s.setAll(i),t.convertToFoundDocument(t.version,s).setHasLocalMutations(),null===n?null:n.unionWith(e.fieldMask.fields).unionWith(e.fieldTransforms.map((e=>e.field)))}(e,t,n,r):function(e,t,n){return Wm(e.precondition,t)?(t.convertToNoDocument(t.version).setHasLocalMutations(),null):n}(e,t,n)}function Xm(e,t){let n=null;for(const r of e.fieldTransforms){const e=t.data.field(r.field),i=Lm(r.transform,e||null);null!=i&&(null===n&&(n=gp.empty()),n.set(r.field,i))}return n||null}function Zm(e,t){return e.type===t.type&&!!e.key.isEqual(t.key)&&!!e.precondition.isEqual(t.precondition)&&!!function(e,t){return void 0===e&&void 0===t||!(!e||!t)&&md(e,t,((e,t)=>function(e,t){return e.field.isEqual(t.field)&&function(e,t){return e instanceof Fm&&t instanceof Fm||e instanceof Vm&&t instanceof Vm?md(e.elements,t.elements,Xf):e instanceof Bm&&t instanceof Bm?Xf(e.Te,t.Te):e instanceof Mm&&t instanceof Mm}(e.transform,t.transform)}(e,t)))}(e.fieldTransforms,t.fieldTransforms)&&(0===e.type?e.value.isEqual(t.value):1!==e.type||e.data.isEqual(t.data)&&e.fieldMask.isEqual(t.fieldMask))}class eg extends Hm{constructor(e,t,n,r=[]){super(),this.key=e,this.value=t,this.precondition=n,this.fieldTransforms=r,this.type=0}getFieldMask(){return null}}class tg extends Hm{constructor(e,t,n,r,i=[]){super(),this.key=e,this.data=t,this.fieldMask=n,this.precondition=r,this.fieldTransforms=i,this.type=1}getFieldMask(){return this.fieldMask}}function ng(e){const t=new Map;return e.fieldMask.fields.forEach((n=>{if(!n.isEmpty()){const r=e.data.field(n);t.set(n,r)}})),t}function rg(e,t,n){const r=new Map;Zh(e.length===n.length);for(let i=0;i<n.length;i++){const s=e[i],o=s.transform,a=t.data.field(s.field);r.set(s.field,Om(o,a,n[i]))}return r}function ig(e,t,n){const r=new Map;for(const i of e){const e=i.transform,s=n.data.field(i.field);r.set(i.field,Dm(e,s,t))}return r}class sg extends Hm{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class og extends Hm{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class ag{constructor(e,t,n,r){this.batchId=e,this.localWriteTime=t,this.baseMutations=n,this.mutations=r}applyToRemoteDocument(e,t){const n=t.mutationResults;for(let t=0;t<this.mutations.length;t++){const r=this.mutations[t];r.key.isEqual(e.key)&&Ym(r,e,n[t])}}applyToLocalView(e,t){for(const n of this.baseMutations)n.key.isEqual(e.key)&&(t=Jm(n,e,t,this.localWriteTime));for(const n of this.mutations)n.key.isEqual(e.key)&&(t=Jm(n,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const n=Em();return this.mutations.forEach((r=>{const i=e.get(r.key),s=i.overlayedDocument;let o=this.applyToLocalView(s,i.mutatedFields);o=t.has(r.key)?null:o;const a=Qm(s,o);null!==a&&n.set(r.key,a),s.isValidDocument()||s.convertToNoDocument(vd.min())})),n}keys(){return this.mutations.reduce(((e,t)=>e.add(t.key)),Tm())}isEqual(e){return this.batchId===e.batchId&&md(this.mutations,e.mutations,((e,t)=>Zm(e,t)))&&md(this.baseMutations,e.baseMutations,((e,t)=>Zm(e,t)))}}class lg{constructor(e,t,n,r){this.batch=e,this.commitVersion=t,this.mutationResults=n,this.docVersions=r}static from(e,t,n){Zh(e.mutations.length===n.length);let r=km;const i=e.mutations;for(let e=0;e<i.length;e++)r=r.insert(i[e].key,n[e].version);return new lg(e,t,n,r)}}class ug{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}class cg{constructor(e,t){this.count=e,this.unchangedNames=t}}var hg,dg;function fg(e){switch(e){default:return Xh();case td.CANCELLED:case td.UNKNOWN:case td.DEADLINE_EXCEEDED:case td.RESOURCE_EXHAUSTED:case td.INTERNAL:case td.UNAVAILABLE:case td.UNAUTHENTICATED:return!1;case td.INVALID_ARGUMENT:case td.NOT_FOUND:case td.ALREADY_EXISTS:case td.PERMISSION_DENIED:case td.FAILED_PRECONDITION:case td.ABORTED:case td.OUT_OF_RANGE:case td.UNIMPLEMENTED:case td.DATA_LOSS:return!0}}function pg(e){if(void 0===e)return Qh("GRPC error has no .code"),td.UNKNOWN;switch(e){case hg.OK:return td.OK;case hg.CANCELLED:return td.CANCELLED;case hg.UNKNOWN:return td.UNKNOWN;case hg.DEADLINE_EXCEEDED:return td.DEADLINE_EXCEEDED;case hg.RESOURCE_EXHAUSTED:return td.RESOURCE_EXHAUSTED;case hg.INTERNAL:return td.INTERNAL;case hg.UNAVAILABLE:return td.UNAVAILABLE;case hg.UNAUTHENTICATED:return td.UNAUTHENTICATED;case hg.INVALID_ARGUMENT:return td.INVALID_ARGUMENT;case hg.NOT_FOUND:return td.NOT_FOUND;case hg.ALREADY_EXISTS:return td.ALREADY_EXISTS;case hg.PERMISSION_DENIED:return td.PERMISSION_DENIED;case hg.FAILED_PRECONDITION:return td.FAILED_PRECONDITION;case hg.ABORTED:return td.ABORTED;case hg.OUT_OF_RANGE:return td.OUT_OF_RANGE;case hg.UNIMPLEMENTED:return td.UNIMPLEMENTED;case hg.DATA_LOSS:return td.DATA_LOSS;default:return Xh()}}(dg=hg||(hg={}))[dg.OK=0]="OK",dg[dg.CANCELLED=1]="CANCELLED",dg[dg.UNKNOWN=2]="UNKNOWN",dg[dg.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",dg[dg.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",dg[dg.NOT_FOUND=5]="NOT_FOUND",dg[dg.ALREADY_EXISTS=6]="ALREADY_EXISTS",dg[dg.PERMISSION_DENIED=7]="PERMISSION_DENIED",dg[dg.UNAUTHENTICATED=16]="UNAUTHENTICATED",dg[dg.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",dg[dg.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",dg[dg.ABORTED=10]="ABORTED",dg[dg.OUT_OF_RANGE=11]="OUT_OF_RANGE",dg[dg.UNIMPLEMENTED=12]="UNIMPLEMENTED",dg[dg.INTERNAL=13]="INTERNAL",dg[dg.UNAVAILABLE=14]="UNAVAILABLE",dg[dg.DATA_LOSS=15]="DATA_LOSS";class mg{constructor(){this.onExistenceFilterMismatchCallbacks=new Map}static get instance(){return gg}static getOrCreateInstance(){return null===gg&&(gg=new mg),gg}onExistenceFilterMismatch(e){const t=Symbol();return this.onExistenceFilterMismatchCallbacks.set(t,e),()=>this.onExistenceFilterMismatchCallbacks.delete(t)}notifyOnExistenceFilterMismatch(e){this.onExistenceFilterMismatchCallbacks.forEach((t=>t(e)))}}let gg=null;function yg(){return new TextEncoder}const vg=new jh([4294967295,4294967295],0);function wg(e){const t=yg().encode(e),n=new Bh;return n.update(t),new Uint8Array(n.digest())}function bg(e){const t=new DataView(e.buffer),n=t.getUint32(0,!0),r=t.getUint32(4,!0),i=t.getUint32(8,!0),s=t.getUint32(12,!0);return[new jh([n,r],0),new jh([i,s],0)]}class _g{constructor(e,t,n){if(this.bitmap=e,this.padding=t,this.hashCount=n,t<0||t>=8)throw new Eg(`Invalid padding: ${t}`);if(n<0)throw new Eg(`Invalid hash count: ${n}`);if(e.length>0&&0===this.hashCount)throw new Eg(`Invalid hash count: ${n}`);if(0===e.length&&0!==t)throw new Eg(`Invalid padding when bitmap length is 0: ${t}`);this.de=8*e.length-t,this.Ae=jh.fromNumber(this.de)}Re(e,t,n){let r=e.add(t.multiply(jh.fromNumber(n)));return 1===r.compare(vg)&&(r=new jh([r.getBits(0),r.getBits(1)],0)),r.modulo(this.Ae).toNumber()}Ve(e){return 0!=(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(0===this.de)return!1;const t=wg(e),[n,r]=bg(t);for(let e=0;e<this.hashCount;e++){const t=this.Re(n,r,e);if(!this.Ve(t))return!1}return!0}static create(e,t,n){const r=e%8==0?0:8-e%8,i=new Uint8Array(Math.ceil(e/8)),s=new _g(i,r,t);return n.forEach((e=>s.insert(e))),s}insert(e){if(0===this.de)return;const t=wg(e),[n,r]=bg(t);for(let e=0;e<this.hashCount;e++){const t=this.Re(n,r,e);this.me(t)}}me(e){const t=Math.floor(e/8),n=e%8;this.bitmap[t]|=1<<n}}class Eg extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class Ig{constructor(e,t,n,r,i){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=n,this.documentUpdates=r,this.resolvedLimboDocuments=i}static createSynthesizedRemoteEventForCurrentChange(e,t,n){const r=new Map;return r.set(e,kg.createSynthesizedTargetChangeForCurrentChange(e,t,n)),new Ig(vd.min(),r,new Rf(pd),ym(),Tm())}}class kg{constructor(e,t,n,r,i){this.resumeToken=e,this.current=t,this.addedDocuments=n,this.modifiedDocuments=r,this.removedDocuments=i}static createSynthesizedTargetChangeForCurrentChange(e,t,n){return new kg(n,t,Tm(),Tm(),Tm())}}class Sg{constructor(e,t,n,r){this.fe=e,this.removedTargetIds=t,this.key=n,this.ge=r}}class Tg{constructor(e,t){this.targetId=e,this.pe=t}}class xg{constructor(e,t,n=Vf.EMPTY_BYTE_STRING,r=null){this.state=e,this.targetIds=t,this.resumeToken=n,this.cause=r}}class Cg{constructor(){this.ye=0,this.we=Rg(),this.Se=Vf.EMPTY_BYTE_STRING,this.be=!1,this.De=!0}get current(){return this.be}get resumeToken(){return this.Se}get ve(){return 0!==this.ye}get Ce(){return this.De}Fe(e){e.approximateByteSize()>0&&(this.De=!0,this.Se=e)}Me(){let e=Tm(),t=Tm(),n=Tm();return this.we.forEach(((r,i)=>{switch(i){case 0:e=e.add(r);break;case 2:t=t.add(r);break;case 1:n=n.add(r);break;default:Xh()}})),new kg(this.Se,this.be,e,t,n)}xe(){this.De=!1,this.we=Rg()}Oe(e,t){this.De=!0,this.we=this.we.insert(e,t)}Ne(e){this.De=!0,this.we=this.we.remove(e)}Be(){this.ye+=1}Le(){this.ye-=1}ke(){this.De=!0,this.be=!0}}class Ag{constructor(e){this.qe=e,this.Qe=new Map,this.Ke=ym(),this.$e=Ng(),this.Ue=new Rf(pd)}We(e){for(const t of e.fe)e.ge&&e.ge.isFoundDocument()?this.Ge(t,e.ge):this.ze(t,e.key,e.ge);for(const t of e.removedTargetIds)this.ze(t,e.key,e.ge)}je(e){this.forEachTarget(e,(t=>{const n=this.He(t);switch(e.state){case 0:this.Je(t)&&n.Fe(e.resumeToken);break;case 1:n.Le(),n.ve||n.xe(),n.Fe(e.resumeToken);break;case 2:n.Le(),n.ve||this.removeTarget(t);break;case 3:this.Je(t)&&(n.ke(),n.Fe(e.resumeToken));break;case 4:this.Je(t)&&(this.Ye(t),n.Fe(e.resumeToken));break;default:Xh()}}))}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Qe.forEach(((e,n)=>{this.Je(n)&&t(n)}))}Ze(e){var t,n;const r=e.targetId,i=e.pe.count,s=this.Xe(r);if(s){const o=s.target;if(Wp(o))if(0===i){const e=new Id(o.path);this.ze(r,e,vp.newNoDocument(e,vd.min()))}else Zh(1===i);else{const s=this.et(r);if(s!==i){const i=this.tt(e,s);if(0!==i.status){this.Ye(r);const e=2===i.status?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ue=this.Ue.insert(r,e)}null===(t=mg.instance)||void 0===t||t.notifyOnExistenceFilterMismatch(function(e,t,n,r){var i,s,o,a,l,u;const c={localCacheCount:n,existenceFilterCount:r.count},h=r.unchangedNames;return h&&(c.bloomFilter={applied:0===e,hashCount:null!==(i=null==h?void 0:h.hashCount)&&void 0!==i?i:0,bitmapLength:null!==(a=null===(o=null===(s=null==h?void 0:h.bits)||void 0===s?void 0:s.bitmap)||void 0===o?void 0:o.length)&&void 0!==a?a:0,padding:null!==(u=null===(l=null==h?void 0:h.bits)||void 0===l?void 0:l.padding)&&void 0!==u?u:0},t&&(c.bloomFilter.mightContain=t)),c}(i.status,null!==(n=i.nt)&&void 0!==n?n:null,s,e.pe))}}}}tt(e,t){const{unchangedNames:n,count:r}=e.pe;if(!n||!n.bits)return{status:1};const{bits:{bitmap:i="",padding:s=0},hashCount:o=0}=n;let a,l;try{a=qf(i).toUint8Array()}catch(e){if(e instanceof Uf)return Yh("Decoding the base64 bloom filter in existence filter failed ("+e.message+"); ignoring the bloom filter and falling back to full re-query."),{status:1};throw e}try{l=new _g(a,s,o)}catch(e){return Yh(e instanceof Eg?"BloomFilter error: ":"Applying bloom filter failed: ",e),{status:1}}const u=e=>{const t=this.qe.rt();return l.mightContain(`projects/${t.projectId}/databases/${t.database}/documents/${e}`)};return 0===l.de?{status:1}:{status:r===t-this.it(e.targetId,u)?0:2,nt:u}}it(e,t){const n=this.qe.getRemoteKeysForTarget(e);let r=0;return n.forEach((n=>{t(n.path.canonicalString())||(this.ze(e,n,null),r++)})),r}st(e){const t=new Map;this.Qe.forEach(((n,r)=>{const i=this.Xe(r);if(i){if(n.current&&Wp(i.target)){const t=new Id(i.target.path);null!==this.Ke.get(t)||this.ot(r,t)||this.ze(r,t,vp.newNoDocument(t,e))}n.Ce&&(t.set(r,n.Me()),n.xe())}}));let n=Tm();this.$e.forEach(((e,t)=>{let r=!0;t.forEachWhile((e=>{const t=this.Xe(e);return!t||"TargetPurposeLimboResolution"===t.purpose||(r=!1,!1)})),r&&(n=n.add(e))})),this.Ke.forEach(((t,n)=>n.setReadTime(e)));const r=new Ig(e,t,this.Ue,this.Ke,n);return this.Ke=ym(),this.$e=Ng(),this.Ue=new Rf(pd),r}Ge(e,t){if(!this.Je(e))return;const n=this.ot(e,t.key)?2:0;this.He(e).Oe(t.key,n),this.Ke=this.Ke.insert(t.key,t),this.$e=this.$e.insert(t.key,this._t(t.key).add(e))}ze(e,t,n){if(!this.Je(e))return;const r=this.He(e);this.ot(e,t)?r.Oe(t,1):r.Ne(t),this.$e=this.$e.insert(t,this._t(t).delete(e)),n&&(this.Ke=this.Ke.insert(t,n))}removeTarget(e){this.Qe.delete(e)}et(e){const t=this.He(e).Me();return this.qe.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Be(e){this.He(e).Be()}He(e){let t=this.Qe.get(e);return t||(t=new Cg,this.Qe.set(e,t)),t}_t(e){let t=this.$e.get(e);return t||(t=new Of(pd),this.$e=this.$e.insert(e,t)),t}Je(e){const t=null!==this.Xe(e);return t||Hh("WatchChangeAggregator","Detected inactive target",e),t}Xe(e){const t=this.Qe.get(e);return t&&t.ve?null:this.qe.ut(e)}Ye(e){this.Qe.set(e,new Cg),this.qe.getRemoteKeysForTarget(e).forEach((t=>{this.ze(e,t,null)}))}ot(e,t){return this.qe.getRemoteKeysForTarget(e).has(t)}}function Ng(){return new Rf(Id.comparator)}function Rg(){return new Rf(Id.comparator)}const Pg={asc:"ASCENDING",desc:"DESCENDING"},Dg={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},Og={and:"AND",or:"OR"};class Lg{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function Mg(e,t){return e.useProto3Json||Qd(t)?t:{value:t}}function Fg(e,t){return e.useProto3Json?`${new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+t.nanoseconds).slice(-9)}Z`:{seconds:""+t.seconds,nanos:t.nanoseconds}}function Ug(e,t){return e.useProto3Json?t.toBase64():t.toUint8Array()}function Vg(e,t){return Fg(e,t.toTimestamp())}function zg(e){return Zh(!!e),vd.fromTimestamp(function(e){const t=Bf(e);return new yd(t.seconds,t.nanos)}(e))}function Bg(e,t){return function(e){return new bd(["projects",e.projectId,"databases",e.database])}(e).child("documents").child(t).canonicalString()}function jg(e){const t=bd.fromString(e);return Zh(cy(t)),t}function qg(e,t){return Bg(e.databaseId,t.path)}function $g(e,t){const n=jg(t);if(n.get(1)!==e.databaseId.projectId)throw new nd(td.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+e.databaseId.projectId);if(n.get(3)!==e.databaseId.database)throw new nd(td.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+e.databaseId.database);return new Id(Hg(n))}function Kg(e,t){return Bg(e.databaseId,t)}function Gg(e){const t=jg(e);return 4===t.length?bd.emptyPath():Hg(t)}function Wg(e){return new bd(["projects",e.databaseId.projectId,"databases",e.databaseId.database]).canonicalString()}function Hg(e){return Zh(e.length>4&&"documents"===e.get(4)),e.popFirst(5)}function Qg(e,t,n){return{name:qg(e,t),fields:n.value.mapValue.fields}}function Yg(e,t,n){const r=$g(e,t.name),i=zg(t.updateTime),s=t.createTime?zg(t.createTime):vd.min(),o=new gp({mapValue:{fields:t.fields}}),a=vp.newFoundDocument(r,i,s,o);return n&&a.setHasCommittedMutations(),n?a.setHasCommittedMutations():a}function Jg(e,t){let n;if(t instanceof eg)n={update:Qg(e,t.key,t.value)};else if(t instanceof sg)n={delete:qg(e,t.key)};else if(t instanceof tg)n={update:Qg(e,t.key,t.data),updateMask:uy(t.fieldMask)};else{if(!(t instanceof og))return Xh();n={verify:qg(e,t.key)}}return t.fieldTransforms.length>0&&(n.updateTransforms=t.fieldTransforms.map((e=>function(e,t){const n=t.transform;if(n instanceof Mm)return{fieldPath:t.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(n instanceof Fm)return{fieldPath:t.field.canonicalString(),appendMissingElements:{values:n.elements}};if(n instanceof Vm)return{fieldPath:t.field.canonicalString(),removeAllFromArray:{values:n.elements}};if(n instanceof Bm)return{fieldPath:t.field.canonicalString(),increment:n.Te};throw Xh()}(0,e)))),t.precondition.isNone||(n.currentDocument=function(e,t){return void 0!==t.updateTime?{updateTime:Vg(e,t.updateTime)}:void 0!==t.exists?{exists:t.exists}:Xh()}(e,t.precondition)),n}function Xg(e,t){const n=t.currentDocument?function(e){return void 0!==e.updateTime?Gm.updateTime(zg(e.updateTime)):void 0!==e.exists?Gm.exists(e.exists):Gm.none()}(t.currentDocument):Gm.none(),r=t.updateTransforms?t.updateTransforms.map((t=>function(e,t){let n=null;if("setToServerValue"in t)Zh("REQUEST_TIME"===t.setToServerValue),n=new Mm;else if("appendMissingElements"in t){const e=t.appendMissingElements.values||[];n=new Fm(e)}else if("removeAllFromArray"in t){const e=t.removeAllFromArray.values||[];n=new Vm(e)}else"increment"in t?n=new Bm(e,t.increment):Xh();const r=Ed.fromServerFormat(t.fieldPath);return new $m(r,n)}(e,t))):[];if(t.update){t.update.name;const i=$g(e,t.update.name),s=new gp({mapValue:{fields:t.update.fields}});if(t.updateMask){const e=function(e){const t=e.fieldPaths||[];return new Ff(t.map((e=>Ed.fromServerFormat(e))))}(t.updateMask);return new tg(i,s,e,n,r)}return new eg(i,s,n,r)}if(t.delete){const r=$g(e,t.delete);return new sg(r,n)}if(t.verify){const r=$g(e,t.verify);return new og(r,n)}return Xh()}function Zg(e,t){return{documents:[Kg(e,t.path)]}}function ey(e,t){const n={structuredQuery:{}},r=t.path;null!==t.collectionGroup?(n.parent=Kg(e,r),n.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(n.parent=Kg(e,r.popLast()),n.structuredQuery.from=[{collectionId:r.lastSegment()}]);const i=function(e){if(0!==e.length)return ly(Tp.create(e,"and"))}(t.filters);i&&(n.structuredQuery.where=i);const s=function(e){if(0!==e.length)return e.map((e=>function(e){return{field:oy(e.field),direction:ry(e.dir)}}(e)))}(t.orderBy);s&&(n.structuredQuery.orderBy=s);const o=Mg(e,t.limit);return null!==o&&(n.structuredQuery.limit=o),t.startAt&&(n.structuredQuery.startAt=function(e){return{before:e.inclusive,values:e.position}}(t.startAt)),t.endAt&&(n.structuredQuery.endAt=function(e){return{before:!e.inclusive,values:e.position}}(t.endAt)),n}function ty(e){let t=Gg(e.parent);const n=e.structuredQuery,r=n.from?n.from.length:0;let i=null;if(r>0){Zh(1===r);const e=n.from[0];e.allDescendants?i=e.collectionId:t=t.child(e.collectionId)}let s=[];n.where&&(s=function(e){const t=ny(e);return t instanceof Tp&&Ap(t)?t.getFilters():[t]}(n.where));let o=[];n.orderBy&&(o=function(e){return e.map((e=>function(e){return new Ep(ay(e.field),function(e){switch(e){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(e.direction))}(e)))}(n.orderBy));let a=null;n.limit&&(a=function(e){let t;return t="object"==typeof e?e.value:e,Qd(t)?null:t}(n.limit));let l=null;n.startAt&&(l=function(e){const t=!!e.before,n=e.values||[];return new wp(n,t)}(n.startAt));let u=null;return n.endAt&&(u=function(e){const t=!e.before,n=e.values||[];return new wp(n,t)}(n.endAt)),Xp(t,i,o,s,a,"F",l,u)}function ny(e){return void 0!==e.unaryFilter?function(e){switch(e.unaryFilter.op){case"IS_NAN":const t=ay(e.unaryFilter.field);return Sp.create(t,"==",{doubleValue:NaN});case"IS_NULL":const n=ay(e.unaryFilter.field);return Sp.create(n,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const r=ay(e.unaryFilter.field);return Sp.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const i=ay(e.unaryFilter.field);return Sp.create(i,"!=",{nullValue:"NULL_VALUE"});default:return Xh()}}(e):void 0!==e.fieldFilter?function(e){return Sp.create(ay(e.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return Xh()}}(e.fieldFilter.op),e.fieldFilter.value)}(e):void 0!==e.compositeFilter?function(e){return Tp.create(e.compositeFilter.filters.map((e=>ny(e))),function(e){switch(e){case"AND":return"and";case"OR":return"or";default:return Xh()}}(e.compositeFilter.op))}(e):Xh()}function ry(e){return Pg[e]}function iy(e){return Dg[e]}function sy(e){return Og[e]}function oy(e){return{fieldPath:e.canonicalString()}}function ay(e){return Ed.fromServerFormat(e.fieldPath)}function ly(e){return e instanceof Sp?function(e){if("=="===e.op){if(lp(e.value))return{unaryFilter:{field:oy(e.field),op:"IS_NAN"}};if(ap(e.value))return{unaryFilter:{field:oy(e.field),op:"IS_NULL"}}}else if("!="===e.op){if(lp(e.value))return{unaryFilter:{field:oy(e.field),op:"IS_NOT_NAN"}};if(ap(e.value))return{unaryFilter:{field:oy(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:oy(e.field),op:iy(e.op),value:e.value}}}(e):e instanceof Tp?function(e){const t=e.getFilters().map((e=>ly(e)));return 1===t.length?t[0]:{compositeFilter:{op:sy(e.op),filters:t}}}(e):Xh()}function uy(e){const t=[];return e.fields.forEach((e=>t.push(e.canonicalString()))),{fieldPaths:t}}function cy(e){return e.length>=4&&"projects"===e.get(0)&&"databases"===e.get(2)}class hy{constructor(e,t,n,r,i=vd.min(),s=vd.min(),o=Vf.EMPTY_BYTE_STRING,a=null){this.target=e,this.targetId=t,this.purpose=n,this.sequenceNumber=r,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=s,this.resumeToken=o,this.expectedCount=a}withSequenceNumber(e){return new hy(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new hy(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new hy(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new hy(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}class dy{constructor(e){this.ct=e}}function fy(e,t){const n=t.key,r={prefixPath:n.getCollectionPath().popLast().toArray(),collectionGroup:n.collectionGroup,documentId:n.path.lastSegment(),readTime:py(t.readTime),hasCommittedMutations:t.hasCommittedMutations};if(t.isFoundDocument())r.document=function(e,t){return{name:qg(e,t.key),fields:t.data.value.mapValue.fields,updateTime:Fg(e,t.version.toTimestamp()),createTime:Fg(e,t.createTime.toTimestamp())}}(e.ct,t);else if(t.isNoDocument())r.noDocument={path:n.path.toArray(),readTime:my(t.version)};else{if(!t.isUnknownDocument())return Xh();r.unknownDocument={path:n.path.toArray(),version:my(t.version)}}return r}function py(e){const t=e.toTimestamp();return[t.seconds,t.nanoseconds]}function my(e){const t=e.toTimestamp();return{seconds:t.seconds,nanoseconds:t.nanoseconds}}function gy(e){const t=new yd(e.seconds,e.nanoseconds);return vd.fromTimestamp(t)}function yy(e,t){const n=(t.baseMutations||[]).map((t=>Xg(e.ct,t)));for(let e=0;e<t.mutations.length-1;++e){const n=t.mutations[e];if(e+1<t.mutations.length&&void 0!==t.mutations[e+1].transform){const r=t.mutations[e+1];n.updateTransforms=r.transform.fieldTransforms,t.mutations.splice(e+1,1),++e}}const r=t.mutations.map((t=>Xg(e.ct,t))),i=yd.fromMillis(t.localWriteTimeMs);return new ag(t.batchId,i,n,r)}function vy(e){const t=gy(e.readTime),n=void 0!==e.lastLimboFreeSnapshotVersion?gy(e.lastLimboFreeSnapshotVersion):vd.min();let r;return r=function(e){return void 0!==e.documents}(e.query)?function(e){return Zh(1===e.documents.length),sm(Zp(Gg(e.documents[0])))}(e.query):function(e){return sm(ty(e))}(e.query),new hy(r,e.targetId,"TargetPurposeListen",e.lastListenSequenceNumber,t,n,Vf.fromBase64String(e.resumeToken))}function wy(e,t){const n=my(t.snapshotVersion),r=my(t.lastLimboFreeSnapshotVersion);let i;i=Wp(t.target)?Zg(e.ct,t.target):ey(e.ct,t.target);const s=t.resumeToken.toBase64();return{targetId:t.targetId,canonicalId:Kp(t.target),readTime:n,resumeToken:s,lastListenSequenceNumber:t.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:i}}function by(e){const t=ty({parent:e.parent,structuredQuery:e.structuredQuery});return"LAST"===e.limitType?am(t,t.limit,"L"):t}function _y(e,t){return new ug(t.largestBatchId,Xg(e.ct,t.overlayMutation))}function Ey(e,t){const n=t.path.lastSegment();return[e,Xd(t.path.popLast()),n]}function Iy(e,t,n,r){return{indexId:e,uid:t.uid||"",sequenceNumber:n,readTime:my(r.readTime),documentKey:Xd(r.documentKey.path),largestBatchId:r.largestBatchId}}class ky{getBundleMetadata(e,t){return Sy(e).get(t).next((e=>{if(e)return function(e){return{id:e.bundleId,createTime:gy(e.createTime),version:e.version}}(e)}))}saveBundleMetadata(e,t){return Sy(e).put(function(e){return{bundleId:e.id,createTime:my(zg(e.createTime)),version:e.version}}(t))}getNamedQuery(e,t){return Ty(e).get(t).next((e=>{if(e)return function(e){return{name:e.name,query:by(e.bundledQuery),readTime:gy(e.readTime)}}(e)}))}saveNamedQuery(e,t){return Ty(e).put(function(e){return{name:e.name,readTime:my(zg(e.readTime)),bundledQuery:e.bundledQuery}}(t))}}function Sy(e){return xf(e,"bundles")}function Ty(e){return xf(e,"namedQueries")}class xy{constructor(e,t){this.serializer=e,this.userId=t}static lt(e,t){const n=t.uid||"";return new xy(e,n)}getOverlay(e,t){return Cy(e).get(Ey(this.userId,t)).next((e=>e?_y(this.serializer,e):null))}getOverlays(e,t){const n=_m();return Md.forEach(t,(t=>this.getOverlay(e,t).next((e=>{null!==e&&n.set(t,e)})))).next((()=>n))}saveOverlays(e,t,n){const r=[];return n.forEach(((n,i)=>{const s=new ug(t,i);r.push(this.ht(e,s))})),Md.waitFor(r)}removeOverlaysForBatchId(e,t,n){const r=new Set;t.forEach((e=>r.add(Xd(e.getCollectionPath()))));const i=[];return r.forEach((t=>{const r=IDBKeyRange.bound([this.userId,t,n],[this.userId,t,n+1],!1,!0);i.push(Cy(e).J("collectionPathOverlayIndex",r))})),Md.waitFor(i)}getOverlaysForCollection(e,t,n){const r=_m(),i=Xd(t),s=IDBKeyRange.bound([this.userId,i,n],[this.userId,i,Number.POSITIVE_INFINITY],!0);return Cy(e).G("collectionPathOverlayIndex",s).next((e=>{for(const t of e){const e=_y(this.serializer,t);r.set(e.getKey(),e)}return r}))}getOverlaysForCollectionGroup(e,t,n,r){const i=_m();let s;const o=IDBKeyRange.bound([this.userId,t,n],[this.userId,t,Number.POSITIVE_INFINITY],!0);return Cy(e).Z({index:"collectionGroupOverlayIndex",range:o},((e,t,n)=>{const o=_y(this.serializer,t);i.size()<r||o.largestBatchId===s?(i.set(o.getKey(),o),s=o.largestBatchId):n.done()})).next((()=>i))}ht(e,t){return Cy(e).put(function(e,t,n){const[r,i,s]=Ey(t,n.mutation.key);return{userId:t,collectionPath:i,documentId:s,collectionGroup:n.mutation.key.getCollectionGroup(),largestBatchId:n.largestBatchId,overlayMutation:Jg(e.ct,n.mutation)}}(this.serializer,this.userId,t))}}function Cy(e){return xf(e,"documentOverlays")}class Ay{constructor(){}Pt(e,t){this.It(e,t),t.Tt()}It(e,t){if("nullValue"in e)this.Et(t,5);else if("booleanValue"in e)this.Et(t,10),t.dt(e.booleanValue?1:0);else if("integerValue"in e)this.Et(t,15),t.dt(jf(e.integerValue));else if("doubleValue"in e){const n=jf(e.doubleValue);isNaN(n)?this.Et(t,13):(this.Et(t,15),Yd(n)?t.dt(0):t.dt(n))}else if("timestampValue"in e){const n=e.timestampValue;this.Et(t,20),"string"==typeof n?t.At(n):(t.At(`${n.seconds||""}`),t.dt(n.nanos||0))}else if("stringValue"in e)this.Rt(e.stringValue,t),this.Vt(t);else if("bytesValue"in e)this.Et(t,30),t.ft(qf(e.bytesValue)),this.Vt(t);else if("referenceValue"in e)this.gt(e.referenceValue,t);else if("geoPointValue"in e){const n=e.geoPointValue;this.Et(t,45),t.dt(n.latitude||0),t.dt(n.longitude||0)}else"mapValue"in e?hp(e)?this.Et(t,Number.MAX_SAFE_INTEGER):(this.yt(e.mapValue,t),this.Vt(t)):"arrayValue"in e?(this.wt(e.arrayValue,t),this.Vt(t)):Xh()}Rt(e,t){this.Et(t,25),this.St(e,t)}St(e,t){t.At(e)}yt(e,t){const n=e.fields||{};this.Et(t,55);for(const e of Object.keys(n))this.Rt(e,t),this.It(n[e],t)}wt(e,t){const n=e.values||[];this.Et(t,50);for(const e of n)this.It(e,t)}gt(e,t){this.Et(t,37),Id.fromName(e).path.forEach((e=>{this.Et(t,60),this.St(e,t)}))}Et(e,t){e.dt(t)}Vt(e){e.dt(2)}}function Ny(e){if(0===e)return 8;let t=0;return e>>4==0&&(t+=4,e<<=4),e>>6==0&&(t+=2,e<<=2),e>>7==0&&(t+=1),t}function Ry(e){const t=64-function(e){let t=0;for(let n=0;n<8;++n){const r=Ny(255&e[n]);if(t+=r,8!==r)break}return t}(e);return Math.ceil(t/8)}Ay.bt=new Ay;class Py{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Dt(e){const t=e[Symbol.iterator]();let n=t.next();for(;!n.done;)this.vt(n.value),n=t.next();this.Ct()}Ft(e){const t=e[Symbol.iterator]();let n=t.next();for(;!n.done;)this.Mt(n.value),n=t.next();this.xt()}Ot(e){for(const t of e){const e=t.charCodeAt(0);if(e<128)this.vt(e);else if(e<2048)this.vt(960|e>>>6),this.vt(128|63&e);else if(t<"\ud800"||"\udbff"<t)this.vt(480|e>>>12),this.vt(128|63&e>>>6),this.vt(128|63&e);else{const e=t.codePointAt(0);this.vt(240|e>>>18),this.vt(128|63&e>>>12),this.vt(128|63&e>>>6),this.vt(128|63&e)}}this.Ct()}Nt(e){for(const t of e){const e=t.charCodeAt(0);if(e<128)this.Mt(e);else if(e<2048)this.Mt(960|e>>>6),this.Mt(128|63&e);else if(t<"\ud800"||"\udbff"<t)this.Mt(480|e>>>12),this.Mt(128|63&e>>>6),this.Mt(128|63&e);else{const e=t.codePointAt(0);this.Mt(240|e>>>18),this.Mt(128|63&e>>>12),this.Mt(128|63&e>>>6),this.Mt(128|63&e)}}this.xt()}Bt(e){const t=this.Lt(e),n=Ry(t);this.kt(1+n),this.buffer[this.position++]=255&n;for(let e=t.length-n;e<t.length;++e)this.buffer[this.position++]=255&t[e]}qt(e){const t=this.Lt(e),n=Ry(t);this.kt(1+n),this.buffer[this.position++]=~(255&n);for(let e=t.length-n;e<t.length;++e)this.buffer[this.position++]=~(255&t[e])}Qt(){this.Kt(255),this.Kt(255)}$t(){this.Ut(255),this.Ut(255)}reset(){this.position=0}seed(e){this.kt(e.length),this.buffer.set(e,this.position),this.position+=e.length}Wt(){return this.buffer.slice(0,this.position)}Lt(e){const t=function(e){const t=new DataView(new ArrayBuffer(8));return t.setFloat64(0,e,!1),new Uint8Array(t.buffer)}(e),n=0!=(128&t[0]);t[0]^=n?255:128;for(let e=1;e<t.length;++e)t[e]^=n?255:0;return t}vt(e){const t=255&e;0===t?(this.Kt(0),this.Kt(255)):255===t?(this.Kt(255),this.Kt(0)):this.Kt(t)}Mt(e){const t=255&e;0===t?(this.Ut(0),this.Ut(255)):255===t?(this.Ut(255),this.Ut(0)):this.Ut(e)}Ct(){this.Kt(0),this.Kt(1)}xt(){this.Ut(0),this.Ut(1)}Kt(e){this.kt(1),this.buffer[this.position++]=e}Ut(e){this.kt(1),this.buffer[this.position++]=~e}kt(e){const t=e+this.position;if(t<=this.buffer.length)return;let n=2*this.buffer.length;n<t&&(n=t);const r=new Uint8Array(n);r.set(this.buffer),this.buffer=r}}class Dy{constructor(e){this.Gt=e}ft(e){this.Gt.Dt(e)}At(e){this.Gt.Ot(e)}dt(e){this.Gt.Bt(e)}Tt(){this.Gt.Qt()}}class Oy{constructor(e){this.Gt=e}ft(e){this.Gt.Ft(e)}At(e){this.Gt.Nt(e)}dt(e){this.Gt.qt(e)}Tt(){this.Gt.$t()}}class Ly{constructor(){this.Gt=new Py,this.zt=new Dy(this.Gt),this.jt=new Oy(this.Gt)}seed(e){this.Gt.seed(e)}Ht(e){return 0===e?this.zt:this.jt}Wt(){return this.Gt.Wt()}reset(){this.Gt.reset()}}class My{constructor(e,t,n,r){this.indexId=e,this.documentKey=t,this.arrayValue=n,this.directionalValue=r}Jt(){const e=this.directionalValue.length,t=0===e||255===this.directionalValue[e-1]?e+1:e,n=new Uint8Array(t);return n.set(this.directionalValue,0),t!==e?n.set([0],this.directionalValue.length):++n[n.length-1],new My(this.indexId,this.documentKey,this.arrayValue,n)}}function Fy(e,t){let n=e.indexId-t.indexId;return 0!==n?n:(n=Uy(e.arrayValue,t.arrayValue),0!==n?n:(n=Uy(e.directionalValue,t.directionalValue),0!==n?n:Id.comparator(e.documentKey,t.documentKey)))}function Uy(e,t){for(let n=0;n<e.length&&n<t.length;++n){const r=e[n]-t[n];if(0!==r)return r}return e.length-t.length}class Vy{constructor(e){this.collectionId=null!=e.collectionGroup?e.collectionGroup:e.path.lastSegment(),this.Yt=e.orderBy,this.Zt=[];for(const t of e.filters){const e=t;e.isInequality()?this.Xt=e:this.Zt.push(e)}}en(e){Zh(e.collectionGroup===this.collectionId);const t=Sd(e);if(void 0!==t&&!this.tn(t))return!1;const n=Td(e);let r=new Set,i=0,s=0;for(;i<n.length&&this.tn(n[i]);++i)r=r.add(n[i].fieldPath.canonicalString());if(i===n.length)return!0;if(void 0!==this.Xt){if(!r.has(this.Xt.field.canonicalString())){const e=n[i];if(!this.nn(this.Xt,e)||!this.rn(this.Yt[s++],e))return!1}++i}for(;i<n.length;++i){const e=n[i];if(s>=this.Yt.length||!this.rn(this.Yt[s++],e))return!1}return!0}tn(e){for(const t of this.Zt)if(this.nn(t,e))return!0;return!1}nn(e,t){if(void 0===e||!e.field.isEqual(t.fieldPath))return!1;const n="array-contains"===e.op||"array-contains-any"===e.op;return 2===t.kind===n}rn(e,t){return!!e.field.isEqual(t.fieldPath)&&(0===t.kind&&"asc"===e.dir||1===t.kind&&"desc"===e.dir)}}function zy(e){var t,n;if(Zh(e instanceof Sp||e instanceof Tp),e instanceof Sp){if(e instanceof zp){const r=(null===(n=null===(t=e.value.arrayValue)||void 0===t?void 0:t.values)||void 0===n?void 0:n.map((t=>Sp.create(e.field,"==",t))))||[];return Tp.create(r,"or")}return e}const r=e.filters.map((e=>zy(e)));return Tp.create(r,e.op)}function By(e){if(0===e.getFilters().length)return[];const t=Ky(zy(e));return Zh($y(t)),jy(t)||qy(t)?[t]:t.getFilters()}function jy(e){return e instanceof Sp}function qy(e){return e instanceof Tp&&Ap(e)}function $y(e){return jy(e)||qy(e)||function(e){if(e instanceof Tp&&Cp(e)){for(const t of e.getFilters())if(!jy(t)&&!qy(t))return!1;return!0}return!1}(e)}function Ky(e){if(Zh(e instanceof Sp||e instanceof Tp),e instanceof Sp)return e;if(1===e.filters.length)return Ky(e.filters[0]);const t=e.filters.map((e=>Ky(e)));let n=Tp.create(t,e.op);return n=Hy(n),$y(n)?n:(Zh(n instanceof Tp),Zh(xp(n)),Zh(n.filters.length>1),n.filters.reduce(((e,t)=>Gy(e,t))))}function Gy(e,t){let n;return Zh(e instanceof Sp||e instanceof Tp),Zh(t instanceof Sp||t instanceof Tp),n=e instanceof Sp?t instanceof Sp?function(e,t){return Tp.create([e,t],"and")}(e,t):Wy(e,t):t instanceof Sp?Wy(t,e):function(e,t){if(Zh(e.filters.length>0&&t.filters.length>0),xp(e)&&xp(t))return Dp(e,t.getFilters());const n=Cp(e)?e:t,r=Cp(e)?t:e,i=n.filters.map((e=>Gy(e,r)));return Tp.create(i,"or")}(e,t),Hy(n)}function Wy(e,t){if(xp(t))return Dp(t,e.getFilters());{const n=t.filters.map((t=>Gy(e,t)));return Tp.create(n,"or")}}function Hy(e){if(Zh(e instanceof Sp||e instanceof Tp),e instanceof Sp)return e;const t=e.getFilters();if(1===t.length)return Hy(t[0]);if(Np(e))return e;const n=t.map((e=>Hy(e))),r=[];return n.forEach((t=>{t instanceof Sp?r.push(t):t instanceof Tp&&(t.op===e.op?r.push(...t.filters):r.push(t))})),1===r.length?r[0]:Tp.create(r,e.op)}class Qy{constructor(){this.sn=new Yy}addToCollectionParentIndex(e,t){return this.sn.add(t),Md.resolve()}getCollectionParents(e,t){return Md.resolve(this.sn.getEntries(t))}addFieldIndex(e,t){return Md.resolve()}deleteFieldIndex(e,t){return Md.resolve()}getDocumentsMatchingTarget(e,t){return Md.resolve(null)}getIndexType(e,t){return Md.resolve(0)}getFieldIndexes(e,t){return Md.resolve([])}getNextCollectionGroupToUpdate(e){return Md.resolve(null)}getMinOffset(e,t){return Md.resolve(Rd.min())}getMinOffsetFromCollectionGroup(e,t){return Md.resolve(Rd.min())}updateCollectionGroup(e,t,n){return Md.resolve()}updateIndexEntries(e,t){return Md.resolve()}}class Yy{constructor(){this.index={}}add(e){const t=e.lastSegment(),n=e.popLast(),r=this.index[t]||new Of(bd.comparator),i=!r.has(n);return this.index[t]=r.add(n),i}has(e){const t=e.lastSegment(),n=e.popLast(),r=this.index[t];return r&&r.has(n)}getEntries(e){return(this.index[e]||new Of(bd.comparator)).toArray()}}const Jy=new Uint8Array(0);class Xy{constructor(e,t){this.user=e,this.databaseId=t,this.on=new Yy,this._n=new mm((e=>Kp(e)),((e,t)=>Gp(e,t))),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.on.has(t)){const n=t.lastSegment(),r=t.popLast();e.addOnCommittedListener((()=>{this.on.add(t)}));const i={collectionId:n,parent:Xd(r)};return Zy(e).put(i)}return Md.resolve()}getCollectionParents(e,t){const n=[],r=IDBKeyRange.bound([t,""],[gd(t),""],!1,!0);return Zy(e).G(r).next((e=>{for(const r of e){if(r.collectionId!==t)break;n.push(tf(r.parent))}return n}))}addFieldIndex(e,t){const n=tv(e),r=function(e){return{indexId:e.indexId,collectionGroup:e.collectionGroup,fields:e.fields.map((e=>[e.fieldPath.canonicalString(),e.kind]))}}(t);delete r.indexId;const i=n.add(r);if(t.indexState){const n=nv(e);return i.next((e=>{n.put(Iy(e,this.user,t.indexState.sequenceNumber,t.indexState.offset))}))}return i.next()}deleteFieldIndex(e,t){const n=tv(e),r=nv(e),i=ev(e);return n.delete(t.indexId).next((()=>r.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))).next((()=>i.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))))}getDocumentsMatchingTarget(e,t){const n=ev(e);let r=!0;const i=new Map;return Md.forEach(this.an(t),(t=>this.un(e,t).next((e=>{r&&(r=!!e),i.set(t,e)})))).next((()=>{if(r){let e=Tm();const r=[];return Md.forEach(i,((i,s)=>{Hh("IndexedDbIndexManager",`Using index ${function(e){return`id=${e.indexId}|cg=${e.collectionGroup}|f=${e.fields.map((e=>`${e.fieldPath}:${e.kind}`)).join(",")}`}(i)} to execute ${Kp(t)}`);const o=function(e,t){const n=Sd(t);if(void 0===n)return null;for(const t of Hp(e,n.fieldPath))switch(t.op){case"array-contains-any":return t.value.arrayValue.values||[];case"array-contains":return[t.value]}return null}(s,i),a=function(e,t){const n=new Map;for(const r of Td(t))for(const t of Hp(e,r.fieldPath))switch(t.op){case"==":case"in":n.set(r.fieldPath.canonicalString(),t.value);break;case"not-in":case"!=":return n.set(r.fieldPath.canonicalString(),t.value),Array.from(n.values())}return null}(s,i),l=function(e,t){const n=[];let r=!0;for(const i of Td(t)){const t=0===i.kind?Qp(e,i.fieldPath,e.startAt):Yp(e,i.fieldPath,e.startAt);n.push(t.value),r&&(r=t.inclusive)}return new wp(n,r)}(s,i),u=function(e,t){const n=[];let r=!0;for(const i of Td(t)){const t=0===i.kind?Yp(e,i.fieldPath,e.endAt):Qp(e,i.fieldPath,e.endAt);n.push(t.value),r&&(r=t.inclusive)}return new wp(n,r)}(s,i),c=this.cn(i,s,l),h=this.cn(i,s,u),d=this.ln(i,s,a),f=this.hn(i.indexId,o,c,l.inclusive,h,u.inclusive,d);return Md.forEach(f,(i=>n.H(i,t.limit).next((t=>{t.forEach((t=>{const n=Id.fromSegments(t.documentKey);e.has(n)||(e=e.add(n),r.push(n))}))}))))})).next((()=>r))}return Md.resolve(null)}))}an(e){let t=this._n.get(e);return t||(t=0===e.filters.length?[e]:By(Tp.create(e.filters,"and")).map((t=>$p(e.path,e.collectionGroup,e.orderBy,t.getFilters(),e.limit,e.startAt,e.endAt))),this._n.set(e,t),t)}hn(e,t,n,r,i,s,o){const a=(null!=t?t.length:1)*Math.max(n.length,i.length),l=a/(null!=t?t.length:1),u=[];for(let c=0;c<a;++c){const a=t?this.Pn(t[c/l]):Jy,h=this.In(e,a,n[c%l],r),d=this.Tn(e,a,i[c%l],s),f=o.map((t=>this.In(e,a,t,!0)));u.push(...this.createRange(h,d,f))}return u}In(e,t,n,r){const i=new My(e,Id.empty(),t,n);return r?i:i.Jt()}Tn(e,t,n,r){const i=new My(e,Id.empty(),t,n);return r?i.Jt():i}un(e,t){const n=new Vy(t),r=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,r).next((e=>{let t=null;for(const r of e)n.en(r)&&(!t||r.fields.length>t.fields.length)&&(t=r);return t}))}getIndexType(e,t){let n=2;const r=this.an(t);return Md.forEach(r,(t=>this.un(e,t).next((e=>{e?0!==n&&e.fields.length<function(e){let t=new Of(Ed.comparator),n=!1;for(const r of e.filters)for(const e of r.getFlattenedFilters())e.field.isKeyField()||("array-contains"===e.op||"array-contains-any"===e.op?n=!0:t=t.add(e.field));for(const n of e.orderBy)n.field.isKeyField()||(t=t.add(n.field));return t.size+(n?1:0)}(t)&&(n=1):n=0})))).next((()=>function(e){return null!==e.limit}(t)&&r.length>1&&2===n?1:n))}En(e,t){const n=new Ly;for(const r of Td(e)){const e=t.data.field(r.fieldPath);if(null==e)return null;const i=n.Ht(r.kind);Ay.bt.Pt(e,i)}return n.Wt()}Pn(e){const t=new Ly;return Ay.bt.Pt(e,t.Ht(0)),t.Wt()}dn(e,t){const n=new Ly;return Ay.bt.Pt(ip(this.databaseId,t),n.Ht(function(e){const t=Td(e);return 0===t.length?0:t[t.length-1].kind}(e))),n.Wt()}ln(e,t,n){if(null===n)return[];let r=[];r.push(new Ly);let i=0;for(const s of Td(e)){const e=n[i++];for(const n of r)if(this.An(t,s.fieldPath)&&op(e))r=this.Rn(r,s,e);else{const t=n.Ht(s.kind);Ay.bt.Pt(e,t)}}return this.Vn(r)}cn(e,t,n){return this.ln(e,t,n.position)}Vn(e){const t=[];for(let n=0;n<e.length;++n)t[n]=e[n].Wt();return t}Rn(e,t,n){const r=[...e],i=[];for(const e of n.arrayValue.values||[])for(const n of r){const r=new Ly;r.seed(n.Wt()),Ay.bt.Pt(e,r.Ht(t.kind)),i.push(r)}return i}An(e,t){return!!e.filters.find((e=>e instanceof Sp&&e.field.isEqual(t)&&("in"===e.op||"not-in"===e.op)))}getFieldIndexes(e,t){const n=tv(e),r=nv(e);return(t?n.G("collectionGroupIndex",IDBKeyRange.bound(t,t)):n.G()).next((e=>{const t=[];return Md.forEach(e,(e=>r.get([e.indexId,this.uid]).next((n=>{t.push(function(e,t){const n=t?new Cd(t.sequenceNumber,new Rd(gy(t.readTime),new Id(tf(t.documentKey)),t.largestBatchId)):Cd.empty(),r=e.fields.map((([e,t])=>new xd(Ed.fromServerFormat(e),t)));return new kd(e.indexId,e.collectionGroup,r,n)}(e,n))})))).next((()=>t))}))}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next((e=>0===e.length?null:(e.sort(((e,t)=>{const n=e.indexState.sequenceNumber-t.indexState.sequenceNumber;return 0!==n?n:pd(e.collectionGroup,t.collectionGroup)})),e[0].collectionGroup)))}updateCollectionGroup(e,t,n){const r=tv(e),i=nv(e);return this.mn(e).next((e=>r.G("collectionGroupIndex",IDBKeyRange.bound(t,t)).next((t=>Md.forEach(t,(t=>i.put(Iy(t.indexId,this.user,e,n))))))))}updateIndexEntries(e,t){const n=new Map;return Md.forEach(t,((t,r)=>{const i=n.get(t.collectionGroup);return(i?Md.resolve(i):this.getFieldIndexes(e,t.collectionGroup)).next((i=>(n.set(t.collectionGroup,i),Md.forEach(i,(n=>this.fn(e,t,n).next((t=>{const i=this.gn(r,n);return t.isEqual(i)?Md.resolve():this.pn(e,r,n,t,i)})))))))}))}yn(e,t,n,r){return ev(e).put({indexId:r.indexId,uid:this.uid,arrayValue:r.arrayValue,directionalValue:r.directionalValue,orderedDocumentKey:this.dn(n,t.key),documentKey:t.key.path.toArray()})}wn(e,t,n,r){return ev(e).delete([r.indexId,this.uid,r.arrayValue,r.directionalValue,this.dn(n,t.key),t.key.path.toArray()])}fn(e,t,n){const r=ev(e);let i=new Of(Fy);return r.Z({index:"documentKeyIndex",range:IDBKeyRange.only([n.indexId,this.uid,this.dn(n,t)])},((e,r)=>{i=i.add(new My(n.indexId,t,r.arrayValue,r.directionalValue))})).next((()=>i))}gn(e,t){let n=new Of(Fy);const r=this.En(t,e);if(null==r)return n;const i=Sd(t);if(null!=i){const s=e.data.field(i.fieldPath);if(op(s))for(const i of s.arrayValue.values||[])n=n.add(new My(t.indexId,e.key,this.Pn(i),r))}else n=n.add(new My(t.indexId,e.key,Jy,r));return n}pn(e,t,n,r,i){Hh("IndexedDbIndexManager","Updating index entries for document '%s'",t.key);const s=[];return function(e,t,n,r,i){const s=e.getIterator(),o=t.getIterator();let a=Mf(s),l=Mf(o);for(;a||l;){let e=!1,t=!1;if(a&&l){const r=n(a,l);r<0?t=!0:r>0&&(e=!0)}else null!=a?t=!0:e=!0;e?(r(l),l=Mf(o)):t?(i(a),a=Mf(s)):(a=Mf(s),l=Mf(o))}}(r,i,Fy,(r=>{s.push(this.yn(e,t,n,r))}),(r=>{s.push(this.wn(e,t,n,r))})),Md.waitFor(s)}mn(e){let t=1;return nv(e).Z({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},((e,n,r)=>{r.done(),t=n.sequenceNumber+1})).next((()=>t))}createRange(e,t,n){n=n.sort(((e,t)=>Fy(e,t))).filter(((e,t,n)=>!t||0!==Fy(e,n[t-1])));const r=[];r.push(e);for(const i of n){const n=Fy(i,e),s=Fy(i,t);if(0===n)r[0]=e.Jt();else if(n>0&&s<0)r.push(i),r.push(i.Jt());else if(s>0)break}r.push(t);const i=[];for(let e=0;e<r.length;e+=2){if(this.Sn(r[e],r[e+1]))return[];const t=[r[e].indexId,this.uid,r[e].arrayValue,r[e].directionalValue,Jy,[]],n=[r[e+1].indexId,this.uid,r[e+1].arrayValue,r[e+1].directionalValue,Jy,[]];i.push(IDBKeyRange.bound(t,n))}return i}Sn(e,t){return Fy(e,t)>0}getMinOffsetFromCollectionGroup(e,t){return this.getFieldIndexes(e,t).next(rv)}getMinOffset(e,t){return Md.mapArray(this.an(t),(t=>this.un(e,t).next((e=>e||Xh())))).next(rv)}}function Zy(e){return xf(e,"collectionParents")}function ev(e){return xf(e,"indexEntries")}function tv(e){return xf(e,"indexConfiguration")}function nv(e){return xf(e,"indexState")}function rv(e){Zh(0!==e.length);let t=e[0].indexState.offset,n=t.largestBatchId;for(let r=1;r<e.length;r++){const i=e[r].indexState.offset;Pd(i,t)<0&&(t=i),n<i.largestBatchId&&(n=i.largestBatchId)}return new Rd(t.readTime,t.documentKey,n)}const iv={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class sv{constructor(e,t,n){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=n}static withCacheSize(e){return new sv(e,sv.DEFAULT_COLLECTION_PERCENTILE,sv.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}function ov(e,t,n){const r=e.store("mutations"),i=e.store("documentMutations"),s=[],o=IDBKeyRange.only(n.batchId);let a=0;const l=r.Z({range:o},((e,t,n)=>(a++,n.delete())));s.push(l.next((()=>{Zh(1===a)})));const u=[];for(const e of n.mutations){const r=sf(t,e.key.path,n.batchId);s.push(i.delete(r)),u.push(e.key)}return Md.waitFor(s).next((()=>u))}function av(e){if(!e)return 0;let t;if(e.document)t=e.document;else if(e.unknownDocument)t=e.unknownDocument;else{if(!e.noDocument)throw Xh();t=e.noDocument}return JSON.stringify(t).length}sv.DEFAULT_COLLECTION_PERCENTILE=10,sv.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,sv.DEFAULT=new sv(41943040,sv.DEFAULT_COLLECTION_PERCENTILE,sv.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),sv.DISABLED=new sv(-1,0,0);class lv{constructor(e,t,n,r){this.userId=e,this.serializer=t,this.indexManager=n,this.referenceDelegate=r,this.bn={}}static lt(e,t,n,r){Zh(""!==e.uid);const i=e.isAuthenticated()?e.uid:"";return new lv(i,t,n,r)}checkEmpty(e){let t=!0;const n=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return cv(e).Z({index:"userMutationsIndex",range:n},((e,n,r)=>{t=!1,r.done()})).next((()=>t))}addMutationBatch(e,t,n,r){const i=hv(e),s=cv(e);return s.add({}).next((o=>{Zh("number"==typeof o);const a=new ag(o,t,n,r),l=function(e,t,n){const r=n.baseMutations.map((t=>Jg(e.ct,t))),i=n.mutations.map((t=>Jg(e.ct,t)));return{userId:t,batchId:n.batchId,localWriteTimeMs:n.localWriteTime.toMillis(),baseMutations:r,mutations:i}}(this.serializer,this.userId,a),u=[];let c=new Of(((e,t)=>pd(e.canonicalString(),t.canonicalString())));for(const e of r){const t=sf(this.userId,e.key.path,o);c=c.add(e.key.path.popLast()),u.push(s.put(l)),u.push(i.put(t,of))}return c.forEach((t=>{u.push(this.indexManager.addToCollectionParentIndex(e,t))})),e.addOnCommittedListener((()=>{this.bn[o]=a.keys()})),Md.waitFor(u).next((()=>a))}))}lookupMutationBatch(e,t){return cv(e).get(t).next((e=>e?(Zh(e.userId===this.userId),yy(this.serializer,e)):null))}Dn(e,t){return this.bn[t]?Md.resolve(this.bn[t]):this.lookupMutationBatch(e,t).next((e=>{if(e){const n=e.keys();return this.bn[t]=n,n}return null}))}getNextMutationBatchAfterBatchId(e,t){const n=t+1,r=IDBKeyRange.lowerBound([this.userId,n]);let i=null;return cv(e).Z({index:"userMutationsIndex",range:r},((e,t,r)=>{t.userId===this.userId&&(Zh(t.batchId>=n),i=yy(this.serializer,t)),r.done()})).next((()=>i))}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let n=-1;return cv(e).Z({index:"userMutationsIndex",range:t,reverse:!0},((e,t,r)=>{n=t.batchId,r.done()})).next((()=>n))}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return cv(e).G("userMutationsIndex",t).next((e=>e.map((e=>yy(this.serializer,e)))))}getAllMutationBatchesAffectingDocumentKey(e,t){const n=rf(this.userId,t.path),r=IDBKeyRange.lowerBound(n),i=[];return hv(e).Z({range:r},((n,r,s)=>{const[o,a,l]=n,u=tf(a);if(o===this.userId&&t.path.isEqual(u))return cv(e).get(l).next((e=>{if(!e)throw Xh();Zh(e.userId===this.userId),i.push(yy(this.serializer,e))}));s.done()})).next((()=>i))}getAllMutationBatchesAffectingDocumentKeys(e,t){let n=new Of(pd);const r=[];return t.forEach((t=>{const i=rf(this.userId,t.path),s=IDBKeyRange.lowerBound(i),o=hv(e).Z({range:s},((e,r,i)=>{const[s,o,a]=e,l=tf(o);s===this.userId&&t.path.isEqual(l)?n=n.add(a):i.done()}));r.push(o)})),Md.waitFor(r).next((()=>this.vn(e,n)))}getAllMutationBatchesAffectingQuery(e,t){const n=t.path,r=n.length+1,i=rf(this.userId,n),s=IDBKeyRange.lowerBound(i);let o=new Of(pd);return hv(e).Z({range:s},((e,t,i)=>{const[s,a,l]=e,u=tf(a);s===this.userId&&n.isPrefixOf(u)?u.length===r&&(o=o.add(l)):i.done()})).next((()=>this.vn(e,o)))}vn(e,t){const n=[],r=[];return t.forEach((t=>{r.push(cv(e).get(t).next((e=>{if(null===e)throw Xh();Zh(e.userId===this.userId),n.push(yy(this.serializer,e))})))})),Md.waitFor(r).next((()=>n))}removeMutationBatch(e,t){return ov(e.ue,this.userId,t).next((n=>(e.addOnCommittedListener((()=>{this.Cn(t.batchId)})),Md.forEach(n,(t=>this.referenceDelegate.markPotentiallyOrphaned(e,t))))))}Cn(e){delete this.bn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next((t=>{if(!t)return Md.resolve();const n=IDBKeyRange.lowerBound(function(e){return[e]}(this.userId)),r=[];return hv(e).Z({range:n},((e,t,n)=>{if(e[0]===this.userId){const t=tf(e[1]);r.push(t)}else n.done()})).next((()=>{Zh(0===r.length)}))}))}containsKey(e,t){return uv(e,this.userId,t)}Fn(e){return dv(e).get(this.userId).next((e=>e||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""}))}}function uv(e,t,n){const r=rf(t,n.path),i=r[1],s=IDBKeyRange.lowerBound(r);let o=!1;return hv(e).Z({range:s,Y:!0},((e,n,r)=>{const[s,a,l]=e;s===t&&a===i&&(o=!0),r.done()})).next((()=>o))}function cv(e){return xf(e,"mutations")}function hv(e){return xf(e,"documentMutations")}function dv(e){return xf(e,"mutationQueues")}class fv{constructor(e){this.Mn=e}next(){return this.Mn+=2,this.Mn}static xn(){return new fv(0)}static On(){return new fv(-1)}}class pv{constructor(e,t){this.referenceDelegate=e,this.serializer=t}allocateTargetId(e){return this.Nn(e).next((t=>{const n=new fv(t.highestTargetId);return t.highestTargetId=n.next(),this.Bn(e,t).next((()=>t.highestTargetId))}))}getLastRemoteSnapshotVersion(e){return this.Nn(e).next((e=>vd.fromTimestamp(new yd(e.lastRemoteSnapshotVersion.seconds,e.lastRemoteSnapshotVersion.nanoseconds))))}getHighestSequenceNumber(e){return this.Nn(e).next((e=>e.highestListenSequenceNumber))}setTargetsMetadata(e,t,n){return this.Nn(e).next((r=>(r.highestListenSequenceNumber=t,n&&(r.lastRemoteSnapshotVersion=n.toTimestamp()),t>r.highestListenSequenceNumber&&(r.highestListenSequenceNumber=t),this.Bn(e,r))))}addTargetData(e,t){return this.Ln(e,t).next((()=>this.Nn(e).next((n=>(n.targetCount+=1,this.kn(t,n),this.Bn(e,n))))))}updateTargetData(e,t){return this.Ln(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next((()=>mv(e).delete(t.targetId))).next((()=>this.Nn(e))).next((t=>(Zh(t.targetCount>0),t.targetCount-=1,this.Bn(e,t))))}removeTargets(e,t,n){let r=0;const i=[];return mv(e).Z(((s,o)=>{const a=vy(o);a.sequenceNumber<=t&&null===n.get(a.targetId)&&(r++,i.push(this.removeTargetData(e,a)))})).next((()=>Md.waitFor(i))).next((()=>r))}forEachTarget(e,t){return mv(e).Z(((e,n)=>{const r=vy(n);t(r)}))}Nn(e){return gv(e).get("targetGlobalKey").next((e=>(Zh(null!==e),e)))}Bn(e,t){return gv(e).put("targetGlobalKey",t)}Ln(e,t){return mv(e).put(wy(this.serializer,t))}kn(e,t){let n=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,n=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,n=!0),n}getTargetCount(e){return this.Nn(e).next((e=>e.targetCount))}getTargetData(e,t){const n=Kp(t),r=IDBKeyRange.bound([n,Number.NEGATIVE_INFINITY],[n,Number.POSITIVE_INFINITY]);let i=null;return mv(e).Z({range:r,index:"queryTargetsIndex"},((e,n,r)=>{const s=vy(n);Gp(t,s.target)&&(i=s,r.done())})).next((()=>i))}addMatchingKeys(e,t,n){const r=[],i=yv(e);return t.forEach((t=>{const s=Xd(t.path);r.push(i.put({targetId:n,path:s})),r.push(this.referenceDelegate.addReference(e,n,t))})),Md.waitFor(r)}removeMatchingKeys(e,t,n){const r=yv(e);return Md.forEach(t,(t=>{const i=Xd(t.path);return Md.waitFor([r.delete([n,i]),this.referenceDelegate.removeReference(e,n,t)])}))}removeMatchingKeysForTargetId(e,t){const n=yv(e),r=IDBKeyRange.bound([t],[t+1],!1,!0);return n.delete(r)}getMatchingKeysForTargetId(e,t){const n=IDBKeyRange.bound([t],[t+1],!1,!0),r=yv(e);let i=Tm();return r.Z({range:n,Y:!0},((e,t,n)=>{const r=tf(e[1]),s=new Id(r);i=i.add(s)})).next((()=>i))}containsKey(e,t){const n=Xd(t.path),r=IDBKeyRange.bound([n],[gd(n)],!1,!0);let i=0;return yv(e).Z({index:"documentTargetsIndex",Y:!0,range:r},(([e,t],n,r)=>{0!==e&&(i++,r.done())})).next((()=>i>0))}ut(e,t){return mv(e).get(t).next((e=>e?vy(e):null))}}function mv(e){return xf(e,"targets")}function gv(e){return xf(e,"targetGlobal")}function yv(e){return xf(e,"targetDocuments")}function vv([e,t],[n,r]){const i=pd(e,n);return 0===i?pd(t,r):i}class wv{constructor(e){this.qn=e,this.buffer=new Of(vv),this.Qn=0}Kn(){return++this.Qn}$n(e){const t=[e,this.Kn()];if(this.buffer.size<this.qn)this.buffer=this.buffer.add(t);else{const e=this.buffer.last();vv(t,e)<0&&(this.buffer=this.buffer.delete(e).add(t))}}get maxValue(){return this.buffer.last()[0]}}class bv{constructor(e,t,n){this.garbageCollector=e,this.asyncQueue=t,this.localStore=n,this.Un=null}start(){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.Wn(6e4)}stop(){this.Un&&(this.Un.cancel(),this.Un=null)}get started(){return null!==this.Un}Wn(e){Hh("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.Un=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Un=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(e){Bd(e)?Hh("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",e):await Ld(e)}await this.Wn(3e5)}))}}class _v{constructor(e,t){this.Gn=e,this.params=t}calculateTargetCount(e,t){return this.Gn.zn(e).next((e=>Math.floor(t/100*e)))}nthSequenceNumber(e,t){if(0===t)return Md.resolve(Hd.ae);const n=new wv(t);return this.Gn.forEachTarget(e,(e=>n.$n(e.sequenceNumber))).next((()=>this.Gn.jn(e,(e=>n.$n(e))))).next((()=>n.maxValue))}removeTargets(e,t,n){return this.Gn.removeTargets(e,t,n)}removeOrphanedDocuments(e,t){return this.Gn.removeOrphanedDocuments(e,t)}collect(e,t){return-1===this.params.cacheSizeCollectionThreshold?(Hh("LruGarbageCollector","Garbage collection skipped; disabled"),Md.resolve(iv)):this.getCacheSize(e).next((n=>n<this.params.cacheSizeCollectionThreshold?(Hh("LruGarbageCollector",`Garbage collection skipped; Cache size ${n} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),iv):this.Hn(e,t)))}getCacheSize(e){return this.Gn.getCacheSize(e)}Hn(e,t){let n,r,i,s,o,a,l;const u=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((t=>(t>this.params.maximumSequenceNumbersToCollect?(Hh("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${t}`),r=this.params.maximumSequenceNumbersToCollect):r=t,s=Date.now(),this.nthSequenceNumber(e,r)))).next((r=>(n=r,o=Date.now(),this.removeTargets(e,n,t)))).next((t=>(i=t,a=Date.now(),this.removeOrphanedDocuments(e,n)))).next((e=>(l=Date.now(),Wh()<=qt.DEBUG&&Hh("LruGarbageCollector",`LRU Garbage Collection\n\tCounted targets in ${s-u}ms\n\tDetermined least recently used ${r} in `+(o-s)+"ms\n"+`\tRemoved ${i} targets in `+(a-o)+"ms\n"+`\tRemoved ${e} documents in `+(l-a)+"ms\n"+`Total Duration: ${l-u}ms`),Md.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:i,documentsRemoved:e}))))}}class Ev{constructor(e,t){this.db=e,this.garbageCollector=function(e,t){return new _v(e,t)}(this,t)}zn(e){const t=this.Jn(e);return this.db.getTargetCache().getTargetCount(e).next((e=>t.next((t=>e+t))))}Jn(e){let t=0;return this.jn(e,(e=>{t++})).next((()=>t))}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}jn(e,t){return this.Yn(e,((e,n)=>t(n)))}addReference(e,t,n){return Iv(e,n)}removeReference(e,t,n){return Iv(e,n)}removeTargets(e,t,n){return this.db.getTargetCache().removeTargets(e,t,n)}markPotentiallyOrphaned(e,t){return Iv(e,t)}Zn(e,t){return function(e,t){let n=!1;return dv(e).X((r=>uv(e,r,t).next((e=>(e&&(n=!0),Md.resolve(!e)))))).next((()=>n))}(e,t)}removeOrphanedDocuments(e,t){const n=this.db.getRemoteDocumentCache().newChangeBuffer(),r=[];let i=0;return this.Yn(e,((s,o)=>{if(o<=t){const t=this.Zn(e,s).next((t=>{if(!t)return i++,n.getEntry(e,s).next((()=>(n.removeEntry(s,vd.min()),yv(e).delete(function(e){return[0,Xd(e.path)]}(s)))))}));r.push(t)}})).next((()=>Md.waitFor(r))).next((()=>n.apply(e))).next((()=>i))}removeTarget(e,t){const n=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,n)}updateLimboDocument(e,t){return Iv(e,t)}Yn(e,t){const n=yv(e);let r,i=Hd.ae;return n.Z({index:"documentTargetsIndex"},(([e,n],{path:s,sequenceNumber:o})=>{0===e?(i!==Hd.ae&&t(new Id(tf(r)),i),i=o,r=s):i=Hd.ae})).next((()=>{i!==Hd.ae&&t(new Id(tf(r)),i)}))}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function Iv(e,t){return yv(e).put(function(e,t){return{targetId:0,path:Xd(e.path),sequenceNumber:t}}(t,e.currentSequenceNumber))}class kv{constructor(){this.changes=new mm((e=>e.toString()),((e,t)=>e.isEqual(t))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,vp.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const n=this.changes.get(t);return void 0!==n?Md.resolve(n):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class Sv{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,n){return Av(e).put(n)}removeEntry(e,t,n){return Av(e).delete(function(e,t){const n=e.path.toArray();return[n.slice(0,n.length-2),n[n.length-2],py(t),n[n.length-1]]}(t,n))}updateMetadata(e,t){return this.getMetadata(e).next((n=>(n.byteSize+=t,this.Xn(e,n))))}getEntry(e,t){let n=vp.newInvalidDocument(t);return Av(e).Z({index:"documentKeyIndex",range:IDBKeyRange.only(Nv(t))},((e,r)=>{n=this.er(t,r)})).next((()=>n))}tr(e,t){let n={size:0,document:vp.newInvalidDocument(t)};return Av(e).Z({index:"documentKeyIndex",range:IDBKeyRange.only(Nv(t))},((e,r)=>{n={document:this.er(t,r),size:av(r)}})).next((()=>n))}getEntries(e,t){let n=ym();return this.nr(e,t,((e,t)=>{const r=this.er(e,t);n=n.insert(e,r)})).next((()=>n))}rr(e,t){let n=ym(),r=new Rf(Id.comparator);return this.nr(e,t,((e,t)=>{const i=this.er(e,t);n=n.insert(e,i),r=r.insert(e,av(t))})).next((()=>({documents:n,ir:r})))}nr(e,t,n){if(t.isEmpty())return Md.resolve();let r=new Of(Pv);t.forEach((e=>r=r.add(e)));const i=IDBKeyRange.bound(Nv(r.first()),Nv(r.last())),s=r.getIterator();let o=s.getNext();return Av(e).Z({index:"documentKeyIndex",range:i},((e,t,r)=>{const i=Id.fromSegments([...t.prefixPath,t.collectionGroup,t.documentId]);for(;o&&Pv(o,i)<0;)n(o,null),o=s.getNext();o&&o.isEqual(i)&&(n(o,t),o=s.hasNext()?s.getNext():null),o?r.W(Nv(o)):r.done()})).next((()=>{for(;o;)n(o,null),o=s.hasNext()?s.getNext():null}))}getDocumentsMatchingQuery(e,t,n,r){const i=t.path,s=[i.popLast().toArray(),i.lastSegment(),py(n.readTime),n.documentKey.path.isEmpty()?"":n.documentKey.path.lastSegment()],o=[i.popLast().toArray(),i.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return Av(e).G(IDBKeyRange.bound(s,o,!0)).next((e=>{let n=ym();for(const i of e){const e=this.er(Id.fromSegments(i.prefixPath.concat(i.collectionGroup,i.documentId)),i);e.isFoundDocument()&&(hm(t,e)||r.has(e.key))&&(n=n.insert(e.key,e))}return n}))}getAllFromCollectionGroup(e,t,n,r){let i=ym();const s=Rv(t,n),o=Rv(t,Rd.max());return Av(e).Z({index:"collectionGroupIndex",range:IDBKeyRange.bound(s,o,!0)},((e,t,n)=>{const s=this.er(Id.fromSegments(t.prefixPath.concat(t.collectionGroup,t.documentId)),t);i=i.insert(s.key,s),i.size===r&&n.done()})).next((()=>i))}newChangeBuffer(e){return new xv(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next((e=>e.byteSize))}getMetadata(e){return Cv(e).get("remoteDocumentGlobalKey").next((e=>(Zh(!!e),e)))}Xn(e,t){return Cv(e).put("remoteDocumentGlobalKey",t)}er(e,t){if(t){const e=function(e,t){let n;if(t.document)n=Yg(e.ct,t.document,!!t.hasCommittedMutations);else if(t.noDocument){const e=Id.fromSegments(t.noDocument.path),r=gy(t.noDocument.readTime);n=vp.newNoDocument(e,r),t.hasCommittedMutations&&n.setHasCommittedMutations()}else{if(!t.unknownDocument)return Xh();{const e=Id.fromSegments(t.unknownDocument.path),r=gy(t.unknownDocument.version);n=vp.newUnknownDocument(e,r)}}return t.readTime&&n.setReadTime(function(e){const t=new yd(e[0],e[1]);return vd.fromTimestamp(t)}(t.readTime)),n}(this.serializer,t);if(!e.isNoDocument()||!e.version.isEqual(vd.min()))return e}return vp.newInvalidDocument(e)}}function Tv(e){return new Sv(e)}class xv extends kv{constructor(e,t){super(),this.sr=e,this.trackRemovals=t,this._r=new mm((e=>e.toString()),((e,t)=>e.isEqual(t)))}applyChanges(e){const t=[];let n=0,r=new Of(((e,t)=>pd(e.canonicalString(),t.canonicalString())));return this.changes.forEach(((i,s)=>{const o=this._r.get(i);if(t.push(this.sr.removeEntry(e,i,o.readTime)),s.isValidDocument()){const a=fy(this.sr.serializer,s);r=r.add(i.path.popLast());const l=av(a);n+=l-o.size,t.push(this.sr.addEntry(e,i,a))}else if(n-=o.size,this.trackRemovals){const n=fy(this.sr.serializer,s.convertToNoDocument(vd.min()));t.push(this.sr.addEntry(e,i,n))}})),r.forEach((n=>{t.push(this.sr.indexManager.addToCollectionParentIndex(e,n))})),t.push(this.sr.updateMetadata(e,n)),Md.waitFor(t)}getFromCache(e,t){return this.sr.tr(e,t).next((e=>(this._r.set(t,{size:e.size,readTime:e.document.readTime}),e.document)))}getAllFromCache(e,t){return this.sr.rr(e,t).next((({documents:e,ir:t})=>(t.forEach(((t,n)=>{this._r.set(t,{size:n,readTime:e.get(t).readTime})})),e)))}}function Cv(e){return xf(e,"remoteDocumentGlobal")}function Av(e){return xf(e,"remoteDocumentsV14")}function Nv(e){const t=e.path.toArray();return[t.slice(0,t.length-2),t[t.length-2],t[t.length-1]]}function Rv(e,t){const n=t.documentKey.path.toArray();return[e,py(t.readTime),n.slice(0,n.length-2),n.length>0?n[n.length-1]:""]}function Pv(e,t){const n=e.path.toArray(),r=t.path.toArray();let i=0;for(let e=0;e<n.length-2&&e<r.length-2;++e)if(i=pd(n[e],r[e]),i)return i;return i=pd(n.length,r.length),i||(i=pd(n[n.length-2],r[r.length-2]),i||pd(n[n.length-1],r[r.length-1]))}class Dv{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}class Ov{constructor(e,t,n,r){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=n,this.indexManager=r}getDocument(e,t){let n=null;return this.documentOverlayCache.getOverlay(e,t).next((r=>(n=r,this.remoteDocumentCache.getEntry(e,t)))).next((e=>(null!==n&&Jm(n.mutation,e,Ff.empty(),yd.now()),e)))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next((t=>this.getLocalViewOfDocuments(e,t,Tm()).next((()=>t))))}getLocalViewOfDocuments(e,t,n=Tm()){const r=_m();return this.populateOverlays(e,r,t).next((()=>this.computeViews(e,t,r,n).next((e=>{let t=wm();return e.forEach(((e,n)=>{t=t.insert(e,n.overlayedDocument)})),t}))))}getOverlayedDocuments(e,t){const n=_m();return this.populateOverlays(e,n,t).next((()=>this.computeViews(e,t,n,Tm())))}populateOverlays(e,t,n){const r=[];return n.forEach((e=>{t.has(e)||r.push(e)})),this.documentOverlayCache.getOverlays(e,r).next((e=>{e.forEach(((e,n)=>{t.set(e,n)}))}))}computeViews(e,t,n,r){let i=ym();const s=Im(),o=Im();return t.forEach(((e,t)=>{const o=n.get(t.key);r.has(t.key)&&(void 0===o||o.mutation instanceof tg)?i=i.insert(t.key,t):void 0!==o?(s.set(t.key,o.mutation.getFieldMask()),Jm(o.mutation,t,o.mutation.getFieldMask(),yd.now())):s.set(t.key,Ff.empty())})),this.recalculateAndSaveOverlays(e,i).next((e=>(e.forEach(((e,t)=>s.set(e,t))),t.forEach(((e,t)=>{var n;return o.set(e,new Dv(t,null!==(n=s.get(e))&&void 0!==n?n:null))})),o)))}recalculateAndSaveOverlays(e,t){const n=Im();let r=new Rf(((e,t)=>e-t)),i=Tm();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next((e=>{for(const i of e)i.keys().forEach((e=>{const s=t.get(e);if(null===s)return;let o=n.get(e)||Ff.empty();o=i.applyToLocalView(s,o),n.set(e,o);const a=(r.get(i.batchId)||Tm()).add(e);r=r.insert(i.batchId,a)}))})).next((()=>{const s=[],o=r.getReverseIterator();for(;o.hasNext();){const r=o.getNext(),a=r.key,l=r.value,u=Em();l.forEach((e=>{if(!i.has(e)){const r=Qm(t.get(e),n.get(e));null!==r&&u.set(e,r),i=i.add(e)}})),s.push(this.documentOverlayCache.saveOverlays(e,a,u))}return Md.waitFor(s)})).next((()=>n))}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next((t=>this.recalculateAndSaveOverlays(e,t)))}getDocumentsMatchingQuery(e,t,n){return function(e){return Id.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):rm(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,n):this.getDocumentsMatchingCollectionQuery(e,t,n)}getNextDocuments(e,t,n,r){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,n,r).next((i=>{const s=r-i.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,n.largestBatchId,r-i.size):Md.resolve(_m());let o=-1,a=i;return s.next((t=>Md.forEach(t,((t,n)=>(o<n.largestBatchId&&(o=n.largestBatchId),i.get(t)?Md.resolve():this.remoteDocumentCache.getEntry(e,t).next((e=>{a=a.insert(t,e)}))))).next((()=>this.populateOverlays(e,t,i))).next((()=>this.computeViews(e,a,t,Tm()))).next((e=>({batchId:o,changes:bm(e)})))))}))}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new Id(t)).next((e=>{let t=wm();return e.isFoundDocument()&&(t=t.insert(e.key,e)),t}))}getDocumentsMatchingCollectionGroupQuery(e,t,n){const r=t.collectionGroup;let i=wm();return this.indexManager.getCollectionParents(e,r).next((s=>Md.forEach(s,(s=>{const o=function(e,t){return new Jp(t,null,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(t,s.child(r));return this.getDocumentsMatchingCollectionQuery(e,o,n).next((e=>{e.forEach(((e,t)=>{i=i.insert(e,t)}))}))})).next((()=>i))))}getDocumentsMatchingCollectionQuery(e,t,n){let r;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,n.largestBatchId).next((i=>(r=i,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,n,r)))).next((e=>{r.forEach(((t,n)=>{const r=n.getKey();null===e.get(r)&&(e=e.insert(r,vp.newInvalidDocument(r)))}));let n=wm();return e.forEach(((e,i)=>{const s=r.get(e);void 0!==s&&Jm(s.mutation,i,Ff.empty(),yd.now()),hm(t,i)&&(n=n.insert(e,i))})),n}))}}class Lv{constructor(e){this.serializer=e,this.ar=new Map,this.ur=new Map}getBundleMetadata(e,t){return Md.resolve(this.ar.get(t))}saveBundleMetadata(e,t){return this.ar.set(t.id,function(e){return{id:e.id,version:e.version,createTime:zg(e.createTime)}}(t)),Md.resolve()}getNamedQuery(e,t){return Md.resolve(this.ur.get(t))}saveNamedQuery(e,t){return this.ur.set(t.name,function(e){return{name:e.name,query:by(e.bundledQuery),readTime:zg(e.readTime)}}(t)),Md.resolve()}}class Mv{constructor(){this.overlays=new Rf(Id.comparator),this.cr=new Map}getOverlay(e,t){return Md.resolve(this.overlays.get(t))}getOverlays(e,t){const n=_m();return Md.forEach(t,(t=>this.getOverlay(e,t).next((e=>{null!==e&&n.set(t,e)})))).next((()=>n))}saveOverlays(e,t,n){return n.forEach(((n,r)=>{this.ht(e,t,r)})),Md.resolve()}removeOverlaysForBatchId(e,t,n){const r=this.cr.get(n);return void 0!==r&&(r.forEach((e=>this.overlays=this.overlays.remove(e))),this.cr.delete(n)),Md.resolve()}getOverlaysForCollection(e,t,n){const r=_m(),i=t.length+1,s=new Id(t.child("")),o=this.overlays.getIteratorFrom(s);for(;o.hasNext();){const e=o.getNext().value,s=e.getKey();if(!t.isPrefixOf(s.path))break;s.path.length===i&&e.largestBatchId>n&&r.set(e.getKey(),e)}return Md.resolve(r)}getOverlaysForCollectionGroup(e,t,n,r){let i=new Rf(((e,t)=>e-t));const s=this.overlays.getIterator();for(;s.hasNext();){const e=s.getNext().value;if(e.getKey().getCollectionGroup()===t&&e.largestBatchId>n){let t=i.get(e.largestBatchId);null===t&&(t=_m(),i=i.insert(e.largestBatchId,t)),t.set(e.getKey(),e)}}const o=_m(),a=i.getIterator();for(;a.hasNext()&&(a.getNext().value.forEach(((e,t)=>o.set(e,t))),!(o.size()>=r)););return Md.resolve(o)}ht(e,t,n){const r=this.overlays.get(n.key);if(null!==r){const e=this.cr.get(r.largestBatchId).delete(n.key);this.cr.set(r.largestBatchId,e)}this.overlays=this.overlays.insert(n.key,new ug(t,n));let i=this.cr.get(t);void 0===i&&(i=Tm(),this.cr.set(t,i)),this.cr.set(t,i.add(n.key))}}class Fv{constructor(){this.lr=new Of(Uv.hr),this.Pr=new Of(Uv.Ir)}isEmpty(){return this.lr.isEmpty()}addReference(e,t){const n=new Uv(e,t);this.lr=this.lr.add(n),this.Pr=this.Pr.add(n)}Tr(e,t){e.forEach((e=>this.addReference(e,t)))}removeReference(e,t){this.Er(new Uv(e,t))}dr(e,t){e.forEach((e=>this.removeReference(e,t)))}Ar(e){const t=new Id(new bd([])),n=new Uv(t,e),r=new Uv(t,e+1),i=[];return this.Pr.forEachInRange([n,r],(e=>{this.Er(e),i.push(e.key)})),i}Rr(){this.lr.forEach((e=>this.Er(e)))}Er(e){this.lr=this.lr.delete(e),this.Pr=this.Pr.delete(e)}Vr(e){const t=new Id(new bd([])),n=new Uv(t,e),r=new Uv(t,e+1);let i=Tm();return this.Pr.forEachInRange([n,r],(e=>{i=i.add(e.key)})),i}containsKey(e){const t=new Uv(e,0),n=this.lr.firstAfterOrEqual(t);return null!==n&&e.isEqual(n.key)}}class Uv{constructor(e,t){this.key=e,this.mr=t}static hr(e,t){return Id.comparator(e.key,t.key)||pd(e.mr,t.mr)}static Ir(e,t){return pd(e.mr,t.mr)||Id.comparator(e.key,t.key)}}class Vv{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.gr=1,this.pr=new Of(Uv.hr)}checkEmpty(e){return Md.resolve(0===this.mutationQueue.length)}addMutationBatch(e,t,n,r){const i=this.gr;this.gr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const s=new ag(i,t,n,r);this.mutationQueue.push(s);for(const t of r)this.pr=this.pr.add(new Uv(t.key,i)),this.indexManager.addToCollectionParentIndex(e,t.key.path.popLast());return Md.resolve(s)}lookupMutationBatch(e,t){return Md.resolve(this.yr(t))}getNextMutationBatchAfterBatchId(e,t){const n=t+1,r=this.wr(n),i=r<0?0:r;return Md.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}getHighestUnacknowledgedBatchId(){return Md.resolve(0===this.mutationQueue.length?-1:this.gr-1)}getAllMutationBatches(e){return Md.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const n=new Uv(t,0),r=new Uv(t,Number.POSITIVE_INFINITY),i=[];return this.pr.forEachInRange([n,r],(e=>{const t=this.yr(e.mr);i.push(t)})),Md.resolve(i)}getAllMutationBatchesAffectingDocumentKeys(e,t){let n=new Of(pd);return t.forEach((e=>{const t=new Uv(e,0),r=new Uv(e,Number.POSITIVE_INFINITY);this.pr.forEachInRange([t,r],(e=>{n=n.add(e.mr)}))})),Md.resolve(this.Sr(n))}getAllMutationBatchesAffectingQuery(e,t){const n=t.path,r=n.length+1;let i=n;Id.isDocumentKey(i)||(i=i.child(""));const s=new Uv(new Id(i),0);let o=new Of(pd);return this.pr.forEachWhile((e=>{const t=e.key.path;return!!n.isPrefixOf(t)&&(t.length===r&&(o=o.add(e.mr)),!0)}),s),Md.resolve(this.Sr(o))}Sr(e){const t=[];return e.forEach((e=>{const n=this.yr(e);null!==n&&t.push(n)})),t}removeMutationBatch(e,t){Zh(0===this.br(t.batchId,"removed")),this.mutationQueue.shift();let n=this.pr;return Md.forEach(t.mutations,(r=>{const i=new Uv(r.key,t.batchId);return n=n.delete(i),this.referenceDelegate.markPotentiallyOrphaned(e,r.key)})).next((()=>{this.pr=n}))}Cn(e){}containsKey(e,t){const n=new Uv(t,0),r=this.pr.firstAfterOrEqual(n);return Md.resolve(t.isEqual(r&&r.key))}performConsistencyCheck(e){return this.mutationQueue.length,Md.resolve()}br(e,t){return this.wr(e)}wr(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}yr(e){const t=this.wr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}class zv{constructor(e){this.Dr=e,this.docs=new Rf(Id.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const n=t.key,r=this.docs.get(n),i=r?r.size:0,s=this.Dr(t);return this.docs=this.docs.insert(n,{document:t.mutableCopy(),size:s}),this.size+=s-i,this.indexManager.addToCollectionParentIndex(e,n.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const n=this.docs.get(t);return Md.resolve(n?n.document.mutableCopy():vp.newInvalidDocument(t))}getEntries(e,t){let n=ym();return t.forEach((e=>{const t=this.docs.get(e);n=n.insert(e,t?t.document.mutableCopy():vp.newInvalidDocument(e))})),Md.resolve(n)}getDocumentsMatchingQuery(e,t,n,r){let i=ym();const s=t.path,o=new Id(s.child("")),a=this.docs.getIteratorFrom(o);for(;a.hasNext();){const{key:e,value:{document:o}}=a.getNext();if(!s.isPrefixOf(e.path))break;e.path.length>s.length+1||Pd(Nd(o),n)<=0||(r.has(o.key)||hm(t,o))&&(i=i.insert(o.key,o.mutableCopy()))}return Md.resolve(i)}getAllFromCollectionGroup(e,t,n,r){Xh()}vr(e,t){return Md.forEach(this.docs,(e=>t(e)))}newChangeBuffer(e){return new Bv(this)}getSize(e){return Md.resolve(this.size)}}class Bv extends kv{constructor(e){super(),this.sr=e}applyChanges(e){const t=[];return this.changes.forEach(((n,r)=>{r.isValidDocument()?t.push(this.sr.addEntry(e,r)):this.sr.removeEntry(n)})),Md.waitFor(t)}getFromCache(e,t){return this.sr.getEntry(e,t)}getAllFromCache(e,t){return this.sr.getEntries(e,t)}}class jv{constructor(e){this.persistence=e,this.Cr=new mm((e=>Kp(e)),Gp),this.lastRemoteSnapshotVersion=vd.min(),this.highestTargetId=0,this.Fr=0,this.Mr=new Fv,this.targetCount=0,this.Or=fv.xn()}forEachTarget(e,t){return this.Cr.forEach(((e,n)=>t(n))),Md.resolve()}getLastRemoteSnapshotVersion(e){return Md.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return Md.resolve(this.Fr)}allocateTargetId(e){return this.highestTargetId=this.Or.next(),Md.resolve(this.highestTargetId)}setTargetsMetadata(e,t,n){return n&&(this.lastRemoteSnapshotVersion=n),t>this.Fr&&(this.Fr=t),Md.resolve()}Ln(e){this.Cr.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.Or=new fv(t),this.highestTargetId=t),e.sequenceNumber>this.Fr&&(this.Fr=e.sequenceNumber)}addTargetData(e,t){return this.Ln(t),this.targetCount+=1,Md.resolve()}updateTargetData(e,t){return this.Ln(t),Md.resolve()}removeTargetData(e,t){return this.Cr.delete(t.target),this.Mr.Ar(t.targetId),this.targetCount-=1,Md.resolve()}removeTargets(e,t,n){let r=0;const i=[];return this.Cr.forEach(((s,o)=>{o.sequenceNumber<=t&&null===n.get(o.targetId)&&(this.Cr.delete(s),i.push(this.removeMatchingKeysForTargetId(e,o.targetId)),r++)})),Md.waitFor(i).next((()=>r))}getTargetCount(e){return Md.resolve(this.targetCount)}getTargetData(e,t){const n=this.Cr.get(t)||null;return Md.resolve(n)}addMatchingKeys(e,t,n){return this.Mr.Tr(t,n),Md.resolve()}removeMatchingKeys(e,t,n){this.Mr.dr(t,n);const r=this.persistence.referenceDelegate,i=[];return r&&t.forEach((t=>{i.push(r.markPotentiallyOrphaned(e,t))})),Md.waitFor(i)}removeMatchingKeysForTargetId(e,t){return this.Mr.Ar(t),Md.resolve()}getMatchingKeysForTargetId(e,t){const n=this.Mr.Vr(t);return Md.resolve(n)}containsKey(e,t){return Md.resolve(this.Mr.containsKey(t))}}class qv{constructor(e,t){this.Nr={},this.overlays={},this.Br=new Hd(0),this.Lr=!1,this.Lr=!0,this.referenceDelegate=e(this),this.kr=new jv(this),this.indexManager=new Qy,this.remoteDocumentCache=function(e){return new zv(e)}((e=>this.referenceDelegate.qr(e))),this.serializer=new dy(t),this.Qr=new Lv(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Lr=!1,Promise.resolve()}get started(){return this.Lr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new Mv,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let n=this.Nr[e.toKey()];return n||(n=new Vv(t,this.referenceDelegate),this.Nr[e.toKey()]=n),n}getTargetCache(){return this.kr}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Qr}runTransaction(e,t,n){Hh("MemoryPersistence","Starting transaction:",e);const r=new $v(this.Br.next());return this.referenceDelegate.Kr(),n(r).next((e=>this.referenceDelegate.$r(r).next((()=>e)))).toPromise().then((e=>(r.raiseOnCommittedEvent(),e)))}Ur(e,t){return Md.or(Object.values(this.Nr).map((n=>()=>n.containsKey(e,t))))}}class $v extends Od{constructor(e){super(),this.currentSequenceNumber=e}}class Kv{constructor(e){this.persistence=e,this.Wr=new Fv,this.Gr=null}static zr(e){return new Kv(e)}get jr(){if(this.Gr)return this.Gr;throw Xh()}addReference(e,t,n){return this.Wr.addReference(n,t),this.jr.delete(n.toString()),Md.resolve()}removeReference(e,t,n){return this.Wr.removeReference(n,t),this.jr.add(n.toString()),Md.resolve()}markPotentiallyOrphaned(e,t){return this.jr.add(t.toString()),Md.resolve()}removeTarget(e,t){this.Wr.Ar(t.targetId).forEach((e=>this.jr.add(e.toString())));const n=this.persistence.getTargetCache();return n.getMatchingKeysForTargetId(e,t.targetId).next((e=>{e.forEach((e=>this.jr.add(e.toString())))})).next((()=>n.removeTargetData(e,t)))}Kr(){this.Gr=new Set}$r(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Md.forEach(this.jr,(n=>{const r=Id.fromPath(n);return this.Hr(e,r).next((e=>{e||t.removeEntry(r,vd.min())}))})).next((()=>(this.Gr=null,t.apply(e))))}updateLimboDocument(e,t){return this.Hr(e,t).next((e=>{e?this.jr.delete(t.toString()):this.jr.add(t.toString())}))}qr(e){return 0}Hr(e,t){return Md.or([()=>Md.resolve(this.Wr.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ur(e,t)])}}class Gv{constructor(e){this.serializer=e}B(e,t,n,r){const i=new Fd("createOrUpgrade",t);n<1&&r>=1&&(function(e){e.createObjectStore("owner")}(e),function(e){e.createObjectStore("mutationQueues",{keyPath:"userId"}),e.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",nf,{unique:!0}),e.createObjectStore("documentMutations")}(e),Wv(e),function(e){e.createObjectStore("remoteDocuments")}(e));let s=Md.resolve();return n<3&&r>=3&&(0!==n&&(function(e){e.deleteObjectStore("targetDocuments"),e.deleteObjectStore("targets"),e.deleteObjectStore("targetGlobal")}(e),Wv(e)),s=s.next((()=>function(e){const t=e.store("targetGlobal"),n={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:vd.min().toTimestamp(),targetCount:0};return t.put("targetGlobalKey",n)}(i)))),n<4&&r>=4&&(0!==n&&(s=s.next((()=>function(e,t){return t.store("mutations").G().next((n=>{e.deleteObjectStore("mutations"),e.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",nf,{unique:!0});const r=t.store("mutations"),i=n.map((e=>r.put(e)));return Md.waitFor(i)}))}(e,i)))),s=s.next((()=>{!function(e){e.createObjectStore("clientMetadata",{keyPath:"clientId"})}(e)}))),n<5&&r>=5&&(s=s.next((()=>this.Yr(i)))),n<6&&r>=6&&(s=s.next((()=>(function(e){e.createObjectStore("remoteDocumentGlobal")}(e),this.Zr(i))))),n<7&&r>=7&&(s=s.next((()=>this.Xr(i)))),n<8&&r>=8&&(s=s.next((()=>this.ei(e,i)))),n<9&&r>=9&&(s=s.next((()=>{!function(e){e.objectStoreNames.contains("remoteDocumentChanges")&&e.deleteObjectStore("remoteDocumentChanges")}(e)}))),n<10&&r>=10&&(s=s.next((()=>this.ti(i)))),n<11&&r>=11&&(s=s.next((()=>{!function(e){e.createObjectStore("bundles",{keyPath:"bundleId"})}(e),function(e){e.createObjectStore("namedQueries",{keyPath:"name"})}(e)}))),n<12&&r>=12&&(s=s.next((()=>{!function(e){const t=e.createObjectStore("documentOverlays",{keyPath:vf});t.createIndex("collectionPathOverlayIndex",wf,{unique:!1}),t.createIndex("collectionGroupOverlayIndex",bf,{unique:!1})}(e)}))),n<13&&r>=13&&(s=s.next((()=>function(e){const t=e.createObjectStore("remoteDocumentsV14",{keyPath:af});t.createIndex("documentKeyIndex",lf),t.createIndex("collectionGroupIndex",uf)}(e))).next((()=>this.ni(e,i))).next((()=>e.deleteObjectStore("remoteDocuments")))),n<14&&r>=14&&(s=s.next((()=>this.ri(e,i)))),n<15&&r>=15&&(s=s.next((()=>function(e){e.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),e.createObjectStore("indexState",{keyPath:pf}).createIndex("sequenceNumberIndex",mf,{unique:!1}),e.createObjectStore("indexEntries",{keyPath:gf}).createIndex("documentKeyIndex",yf,{unique:!1})}(e)))),s}Zr(e){let t=0;return e.store("remoteDocuments").Z(((e,n)=>{t+=av(n)})).next((()=>{const n={byteSize:t};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",n)}))}Yr(e){const t=e.store("mutationQueues"),n=e.store("mutations");return t.G().next((t=>Md.forEach(t,(t=>{const r=IDBKeyRange.bound([t.userId,-1],[t.userId,t.lastAcknowledgedBatchId]);return n.G("userMutationsIndex",r).next((n=>Md.forEach(n,(n=>{Zh(n.userId===t.userId);const r=yy(this.serializer,n);return ov(e,t.userId,r).next((()=>{}))}))))}))))}Xr(e){const t=e.store("targetDocuments"),n=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next((e=>{const r=[];return n.Z(((n,i)=>{const s=new bd(n),o=function(e){return[0,Xd(e)]}(s);r.push(t.get(o).next((n=>n?Md.resolve():(n=>t.put({targetId:0,path:Xd(n),sequenceNumber:e.highestListenSequenceNumber}))(s))))})).next((()=>Md.waitFor(r)))}))}ei(e,t){e.createObjectStore("collectionParents",{keyPath:ff});const n=t.store("collectionParents"),r=new Yy,i=e=>{if(r.add(e)){const t=e.lastSegment(),r=e.popLast();return n.put({collectionId:t,parent:Xd(r)})}};return t.store("remoteDocuments").Z({Y:!0},((e,t)=>{const n=new bd(e);return i(n.popLast())})).next((()=>t.store("documentMutations").Z({Y:!0},(([e,t,n],r)=>{const s=tf(t);return i(s.popLast())}))))}ti(e){const t=e.store("targets");return t.Z(((e,n)=>{const r=vy(n),i=wy(this.serializer,r);return t.put(i)}))}ni(e,t){const n=t.store("remoteDocuments"),r=[];return n.Z(((e,n)=>{const i=t.store("remoteDocumentsV14"),s=function(e){return e.document?new Id(bd.fromString(e.document.name).popFirst(5)):e.noDocument?Id.fromSegments(e.noDocument.path):e.unknownDocument?Id.fromSegments(e.unknownDocument.path):Xh()}(n).path.toArray(),o={prefixPath:s.slice(0,s.length-2),collectionGroup:s[s.length-2],documentId:s[s.length-1],readTime:n.readTime||[0,0],unknownDocument:n.unknownDocument,noDocument:n.noDocument,document:n.document,hasCommittedMutations:!!n.hasCommittedMutations};r.push(i.put(o))})).next((()=>Md.waitFor(r)))}ri(e,t){const n=t.store("mutations"),r=Tv(this.serializer),i=new qv(Kv.zr,this.serializer.ct);return n.G().next((e=>{const n=new Map;return e.forEach((e=>{var t;let r=null!==(t=n.get(e.userId))&&void 0!==t?t:Tm();yy(this.serializer,e).keys().forEach((e=>r=r.add(e))),n.set(e.userId,r)})),Md.forEach(n,((e,n)=>{const s=new $h(n),o=xy.lt(this.serializer,s),a=i.getIndexManager(s),l=lv.lt(s,this.serializer,a,i.referenceDelegate);return new Ov(r,l,o,a).recalculateAndSaveOverlaysForDocumentKeys(new Tf(t,Hd.ae),e).next()}))}))}}function Wv(e){e.createObjectStore("targetDocuments",{keyPath:hf}).createIndex("documentTargetsIndex",df,{unique:!0}),e.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",cf,{unique:!0}),e.createObjectStore("targetGlobal")}const Hv="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class Qv{constructor(e,t,n,r,i,s,o,a,l,u,c=15){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=n,this.ii=i,this.window=s,this.document=o,this.si=l,this.oi=u,this._i=c,this.Br=null,this.Lr=!1,this.isPrimary=!1,this.networkEnabled=!0,this.ai=null,this.inForeground=!1,this.ui=null,this.ci=null,this.li=Number.NEGATIVE_INFINITY,this.hi=e=>Promise.resolve(),!Qv.v())throw new nd(td.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new Ev(this,r),this.Pi=t+"main",this.serializer=new dy(a),this.Ii=new Ud(this.Pi,this._i,new Gv(this.serializer)),this.kr=new pv(this.referenceDelegate,this.serializer),this.remoteDocumentCache=Tv(this.serializer),this.Qr=new ky,this.window&&this.window.localStorage?this.Ti=this.window.localStorage:(this.Ti=null,!1===u&&Qh("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.Ei().then((()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new nd(td.FAILED_PRECONDITION,Hv);return this.di(),this.Ai(),this.Ri(),this.runTransaction("getHighestListenSequenceNumber","readonly",(e=>this.kr.getHighestSequenceNumber(e)))})).then((e=>{this.Br=new Hd(e,this.si)})).then((()=>{this.Lr=!0})).catch((e=>(this.Ii&&this.Ii.close(),Promise.reject(e))))}Vi(e){return this.hi=async t=>{if(this.started)return e(t)},e(this.isPrimary)}setDatabaseDeletedListener(e){this.Ii.k((async t=>{null===t.newVersion&&await e()}))}setNetworkEnabled(e){this.networkEnabled!==e&&(this.networkEnabled=e,this.ii.enqueueAndForget((async()=>{this.started&&await this.Ei()})))}Ei(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",(e=>Jv(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next((()=>{if(this.isPrimary)return this.mi(e).next((e=>{e||(this.isPrimary=!1,this.ii.enqueueRetryable((()=>this.hi(!1))))}))})).next((()=>this.fi(e))).next((t=>this.isPrimary&&!t?this.gi(e).next((()=>!1)):!!t&&this.pi(e).next((()=>!0)))))).catch((e=>{if(Bd(e))return Hh("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return Hh("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1})).then((e=>{this.isPrimary!==e&&this.ii.enqueueRetryable((()=>this.hi(e))),this.isPrimary=e}))}mi(e){return Yv(e).get("owner").next((e=>Md.resolve(this.yi(e))))}wi(e){return Jv(e).delete(this.clientId)}async Si(){if(this.isPrimary&&!this.bi(this.li,18e5)){this.li=Date.now();const e=await this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",(e=>{const t=xf(e,"clientMetadata");return t.G().next((e=>{const n=this.Di(e,18e5),r=e.filter((e=>-1===n.indexOf(e)));return Md.forEach(r,(e=>t.delete(e.clientId))).next((()=>r))}))})).catch((()=>[]));if(this.Ti)for(const t of e)this.Ti.removeItem(this.vi(t.clientId))}}Ri(){this.ci=this.ii.enqueueAfterDelay("client_metadata_refresh",4e3,(()=>this.Ei().then((()=>this.Si())).then((()=>this.Ri()))))}yi(e){return!!e&&e.ownerId===this.clientId}fi(e){return this.oi?Md.resolve(!0):Yv(e).get("owner").next((t=>{if(null!==t&&this.bi(t.leaseTimestampMs,5e3)&&!this.Ci(t.ownerId)){if(this.yi(t)&&this.networkEnabled)return!0;if(!this.yi(t)){if(!t.allowTabSynchronization)throw new nd(td.FAILED_PRECONDITION,Hv);return!1}}return!(!this.networkEnabled||!this.inForeground)||Jv(e).G().next((e=>void 0===this.Di(e,5e3).find((e=>{if(this.clientId!==e.clientId){const t=!this.networkEnabled&&e.networkEnabled,n=!this.inForeground&&e.inForeground,r=this.networkEnabled===e.networkEnabled;if(t||n&&r)return!0}return!1}))))})).next((e=>(this.isPrimary!==e&&Hh("IndexedDbPersistence",`Client ${e?"is":"is not"} eligible for a primary lease.`),e)))}async shutdown(){this.Lr=!1,this.Fi(),this.ci&&(this.ci.cancel(),this.ci=null),this.Mi(),this.xi(),await this.Ii.runTransaction("shutdown","readwrite",["owner","clientMetadata"],(e=>{const t=new Tf(e,Hd.ae);return this.gi(t).next((()=>this.wi(t)))})),this.Ii.close(),this.Oi()}Di(e,t){return e.filter((e=>this.bi(e.updateTimeMs,t)&&!this.Ci(e.clientId)))}Ni(){return this.runTransaction("getActiveClients","readonly",(e=>Jv(e).G().next((e=>this.Di(e,18e5).map((e=>e.clientId))))))}get started(){return this.Lr}getMutationQueue(e,t){return lv.lt(e,this.serializer,t,this.referenceDelegate)}getTargetCache(){return this.kr}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new Xy(e,this.serializer.ct.databaseId)}getDocumentOverlayCache(e){return xy.lt(this.serializer,e)}getBundleCache(){return this.Qr}runTransaction(e,t,n){Hh("IndexedDbPersistence","Starting transaction:",e);const r="readonly"===t?"readonly":"readwrite",i=function(e){return 15===e?Sf:14===e?kf:13===e?If:12===e?Ef:11===e?_f:void Xh()}(this._i);let s;return this.Ii.runTransaction(e,r,i,(r=>(s=new Tf(r,this.Br?this.Br.next():Hd.ae),"readwrite-primary"===t?this.mi(s).next((e=>!!e||this.fi(s))).next((t=>{if(!t)throw Qh(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.ii.enqueueRetryable((()=>this.hi(!1))),new nd(td.FAILED_PRECONDITION,Dd);return n(s)})).next((e=>this.pi(s).next((()=>e)))):this.Bi(s).next((()=>n(s)))))).then((e=>(s.raiseOnCommittedEvent(),e)))}Bi(e){return Yv(e).get("owner").next((e=>{if(null!==e&&this.bi(e.leaseTimestampMs,5e3)&&!this.Ci(e.ownerId)&&!this.yi(e)&&!(this.oi||this.allowTabSynchronization&&e.allowTabSynchronization))throw new nd(td.FAILED_PRECONDITION,Hv)}))}pi(e){const t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return Yv(e).put("owner",t)}static v(){return Ud.v()}gi(e){const t=Yv(e);return t.get("owner").next((e=>this.yi(e)?(Hh("IndexedDbPersistence","Releasing primary lease."),t.delete("owner")):Md.resolve()))}bi(e,t){const n=Date.now();return!(e<n-t||e>n&&(Qh(`Detected an update time that is in the future: ${e} > ${n}`),1))}di(){null!==this.document&&"function"==typeof this.document.addEventListener&&(this.ui=()=>{this.ii.enqueueAndForget((()=>(this.inForeground="visible"===this.document.visibilityState,this.Ei())))},this.document.addEventListener("visibilitychange",this.ui),this.inForeground="visible"===this.document.visibilityState)}Mi(){this.ui&&(this.document.removeEventListener("visibilitychange",this.ui),this.ui=null)}Ai(){var e;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.ai=()=>{this.Fi();const e=/(?:Version|Mobile)\/1[456]/;!bt()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")&&(navigator.appVersion.match(e)||navigator.userAgent.match(e))&&this.ii.enterRestrictedMode(!0),this.ii.enqueueAndForget((()=>this.shutdown()))},this.window.addEventListener("pagehide",this.ai))}xi(){this.ai&&(this.window.removeEventListener("pagehide",this.ai),this.ai=null)}Ci(e){var t;try{const n=null!==(null===(t=this.Ti)||void 0===t?void 0:t.getItem(this.vi(e)));return Hh("IndexedDbPersistence",`Client '${e}' ${n?"is":"is not"} zombied in LocalStorage`),n}catch(e){return Qh("IndexedDbPersistence","Failed to get zombied client id.",e),!1}}Fi(){if(this.Ti)try{this.Ti.setItem(this.vi(this.clientId),String(Date.now()))}catch(e){Qh("Failed to set zombie client id.",e)}}Oi(){if(this.Ti)try{this.Ti.removeItem(this.vi(this.clientId))}catch(e){}}vi(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function Yv(e){return xf(e,"owner")}function Jv(e){return xf(e,"clientMetadata")}function Xv(e,t){let n=e.projectId;return e.isDefaultDatabase||(n+="."+e.database),"firestore/"+t+"/"+n+"/"}class Zv{constructor(e,t,n,r){this.targetId=e,this.fromCache=t,this.Li=n,this.ki=r}static qi(e,t){let n=Tm(),r=Tm();for(const e of t.docChanges)switch(e.type){case 0:n=n.add(e.doc.key);break;case 1:r=r.add(e.doc.key)}return new Zv(e,t.fromCache,n,r)}}class ew{constructor(){this.Qi=!1}initialize(e,t){this.Ki=e,this.indexManager=t,this.Qi=!0}getDocumentsMatchingQuery(e,t,n,r){return this.$i(e,t).next((i=>i||this.Ui(e,t,r,n))).next((n=>n||this.Wi(e,t)))}$i(e,t){if(em(t))return Md.resolve(null);let n=sm(t);return this.indexManager.getIndexType(e,n).next((r=>0===r?null:(null!==t.limit&&1===r&&(t=am(t,null,"F"),n=sm(t)),this.indexManager.getDocumentsMatchingTarget(e,n).next((r=>{const i=Tm(...r);return this.Ki.getDocuments(e,i).next((r=>this.indexManager.getMinOffset(e,n).next((n=>{const s=this.Gi(t,r);return this.zi(t,s,i,n.readTime)?this.$i(e,am(t,null,"F")):this.ji(e,s,t,n)}))))})))))}Ui(e,t,n,r){return em(t)||r.isEqual(vd.min())?this.Wi(e,t):this.Ki.getDocuments(e,n).next((i=>{const s=this.Gi(t,i);return this.zi(t,s,n,r)?this.Wi(e,t):(Wh()<=qt.DEBUG&&Hh("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),cm(t)),this.ji(e,s,t,Ad(r,-1)))}))}Gi(e,t){let n=new Of(fm(e));return t.forEach(((t,r)=>{hm(e,r)&&(n=n.add(r))})),n}zi(e,t,n,r){if(null===e.limit)return!1;if(n.size!==t.size)return!0;const i="F"===e.limitType?t.last():t.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(r)>0)}Wi(e,t){return Wh()<=qt.DEBUG&&Hh("QueryEngine","Using full collection scan to execute query:",cm(t)),this.Ki.getDocumentsMatchingQuery(e,t,Rd.min())}ji(e,t,n,r){return this.Ki.getDocumentsMatchingQuery(e,n,r).next((e=>(t.forEach((t=>{e=e.insert(t.key,t)})),e)))}}class tw{constructor(e,t,n,r){this.persistence=e,this.Hi=t,this.serializer=r,this.Ji=new Rf(pd),this.Yi=new mm((e=>Kp(e)),Gp),this.Zi=new Map,this.Xi=e.getRemoteDocumentCache(),this.kr=e.getTargetCache(),this.Qr=e.getBundleCache(),this.es(n)}es(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new Ov(this.Xi,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Xi.setIndexManager(this.indexManager),this.Hi.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(t=>e.collect(t,this.Ji)))}}function nw(e,t,n,r){return new tw(e,t,n,r)}async function rw(e,t){const n=ed(e);return await n.persistence.runTransaction("Handle user change","readonly",(e=>{let r;return n.mutationQueue.getAllMutationBatches(e).next((i=>(r=i,n.es(t),n.mutationQueue.getAllMutationBatches(e)))).next((t=>{const i=[],s=[];let o=Tm();for(const e of r){i.push(e.batchId);for(const t of e.mutations)o=o.add(t.key)}for(const e of t){s.push(e.batchId);for(const t of e.mutations)o=o.add(t.key)}return n.localDocuments.getDocuments(e,o).next((e=>({ts:e,removedBatchIds:i,addedBatchIds:s})))}))}))}function iw(e){const t=ed(e);return t.persistence.runTransaction("Get last remote snapshot version","readonly",(e=>t.kr.getLastRemoteSnapshotVersion(e)))}function sw(e,t,n){let r=Tm(),i=Tm();return n.forEach((e=>r=r.add(e))),t.getEntries(e,r).next((e=>{let r=ym();return n.forEach(((n,s)=>{const o=e.get(n);s.isFoundDocument()!==o.isFoundDocument()&&(i=i.add(n)),s.isNoDocument()&&s.version.isEqual(vd.min())?(t.removeEntry(n,s.readTime),r=r.insert(n,s)):!o.isValidDocument()||s.version.compareTo(o.version)>0||0===s.version.compareTo(o.version)&&o.hasPendingWrites?(t.addEntry(s),r=r.insert(n,s)):Hh("LocalStore","Ignoring outdated watch update for ",n,". Current version:",o.version," Watch version:",s.version)})),{ns:r,rs:i}}))}function ow(e,t){const n=ed(e);return n.persistence.runTransaction("Get next mutation batch","readonly",(e=>(void 0===t&&(t=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(e,t))))}function aw(e,t){const n=ed(e);return n.persistence.runTransaction("Allocate target","readwrite",(e=>{let r;return n.kr.getTargetData(e,t).next((i=>i?(r=i,Md.resolve(r)):n.kr.allocateTargetId(e).next((i=>(r=new hy(t,i,"TargetPurposeListen",e.currentSequenceNumber),n.kr.addTargetData(e,r).next((()=>r)))))))})).then((e=>{const r=n.Ji.get(e.targetId);return(null===r||e.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(n.Ji=n.Ji.insert(e.targetId,e),n.Yi.set(t,e.targetId)),e}))}async function lw(e,t,n){const r=ed(e),i=r.Ji.get(t),s=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",s,(e=>r.persistence.referenceDelegate.removeTarget(e,i)))}catch(e){if(!Bd(e))throw e;Hh("LocalStore",`Failed to update sequence numbers for target ${t}: ${e}`)}r.Ji=r.Ji.remove(t),r.Yi.delete(i.target)}function uw(e,t,n){const r=ed(e);let i=vd.min(),s=Tm();return r.persistence.runTransaction("Execute query","readonly",(e=>function(e,t,n){const r=ed(e),i=r.Yi.get(n);return void 0!==i?Md.resolve(r.Ji.get(i)):r.kr.getTargetData(t,n)}(r,e,sm(t)).next((t=>{if(t)return i=t.lastLimboFreeSnapshotVersion,r.kr.getMatchingKeysForTargetId(e,t.targetId).next((e=>{s=e}))})).next((()=>r.Hi.getDocumentsMatchingQuery(e,t,n?i:vd.min(),n?s:Tm()))).next((e=>(dw(r,dm(t),e),{documents:e,ss:s})))))}function cw(e,t){const n=ed(e),r=ed(n.kr),i=n.Ji.get(t);return i?Promise.resolve(i.target):n.persistence.runTransaction("Get target data","readonly",(e=>r.ut(e,t).next((e=>e?e.target:null))))}function hw(e,t){const n=ed(e),r=n.Zi.get(t)||vd.min();return n.persistence.runTransaction("Get new document changes","readonly",(e=>n.Xi.getAllFromCollectionGroup(e,t,Ad(r,-1),Number.MAX_SAFE_INTEGER))).then((e=>(dw(n,t,e),e)))}function dw(e,t,n){let r=e.Zi.get(t)||vd.min();n.forEach(((e,t)=>{t.readTime.compareTo(r)>0&&(r=t.readTime)})),e.Zi.set(t,r)}async function fw(e,t,n=Tm()){const r=await aw(e,sm(by(t.bundledQuery))),i=ed(e);return i.persistence.runTransaction("Save named query","readwrite",(e=>{const s=zg(t.readTime);if(r.snapshotVersion.compareTo(s)>=0)return i.Qr.saveNamedQuery(e,t);const o=r.withResumeToken(Vf.EMPTY_BYTE_STRING,s);return i.Ji=i.Ji.insert(o.targetId,o),i.kr.updateTargetData(e,o).next((()=>i.kr.removeMatchingKeysForTargetId(e,r.targetId))).next((()=>i.kr.addMatchingKeys(e,n,r.targetId))).next((()=>i.Qr.saveNamedQuery(e,t)))}))}function pw(e,t){return`firestore_clients_${e}_${t}`}function mw(e,t,n){let r=`firestore_mutations_${e}_${n}`;return t.isAuthenticated()&&(r+=`_${t.uid}`),r}function gw(e,t){return`firestore_targets_${e}_${t}`}class yw{constructor(e,t,n,r){this.user=e,this.batchId=t,this.state=n,this.error=r}static cs(e,t,n){const r=JSON.parse(n);let i,s="object"==typeof r&&-1!==["pending","acknowledged","rejected"].indexOf(r.state)&&(void 0===r.error||"object"==typeof r.error);return s&&r.error&&(s="string"==typeof r.error.message&&"string"==typeof r.error.code,s&&(i=new nd(r.error.code,r.error.message))),s?new yw(e,t,r.state,i):(Qh("SharedClientState",`Failed to parse mutation state for ID '${t}': ${n}`),null)}ls(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class vw{constructor(e,t,n){this.targetId=e,this.state=t,this.error=n}static cs(e,t){const n=JSON.parse(t);let r,i="object"==typeof n&&-1!==["not-current","current","rejected"].indexOf(n.state)&&(void 0===n.error||"object"==typeof n.error);return i&&n.error&&(i="string"==typeof n.error.message&&"string"==typeof n.error.code,i&&(r=new nd(n.error.code,n.error.message))),i?new vw(e,n.state,r):(Qh("SharedClientState",`Failed to parse target state for ID '${e}': ${t}`),null)}ls(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class ww{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static cs(e,t){const n=JSON.parse(t);let r="object"==typeof n&&n.activeTargetIds instanceof Array,i=Cm();for(let e=0;r&&e<n.activeTargetIds.length;++e)r=Jd(n.activeTargetIds[e]),i=i.add(n.activeTargetIds[e]);return r?new ww(e,i):(Qh("SharedClientState",`Failed to parse client data for instance '${e}': ${t}`),null)}}class bw{constructor(e,t){this.clientId=e,this.onlineState=t}static cs(e){const t=JSON.parse(e);return"object"==typeof t&&-1!==["Unknown","Online","Offline"].indexOf(t.onlineState)&&"string"==typeof t.clientId?new bw(t.clientId,t.onlineState):(Qh("SharedClientState",`Failed to parse online state: ${e}`),null)}}class _w{constructor(){this.activeTargetIds=Cm()}hs(e){this.activeTargetIds=this.activeTargetIds.add(e)}Ps(e){this.activeTargetIds=this.activeTargetIds.delete(e)}ls(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class Ew{constructor(e,t,n,r,i){this.window=e,this.ii=t,this.persistenceKey=n,this.Is=r,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.Ts=this.Es.bind(this),this.ds=new Rf(pd),this.started=!1,this.As=[];const s=n.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=i,this.Rs=pw(this.persistenceKey,this.Is),this.Vs=function(e){return`firestore_sequence_number_${e}`}(this.persistenceKey),this.ds=this.ds.insert(this.Is,new _w),this.fs=new RegExp(`^firestore_clients_${s}_([^_]*)$`),this.gs=new RegExp(`^firestore_mutations_${s}_(\\d+)(?:_(.*))?$`),this.ps=new RegExp(`^firestore_targets_${s}_(\\d+)$`),this.ys=function(e){return`firestore_online_state_${e}`}(this.persistenceKey),this.ws=function(e){return`firestore_bundle_loaded_v2_${e}`}(this.persistenceKey),this.window.addEventListener("storage",this.Ts)}static v(e){return!(!e||!e.localStorage)}async start(){const e=await this.syncEngine.Ni();for(const t of e){if(t===this.Is)continue;const e=this.getItem(pw(this.persistenceKey,t));if(e){const n=ww.cs(t,e);n&&(this.ds=this.ds.insert(n.clientId,n))}}this.Ss();const t=this.storage.getItem(this.ys);if(t){const e=this.bs(t);e&&this.Ds(e)}for(const e of this.As)this.Es(e);this.As=[],this.window.addEventListener("pagehide",(()=>this.shutdown())),this.started=!0}writeSequenceNumber(e){this.setItem(this.Vs,JSON.stringify(e))}getAllActiveQueryTargets(){return this.vs(this.ds)}isActiveQueryTarget(e){let t=!1;return this.ds.forEach(((n,r)=>{r.activeTargetIds.has(e)&&(t=!0)})),t}addPendingMutation(e){this.Cs(e,"pending")}updateMutationState(e,t,n){this.Cs(e,t,n),this.Fs(e)}addLocalQueryTarget(e){let t="not-current";if(this.isActiveQueryTarget(e)){const n=this.storage.getItem(gw(this.persistenceKey,e));if(n){const r=vw.cs(e,n);r&&(t=r.state)}}return this.Ms.hs(e),this.Ss(),t}removeLocalQueryTarget(e){this.Ms.Ps(e),this.Ss()}isLocalQueryTarget(e){return this.Ms.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(gw(this.persistenceKey,e))}updateQueryState(e,t,n){this.xs(e,t,n)}handleUserChange(e,t,n){t.forEach((e=>{this.Fs(e)})),this.currentUser=e,n.forEach((e=>{this.addPendingMutation(e)}))}setOnlineState(e){this.Os(e)}notifyBundleLoaded(e){this.Ns(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.Ts),this.removeItem(this.Rs),this.started=!1)}getItem(e){const t=this.storage.getItem(e);return Hh("SharedClientState","READ",e,t),t}setItem(e,t){Hh("SharedClientState","SET",e,t),this.storage.setItem(e,t)}removeItem(e){Hh("SharedClientState","REMOVE",e),this.storage.removeItem(e)}Es(e){const t=e;if(t.storageArea===this.storage){if(Hh("SharedClientState","EVENT",t.key,t.newValue),t.key===this.Rs)return void Qh("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.ii.enqueueRetryable((async()=>{if(this.started){if(null!==t.key)if(this.fs.test(t.key)){if(null==t.newValue){const e=this.Bs(t.key);return this.Ls(e,null)}{const e=this.ks(t.key,t.newValue);if(e)return this.Ls(e.clientId,e)}}else if(this.gs.test(t.key)){if(null!==t.newValue){const e=this.qs(t.key,t.newValue);if(e)return this.Qs(e)}}else if(this.ps.test(t.key)){if(null!==t.newValue){const e=this.Ks(t.key,t.newValue);if(e)return this.$s(e)}}else if(t.key===this.ys){if(null!==t.newValue){const e=this.bs(t.newValue);if(e)return this.Ds(e)}}else if(t.key===this.Vs){const e=function(e){let t=Hd.ae;if(null!=e)try{const n=JSON.parse(e);Zh("number"==typeof n),t=n}catch(e){Qh("SharedClientState","Failed to read sequence number from WebStorage",e)}return t}(t.newValue);e!==Hd.ae&&this.sequenceNumberHandler(e)}else if(t.key===this.ws){const e=this.Us(t.newValue);await Promise.all(e.map((e=>this.syncEngine.Ws(e))))}}else this.As.push(t)}))}}get Ms(){return this.ds.get(this.Is)}Ss(){this.setItem(this.Rs,this.Ms.ls())}Cs(e,t,n){const r=new yw(this.currentUser,e,t,n),i=mw(this.persistenceKey,this.currentUser,e);this.setItem(i,r.ls())}Fs(e){const t=mw(this.persistenceKey,this.currentUser,e);this.removeItem(t)}Os(e){const t={clientId:this.Is,onlineState:e};this.storage.setItem(this.ys,JSON.stringify(t))}xs(e,t,n){const r=gw(this.persistenceKey,e),i=new vw(e,t,n);this.setItem(r,i.ls())}Ns(e){const t=JSON.stringify(Array.from(e));this.setItem(this.ws,t)}Bs(e){const t=this.fs.exec(e);return t?t[1]:null}ks(e,t){const n=this.Bs(e);return ww.cs(n,t)}qs(e,t){const n=this.gs.exec(e),r=Number(n[1]),i=void 0!==n[2]?n[2]:null;return yw.cs(new $h(i),r,t)}Ks(e,t){const n=this.ps.exec(e),r=Number(n[1]);return vw.cs(r,t)}bs(e){return bw.cs(e)}Us(e){return JSON.parse(e)}async Qs(e){if(e.user.uid===this.currentUser.uid)return this.syncEngine.Gs(e.batchId,e.state,e.error);Hh("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)}$s(e){return this.syncEngine.zs(e.targetId,e.state,e.error)}Ls(e,t){const n=t?this.ds.insert(e,t):this.ds.remove(e),r=this.vs(this.ds),i=this.vs(n),s=[],o=[];return i.forEach((e=>{r.has(e)||s.push(e)})),r.forEach((e=>{i.has(e)||o.push(e)})),this.syncEngine.js(s,o).then((()=>{this.ds=n}))}Ds(e){this.ds.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}vs(e){let t=Cm();return e.forEach(((e,n)=>{t=t.unionWith(n.activeTargetIds)})),t}}class Iw{constructor(){this.Hs=new _w,this.Js={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,n){}addLocalQueryTarget(e){return this.Hs.hs(e),this.Js[e]||"not-current"}updateQueryState(e,t,n){this.Js[e]=t}removeLocalQueryTarget(e){this.Hs.Ps(e)}isLocalQueryTarget(e){return this.Hs.activeTargetIds.has(e)}clearQueryState(e){delete this.Js[e]}getAllActiveQueryTargets(){return this.Hs.activeTargetIds}isActiveQueryTarget(e){return this.Hs.activeTargetIds.has(e)}start(){return this.Hs=new _w,Promise.resolve()}handleUserChange(e,t,n){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class kw{Ys(e){}shutdown(){}}class Sw{constructor(){this.Zs=()=>this.Xs(),this.eo=()=>this.no(),this.ro=[],this.io()}Ys(e){this.ro.push(e)}shutdown(){window.removeEventListener("online",this.Zs),window.removeEventListener("offline",this.eo)}io(){window.addEventListener("online",this.Zs),window.addEventListener("offline",this.eo)}Xs(){Hh("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.ro)e(0)}no(){Hh("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.ro)e(1)}static v(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}let Tw=null;function xw(){return null===Tw?Tw=268435456+Math.round(2147483648*Math.random()):Tw++,"0x"+Tw.toString(16)}const Cw={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class Aw{constructor(e){this.so=e.so,this.oo=e.oo}_o(e){this.ao=e}uo(e){this.co=e}onMessage(e){this.lo=e}close(){this.oo()}send(e){this.so(e)}ho(){this.ao()}Po(e){this.co(e)}Io(e){this.lo(e)}}const Nw="WebChannelConnection";class Rw extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",n=encodeURIComponent(this.databaseId.projectId),r=encodeURIComponent(this.databaseId.database);this.To=t+"://"+e.host,this.Eo=`projects/${n}/databases/${r}`,this.Ao="(default)"===this.databaseId.database?`project_id=${n}`:`project_id=${n}&database_id=${r}`}get Ro(){return!1}Vo(e,t,n,r,i){const s=xw(),o=this.mo(e,t);Hh("RestConnection",`Sending RPC '${e}' ${s}:`,o,n);const a={"google-cloud-resource-prefix":this.Eo,"x-goog-request-params":this.Ao};return this.fo(a,r,i),this.po(e,o,a,n).then((t=>(Hh("RestConnection",`Received RPC '${e}' ${s}: `,t),t)),(t=>{throw Yh("RestConnection",`RPC '${e}' ${s} failed with error: `,t,"url: ",o,"request:",n),t}))}yo(e,t,n,r,i,s){return this.Vo(e,t,n,r,i)}fo(e,t,n){e["X-Goog-Api-Client"]="gl-js/ fire/"+Kh,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach(((t,n)=>e[n]=t)),n&&n.headers.forEach(((t,n)=>e[n]=t))}mo(e,t){const n=Cw[e];return`${this.To}/v1/${t}:${n}`}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}po(e,t,n,r){const i=xw();return new Promise(((s,o)=>{const a=new zh;a.setWithCredentials(!0),a.listenOnce(Lh.COMPLETE,(()=>{try{switch(a.getLastErrorCode()){case Oh.NO_ERROR:const t=a.getResponseJson();Hh(Nw,`XHR for RPC '${e}' ${i} received:`,JSON.stringify(t)),s(t);break;case Oh.TIMEOUT:Hh(Nw,`RPC '${e}' ${i} timed out`),o(new nd(td.DEADLINE_EXCEEDED,"Request time out"));break;case Oh.HTTP_ERROR:const n=a.getStatus();if(Hh(Nw,`RPC '${e}' ${i} failed with status:`,n,"response text:",a.getResponseText()),n>0){let e=a.getResponseJson();Array.isArray(e)&&(e=e[0]);const t=null==e?void 0:e.error;if(t&&t.status&&t.message){const e=function(e){const t=e.toLowerCase().replace(/_/g,"-");return Object.values(td).indexOf(t)>=0?t:td.UNKNOWN}(t.status);o(new nd(e,t.message))}else o(new nd(td.UNKNOWN,"Server responded with status "+a.getStatus()))}else o(new nd(td.UNAVAILABLE,"Connection failed."));break;default:Xh()}}finally{Hh(Nw,`RPC '${e}' ${i} completed.`)}}));const l=JSON.stringify(r);Hh(Nw,`RPC '${e}' ${i} sending request:`,r),a.send(t,"POST",l,n,15)}))}wo(e,t,n){const r=xw(),i=[this.To,"/","google.firestore.v1.Firestore","/",e,"/channel"],s=Ph(),o=Dh(),a={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},l=this.longPollingOptions.timeoutSeconds;void 0!==l&&(a.longPollingTimeout=Math.round(1e3*l)),this.useFetchStreams&&(a.xmlHttpFactory=new Uh({})),this.fo(a.initMessageHeaders,t,n),a.encodeInitMessageHeaders=!0;const u=i.join("");Hh(Nw,`Creating RPC '${e}' stream ${r}: ${u}`,a);const c=s.createWebChannel(u,a);let h=!1,d=!1;const f=new Aw({so:t=>{d?Hh(Nw,`Not sending because RPC '${e}' stream ${r} is closed:`,t):(h||(Hh(Nw,`Opening RPC '${e}' stream ${r} transport.`),c.open(),h=!0),Hh(Nw,`RPC '${e}' stream ${r} sending:`,t),c.send(t))},oo:()=>c.close()}),p=(e,t,n)=>{e.listen(t,(e=>{try{n(e)}catch(e){setTimeout((()=>{throw e}),0)}}))};return p(c,Vh.EventType.OPEN,(()=>{d||Hh(Nw,`RPC '${e}' stream ${r} transport opened.`)})),p(c,Vh.EventType.CLOSE,(()=>{d||(d=!0,Hh(Nw,`RPC '${e}' stream ${r} transport closed`),f.Po())})),p(c,Vh.EventType.ERROR,(t=>{d||(d=!0,Yh(Nw,`RPC '${e}' stream ${r} transport errored:`,t),f.Po(new nd(td.UNAVAILABLE,"The operation could not be completed")))})),p(c,Vh.EventType.MESSAGE,(t=>{var n;if(!d){const i=t.data[0];Zh(!!i);const s=i,o=s.error||(null===(n=s[0])||void 0===n?void 0:n.error);if(o){Hh(Nw,`RPC '${e}' stream ${r} received error:`,o);const t=o.status;let n=function(e){const t=hg[e];if(void 0!==t)return pg(t)}(t),i=o.message;void 0===n&&(n=td.INTERNAL,i="Unknown error status: "+t+" with message "+o.message),d=!0,f.Po(new nd(n,i)),c.close()}else Hh(Nw,`RPC '${e}' stream ${r} received:`,i),f.Io(i)}})),p(o,Mh.STAT_EVENT,(t=>{t.stat===Fh.PROXY?Hh(Nw,`RPC '${e}' stream ${r} detected buffering proxy`):t.stat===Fh.NOPROXY&&Hh(Nw,`RPC '${e}' stream ${r} detected no buffering proxy`)})),setTimeout((()=>{f.ho()}),0),f}}function Pw(){return"undefined"!=typeof window?window:null}function Dw(){return"undefined"!=typeof document?document:null}function Ow(e){return new Lg(e,!0)}class Lw{constructor(e,t,n=1e3,r=1.5,i=6e4){this.ii=e,this.timerId=t,this.So=n,this.bo=r,this.Do=i,this.vo=0,this.Co=null,this.Fo=Date.now(),this.reset()}reset(){this.vo=0}Mo(){this.vo=this.Do}xo(e){this.cancel();const t=Math.floor(this.vo+this.Oo()),n=Math.max(0,Date.now()-this.Fo),r=Math.max(0,t-n);r>0&&Hh("ExponentialBackoff",`Backing off for ${r} ms (base delay: ${this.vo} ms, delay with jitter: ${t} ms, last attempt: ${n} ms ago)`),this.Co=this.ii.enqueueAfterDelay(this.timerId,r,(()=>(this.Fo=Date.now(),e()))),this.vo*=this.bo,this.vo<this.So&&(this.vo=this.So),this.vo>this.Do&&(this.vo=this.Do)}No(){null!==this.Co&&(this.Co.skipDelay(),this.Co=null)}cancel(){null!==this.Co&&(this.Co.cancel(),this.Co=null)}Oo(){return(Math.random()-.5)*this.vo}}class Mw{constructor(e,t,n,r,i,s,o,a){this.ii=e,this.Bo=n,this.Lo=r,this.connection=i,this.authCredentialsProvider=s,this.appCheckCredentialsProvider=o,this.listener=a,this.state=0,this.ko=0,this.qo=null,this.Qo=null,this.stream=null,this.Ko=new Lw(e,t)}$o(){return 1===this.state||5===this.state||this.Uo()}Uo(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.Wo()}async stop(){this.$o()&&await this.close(0)}Go(){this.state=0,this.Ko.reset()}zo(){this.Uo()&&null===this.qo&&(this.qo=this.ii.enqueueAfterDelay(this.Bo,6e4,(()=>this.jo())))}Ho(e){this.Jo(),this.stream.send(e)}async jo(){if(this.Uo())return this.close(0)}Jo(){this.qo&&(this.qo.cancel(),this.qo=null)}Yo(){this.Qo&&(this.Qo.cancel(),this.Qo=null)}async close(e,t){this.Jo(),this.Yo(),this.Ko.cancel(),this.ko++,4!==e?this.Ko.reset():t&&t.code===td.RESOURCE_EXHAUSTED?(Qh(t.toString()),Qh("Using maximum backoff delay to prevent overloading the backend."),this.Ko.Mo()):t&&t.code===td.UNAUTHENTICATED&&3!==this.state&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),null!==this.stream&&(this.Zo(),this.stream.close(),this.stream=null),this.state=e,await this.listener.uo(t)}Zo(){}auth(){this.state=1;const e=this.Xo(this.ko),t=this.ko;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([e,n])=>{this.ko===t&&this.e_(e,n)}),(t=>{e((()=>{const e=new nd(td.UNKNOWN,"Fetching auth token failed: "+t.message);return this.t_(e)}))}))}e_(e,t){const n=this.Xo(this.ko);this.stream=this.n_(e,t),this.stream._o((()=>{n((()=>(this.state=2,this.Qo=this.ii.enqueueAfterDelay(this.Lo,1e4,(()=>(this.Uo()&&(this.state=3),Promise.resolve()))),this.listener._o())))})),this.stream.uo((e=>{n((()=>this.t_(e)))})),this.stream.onMessage((e=>{n((()=>this.onMessage(e)))}))}Wo(){this.state=5,this.Ko.xo((async()=>{this.state=0,this.start()}))}t_(e){return Hh("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}Xo(e){return t=>{this.ii.enqueueAndForget((()=>this.ko===e?t():(Hh("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class Fw extends Mw{constructor(e,t,n,r,i,s){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,n,r,s),this.serializer=i}n_(e,t){return this.connection.wo("Listen",e,t)}onMessage(e){this.Ko.reset();const t=function(e,t){let n;if("targetChange"in t){t.targetChange;const r=function(e){return"NO_CHANGE"===e?0:"ADD"===e?1:"REMOVE"===e?2:"CURRENT"===e?3:"RESET"===e?4:Xh()}(t.targetChange.targetChangeType||"NO_CHANGE"),i=t.targetChange.targetIds||[],s=function(e,t){return e.useProto3Json?(Zh(void 0===t||"string"==typeof t),Vf.fromBase64String(t||"")):(Zh(void 0===t||t instanceof Uint8Array),Vf.fromUint8Array(t||new Uint8Array))}(e,t.targetChange.resumeToken),o=t.targetChange.cause,a=o&&function(e){const t=void 0===e.code?td.UNKNOWN:pg(e.code);return new nd(t,e.message||"")}(o);n=new xg(r,i,s,a||null)}else if("documentChange"in t){t.documentChange;const r=t.documentChange;r.document,r.document.name,r.document.updateTime;const i=$g(e,r.document.name),s=zg(r.document.updateTime),o=r.document.createTime?zg(r.document.createTime):vd.min(),a=new gp({mapValue:{fields:r.document.fields}}),l=vp.newFoundDocument(i,s,o,a),u=r.targetIds||[],c=r.removedTargetIds||[];n=new Sg(u,c,l.key,l)}else if("documentDelete"in t){t.documentDelete;const r=t.documentDelete;r.document;const i=$g(e,r.document),s=r.readTime?zg(r.readTime):vd.min(),o=vp.newNoDocument(i,s),a=r.removedTargetIds||[];n=new Sg([],a,o.key,o)}else if("documentRemove"in t){t.documentRemove;const r=t.documentRemove;r.document;const i=$g(e,r.document),s=r.removedTargetIds||[];n=new Sg([],s,i,null)}else{if(!("filter"in t))return Xh();{t.filter;const e=t.filter;e.targetId;const{count:r=0,unchangedNames:i}=e,s=new cg(r,i),o=e.targetId;n=new Tg(o,s)}}return n}(this.serializer,e),n=function(e){if(!("targetChange"in e))return vd.min();const t=e.targetChange;return t.targetIds&&t.targetIds.length?vd.min():t.readTime?zg(t.readTime):vd.min()}(e);return this.listener.r_(t,n)}i_(e){const t={};t.database=Wg(this.serializer),t.addTarget=function(e,t){let n;const r=t.target;if(n=Wp(r)?{documents:Zg(e,r)}:{query:ey(e,r)},n.targetId=t.targetId,t.resumeToken.approximateByteSize()>0){n.resumeToken=Ug(e,t.resumeToken);const r=Mg(e,t.expectedCount);null!==r&&(n.expectedCount=r)}else if(t.snapshotVersion.compareTo(vd.min())>0){n.readTime=Fg(e,t.snapshotVersion.toTimestamp());const r=Mg(e,t.expectedCount);null!==r&&(n.expectedCount=r)}return n}(this.serializer,e);const n=function(e,t){const n=function(e){switch(e){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Xh()}}(t.purpose);return null==n?null:{"goog-listen-tags":n}}(this.serializer,e);n&&(t.labels=n),this.Ho(t)}s_(e){const t={};t.database=Wg(this.serializer),t.removeTarget=e,this.Ho(t)}}class Uw extends Mw{constructor(e,t,n,r,i,s){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,n,r,s),this.serializer=i,this.o_=!1}get __(){return this.o_}start(){this.o_=!1,this.lastStreamToken=void 0,super.start()}Zo(){this.o_&&this.a_([])}n_(e,t){return this.connection.wo("Write",e,t)}onMessage(e){if(Zh(!!e.streamToken),this.lastStreamToken=e.streamToken,this.o_){this.Ko.reset();const t=function(e,t){return e&&e.length>0?(Zh(void 0!==t),e.map((e=>function(e,t){let n=e.updateTime?zg(e.updateTime):zg(t);return n.isEqual(vd.min())&&(n=zg(t)),new Km(n,e.transformResults||[])}(e,t)))):[]}(e.writeResults,e.commitTime),n=zg(e.commitTime);return this.listener.u_(n,t)}return Zh(!e.writeResults||0===e.writeResults.length),this.o_=!0,this.listener.c_()}l_(){const e={};e.database=Wg(this.serializer),this.Ho(e)}a_(e){const t={streamToken:this.lastStreamToken,writes:e.map((e=>Jg(this.serializer,e)))};this.Ho(t)}}class Vw extends class{}{constructor(e,t,n,r){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=n,this.serializer=r,this.h_=!1}P_(){if(this.h_)throw new nd(td.FAILED_PRECONDITION,"The client has already been terminated.")}Vo(e,t,n){return this.P_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([r,i])=>this.connection.Vo(e,t,n,r,i))).catch((e=>{throw"FirebaseError"===e.name?(e.code===td.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),e):new nd(td.UNKNOWN,e.toString())}))}yo(e,t,n,r){return this.P_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([i,s])=>this.connection.yo(e,t,n,i,s,r))).catch((e=>{throw"FirebaseError"===e.name?(e.code===td.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),e):new nd(td.UNKNOWN,e.toString())}))}terminate(){this.h_=!0}}class zw{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.T_=0,this.E_=null,this.d_=!0}A_(){0===this.T_&&(this.R_("Unknown"),this.E_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this.E_=null,this.V_("Backend didn't respond within 10 seconds."),this.R_("Offline"),Promise.resolve()))))}m_(e){"Online"===this.state?this.R_("Unknown"):(this.T_++,this.T_>=1&&(this.f_(),this.V_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.R_("Offline")))}set(e){this.f_(),this.T_=0,"Online"===e&&(this.d_=!1),this.R_(e)}R_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}V_(e){const t=`Could not reach Cloud Firestore backend. ${e}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.d_?(Qh(t),this.d_=!1):Hh("OnlineStateTracker",t)}f_(){null!==this.E_&&(this.E_.cancel(),this.E_=null)}}class Bw{constructor(e,t,n,r,i){this.localStore=e,this.datastore=t,this.asyncQueue=n,this.remoteSyncer={},this.g_=[],this.p_=new Map,this.y_=new Set,this.w_=[],this.S_=i,this.S_.Ys((e=>{n.enqueueAndForget((async()=>{Yw(this)&&(Hh("RemoteStore","Restarting streams for network reachability change."),await async function(e){const t=ed(e);t.y_.add(4),await qw(t),t.b_.set("Unknown"),t.y_.delete(4),await jw(t)}(this))}))})),this.b_=new zw(n,r)}}async function jw(e){if(Yw(e))for(const t of e.w_)await t(!0)}async function qw(e){for(const t of e.w_)await t(!1)}function $w(e,t){const n=ed(e);n.p_.has(t.targetId)||(n.p_.set(t.targetId,t),Qw(n)?Hw(n):pb(n).Uo()&&Gw(n,t))}function Kw(e,t){const n=ed(e),r=pb(n);n.p_.delete(t),r.Uo()&&Ww(n,t),0===n.p_.size&&(r.Uo()?r.zo():Yw(n)&&n.b_.set("Unknown"))}function Gw(e,t){if(e.D_.Be(t.targetId),t.resumeToken.approximateByteSize()>0||t.snapshotVersion.compareTo(vd.min())>0){const n=e.remoteSyncer.getRemoteKeysForTarget(t.targetId).size;t=t.withExpectedCount(n)}pb(e).i_(t)}function Ww(e,t){e.D_.Be(t),pb(e).s_(t)}function Hw(e){e.D_=new Ag({getRemoteKeysForTarget:t=>e.remoteSyncer.getRemoteKeysForTarget(t),ut:t=>e.p_.get(t)||null,rt:()=>e.datastore.serializer.databaseId}),pb(e).start(),e.b_.A_()}function Qw(e){return Yw(e)&&!pb(e).$o()&&e.p_.size>0}function Yw(e){return 0===ed(e).y_.size}function Jw(e){e.D_=void 0}async function Xw(e){e.p_.forEach(((t,n)=>{Gw(e,t)}))}async function Zw(e,t){Jw(e),Qw(e)?(e.b_.m_(t),Hw(e)):e.b_.set("Unknown")}async function eb(e,t,n){if(e.b_.set("Online"),t instanceof xg&&2===t.state&&t.cause)try{await async function(e,t){const n=t.cause;for(const r of t.targetIds)e.p_.has(r)&&(await e.remoteSyncer.rejectListen(r,n),e.p_.delete(r),e.D_.removeTarget(r))}(e,t)}catch(n){Hh("RemoteStore","Failed to remove targets %s: %s ",t.targetIds.join(","),n),await tb(e,n)}else if(t instanceof Sg?e.D_.We(t):t instanceof Tg?e.D_.Ze(t):e.D_.je(t),!n.isEqual(vd.min()))try{const t=await iw(e.localStore);n.compareTo(t)>=0&&await function(e,t){const n=e.D_.st(t);return n.targetChanges.forEach(((n,r)=>{if(n.resumeToken.approximateByteSize()>0){const i=e.p_.get(r);i&&e.p_.set(r,i.withResumeToken(n.resumeToken,t))}})),n.targetMismatches.forEach(((t,n)=>{const r=e.p_.get(t);if(!r)return;e.p_.set(t,r.withResumeToken(Vf.EMPTY_BYTE_STRING,r.snapshotVersion)),Ww(e,t);const i=new hy(r.target,t,n,r.sequenceNumber);Gw(e,i)})),e.remoteSyncer.applyRemoteEvent(n)}(e,n)}catch(t){Hh("RemoteStore","Failed to raise snapshot:",t),await tb(e,t)}}async function tb(e,t,n){if(!Bd(t))throw t;e.y_.add(1),await qw(e),e.b_.set("Offline"),n||(n=()=>iw(e.localStore)),e.asyncQueue.enqueueRetryable((async()=>{Hh("RemoteStore","Retrying IndexedDB access"),await n(),e.y_.delete(1),await jw(e)}))}function nb(e,t){return t().catch((n=>tb(e,n,t)))}async function rb(e){const t=ed(e),n=mb(t);let r=t.g_.length>0?t.g_[t.g_.length-1].batchId:-1;for(;ib(t);)try{const e=await ow(t.localStore,r);if(null===e){0===t.g_.length&&n.zo();break}r=e.batchId,sb(t,e)}catch(e){await tb(t,e)}ob(t)&&ab(t)}function ib(e){return Yw(e)&&e.g_.length<10}function sb(e,t){e.g_.push(t);const n=mb(e);n.Uo()&&n.__&&n.a_(t.mutations)}function ob(e){return Yw(e)&&!mb(e).$o()&&e.g_.length>0}function ab(e){mb(e).start()}async function lb(e){mb(e).l_()}async function ub(e){const t=mb(e);for(const n of e.g_)t.a_(n.mutations)}async function cb(e,t,n){const r=e.g_.shift(),i=lg.from(r,t,n);await nb(e,(()=>e.remoteSyncer.applySuccessfulWrite(i))),await rb(e)}async function hb(e,t){t&&mb(e).__&&await async function(e,t){if(function(e){return fg(e)&&e!==td.ABORTED}(t.code)){const n=e.g_.shift();mb(e).Go(),await nb(e,(()=>e.remoteSyncer.rejectFailedWrite(n.batchId,t))),await rb(e)}}(e,t),ob(e)&&ab(e)}async function db(e,t){const n=ed(e);n.asyncQueue.verifyOperationInProgress(),Hh("RemoteStore","RemoteStore received new credentials");const r=Yw(n);n.y_.add(3),await qw(n),r&&n.b_.set("Unknown"),await n.remoteSyncer.handleCredentialChange(t),n.y_.delete(3),await jw(n)}async function fb(e,t){const n=ed(e);t?(n.y_.delete(2),await jw(n)):t||(n.y_.add(2),await qw(n),n.b_.set("Unknown"))}function pb(e){return e.v_||(e.v_=function(e,t,n){const r=ed(e);return r.P_(),new Fw(t,r.connection,r.authCredentials,r.appCheckCredentials,r.serializer,n)}(e.datastore,e.asyncQueue,{_o:Xw.bind(null,e),uo:Zw.bind(null,e),r_:eb.bind(null,e)}),e.w_.push((async t=>{t?(e.v_.Go(),Qw(e)?Hw(e):e.b_.set("Unknown")):(await e.v_.stop(),Jw(e))}))),e.v_}function mb(e){return e.C_||(e.C_=function(e,t,n){const r=ed(e);return r.P_(),new Uw(t,r.connection,r.authCredentials,r.appCheckCredentials,r.serializer,n)}(e.datastore,e.asyncQueue,{_o:lb.bind(null,e),uo:hb.bind(null,e),c_:ub.bind(null,e),u_:cb.bind(null,e)}),e.w_.push((async t=>{t?(e.C_.Go(),await rb(e)):(await e.C_.stop(),e.g_.length>0&&(Hh("RemoteStore",`Stopping write stream with ${e.g_.length} pending writes`),e.g_=[]))}))),e.C_}class gb{constructor(e,t,n,r,i){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=n,this.op=r,this.removalCallback=i,this.deferred=new rd,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((e=>{}))}static createAndSchedule(e,t,n,r,i){const s=Date.now()+n,o=new gb(e,t,s,r,i);return o.start(n),o}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new nd(td.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function yb(e,t){if(Qh("AsyncQueue",`${t}: ${e}`),Bd(e))return new nd(td.UNAVAILABLE,`${t}: ${e}`);throw e}class vb{constructor(e){this.comparator=e?(t,n)=>e(t,n)||Id.comparator(t.key,n.key):(e,t)=>Id.comparator(e.key,t.key),this.keyedMap=wm(),this.sortedSet=new Rf(this.comparator)}static emptySet(e){return new vb(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((t,n)=>(e(t),!1)))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof vb))return!1;if(this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),n=e.sortedSet.getIterator();for(;t.hasNext();){const e=t.getNext().key,r=n.getNext().key;if(!e.isEqual(r))return!1}return!0}toString(){const e=[];return this.forEach((t=>{e.push(t.toString())})),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const n=new vb;return n.comparator=this.comparator,n.keyedMap=e,n.sortedSet=t,n}}class wb{constructor(){this.F_=new Rf(Id.comparator)}track(e){const t=e.doc.key,n=this.F_.get(t);n?0!==e.type&&3===n.type?this.F_=this.F_.insert(t,e):3===e.type&&1!==n.type?this.F_=this.F_.insert(t,{type:n.type,doc:e.doc}):2===e.type&&2===n.type?this.F_=this.F_.insert(t,{type:2,doc:e.doc}):2===e.type&&0===n.type?this.F_=this.F_.insert(t,{type:0,doc:e.doc}):1===e.type&&0===n.type?this.F_=this.F_.remove(t):1===e.type&&2===n.type?this.F_=this.F_.insert(t,{type:1,doc:n.doc}):0===e.type&&1===n.type?this.F_=this.F_.insert(t,{type:2,doc:e.doc}):Xh():this.F_=this.F_.insert(t,e)}M_(){const e=[];return this.F_.inorderTraversal(((t,n)=>{e.push(n)})),e}}class bb{constructor(e,t,n,r,i,s,o,a,l){this.query=e,this.docs=t,this.oldDocs=n,this.docChanges=r,this.mutatedKeys=i,this.fromCache=s,this.syncStateChanged=o,this.excludesMetadataChanges=a,this.hasCachedResults=l}static fromInitialDocuments(e,t,n,r,i){const s=[];return t.forEach((e=>{s.push({type:0,doc:e})})),new bb(e,t,vb.emptySet(t),s,n,r,!0,!1,i)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&lm(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,n=e.docChanges;if(t.length!==n.length)return!1;for(let e=0;e<t.length;e++)if(t[e].type!==n[e].type||!t[e].doc.isEqual(n[e].doc))return!1;return!0}}class _b{constructor(){this.x_=void 0,this.listeners=[]}}class Eb{constructor(){this.queries=new mm((e=>um(e)),lm),this.onlineState="Unknown",this.O_=new Set}}async function Ib(e,t){const n=ed(e),r=t.query;let i=!1,s=n.queries.get(r);if(s||(i=!0,s=new _b),i)try{s.x_=await n.onListen(r)}catch(e){const n=yb(e,`Initialization of query '${cm(t.query)}' failed`);return void t.onError(n)}n.queries.set(r,s),s.listeners.push(t),t.N_(n.onlineState),s.x_&&t.B_(s.x_)&&xb(n)}async function kb(e,t){const n=ed(e),r=t.query;let i=!1;const s=n.queries.get(r);if(s){const e=s.listeners.indexOf(t);e>=0&&(s.listeners.splice(e,1),i=0===s.listeners.length)}if(i)return n.queries.delete(r),n.onUnlisten(r)}function Sb(e,t){const n=ed(e);let r=!1;for(const e of t){const t=e.query,i=n.queries.get(t);if(i){for(const t of i.listeners)t.B_(e)&&(r=!0);i.x_=e}}r&&xb(n)}function Tb(e,t,n){const r=ed(e),i=r.queries.get(t);if(i)for(const e of i.listeners)e.onError(n);r.queries.delete(t)}function xb(e){e.O_.forEach((e=>{e.next()}))}class Cb{constructor(e,t,n){this.query=e,this.L_=t,this.k_=!1,this.q_=null,this.onlineState="Unknown",this.options=n||{}}B_(e){if(!this.options.includeMetadataChanges){const t=[];for(const n of e.docChanges)3!==n.type&&t.push(n);e=new bb(e.query,e.docs,e.oldDocs,t,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.k_?this.Q_(e)&&(this.L_.next(e),t=!0):this.K_(e,this.onlineState)&&(this.U_(e),t=!0),this.q_=e,t}onError(e){this.L_.error(e)}N_(e){this.onlineState=e;let t=!1;return this.q_&&!this.k_&&this.K_(this.q_,e)&&(this.U_(this.q_),t=!0),t}K_(e,t){if(!e.fromCache)return!0;const n="Offline"!==t;return(!this.options.W_||!n)&&(!e.docs.isEmpty()||e.hasCachedResults||"Offline"===t)}Q_(e){if(e.docChanges.length>0)return!0;const t=this.q_&&this.q_.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&!0===this.options.includeMetadataChanges}U_(e){e=bb.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.k_=!0,this.L_.next(e)}}class Ab{constructor(e,t){this.G_=e,this.byteLength=t}z_(){return"metadata"in this.G_}}class Nb{constructor(e){this.serializer=e}os(e){return $g(this.serializer,e)}_s(e){return e.metadata.exists?Yg(this.serializer,e.document,!1):vp.newNoDocument(this.os(e.metadata.name),this.us(e.metadata.readTime))}us(e){return zg(e)}}class Rb{constructor(e,t,n){this.j_=e,this.localStore=t,this.serializer=n,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=Pb(e)}H_(e){this.progress.bytesLoaded+=e.byteLength;let t=this.progress.documentsLoaded;if(e.G_.namedQuery)this.queries.push(e.G_.namedQuery);else if(e.G_.documentMetadata){this.documents.push({metadata:e.G_.documentMetadata}),e.G_.documentMetadata.exists||++t;const n=bd.fromString(e.G_.documentMetadata.name);this.collectionGroups.add(n.get(n.length-2))}else e.G_.document&&(this.documents[this.documents.length-1].document=e.G_.document,++t);return t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}J_(e){const t=new Map,n=new Nb(this.serializer);for(const r of e)if(r.metadata.queries){const e=n.os(r.metadata.name);for(const n of r.metadata.queries){const r=(t.get(n)||Tm()).add(e);t.set(n,r)}}return t}async complete(){const e=await async function(e,t,n,r){const i=ed(e);let s=Tm(),o=ym();for(const e of n){const n=t.os(e.metadata.name);e.document&&(s=s.add(n));const r=t._s(e);r.setReadTime(t.us(e.metadata.readTime)),o=o.insert(n,r)}const a=i.Xi.newChangeBuffer({trackRemovals:!0}),l=await aw(i,function(e){return sm(Zp(bd.fromString(`__bundle__/docs/${e}`)))}(r));return i.persistence.runTransaction("Apply bundle documents","readwrite",(e=>sw(e,a,o).next((t=>(a.apply(e),t))).next((t=>i.kr.removeMatchingKeysForTargetId(e,l.targetId).next((()=>i.kr.addMatchingKeys(e,s,l.targetId))).next((()=>i.localDocuments.getLocalViewOfDocuments(e,t.ns,t.rs))).next((()=>t.ns))))))}(this.localStore,new Nb(this.serializer),this.documents,this.j_.id),t=this.J_(this.documents);for(const e of this.queries)await fw(this.localStore,e,t.get(e.name));return this.progress.taskState="Success",{progress:this.progress,Y_:this.collectionGroups,Z_:e}}}function Pb(e){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:e.totalDocuments,totalBytes:e.totalBytes}}class Db{constructor(e){this.key=e}}class Ob{constructor(e){this.key=e}}class Lb{constructor(e,t){this.query=e,this.X_=t,this.ea=null,this.hasCachedResults=!1,this.current=!1,this.ta=Tm(),this.mutatedKeys=Tm(),this.na=fm(e),this.ra=new vb(this.na)}get ia(){return this.X_}sa(e,t){const n=t?t.oa:new wb,r=t?t.ra:this.ra;let i=t?t.mutatedKeys:this.mutatedKeys,s=r,o=!1;const a="F"===this.query.limitType&&r.size===this.query.limit?r.last():null,l="L"===this.query.limitType&&r.size===this.query.limit?r.first():null;if(e.inorderTraversal(((e,t)=>{const u=r.get(e),c=hm(this.query,t)?t:null,h=!!u&&this.mutatedKeys.has(u.key),d=!!c&&(c.hasLocalMutations||this.mutatedKeys.has(c.key)&&c.hasCommittedMutations);let f=!1;u&&c?u.data.isEqual(c.data)?h!==d&&(n.track({type:3,doc:c}),f=!0):this._a(u,c)||(n.track({type:2,doc:c}),f=!0,(a&&this.na(c,a)>0||l&&this.na(c,l)<0)&&(o=!0)):!u&&c?(n.track({type:0,doc:c}),f=!0):u&&!c&&(n.track({type:1,doc:u}),f=!0,(a||l)&&(o=!0)),f&&(c?(s=s.add(c),i=d?i.add(e):i.delete(e)):(s=s.delete(e),i=i.delete(e)))})),null!==this.query.limit)for(;s.size>this.query.limit;){const e="F"===this.query.limitType?s.last():s.first();s=s.delete(e.key),i=i.delete(e.key),n.track({type:1,doc:e})}return{ra:s,oa:n,zi:o,mutatedKeys:i}}_a(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,n){const r=this.ra;this.ra=e.ra,this.mutatedKeys=e.mutatedKeys;const i=e.oa.M_();i.sort(((e,t)=>function(e,t){const n=e=>{switch(e){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Xh()}};return n(e)-n(t)}(e.type,t.type)||this.na(e.doc,t.doc))),this.aa(n);const s=t?this.ua():[],o=0===this.ta.size&&this.current?1:0,a=o!==this.ea;return this.ea=o,0!==i.length||a?{snapshot:new bb(this.query,e.ra,r,i,e.mutatedKeys,0===o,a,!1,!!n&&n.resumeToken.approximateByteSize()>0),ca:s}:{ca:s}}N_(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({ra:this.ra,oa:new wb,mutatedKeys:this.mutatedKeys,zi:!1},!1)):{ca:[]}}la(e){return!this.X_.has(e)&&!!this.ra.has(e)&&!this.ra.get(e).hasLocalMutations}aa(e){e&&(e.addedDocuments.forEach((e=>this.X_=this.X_.add(e))),e.modifiedDocuments.forEach((e=>{})),e.removedDocuments.forEach((e=>this.X_=this.X_.delete(e))),this.current=e.current)}ua(){if(!this.current)return[];const e=this.ta;this.ta=Tm(),this.ra.forEach((e=>{this.la(e.key)&&(this.ta=this.ta.add(e.key))}));const t=[];return e.forEach((e=>{this.ta.has(e)||t.push(new Ob(e))})),this.ta.forEach((n=>{e.has(n)||t.push(new Db(n))})),t}ha(e){this.X_=e.ss,this.ta=Tm();const t=this.sa(e.documents);return this.applyChanges(t,!0)}Pa(){return bb.fromInitialDocuments(this.query,this.ra,this.mutatedKeys,0===this.ea,this.hasCachedResults)}}class Mb{constructor(e,t,n){this.query=e,this.targetId=t,this.view=n}}class Fb{constructor(e){this.key=e,this.Ia=!1}}class Ub{constructor(e,t,n,r,i,s){this.localStore=e,this.remoteStore=t,this.eventManager=n,this.sharedClientState=r,this.currentUser=i,this.maxConcurrentLimboResolutions=s,this.Ta={},this.Ea=new mm((e=>um(e)),lm),this.da=new Map,this.Aa=new Set,this.Ra=new Rf(Id.comparator),this.Va=new Map,this.ma=new Fv,this.fa={},this.ga=new Map,this.pa=fv.On(),this.onlineState="Unknown",this.ya=void 0}get isPrimaryClient(){return!0===this.ya}}async function Vb(e,t){const n=h_(e);let r,i;const s=n.Ea.get(t);if(s)r=s.targetId,n.sharedClientState.addLocalQueryTarget(r),i=s.view.Pa();else{const e=await aw(n.localStore,sm(t)),s=n.sharedClientState.addLocalQueryTarget(e.targetId);r=e.targetId,i=await zb(n,t,r,"current"===s,e.resumeToken),n.isPrimaryClient&&$w(n.remoteStore,e)}return i}async function zb(e,t,n,r,i){e.wa=(t,n,r)=>async function(e,t,n,r){let i=t.view.sa(n);i.zi&&(i=await uw(e.localStore,t.query,!1).then((({documents:e})=>t.view.sa(e,i))));const s=r&&r.targetChanges.get(t.targetId),o=t.view.applyChanges(i,e.isPrimaryClient,s);return Jb(e,t.targetId,o.ca),o.snapshot}(e,t,n,r);const s=await uw(e.localStore,t,!0),o=new Lb(t,s.ss),a=o.sa(s.documents),l=kg.createSynthesizedTargetChangeForCurrentChange(n,r&&"Offline"!==e.onlineState,i),u=o.applyChanges(a,e.isPrimaryClient,l);Jb(e,n,u.ca);const c=new Mb(t,n,o);return e.Ea.set(t,c),e.da.has(n)?e.da.get(n).push(t):e.da.set(n,[t]),u.snapshot}async function Bb(e,t){const n=ed(e),r=n.Ea.get(t),i=n.da.get(r.targetId);if(i.length>1)return n.da.set(r.targetId,i.filter((e=>!lm(e,t)))),void n.Ea.delete(t);n.isPrimaryClient?(n.sharedClientState.removeLocalQueryTarget(r.targetId),n.sharedClientState.isActiveQueryTarget(r.targetId)||await lw(n.localStore,r.targetId,!1).then((()=>{n.sharedClientState.clearQueryState(r.targetId),Kw(n.remoteStore,r.targetId),Qb(n,r.targetId)})).catch(Ld)):(Qb(n,r.targetId),await lw(n.localStore,r.targetId,!0))}async function jb(e,t){const n=ed(e);try{const e=await function(e,t){const n=ed(e),r=t.snapshotVersion;let i=n.Ji;return n.persistence.runTransaction("Apply remote event","readwrite-primary",(e=>{const s=n.Xi.newChangeBuffer({trackRemovals:!0});i=n.Ji;const o=[];t.targetChanges.forEach(((s,a)=>{const l=i.get(a);if(!l)return;o.push(n.kr.removeMatchingKeys(e,s.removedDocuments,a).next((()=>n.kr.addMatchingKeys(e,s.addedDocuments,a))));let u=l.withSequenceNumber(e.currentSequenceNumber);null!==t.targetMismatches.get(a)?u=u.withResumeToken(Vf.EMPTY_BYTE_STRING,vd.min()).withLastLimboFreeSnapshotVersion(vd.min()):s.resumeToken.approximateByteSize()>0&&(u=u.withResumeToken(s.resumeToken,r)),i=i.insert(a,u),function(e,t,n){return 0===e.resumeToken.approximateByteSize()||t.snapshotVersion.toMicroseconds()-e.snapshotVersion.toMicroseconds()>=3e8||n.addedDocuments.size+n.modifiedDocuments.size+n.removedDocuments.size>0}(l,u,s)&&o.push(n.kr.updateTargetData(e,u))}));let a=ym(),l=Tm();if(t.documentUpdates.forEach((r=>{t.resolvedLimboDocuments.has(r)&&o.push(n.persistence.referenceDelegate.updateLimboDocument(e,r))})),o.push(sw(e,s,t.documentUpdates).next((e=>{a=e.ns,l=e.rs}))),!r.isEqual(vd.min())){const t=n.kr.getLastRemoteSnapshotVersion(e).next((t=>n.kr.setTargetsMetadata(e,e.currentSequenceNumber,r)));o.push(t)}return Md.waitFor(o).next((()=>s.apply(e))).next((()=>n.localDocuments.getLocalViewOfDocuments(e,a,l))).next((()=>a))})).then((e=>(n.Ji=i,e)))}(n.localStore,t);t.targetChanges.forEach(((e,t)=>{const r=n.Va.get(t);r&&(Zh(e.addedDocuments.size+e.modifiedDocuments.size+e.removedDocuments.size<=1),e.addedDocuments.size>0?r.Ia=!0:e.modifiedDocuments.size>0?Zh(r.Ia):e.removedDocuments.size>0&&(Zh(r.Ia),r.Ia=!1))})),await e_(n,e,t)}catch(e){await Ld(e)}}function qb(e,t,n){const r=ed(e);if(r.isPrimaryClient&&0===n||!r.isPrimaryClient&&1===n){const e=[];r.Ea.forEach(((n,r)=>{const i=r.view.N_(t);i.snapshot&&e.push(i.snapshot)})),function(e,t){const n=ed(e);n.onlineState=t;let r=!1;n.queries.forEach(((e,n)=>{for(const e of n.listeners)e.N_(t)&&(r=!0)})),r&&xb(n)}(r.eventManager,t),e.length&&r.Ta.r_(e),r.onlineState=t,r.isPrimaryClient&&r.sharedClientState.setOnlineState(t)}}async function $b(e,t,n){const r=ed(e);r.sharedClientState.updateQueryState(t,"rejected",n);const i=r.Va.get(t),s=i&&i.key;if(s){let e=new Rf(Id.comparator);e=e.insert(s,vp.newNoDocument(s,vd.min()));const n=Tm().add(s),i=new Ig(vd.min(),new Map,new Rf(pd),e,n);await jb(r,i),r.Ra=r.Ra.remove(s),r.Va.delete(t),Zb(r)}else await lw(r.localStore,t,!1).then((()=>Qb(r,t,n))).catch(Ld)}async function Kb(e,t){const n=ed(e),r=t.batch.batchId;try{const e=await function(e,t){const n=ed(e);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",(e=>{const r=t.batch.keys(),i=n.Xi.newChangeBuffer({trackRemovals:!0});return function(e,t,n,r){const i=n.batch,s=i.keys();let o=Md.resolve();return s.forEach((e=>{o=o.next((()=>r.getEntry(t,e))).next((t=>{const s=n.docVersions.get(e);Zh(null!==s),t.version.compareTo(s)<0&&(i.applyToRemoteDocument(t,n),t.isValidDocument()&&(t.setReadTime(n.commitVersion),r.addEntry(t)))}))})),o.next((()=>e.mutationQueue.removeMutationBatch(t,i)))}(n,e,t,i).next((()=>i.apply(e))).next((()=>n.mutationQueue.performConsistencyCheck(e))).next((()=>n.documentOverlayCache.removeOverlaysForBatchId(e,r,t.batch.batchId))).next((()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(e,function(e){let t=Tm();for(let n=0;n<e.mutationResults.length;++n)e.mutationResults[n].transformResults.length>0&&(t=t.add(e.batch.mutations[n].key));return t}(t)))).next((()=>n.localDocuments.getDocuments(e,r)))}))}(n.localStore,t);Hb(n,r,null),Wb(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await e_(n,e)}catch(e){await Ld(e)}}async function Gb(e,t,n){const r=ed(e);try{const e=await function(e,t){const n=ed(e);return n.persistence.runTransaction("Reject batch","readwrite-primary",(e=>{let r;return n.mutationQueue.lookupMutationBatch(e,t).next((t=>(Zh(null!==t),r=t.keys(),n.mutationQueue.removeMutationBatch(e,t)))).next((()=>n.mutationQueue.performConsistencyCheck(e))).next((()=>n.documentOverlayCache.removeOverlaysForBatchId(e,r,t))).next((()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(e,r))).next((()=>n.localDocuments.getDocuments(e,r)))}))}(r.localStore,t);Hb(r,t,n),Wb(r,t),r.sharedClientState.updateMutationState(t,"rejected",n),await e_(r,e)}catch(n){await Ld(n)}}function Wb(e,t){(e.ga.get(t)||[]).forEach((e=>{e.resolve()})),e.ga.delete(t)}function Hb(e,t,n){const r=ed(e);let i=r.fa[r.currentUser.toKey()];if(i){const e=i.get(t);e&&(n?e.reject(n):e.resolve(),i=i.remove(t)),r.fa[r.currentUser.toKey()]=i}}function Qb(e,t,n=null){e.sharedClientState.removeLocalQueryTarget(t);for(const r of e.da.get(t))e.Ea.delete(r),n&&e.Ta.Sa(r,n);e.da.delete(t),e.isPrimaryClient&&e.ma.Ar(t).forEach((t=>{e.ma.containsKey(t)||Yb(e,t)}))}function Yb(e,t){e.Aa.delete(t.path.canonicalString());const n=e.Ra.get(t);null!==n&&(Kw(e.remoteStore,n),e.Ra=e.Ra.remove(t),e.Va.delete(n),Zb(e))}function Jb(e,t,n){for(const r of n)r instanceof Db?(e.ma.addReference(r.key,t),Xb(e,r)):r instanceof Ob?(Hh("SyncEngine","Document no longer in limbo: "+r.key),e.ma.removeReference(r.key,t),e.ma.containsKey(r.key)||Yb(e,r.key)):Xh()}function Xb(e,t){const n=t.key,r=n.path.canonicalString();e.Ra.get(n)||e.Aa.has(r)||(Hh("SyncEngine","New document in limbo: "+n),e.Aa.add(r),Zb(e))}function Zb(e){for(;e.Aa.size>0&&e.Ra.size<e.maxConcurrentLimboResolutions;){const t=e.Aa.values().next().value;e.Aa.delete(t);const n=new Id(bd.fromString(t)),r=e.pa.next();e.Va.set(r,new Fb(n)),e.Ra=e.Ra.insert(n,r),$w(e.remoteStore,new hy(sm(Zp(n.path)),r,"TargetPurposeLimboResolution",Hd.ae))}}async function e_(e,t,n){const r=ed(e),i=[],s=[],o=[];r.Ea.isEmpty()||(r.Ea.forEach(((e,a)=>{o.push(r.wa(a,t,n).then((e=>{if((e||n)&&r.isPrimaryClient&&r.sharedClientState.updateQueryState(a.targetId,(null==e?void 0:e.fromCache)?"not-current":"current"),e){i.push(e);const t=Zv.qi(a.targetId,e);s.push(t)}})))})),await Promise.all(o),r.Ta.r_(i),await async function(e,t){const n=ed(e);try{await n.persistence.runTransaction("notifyLocalViewChanges","readwrite",(e=>Md.forEach(t,(t=>Md.forEach(t.Li,(r=>n.persistence.referenceDelegate.addReference(e,t.targetId,r))).next((()=>Md.forEach(t.ki,(r=>n.persistence.referenceDelegate.removeReference(e,t.targetId,r)))))))))}catch(e){if(!Bd(e))throw e;Hh("LocalStore","Failed to update sequence numbers: "+e)}for(const e of t){const t=e.targetId;if(!e.fromCache){const e=n.Ji.get(t),r=e.snapshotVersion,i=e.withLastLimboFreeSnapshotVersion(r);n.Ji=n.Ji.insert(t,i)}}}(r.localStore,s))}async function t_(e,t){const n=ed(e);if(!n.currentUser.isEqual(t)){Hh("SyncEngine","User change. New user:",t.toKey());const e=await rw(n.localStore,t);n.currentUser=t,function(e,t){e.ga.forEach((e=>{e.forEach((e=>{e.reject(new nd(td.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))}))})),e.ga.clear()}(n),n.sharedClientState.handleUserChange(t,e.removedBatchIds,e.addedBatchIds),await e_(n,e.ts)}}function n_(e,t){const n=ed(e),r=n.Va.get(t);if(r&&r.Ia)return Tm().add(r.key);{let e=Tm();const r=n.da.get(t);if(!r)return e;for(const t of r){const r=n.Ea.get(t);e=e.unionWith(r.view.ia)}return e}}async function r_(e,t){const n=ed(e),r=await uw(n.localStore,t.query,!0),i=t.view.ha(r);return n.isPrimaryClient&&Jb(n,t.targetId,i.ca),i}async function i_(e,t){const n=ed(e);return hw(n.localStore,t).then((e=>e_(n,e)))}async function s_(e,t,n,r){const i=ed(e),s=await function(e,t){const n=ed(e),r=ed(n.mutationQueue);return n.persistence.runTransaction("Lookup mutation documents","readonly",(e=>r.Dn(e,t).next((t=>t?n.localDocuments.getDocuments(e,t):Md.resolve(null)))))}(i.localStore,t);null!==s?("pending"===n?await rb(i.remoteStore):"acknowledged"===n||"rejected"===n?(Hb(i,t,r||null),Wb(i,t),function(e,t){ed(ed(e).mutationQueue).Cn(t)}(i.localStore,t)):Xh(),await e_(i,s)):Hh("SyncEngine","Cannot apply mutation batch with id: "+t)}async function o_(e,t,n){const r=ed(e),i=[],s=[];for(const e of t){let t;const n=r.da.get(e);if(n&&0!==n.length){t=await aw(r.localStore,sm(n[0]));for(const e of n){const t=r.Ea.get(e),n=await r_(r,t);n.snapshot&&s.push(n.snapshot)}}else{const n=await cw(r.localStore,e);t=await aw(r.localStore,n),await zb(r,a_(n),e,!1,t.resumeToken)}i.push(t)}return r.Ta.r_(s),i}function a_(e){return Xp(e.path,e.collectionGroup,e.orderBy,e.filters,e.limit,"F",e.startAt,e.endAt)}function l_(e){return function(e){return ed(ed(e).persistence).Ni()}(ed(e).localStore)}async function u_(e,t,n,r){const i=ed(e);if(i.ya)return void Hh("SyncEngine","Ignoring unexpected query state notification.");const s=i.da.get(t);if(s&&s.length>0)switch(n){case"current":case"not-current":{const e=await hw(i.localStore,dm(s[0])),r=Ig.createSynthesizedRemoteEventForCurrentChange(t,"current"===n,Vf.EMPTY_BYTE_STRING);await e_(i,e,r);break}case"rejected":await lw(i.localStore,t,!0),Qb(i,t,r);break;default:Xh()}}async function c_(e,t,n){const r=h_(e);if(r.ya){for(const e of t){if(r.da.has(e)){Hh("SyncEngine","Adding an already active target "+e);continue}const t=await cw(r.localStore,e),n=await aw(r.localStore,t);await zb(r,a_(t),n.targetId,!1,n.resumeToken),$w(r.remoteStore,n)}for(const e of n)r.da.has(e)&&await lw(r.localStore,e,!1).then((()=>{Kw(r.remoteStore,e),Qb(r,e)})).catch(Ld)}}function h_(e){const t=ed(e);return t.remoteStore.remoteSyncer.applyRemoteEvent=jb.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=n_.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=$b.bind(null,t),t.Ta.r_=Sb.bind(null,t.eventManager),t.Ta.Sa=Tb.bind(null,t.eventManager),t}function d_(e){const t=ed(e);return t.remoteStore.remoteSyncer.applySuccessfulWrite=Kb.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=Gb.bind(null,t),t}class f_{constructor(){this.synchronizeTabs=!1}async initialize(e){this.serializer=Ow(e.databaseInfo.databaseId),this.sharedClientState=this.createSharedClientState(e),this.persistence=this.createPersistence(e),await this.persistence.start(),this.localStore=this.createLocalStore(e),this.gcScheduler=this.createGarbageCollectionScheduler(e,this.localStore),this.indexBackfillerScheduler=this.createIndexBackfillerScheduler(e,this.localStore)}createGarbageCollectionScheduler(e,t){return null}createIndexBackfillerScheduler(e,t){return null}createLocalStore(e){return nw(this.persistence,new ew,e.initialUser,this.serializer)}createPersistence(e){return new qv(Kv.zr,this.serializer)}createSharedClientState(e){return new Iw}async terminate(){this.gcScheduler&&this.gcScheduler.stop(),await this.sharedClientState.shutdown(),await this.persistence.shutdown()}}class p_ extends f_{constructor(e,t,n){super(),this.Da=e,this.cacheSizeBytes=t,this.forceOwnership=n,this.synchronizeTabs=!1}async initialize(e){await super.initialize(e),await this.Da.initialize(this,e),await d_(this.Da.syncEngine),await rb(this.Da.remoteStore),await this.persistence.Vi((()=>(this.gcScheduler&&!this.gcScheduler.started&&this.gcScheduler.start(),this.indexBackfillerScheduler&&!this.indexBackfillerScheduler.started&&this.indexBackfillerScheduler.start(),Promise.resolve())))}createLocalStore(e){return nw(this.persistence,new ew,e.initialUser,this.serializer)}createGarbageCollectionScheduler(e,t){const n=this.persistence.referenceDelegate.garbageCollector;return new bv(n,e.asyncQueue,t)}createIndexBackfillerScheduler(e,t){const n=new Wd(t,this.persistence);return new Gd(e.asyncQueue,n)}createPersistence(e){const t=Xv(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),n=void 0!==this.cacheSizeBytes?sv.withCacheSize(this.cacheSizeBytes):sv.DEFAULT;return new Qv(this.synchronizeTabs,t,e.clientId,n,e.asyncQueue,Pw(),Dw(),this.serializer,this.sharedClientState,!!this.forceOwnership)}createSharedClientState(e){return new Iw}}class m_ extends p_{constructor(e,t){super(e,t,!1),this.Da=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}async initialize(e){await super.initialize(e);const t=this.Da.syncEngine;this.sharedClientState instanceof Ew&&(this.sharedClientState.syncEngine={Gs:s_.bind(null,t),zs:u_.bind(null,t),js:c_.bind(null,t),Ni:l_.bind(null,t),Ws:i_.bind(null,t)},await this.sharedClientState.start()),await this.persistence.Vi((async e=>{await async function(e,t){const n=ed(e);if(h_(n),d_(n),!0===t&&!0!==n.ya){const e=n.sharedClientState.getAllActiveQueryTargets(),t=await o_(n,e.toArray());n.ya=!0,await fb(n.remoteStore,!0);for(const e of t)$w(n.remoteStore,e)}else if(!1===t&&!1!==n.ya){const e=[];let t=Promise.resolve();n.da.forEach(((r,i)=>{n.sharedClientState.isLocalQueryTarget(i)?e.push(i):t=t.then((()=>(Qb(n,i),lw(n.localStore,i,!0)))),Kw(n.remoteStore,i)})),await t,await o_(n,e),function(e){const t=ed(e);t.Va.forEach(((e,n)=>{Kw(t.remoteStore,n)})),t.ma.Rr(),t.Va=new Map,t.Ra=new Rf(Id.comparator)}(n),n.ya=!1,await fb(n.remoteStore,!1)}}(this.Da.syncEngine,e),this.gcScheduler&&(e&&!this.gcScheduler.started?this.gcScheduler.start():e||this.gcScheduler.stop()),this.indexBackfillerScheduler&&(e&&!this.indexBackfillerScheduler.started?this.indexBackfillerScheduler.start():e||this.indexBackfillerScheduler.stop())}))}createSharedClientState(e){const t=Pw();if(!Ew.v(t))throw new nd(td.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const n=Xv(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new Ew(t,e.asyncQueue,n,e.clientId,e.initialUser)}}class g_{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=e=>qb(this.syncEngine,e,1),this.remoteStore.remoteSyncer.handleCredentialChange=t_.bind(null,this.syncEngine),await fb(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return new Eb}createDatastore(e){const t=Ow(e.databaseInfo.databaseId),n=function(e){return new Rw(e)}(e.databaseInfo);return function(e,t,n,r){return new Vw(e,t,n,r)}(e.authCredentials,e.appCheckCredentials,n,t)}createRemoteStore(e){return function(e,t,n,r,i){return new Bw(e,t,n,r,i)}(this.localStore,this.datastore,e.asyncQueue,(e=>qb(this.syncEngine,e,0)),Sw.v()?new Sw:new kw)}createSyncEngine(e,t){return function(e,t,n,r,i,s,o){const a=new Ub(e,t,n,r,i,s);return o&&(a.ya=!0),a}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}terminate(){return async function(e){const t=ed(e);Hh("RemoteStore","RemoteStore shutting down."),t.y_.add(5),await qw(t),t.S_.shutdown(),t.b_.set("Unknown")}(this.remoteStore)}}function y_(e,t=10240){let n=0;return{async read(){if(n<e.byteLength){const r={value:e.slice(n,n+t),done:!1};return n+=t,r}return{done:!0}},async cancel(){},releaseLock(){},closed:Promise.resolve()}}class v_{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.va(this.observer.next,e)}error(e){this.observer.error?this.va(this.observer.error,e):Qh("Uncaught Error in snapshot listener:",e.toString())}Ca(){this.muted=!0}va(e,t){this.muted||setTimeout((()=>{this.muted||e(t)}),0)}}class w_{constructor(e,t){this.Fa=e,this.serializer=t,this.metadata=new rd,this.buffer=new Uint8Array,this.Ma=new TextDecoder("utf-8"),this.xa().then((e=>{e&&e.z_()?this.metadata.resolve(e.G_.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is\n             ${JSON.stringify(null==e?void 0:e.G_)}`))}),(e=>this.metadata.reject(e)))}close(){return this.Fa.cancel()}async getMetadata(){return this.metadata.promise}async ba(){return await this.getMetadata(),this.xa()}async xa(){const e=await this.Oa();if(null===e)return null;const t=this.Ma.decode(e),n=Number(t);isNaN(n)&&this.Na(`length string (${t}) is not valid number`);const r=await this.Ba(n);return new Ab(JSON.parse(r),e.length+n)}La(){return this.buffer.findIndex((e=>e==="{".charCodeAt(0)))}async Oa(){for(;this.La()<0&&!await this.ka(););if(0===this.buffer.length)return null;const e=this.La();e<0&&this.Na("Reached the end of bundle when a length string is expected.");const t=this.buffer.slice(0,e);return this.buffer=this.buffer.slice(e),t}async Ba(e){for(;this.buffer.length<e;)await this.ka()&&this.Na("Reached the end of bundle when more is expected.");const t=this.Ma.decode(this.buffer.slice(0,e));return this.buffer=this.buffer.slice(e),t}Na(e){throw this.Fa.cancel(),new Error(`Invalid bundle format: ${e}`)}async ka(){const e=await this.Fa.read();if(!e.done){const t=new Uint8Array(this.buffer.length+e.value.length);t.set(this.buffer),t.set(e.value,this.buffer.length),this.buffer=t}return e.done}}class b_{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}async lookup(e){if(this.ensureCommitNotCalled(),this.mutations.length>0)throw new nd(td.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");const t=await async function(e,t){const n=ed(e),r=Wg(n.serializer)+"/documents",i={documents:t.map((e=>qg(n.serializer,e)))},s=await n.yo("BatchGetDocuments",r,i,t.length),o=new Map;s.forEach((e=>{const t=function(e,t){return"found"in t?function(e,t){Zh(!!t.found),t.found.name,t.found.updateTime;const n=$g(e,t.found.name),r=zg(t.found.updateTime),i=t.found.createTime?zg(t.found.createTime):vd.min(),s=new gp({mapValue:{fields:t.found.fields}});return vp.newFoundDocument(n,r,i,s)}(e,t):"missing"in t?function(e,t){Zh(!!t.missing),Zh(!!t.readTime);const n=$g(e,t.missing),r=zg(t.readTime);return vp.newNoDocument(n,r)}(e,t):Xh()}(n.serializer,e);o.set(t.key.toString(),t)}));const a=[];return t.forEach((e=>{const t=o.get(e.toString());Zh(!!t),a.push(t)})),a}(this.datastore,e);return t.forEach((e=>this.recordVersion(e))),t}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(e){this.lastWriteError=e}this.writtenDocs.add(e.toString())}delete(e){this.write(new sg(e,this.precondition(e))),this.writtenDocs.add(e.toString())}async commit(){if(this.ensureCommitNotCalled(),this.lastWriteError)throw this.lastWriteError;const e=this.readVersions;this.mutations.forEach((t=>{e.delete(t.key.toString())})),e.forEach(((e,t)=>{const n=Id.fromPath(t);this.mutations.push(new og(n,this.precondition(n)))})),await async function(e,t){const n=ed(e),r=Wg(n.serializer)+"/documents",i={writes:t.map((e=>Jg(n.serializer,e)))};await n.Vo("Commit",r,i)}(this.datastore,this.mutations),this.committed=!0}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw Xh();t=vd.min()}const n=this.readVersions.get(e.key.toString());if(n){if(!t.isEqual(n))throw new nd(td.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){const t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?t.isEqual(vd.min())?Gm.exists(!1):Gm.updateTime(t):Gm.none()}preconditionForUpdate(e){const t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(vd.min()))throw new nd(td.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return Gm.updateTime(t)}return Gm.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}class __{constructor(e,t,n,r,i){this.asyncQueue=e,this.datastore=t,this.options=n,this.updateFunction=r,this.deferred=i,this.qa=n.maxAttempts,this.Ko=new Lw(this.asyncQueue,"transaction_retry")}run(){this.qa-=1,this.Qa()}Qa(){this.Ko.xo((async()=>{const e=new b_(this.datastore),t=this.Ka(e);t&&t.then((t=>{this.asyncQueue.enqueueAndForget((()=>e.commit().then((()=>{this.deferred.resolve(t)})).catch((e=>{this.$a(e)}))))})).catch((e=>{this.$a(e)}))}))}Ka(e){try{const t=this.updateFunction(e);return!Qd(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(e){return this.deferred.reject(e),null}}$a(e){this.qa>0&&this.Ua(e)?(this.qa-=1,this.asyncQueue.enqueueAndForget((()=>(this.Qa(),Promise.resolve())))):this.deferred.reject(e)}Ua(e){if("FirebaseError"===e.name){const t=e.code;return"aborted"===t||"failed-precondition"===t||"already-exists"===t||!fg(t)}return!1}}class E_{constructor(e,t,n,r){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=n,this.databaseInfo=r,this.user=$h.UNAUTHENTICATED,this.clientId=fd.V(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(n,(async e=>{Hh("FirestoreClient","Received user=",e.uid),await this.authCredentialListener(e),this.user=e})),this.appCheckCredentials.start(n,(e=>(Hh("FirestoreClient","Received new app check token=",e),this.appCheckCredentialListener(e,this.user))))}async getConfiguration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new nd(td.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){this.asyncQueue.enterRestrictedMode();const e=new rd;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const n=yb(t,"Failed to shutdown persistence");e.reject(n)}})),e.promise}}async function I_(e,t){e.asyncQueue.verifyOperationInProgress(),Hh("FirestoreClient","Initializing OfflineComponentProvider");const n=await e.getConfiguration();await t.initialize(n);let r=n.initialUser;e.setCredentialChangeListener((async e=>{r.isEqual(e)||(await rw(t.localStore,e),r=e)})),t.persistence.setDatabaseDeletedListener((()=>e.terminate())),e._offlineComponents=t}async function k_(e,t){e.asyncQueue.verifyOperationInProgress();const n=await T_(e);Hh("FirestoreClient","Initializing OnlineComponentProvider");const r=await e.getConfiguration();await t.initialize(n,r),e.setCredentialChangeListener((e=>db(t.remoteStore,e))),e.setAppCheckTokenChangeListener(((e,n)=>db(t.remoteStore,n))),e._onlineComponents=t}function S_(e){return"FirebaseError"===e.name?e.code===td.FAILED_PRECONDITION||e.code===td.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&e instanceof DOMException)||22===e.code||20===e.code||11===e.code}async function T_(e){if(!e._offlineComponents)if(e._uninitializedComponentsProvider){Hh("FirestoreClient","Using user provided OfflineComponentProvider");try{await I_(e,e._uninitializedComponentsProvider._offline)}catch(t){const n=t;if(!S_(n))throw n;Yh("Error using user provided cache. Falling back to memory cache: "+n),await I_(e,new f_)}}else Hh("FirestoreClient","Using default OfflineComponentProvider"),await I_(e,new f_);return e._offlineComponents}async function x_(e){return e._onlineComponents||(e._uninitializedComponentsProvider?(Hh("FirestoreClient","Using user provided OnlineComponentProvider"),await k_(e,e._uninitializedComponentsProvider._online)):(Hh("FirestoreClient","Using default OnlineComponentProvider"),await k_(e,new g_))),e._onlineComponents}function C_(e){return T_(e).then((e=>e.persistence))}function A_(e){return T_(e).then((e=>e.localStore))}function N_(e){return x_(e).then((e=>e.remoteStore))}function R_(e){return x_(e).then((e=>e.syncEngine))}async function P_(e){const t=await x_(e),n=t.eventManager;return n.onListen=Vb.bind(null,t.syncEngine),n.onUnlisten=Bb.bind(null,t.syncEngine),n}function D_(e,t,n={}){const r=new rd;return e.asyncQueue.enqueueAndForget((async()=>function(e,t,n,r,i){const s=new v_({next:s=>{t.enqueueAndForget((()=>kb(e,o)));const a=s.docs.has(n);!a&&s.fromCache?i.reject(new nd(td.UNAVAILABLE,"Failed to get document because the client is offline.")):a&&s.fromCache&&r&&"server"===r.source?i.reject(new nd(td.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):i.resolve(s)},error:e=>i.reject(e)}),o=new Cb(Zp(n.path),s,{includeMetadataChanges:!0,W_:!0});return Ib(e,o)}(await P_(e),e.asyncQueue,t,n,r))),r.promise}function O_(e,t,n={}){const r=new rd;return e.asyncQueue.enqueueAndForget((async()=>function(e,t,n,r,i){const s=new v_({next:n=>{t.enqueueAndForget((()=>kb(e,o))),n.fromCache&&"server"===r.source?i.reject(new nd(td.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):i.resolve(n)},error:e=>i.reject(e)}),o=new Cb(n,s,{includeMetadataChanges:!0,W_:!0});return Ib(e,o)}(await P_(e),e.asyncQueue,t,n,r))),r.promise}function L_(e){const t={};return void 0!==e.timeoutSeconds&&(t.timeoutSeconds=e.timeoutSeconds),t}const M_=new Map;function F_(e,t,n){if(!n)throw new nd(td.INVALID_ARGUMENT,`Function ${e}() cannot be called with an empty ${t}.`)}function U_(e,t,n,r){if(!0===t&&!0===r)throw new nd(td.INVALID_ARGUMENT,`${e} and ${n} cannot be used together.`)}function V_(e){if(!Id.isDocumentKey(e))throw new nd(td.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${e} has ${e.length}.`)}function z_(e){if(Id.isDocumentKey(e))throw new nd(td.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${e} has ${e.length}.`)}function B_(e){if(void 0===e)return"undefined";if(null===e)return"null";if("string"==typeof e)return e.length>20&&(e=`${e.substring(0,20)}...`),JSON.stringify(e);if("number"==typeof e||"boolean"==typeof e)return""+e;if("object"==typeof e){if(e instanceof Array)return"an array";{const t=function(e){return e.constructor?e.constructor.name:null}(e);return t?`a custom ${t} object`:"an object"}}return"function"==typeof e?"a function":Xh()}function j_(e,t){if("_delegate"in e&&(e=e._delegate),!(e instanceof t)){if(t.name===e.constructor.name)throw new nd(td.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=B_(e);throw new nd(td.INVALID_ARGUMENT,`Expected type '${t.name}', but it was: ${n}`)}}return e}function q_(e,t){if(t<=0)throw new nd(td.INVALID_ARGUMENT,`Function ${e}() requires a positive number, but it was: ${t}.`)}class $_{constructor(e){var t,n;if(void 0===e.host){if(void 0!==e.ssl)throw new nd(td.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(t=e.ssl)||void 0===t||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new nd(td.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}U_("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:void 0===e.experimentalAutoDetectLongPolling?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=L_(null!==(n=e.experimentalLongPollingOptions)&&void 0!==n?n:{}),function(e){if(void 0!==e.timeoutSeconds){if(isNaN(e.timeoutSeconds))throw new nd(td.INVALID_ARGUMENT,`invalid long polling timeout: ${e.timeoutSeconds} (must not be NaN)`);if(e.timeoutSeconds<5)throw new nd(td.INVALID_ARGUMENT,`invalid long polling timeout: ${e.timeoutSeconds} (minimum allowed value is 5)`);if(e.timeoutSeconds>30)throw new nd(td.INVALID_ARGUMENT,`invalid long polling timeout: ${e.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(e,t){return e.timeoutSeconds===t.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class K_{constructor(e,t,n,r){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=n,this._app=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new $_({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new nd(td.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new nd(td.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new $_(e),void 0!==e.credentials&&(this._authCredentials=function(e){if(!e)return new sd;switch(e.type){case"firstParty":return new ud(e.sessionIndex||"0",e.iamToken||null,e.authTokenFactory||null);case"provider":return e.client;default:throw new nd(td.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const t=M_.get(e);t&&(Hh("ComponentProvider","Removing Datastore"),M_.delete(e),t.terminate())}(this),Promise.resolve()}}class G_{constructor(e,t,n){this.converter=t,this._query=n,this.type="query",this.firestore=e}withConverter(e){return new G_(this.firestore,e,this._query)}}class W_{constructor(e,t,n){this.converter=t,this._key=n,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new H_(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new W_(this.firestore,e,this._key)}}class H_ extends G_{constructor(e,t,n){super(e,t,Zp(n)),this._path=n,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new W_(this.firestore,null,new Id(e))}withConverter(e){return new H_(this.firestore,e,this._path)}}function Q_(e,t,...n){if(e=Ft(e),F_("collection","path",t),e instanceof K_){const r=bd.fromString(t,...n);return z_(r),new H_(e,null,r)}{if(!(e instanceof W_||e instanceof H_))throw new nd(td.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=e._path.child(bd.fromString(t,...n));return z_(r),new H_(e.firestore,null,r)}}function Y_(e,t,...n){if(e=Ft(e),1===arguments.length&&(t=fd.V()),F_("doc","path",t),e instanceof K_){const r=bd.fromString(t,...n);return V_(r),new W_(e,null,new Id(r))}{if(!(e instanceof W_||e instanceof H_))throw new nd(td.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=e._path.child(bd.fromString(t,...n));return V_(r),new W_(e.firestore,e instanceof H_?e.converter:null,new Id(r))}}function J_(e,t){return e=Ft(e),t=Ft(t),(e instanceof W_||e instanceof H_)&&(t instanceof W_||t instanceof H_)&&e.firestore===t.firestore&&e.path===t.path&&e.converter===t.converter}function X_(e,t){return e=Ft(e),t=Ft(t),e instanceof G_&&t instanceof G_&&e.firestore===t.firestore&&lm(e._query,t._query)&&e.converter===t.converter}class Z_{constructor(){this.Wa=Promise.resolve(),this.Ga=[],this.za=!1,this.ja=[],this.Ha=null,this.Ja=!1,this.Ya=!1,this.Za=[],this.Ko=new Lw(this,"async_queue_retry"),this.Xa=()=>{const e=Dw();e&&Hh("AsyncQueue","Visibility state changed to "+e.visibilityState),this.Ko.No()};const e=Dw();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.Xa)}get isShuttingDown(){return this.za}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.eu(),this.tu(e)}enterRestrictedMode(e){if(!this.za){this.za=!0,this.Ya=e||!1;const t=Dw();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.Xa)}}enqueue(e){if(this.eu(),this.za)return new Promise((()=>{}));const t=new rd;return this.tu((()=>this.za&&this.Ya?Promise.resolve():(e().then(t.resolve,t.reject),t.promise))).then((()=>t.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Ga.push(e),this.nu())))}async nu(){if(0!==this.Ga.length){try{await this.Ga[0](),this.Ga.shift(),this.Ko.reset()}catch(e){if(!Bd(e))throw e;Hh("AsyncQueue","Operation failed with retryable error: "+e)}this.Ga.length>0&&this.Ko.xo((()=>this.nu()))}}tu(e){const t=this.Wa.then((()=>(this.Ja=!0,e().catch((e=>{this.Ha=e,this.Ja=!1;const t=function(e){let t=e.message||"";return e.stack&&(t=e.stack.includes(e.message)?e.stack:e.message+"\n"+e.stack),t}(e);throw Qh("INTERNAL UNHANDLED ERROR: ",t),e})).then((e=>(this.Ja=!1,e))))));return this.Wa=t,t}enqueueAfterDelay(e,t,n){this.eu(),this.Za.indexOf(e)>-1&&(t=0);const r=gb.createAndSchedule(this,e,t,n,(e=>this.ru(e)));return this.ja.push(r),r}eu(){this.Ha&&Xh()}verifyOperationInProgress(){}async iu(){let e;do{e=this.Wa,await e}while(e!==this.Wa)}su(e){for(const t of this.ja)if(t.timerId===e)return!0;return!1}ou(e){return this.iu().then((()=>{this.ja.sort(((e,t)=>e.targetTimeMs-t.targetTimeMs));for(const t of this.ja)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.iu()}))}_u(e){this.Za.push(e)}ru(e){const t=this.ja.indexOf(e);this.ja.splice(t,1)}}function eE(e){return function(e,t){if("object"!=typeof e||null===e)return!1;const n=e;for(const e of["next","error","complete"])if(e in n&&"function"==typeof n[e])return!0;return!1}(e)}class tE{constructor(){this._progressObserver={},this._taskCompletionResolver=new rd,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,t,n){this._progressObserver={next:e,error:t,complete:n}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,t){return this._taskCompletionResolver.promise.then(e,t)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}class nE extends K_{constructor(e,t,n,r){super(e,t,n,r),this.type="firestore",this._queue=new Z_,this._persistenceKey=(null==r?void 0:r.name)||"[DEFAULT]"}_terminate(){return this._firestoreClient||iE(this),this._firestoreClient.terminate()}}function rE(e){return e._firestoreClient||iE(e),e._firestoreClient.verifyNotTerminated(),e._firestoreClient}function iE(e){var t,n,r;const i=e._freezeSettings(),s=function(e,t,n,r){return new Wf(e,t,n,r.host,r.ssl,r.experimentalForceLongPolling,r.experimentalAutoDetectLongPolling,L_(r.experimentalLongPollingOptions),r.useFetchStreams)}(e._databaseId,(null===(t=e._app)||void 0===t?void 0:t.options.appId)||"",e._persistenceKey,i);e._firestoreClient=new E_(e._authCredentials,e._appCheckCredentials,e._queue,s),(null===(n=i.localCache)||void 0===n?void 0:n._offlineComponentProvider)&&(null===(r=i.localCache)||void 0===r?void 0:r._onlineComponentProvider)&&(e._firestoreClient._uninitializedComponentsProvider={_offlineKind:i.localCache.kind,_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider})}function sE(e,t,n){const r=new rd;return e.asyncQueue.enqueue((async()=>{try{await I_(e,n),await k_(e,t),r.resolve()}catch(e){const t=e;if(!S_(t))throw t;Yh("Error enabling indexeddb cache. Falling back to memory cache: "+t),r.reject(t)}})).then((()=>r.promise))}function oE(e){if(e._initialized||e._terminated)throw new nd(td.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}class aE{constructor(e){this._byteString=e}static fromBase64String(e){try{return new aE(Vf.fromBase64String(e))}catch(e){throw new nd(td.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+e)}}static fromUint8Array(e){return new aE(Vf.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class lE{constructor(...e){for(let t=0;t<e.length;++t)if(0===e[t].length)throw new nd(td.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Ed(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class uE{constructor(e){this._methodName=e}}class cE{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new nd(td.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new nd(td.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return pd(this._lat,e._lat)||pd(this._long,e._long)}}const hE=/^__.*__$/;class dE{constructor(e,t,n){this.data=e,this.fieldMask=t,this.fieldTransforms=n}toMutation(e,t){return null!==this.fieldMask?new tg(e,this.data,this.fieldMask,t,this.fieldTransforms):new eg(e,this.data,t,this.fieldTransforms)}}class fE{constructor(e,t,n){this.data=e,this.fieldMask=t,this.fieldTransforms=n}toMutation(e,t){return new tg(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function pE(e){switch(e){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Xh()}}class mE{constructor(e,t,n,r,i,s){this.settings=e,this.databaseId=t,this.serializer=n,this.ignoreUndefinedProperties=r,void 0===i&&this.au(),this.fieldTransforms=i||[],this.fieldMask=s||[]}get path(){return this.settings.path}get uu(){return this.settings.uu}cu(e){return new mE(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}lu(e){var t;const n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.cu({path:n,hu:!1});return r.Pu(e),r}Iu(e){var t;const n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.cu({path:n,hu:!1});return r.au(),r}Tu(e){return this.cu({path:void 0,hu:!0})}Eu(e){return LE(e,this.settings.methodName,this.settings.du||!1,this.path,this.settings.Au)}contains(e){return void 0!==this.fieldMask.find((t=>e.isPrefixOf(t)))||void 0!==this.fieldTransforms.find((t=>e.isPrefixOf(t.field)))}au(){if(this.path)for(let e=0;e<this.path.length;e++)this.Pu(this.path.get(e))}Pu(e){if(0===e.length)throw this.Eu("Document fields must not be empty");if(pE(this.uu)&&hE.test(e))throw this.Eu('Document fields cannot begin and end with "__"')}}class gE{constructor(e,t,n){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=n||Ow(e)}Ru(e,t,n,r=!1){return new mE({uu:e,methodName:t,Au:n,path:Ed.emptyPath(),hu:!1,du:r},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function yE(e){const t=e._freezeSettings(),n=Ow(e._databaseId);return new gE(e._databaseId,!!t.ignoreUndefinedProperties,n)}function vE(e,t,n,r,i,s={}){const o=e.Ru(s.merge||s.mergeFields?2:0,t,n,i);RE("Data must be an object, but it was:",o,r);const a=AE(r,o);let l,u;if(s.merge)l=new Ff(o.fieldMask),u=o.fieldTransforms;else if(s.mergeFields){const e=[];for(const r of s.mergeFields){const i=PE(t,r,n);if(!o.contains(i))throw new nd(td.INVALID_ARGUMENT,`Field '${i}' is specified in your field mask but missing from your input data.`);ME(e,i)||e.push(i)}l=new Ff(e),u=o.fieldTransforms.filter((e=>l.covers(e.field)))}else l=null,u=o.fieldTransforms;return new dE(new gp(a),l,u)}class wE extends uE{_toFieldTransform(e){if(2!==e.uu)throw 1===e.uu?e.Eu(`${this._methodName}() can only appear at the top level of your update data`):e.Eu(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof wE}}function bE(e,t,n){return new mE({uu:3,Au:t.settings.Au,methodName:e._methodName,hu:n},t.databaseId,t.serializer,t.ignoreUndefinedProperties)}class _E extends uE{_toFieldTransform(e){return new $m(e.path,new Mm)}isEqual(e){return e instanceof _E}}class EE extends uE{constructor(e,t){super(e),this.Vu=t}_toFieldTransform(e){const t=bE(this,e,!0),n=this.Vu.map((e=>CE(e,t))),r=new Fm(n);return new $m(e.path,r)}isEqual(e){return this===e}}class IE extends uE{constructor(e,t){super(e),this.Vu=t}_toFieldTransform(e){const t=bE(this,e,!0),n=this.Vu.map((e=>CE(e,t))),r=new Vm(n);return new $m(e.path,r)}isEqual(e){return this===e}}class kE extends uE{constructor(e,t){super(e),this.mu=t}_toFieldTransform(e){const t=new Bm(e.serializer,Rm(e.serializer,this.mu));return new $m(e.path,t)}isEqual(e){return this===e}}function SE(e,t,n,r){const i=e.Ru(1,t,n);RE("Data must be an object, but it was:",i,r);const s=[],o=gp.empty();Af(r,((e,r)=>{const a=OE(t,e,n);r=Ft(r);const l=i.Iu(a);if(r instanceof wE)s.push(a);else{const e=CE(r,l);null!=e&&(s.push(a),o.set(a,e))}}));const a=new Ff(s);return new fE(o,a,i.fieldTransforms)}function TE(e,t,n,r,i,s){const o=e.Ru(1,t,n),a=[PE(t,r,n)],l=[i];if(s.length%2!=0)throw new nd(td.INVALID_ARGUMENT,`Function ${t}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let e=0;e<s.length;e+=2)a.push(PE(t,s[e])),l.push(s[e+1]);const u=[],c=gp.empty();for(let e=a.length-1;e>=0;--e)if(!ME(u,a[e])){const t=a[e];let n=l[e];n=Ft(n);const r=o.Iu(t);if(n instanceof wE)u.push(t);else{const e=CE(n,r);null!=e&&(u.push(t),c.set(t,e))}}const h=new Ff(u);return new fE(c,h,o.fieldTransforms)}function xE(e,t,n,r=!1){return CE(n,e.Ru(r?4:3,t))}function CE(e,t){if(NE(e=Ft(e)))return RE("Unsupported field value:",t,e),AE(e,t);if(e instanceof uE)return function(e,t){if(!pE(t.uu))throw t.Eu(`${e._methodName}() can only be used with update() and set()`);if(!t.path)throw t.Eu(`${e._methodName}() is not currently supported inside arrays`);const n=e._toFieldTransform(t);n&&t.fieldTransforms.push(n)}(e,t),null;if(void 0===e&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),e instanceof Array){if(t.settings.hu&&4!==t.uu)throw t.Eu("Nested arrays are not supported");return function(e,t){const n=[];let r=0;for(const i of e){let e=CE(i,t.Tu(r));null==e&&(e={nullValue:"NULL_VALUE"}),n.push(e),r++}return{arrayValue:{values:n}}}(e,t)}return function(e,t){if(null===(e=Ft(e)))return{nullValue:"NULL_VALUE"};if("number"==typeof e)return Rm(t.serializer,e);if("boolean"==typeof e)return{booleanValue:e};if("string"==typeof e)return{stringValue:e};if(e instanceof Date){const n=yd.fromDate(e);return{timestampValue:Fg(t.serializer,n)}}if(e instanceof yd){const n=new yd(e.seconds,1e3*Math.floor(e.nanoseconds/1e3));return{timestampValue:Fg(t.serializer,n)}}if(e instanceof cE)return{geoPointValue:{latitude:e.latitude,longitude:e.longitude}};if(e instanceof aE)return{bytesValue:Ug(t.serializer,e._byteString)};if(e instanceof W_){const n=t.databaseId,r=e.firestore._databaseId;if(!r.isEqual(n))throw t.Eu(`Document reference is for database ${r.projectId}/${r.database} but should be for database ${n.projectId}/${n.database}`);return{referenceValue:Bg(e.firestore._databaseId||t.databaseId,e._key.path)}}throw t.Eu(`Unsupported field value: ${B_(e)}`)}(e,t)}function AE(e,t){const n={};return Nf(e)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):Af(e,((e,r)=>{const i=CE(r,t.lu(e));null!=i&&(n[e]=i)})),{mapValue:{fields:n}}}function NE(e){return!("object"!=typeof e||null===e||e instanceof Array||e instanceof Date||e instanceof yd||e instanceof cE||e instanceof aE||e instanceof W_||e instanceof uE)}function RE(e,t,n){if(!NE(n)||!function(e){return"object"==typeof e&&null!==e&&(Object.getPrototypeOf(e)===Object.prototype||null===Object.getPrototypeOf(e))}(n)){const r=B_(n);throw"an object"===r?t.Eu(e+" a custom object"):t.Eu(e+" "+r)}}function PE(e,t,n){if((t=Ft(t))instanceof lE)return t._internalPath;if("string"==typeof t)return OE(e,t);throw LE("Field path arguments must be of type string or ",e,!1,void 0,n)}const DE=new RegExp("[~\\*/\\[\\]]");function OE(e,t,n){if(t.search(DE)>=0)throw LE(`Invalid field path (${t}). Paths must not contain '~', '*', '/', '[', or ']'`,e,!1,void 0,n);try{return new lE(...t.split("."))._internalPath}catch(r){throw LE(`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,e,!1,void 0,n)}}function LE(e,t,n,r,i){const s=r&&!r.isEmpty(),o=void 0!==i;let a=`Function ${t}() called with invalid data`;n&&(a+=" (via `toFirestore()`)"),a+=". ";let l="";return(s||o)&&(l+=" (found",s&&(l+=` in field ${r}`),o&&(l+=` in document ${i}`),l+=")"),new nd(td.INVALID_ARGUMENT,a+e+l)}function ME(e,t){return e.some((e=>e.isEqual(t)))}class FE{constructor(e,t,n,r,i){this._firestore=e,this._userDataWriter=t,this._key=n,this._document=r,this._converter=i}get id(){return this._key.path.lastSegment()}get ref(){return new W_(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new UE(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(VE("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class UE extends FE{data(){return super.data()}}function VE(e,t){return"string"==typeof t?OE(e,t):t instanceof lE?t._internalPath:t._delegate._internalPath}function zE(e){if("L"===e.limitType&&0===e.explicitOrderBy.length)throw new nd(td.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class BE{}class jE extends BE{}function qE(e,t,...n){let r=[];t instanceof BE&&r.push(t),r=r.concat(n),function(e){const t=e.filter((e=>e instanceof KE)).length,n=e.filter((e=>e instanceof $E)).length;if(t>1||t>0&&n>0)throw new nd(td.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const t of r)e=t._apply(e);return e}class $E extends jE{constructor(e,t,n){super(),this._field=e,this._op=t,this._value=n,this.type="where"}static _create(e,t,n){return new $E(e,t,n)}_apply(e){const t=this._parse(e);return ZE(e._query,t),new G_(e.firestore,e.converter,om(e._query,t))}_parse(e){const t=yE(e.firestore),n=function(e,t,n,r,i,s,o){let a;if(i.isKeyField()){if("array-contains"===s||"array-contains-any"===s)throw new nd(td.INVALID_ARGUMENT,`Invalid Query. You can't perform '${s}' queries on documentId().`);if("in"===s||"not-in"===s){XE(o,s);const t=[];for(const n of o)t.push(JE(r,e,n));a={arrayValue:{values:t}}}else a=JE(r,e,o)}else"in"!==s&&"not-in"!==s&&"array-contains-any"!==s||XE(o,s),a=xE(n,"where",o,"in"===s||"not-in"===s);return Sp.create(i,s,a)}(e._query,0,t,e.firestore._databaseId,this._field,this._op,this._value);return n}}class KE extends BE{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new KE(e,t)}_parse(e){const t=this._queryConstraints.map((t=>t._parse(e))).filter((e=>e.getFilters().length>0));return 1===t.length?t[0]:Tp.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return 0===t.getFilters().length?e:(function(e,t){let n=e;const r=t.getFlattenedFilters();for(const e of r)ZE(n,e),n=om(n,e)}(e._query,t),new G_(e.firestore,e.converter,om(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return"and"===this.type?"and":"or"}}class GE extends jE{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new GE(e,t)}_apply(e){const t=function(e,t,n){if(null!==e.startAt)throw new nd(td.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==e.endAt)throw new nd(td.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");const r=new Ep(t,n);return function(e,t){if(null===tm(e)){const n=nm(e);null!==n&&eI(0,n,t.field)}}(e,r),r}(e._query,this._field,this._direction);return new G_(e.firestore,e.converter,function(e,t){const n=e.explicitOrderBy.concat([t]);return new Jp(e.path,e.collectionGroup,n,e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(e._query,t))}}class WE extends jE{constructor(e,t,n){super(),this.type=e,this._limit=t,this._limitType=n}static _create(e,t,n){return new WE(e,t,n)}_apply(e){return new G_(e.firestore,e.converter,am(e._query,this._limit,this._limitType))}}class HE extends jE{constructor(e,t,n){super(),this.type=e,this._docOrFields=t,this._inclusive=n}static _create(e,t,n){return new HE(e,t,n)}_apply(e){const t=YE(e,this.type,this._docOrFields,this._inclusive);return new G_(e.firestore,e.converter,function(e,t){return new Jp(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,t,e.endAt)}(e._query,t))}}class QE extends jE{constructor(e,t,n){super(),this.type=e,this._docOrFields=t,this._inclusive=n}static _create(e,t,n){return new QE(e,t,n)}_apply(e){const t=YE(e,this.type,this._docOrFields,this._inclusive);return new G_(e.firestore,e.converter,function(e,t){return new Jp(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,e.startAt,t)}(e._query,t))}}function YE(e,t,n,r){if(n[0]=Ft(n[0]),n[0]instanceof FE)return function(e,t,n,r,i){if(!r)throw new nd(td.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${n}().`);const s=[];for(const n of im(e))if(n.field.isKeyField())s.push(ip(t,r.key));else{const e=r.data.field(n.field);if($f(e))throw new nd(td.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+n.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===e){const e=n.field.canonicalString();throw new nd(td.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${e}' (used as the orderBy) does not exist.`)}s.push(e)}return new wp(s,i)}(e._query,e.firestore._databaseId,t,n[0]._document,r);{const i=yE(e.firestore);return function(e,t,n,r,i,s){const o=e.explicitOrderBy;if(i.length>o.length)throw new nd(td.INVALID_ARGUMENT,`Too many arguments provided to ${r}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const a=[];for(let s=0;s<i.length;s++){const l=i[s];if(o[s].field.isKeyField()){if("string"!=typeof l)throw new nd(td.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${r}(), but got a ${typeof l}`);if(!rm(e)&&-1!==l.indexOf("/"))throw new nd(td.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${r}() must be a plain document ID, but '${l}' contains a slash.`);const n=e.path.child(bd.fromString(l));if(!Id.isDocumentKey(n))throw new nd(td.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${r}() must result in a valid document path, but '${n}' is not because it contains an odd number of segments.`);const i=new Id(n);a.push(ip(t,i))}else{const e=xE(n,r,l);a.push(e)}}return new wp(a,s)}(e._query,e.firestore._databaseId,i,t,n,r)}}function JE(e,t,n){if("string"==typeof(n=Ft(n))){if(""===n)throw new nd(td.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!rm(t)&&-1!==n.indexOf("/"))throw new nd(td.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=t.path.child(bd.fromString(n));if(!Id.isDocumentKey(r))throw new nd(td.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return ip(e,new Id(r))}if(n instanceof W_)return ip(e,n._key);throw new nd(td.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${B_(n)}.`)}function XE(e,t){if(!Array.isArray(e)||0===e.length)throw new nd(td.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${t.toString()}' filters.`)}function ZE(e,t){if(t.isInequality()){const n=nm(e),r=t.field;if(null!==n&&!n.isEqual(r))throw new nd(td.INVALID_ARGUMENT,`Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '${n.toString()}' and '${r.toString()}'`);const i=tm(e);null!==i&&eI(0,r,i)}const n=function(e,t){for(const n of e)for(const e of n.getFlattenedFilters())if(t.indexOf(e.op)>=0)return e.op;return null}(e.filters,function(e){switch(e){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(t.op));if(null!==n)throw n===t.op?new nd(td.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${t.op.toString()}' filter.`):new nd(td.INVALID_ARGUMENT,`Invalid query. You cannot use '${t.op.toString()}' filters with '${n.toString()}' filters.`)}function eI(e,t,n){if(!n.isEqual(t))throw new nd(td.INVALID_ARGUMENT,`Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '${t.toString()}' and so you must also use '${t.toString()}' as your first argument to orderBy(), but your first orderBy() is on field '${n.toString()}' instead.`)}class tI{convertValue(e,t="none"){switch(Jf(e)){case 0:return null;case 1:return e.booleanValue;case 2:return jf(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(qf(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw Xh()}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const n={};return Af(e,((e,r)=>{n[e]=this.convertValue(r,t)})),n}convertGeoPoint(e){return new cE(jf(e.latitude),jf(e.longitude))}convertArray(e,t){return(e.values||[]).map((e=>this.convertValue(e,t)))}convertServerTimestamp(e,t){switch(t){case"previous":const n=Kf(e);return null==n?null:this.convertValue(n,t);case"estimate":return this.convertTimestamp(Gf(e));default:return null}}convertTimestamp(e){const t=Bf(e);return new yd(t.seconds,t.nanos)}convertDocumentKey(e,t){const n=bd.fromString(e);Zh(cy(n));const r=new Hf(n.get(1),n.get(3)),i=new Id(n.popFirst(5));return r.isEqual(t)||Qh(`Document ${i} contains a document reference within a different database (${r.projectId}/${r.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),i}}function nI(e,t,n){let r;return r=e?n&&(n.merge||n.mergeFields)?e.toFirestore(t,n):e.toFirestore(t):t,r}class rI extends tI{constructor(e){super(),this.firestore=e}convertBytes(e){return new aE(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new W_(this.firestore,null,t)}}class iI{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class sI extends FE{constructor(e,t,n,r,i,s){super(e,t,n,r,s),this._firestore=e,this._firestoreImpl=e,this.metadata=i}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new oI(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const n=this._document.data.field(VE("DocumentSnapshot.get",e));if(null!==n)return this._userDataWriter.convertValue(n,t.serverTimestamps)}}}class oI extends sI{data(e={}){return super.data(e)}}class aI{constructor(e,t,n,r){this._firestore=e,this._userDataWriter=t,this._snapshot=r,this.metadata=new iI(r.hasPendingWrites,r.fromCache),this.query=n}get docs(){const e=[];return this.forEach((t=>e.push(t))),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach((n=>{e.call(t,new oI(this._firestore,this._userDataWriter,n.key,n,new iI(this._snapshot.mutatedKeys.has(n.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new nd(td.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(e,t){if(e._snapshot.oldDocs.isEmpty()){let t=0;return e._snapshot.docChanges.map((n=>{const r=new oI(e._firestore,e._userDataWriter,n.doc.key,n.doc,new iI(e._snapshot.mutatedKeys.has(n.doc.key),e._snapshot.fromCache),e.query.converter);return n.doc,{type:"added",doc:r,oldIndex:-1,newIndex:t++}}))}{let n=e._snapshot.oldDocs;return e._snapshot.docChanges.filter((e=>t||3!==e.type)).map((t=>{const r=new oI(e._firestore,e._userDataWriter,t.doc.key,t.doc,new iI(e._snapshot.mutatedKeys.has(t.doc.key),e._snapshot.fromCache),e.query.converter);let i=-1,s=-1;return 0!==t.type&&(i=n.indexOf(t.doc.key),n=n.delete(t.doc.key)),1!==t.type&&(n=n.add(t.doc),s=n.indexOf(t.doc.key)),{type:lI(t.type),doc:r,oldIndex:i,newIndex:s}}))}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function lI(e){switch(e){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Xh()}}function uI(e,t){return e instanceof sI&&t instanceof sI?e._firestore===t._firestore&&e._key.isEqual(t._key)&&(null===e._document?null===t._document:e._document.isEqual(t._document))&&e._converter===t._converter:e instanceof aI&&t instanceof aI&&e._firestore===t._firestore&&X_(e.query,t.query)&&e.metadata.isEqual(t.metadata)&&e._snapshot.isEqual(t._snapshot)}class cI extends tI{constructor(e){super(),this.firestore=e}convertBytes(e){return new aE(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new W_(this.firestore,null,t)}}function hI(e,t,n){e=j_(e,W_);const r=j_(e.firestore,nE),i=nI(e.converter,t,n);return pI(r,[vE(yE(r),"setDoc",e._key,i,null!==e.converter,n).toMutation(e._key,Gm.none())])}function dI(e,t,n,...r){e=j_(e,W_);const i=j_(e.firestore,nE),s=yE(i);let o;return o="string"==typeof(t=Ft(t))||t instanceof lE?TE(s,"updateDoc",e._key,t,n,r):SE(s,"updateDoc",e._key,t),pI(i,[o.toMutation(e._key,Gm.exists(!0))])}function fI(e,...t){var n,r,i;e=Ft(e);let s={includeMetadataChanges:!1},o=0;"object"!=typeof t[o]||eE(t[o])||(s=t[o],o++);const a={includeMetadataChanges:s.includeMetadataChanges};if(eE(t[o])){const e=t[o];t[o]=null===(n=e.next)||void 0===n?void 0:n.bind(e),t[o+1]=null===(r=e.error)||void 0===r?void 0:r.bind(e),t[o+2]=null===(i=e.complete)||void 0===i?void 0:i.bind(e)}let l,u,c;if(e instanceof W_)u=j_(e.firestore,nE),c=Zp(e._key.path),l={next:n=>{t[o]&&t[o](mI(u,e,n))},error:t[o+1],complete:t[o+2]};else{const n=j_(e,G_);u=j_(n.firestore,nE),c=n._query;const r=new cI(u);l={next:e=>{t[o]&&t[o](new aI(u,r,n,e))},error:t[o+1],complete:t[o+2]},zE(e._query)}return function(e,t,n,r){const i=new v_(r),s=new Cb(t,i,n);return e.asyncQueue.enqueueAndForget((async()=>Ib(await P_(e),s))),()=>{i.Ca(),e.asyncQueue.enqueueAndForget((async()=>kb(await P_(e),s)))}}(rE(u),c,a,l)}function pI(e,t){return function(e,t){const n=new rd;return e.asyncQueue.enqueueAndForget((async()=>async function(e,t,n){const r=d_(e);try{const e=await function(e,t){const n=ed(e),r=yd.now(),i=t.reduce(((e,t)=>e.add(t.key)),Tm());let s,o;return n.persistence.runTransaction("Locally write mutations","readwrite",(e=>{let a=ym(),l=Tm();return n.Xi.getEntries(e,i).next((e=>{a=e,a.forEach(((e,t)=>{t.isValidDocument()||(l=l.add(e))}))})).next((()=>n.localDocuments.getOverlayedDocuments(e,a))).next((i=>{s=i;const o=[];for(const e of t){const t=Xm(e,s.get(e.key).overlayedDocument);null!=t&&o.push(new tg(e.key,t,yp(t.value.mapValue),Gm.exists(!0)))}return n.mutationQueue.addMutationBatch(e,r,o,t)})).next((t=>{o=t;const r=t.applyToLocalDocumentSet(s,l);return n.documentOverlayCache.saveOverlays(e,t.batchId,r)}))})).then((()=>({batchId:o.batchId,changes:bm(s)})))}(r.localStore,t);r.sharedClientState.addPendingMutation(e.batchId),function(e,t,n){let r=e.fa[e.currentUser.toKey()];r||(r=new Rf(pd)),r=r.insert(t,n),e.fa[e.currentUser.toKey()]=r}(r,e.batchId,n),await e_(r,e.changes),await rb(r.remoteStore)}catch(e){const t=yb(e,"Failed to persist write");n.reject(t)}}(await R_(e),t,n))),n.promise}(rE(e),t)}function mI(e,t,n){const r=n.docs.get(t._key),i=new cI(e);return new sI(e,i,t._key,r,new iI(n.hasPendingWrites,n.fromCache),t.converter)}const gI={maxAttempts:5};class yI{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=yE(e)}set(e,t,n){this._verifyNotCommitted();const r=vI(e,this._firestore),i=nI(r.converter,t,n),s=vE(this._dataReader,"WriteBatch.set",r._key,i,null!==r.converter,n);return this._mutations.push(s.toMutation(r._key,Gm.none())),this}update(e,t,n,...r){this._verifyNotCommitted();const i=vI(e,this._firestore);let s;return s="string"==typeof(t=Ft(t))||t instanceof lE?TE(this._dataReader,"WriteBatch.update",i._key,t,n,r):SE(this._dataReader,"WriteBatch.update",i._key,t),this._mutations.push(s.toMutation(i._key,Gm.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=vI(e,this._firestore);return this._mutations=this._mutations.concat(new sg(t._key,Gm.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new nd(td.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function vI(e,t){if((e=Ft(e)).firestore!==t)throw new nd(td.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return e}class wI extends class{constructor(e,t){this._firestore=e,this._transaction=t,this._dataReader=yE(e)}get(e){const t=vI(e,this._firestore),n=new rI(this._firestore);return this._transaction.lookup([t._key]).then((e=>{if(!e||1!==e.length)return Xh();const r=e[0];if(r.isFoundDocument())return new FE(this._firestore,n,r.key,r,t.converter);if(r.isNoDocument())return new FE(this._firestore,n,t._key,null,t.converter);throw Xh()}))}set(e,t,n){const r=vI(e,this._firestore),i=nI(r.converter,t,n),s=vE(this._dataReader,"Transaction.set",r._key,i,null!==r.converter,n);return this._transaction.set(r._key,s),this}update(e,t,n,...r){const i=vI(e,this._firestore);let s;return s="string"==typeof(t=Ft(t))||t instanceof lE?TE(this._dataReader,"Transaction.update",i._key,t,n,r):SE(this._dataReader,"Transaction.update",i._key,t),this._transaction.update(i._key,s),this}delete(e){const t=vI(e,this._firestore);return this._transaction.delete(t._key),this}}{constructor(e,t){super(e,t),this._firestore=e}get(e){const t=vI(e,this._firestore),n=new cI(this._firestore);return super.get(e).then((e=>new sI(this._firestore,n,t._key,e._document,new iI(!1,!1),t.converter)))}}function bI(e,t){if(void 0===t)return{merge:!1};if(void 0!==t.mergeFields&&void 0!==t.merge)throw new nd("invalid-argument",`Invalid options passed to function ${e}(): You cannot specify both "merge" and "mergeFields".`);return t}function _I(){if("undefined"==typeof Uint8Array)throw new nd("unimplemented","Uint8Arrays are not available in this environment.")}function EI(){if("undefined"==typeof atob)throw new nd("unimplemented","Blobs are unavailable in Firestore in this environment.")}!function(e,t=!0){!function(e){Kh=e}(An),In(new Ut("firestore",((e,{instanceIdentifier:n,options:r})=>{const i=e.getProvider("app").getImmediate(),s=new nE(new ad(e.getProvider("auth-internal")),new hd(e.getProvider("app-check-internal")),function(e,t){if(!Object.prototype.hasOwnProperty.apply(e.options,["projectId"]))throw new nd(td.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Hf(e.options.projectId,t)}(i,n),i);return r=Object.assign({useFetchStreams:t},r),s._setSettings(r),s}),"PUBLIC").setMultipleInstances(!0)),On(qh,"4.1.0",e),On(qh,"4.1.0","esm2017")}();class II{constructor(e){this._delegate=e}static fromBase64String(e){return EI(),new II(aE.fromBase64String(e))}static fromUint8Array(e){return _I(),new II(aE.fromUint8Array(e))}toBase64(){return EI(),this._delegate.toBase64()}toUint8Array(){return _I(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}}function kI(e){return function(e,t){if("object"!=typeof e||null===e)return!1;const n=e;for(const e of["next","error","complete"])if(e in n&&"function"==typeof n[e])return!0;return!1}(e)}class SI{enableIndexedDbPersistence(e,t){return function(e,t){oE(e=j_(e,nE));const n=rE(e);if(n._uninitializedComponentsProvider)throw new nd(td.FAILED_PRECONDITION,"SDK cache is already specified.");Yh("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const r=e._freezeSettings(),i=new g_;return sE(n,i,new p_(i,r.cacheSizeBytes,null==t?void 0:t.forceOwnership))}(e._delegate,{forceOwnership:t})}enableMultiTabIndexedDbPersistence(e){return function(e){oE(e=j_(e,nE));const t=rE(e);if(t._uninitializedComponentsProvider)throw new nd(td.FAILED_PRECONDITION,"SDK cache is already specified.");Yh("enableMultiTabIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const n=e._freezeSettings(),r=new g_;return sE(t,r,new m_(r,n.cacheSizeBytes))}(e._delegate)}clearIndexedDbPersistence(e){return function(e){if(e._initialized&&!e._terminated)throw new nd(td.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const t=new rd;return e._queue.enqueueAndForgetEvenWhileRestricted((async()=>{try{await async function(e){if(!Ud.v())return Promise.resolve();const t=e+"main";await Ud.delete(t)}(Xv(e._databaseId,e._persistenceKey)),t.resolve()}catch(e){t.reject(e)}})),t.promise}(e._delegate)}}class TI{constructor(e,t,n){this._delegate=t,this._persistenceProvider=n,this.INTERNAL={delete:()=>this.terminate()},e instanceof Hf||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){const t=this._delegate._getSettings();e.merge||t.host===e.host||Yh("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=Object.assign(Object.assign({},t),e)).merge,this._delegate._setSettings(e)}useEmulator(e,t,n={}){!function(e,t,n,r={}){var i;const s=(e=j_(e,K_))._getSettings(),o=`${t}:${n}`;if("firestore.googleapis.com"!==s.host&&s.host!==o&&Yh("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),e._setSettings(Object.assign(Object.assign({},s),{host:o,ssl:!1})),r.mockUserToken){let t,n;if("string"==typeof r.mockUserToken)t=r.mockUserToken,n=$h.MOCK_USER;else{t=function(e,t){if(e.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n=t||"demo-project",r=e.iat||0,i=e.sub||e.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const s=Object.assign({iss:`https://securetoken.google.com/${n}`,aud:n,iat:r,exp:r+3600,auth_time:r,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}}},e);return[ft(JSON.stringify({alg:"none",type:"JWT"})),ft(JSON.stringify(s)),""].join(".")}(r.mockUserToken,null===(i=e._app)||void 0===i?void 0:i.options.projectId);const s=r.mockUserToken.sub||r.mockUserToken.user_id;if(!s)throw new nd(td.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");n=new $h(s)}e._authCredentials=new od(new id(t,n))}}(this._delegate,e,t,n)}enableNetwork(){return function(e){return e.asyncQueue.enqueue((async()=>{const t=await C_(e),n=await N_(e);return t.setNetworkEnabled(!0),function(e){const t=ed(e);return t.y_.delete(0),jw(t)}(n)}))}(rE(j_(this._delegate,nE)))}disableNetwork(){return function(e){return e.asyncQueue.enqueue((async()=>{const t=await C_(e),n=await N_(e);return t.setNetworkEnabled(!1),async function(e){const t=ed(e);t.y_.add(0),await qw(t),t.b_.set("Offline")}(n)}))}(rE(j_(this._delegate,nE)))}enablePersistence(e){let t=!1,n=!1;return e&&(t=!!e.synchronizeTabs,n=!!e.experimentalForceOwningTab,U_("synchronizeTabs",t,"experimentalForceOwningTab",n)),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,n)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return function(e){const t=new rd;return e.asyncQueue.enqueueAndForget((async()=>async function(e,t){const n=ed(e);Yw(n.remoteStore)||Hh("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const e=await function(e){const t=ed(e);return t.persistence.runTransaction("Get highest unacknowledged batch id","readonly",(e=>t.mutationQueue.getHighestUnacknowledgedBatchId(e)))}(n.localStore);if(-1===e)return void t.resolve();const r=n.ga.get(e)||[];r.push(t),n.ga.set(e,r)}catch(e){const n=yb(e,"Initialization of waitForPendingWrites() operation failed");t.reject(n)}}(await R_(e),t))),t.promise}(rE(j_(this._delegate,nE)))}onSnapshotsInSync(e){return t=this._delegate,n=e,function(e,t){const n=new v_(t);return e.asyncQueue.enqueueAndForget((async()=>function(e,t){ed(e).O_.add(t),t.next()}(await P_(e),n))),()=>{n.Ca(),e.asyncQueue.enqueueAndForget((async()=>function(e,t){ed(e).O_.delete(t)}(await P_(e),n)))}}(rE(t=j_(t,nE)),eE(n)?n:{next:n});var t,n}get app(){if(!this._appCompat)throw new nd("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new zI(this,Q_(this._delegate,e))}catch(e){throw PI(e,"collection()","Firestore.collection()")}}doc(e){try{return new RI(this,Y_(this._delegate,e))}catch(e){throw PI(e,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new FI(this,function(e,t){if(e=j_(e,K_),F_("collectionGroup","collection id",t),t.indexOf("/")>=0)throw new nd(td.INVALID_ARGUMENT,`Invalid collection ID '${t}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new G_(e,null,function(e){return new Jp(bd.emptyPath(),e)}(t))}(this._delegate,e))}catch(e){throw PI(e,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return function(e,t,n){e=j_(e,nE);const r=Object.assign(Object.assign({},gI),void 0);return function(e){if(e.maxAttempts<1)throw new nd(td.INVALID_ARGUMENT,"Max attempts must be at least 1")}(r),function(e,t,n){const r=new rd;return e.asyncQueue.enqueueAndForget((async()=>{const i=await function(e){return x_(e).then((e=>e.datastore))}(e);new __(e.asyncQueue,i,n,t,r).run()})),r.promise}(rE(e),(n=>t(new wI(e,n))),r)}(this._delegate,(t=>e(new CI(this,t))))}batch(){return rE(this._delegate),new AI(new yI(this._delegate,(e=>pI(this._delegate,e))))}loadBundle(e){return function(e,t){const n=rE(e=j_(e,nE)),r=new tE;return function(e,t,n,r){const i=function(e,t){let n;return n="string"==typeof e?yg().encode(e):e,function(e,t){return new w_(e,t)}(function(e,t){if(e instanceof Uint8Array)return y_(e,t);if(e instanceof ArrayBuffer)return y_(new Uint8Array(e),t);if(e instanceof ReadableStream)return e.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(n),t)}(n,Ow(t));e.asyncQueue.enqueueAndForget((async()=>{!function(e,t,n){const r=ed(e);(async function(e,t,n){try{const r=await t.getMetadata();if(await function(e,t){const n=ed(e),r=zg(t.createTime);return n.persistence.runTransaction("hasNewerBundle","readonly",(e=>n.Qr.getBundleMetadata(e,t.id))).then((e=>!!e&&e.createTime.compareTo(r)>=0))}(e.localStore,r))return await t.close(),n._completeWith(function(e){return{taskState:"Success",documentsLoaded:e.totalDocuments,bytesLoaded:e.totalBytes,totalDocuments:e.totalDocuments,totalBytes:e.totalBytes}}(r)),Promise.resolve(new Set);n._updateProgress(Pb(r));const i=new Rb(r,e.localStore,t.serializer);let s=await t.ba();for(;s;){const e=await i.H_(s);e&&n._updateProgress(e),s=await t.ba()}const o=await i.complete();return await e_(e,o.Z_,void 0),await function(e,t){const n=ed(e);return n.persistence.runTransaction("Save bundle","readwrite",(e=>n.Qr.saveBundleMetadata(e,t)))}(e.localStore,r),n._completeWith(o.progress),Promise.resolve(o.Y_)}catch(e){return Yh("SyncEngine",`Loading bundle failed with ${e}`),n._failWith(e),Promise.resolve(new Set)}})(r,t,n).then((e=>{r.sharedClientState.notifyBundleLoaded(e)}))}(await R_(e),i,r)}))}(n,e._databaseId,t,r),r}(this._delegate,e)}namedQuery(e){return(t=this._delegate,n=e,function(e,t){return e.asyncQueue.enqueue((async()=>function(e,t){const n=ed(e);return n.persistence.runTransaction("Get named query","readonly",(e=>n.Qr.getNamedQuery(e,t)))}(await A_(e),t)))}(rE(t=j_(t,nE)),n).then((e=>e?new G_(t,null,e.query):null))).then((e=>e?new FI(this,e):null));var t,n}}class xI extends tI{constructor(e){super(),this.firestore=e}convertBytes(e){return new II(new aE(e))}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return RI.forKey(t,this.firestore,null)}}class CI{constructor(e,t){this._firestore=e,this._delegate=t,this._userDataWriter=new xI(e)}get(e){const t=BI(e);return this._delegate.get(t).then((e=>new LI(this._firestore,new sI(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,t.converter))))}set(e,t,n){const r=BI(e);return n?(bI("Transaction.set",n),this._delegate.set(r,t,n)):this._delegate.set(r,t),this}update(e,t,n,...r){const i=BI(e);return 2===arguments.length?this._delegate.update(i,t):this._delegate.update(i,t,n,...r),this}delete(e){const t=BI(e);return this._delegate.delete(t),this}}class AI{constructor(e){this._delegate=e}set(e,t,n){const r=BI(e);return n?(bI("WriteBatch.set",n),this._delegate.set(r,t,n)):this._delegate.set(r,t),this}update(e,t,n,...r){const i=BI(e);return 2===arguments.length?this._delegate.update(i,t):this._delegate.update(i,t,n,...r),this}delete(e){const t=BI(e);return this._delegate.delete(t),this}commit(){return this._delegate.commit()}}class NI{constructor(e,t,n){this._firestore=e,this._userDataWriter=t,this._delegate=n}fromFirestore(e,t){const n=new oI(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new MI(this._firestore,n),null!=t?t:{})}toFirestore(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}static getInstance(e,t){const n=NI.INSTANCES;let r=n.get(e);r||(r=new WeakMap,n.set(e,r));let i=r.get(t);return i||(i=new NI(e,new xI(e),t),r.set(t,i)),i}}NI.INSTANCES=new WeakMap;class RI{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new xI(e)}static forPath(e,t,n){if(e.length%2!=0)throw new nd("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new RI(t,new W_(t._delegate,n,new Id(e)))}static forKey(e,t,n){return new RI(t,new W_(t._delegate,n,e))}get id(){return this._delegate.id}get parent(){return new zI(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new zI(this.firestore,Q_(this._delegate,e))}catch(e){throw PI(e,"collection()","DocumentReference.collection()")}}isEqual(e){return(e=Ft(e))instanceof W_&&J_(this._delegate,e)}set(e,t){t=bI("DocumentReference.set",t);try{return t?hI(this._delegate,e,t):hI(this._delegate,e)}catch(e){throw PI(e,"setDoc()","DocumentReference.set()")}}update(e,t,...n){try{return 1===arguments.length?dI(this._delegate,e):dI(this._delegate,e,t,...n)}catch(e){throw PI(e,"updateDoc()","DocumentReference.update()")}}delete(){return pI(j_((e=this._delegate).firestore,nE),[new sg(e._key,Gm.none())]);var e}onSnapshot(...e){const t=DI(e),n=OI(e,(e=>new LI(this.firestore,new sI(this.firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,this._delegate.converter))));return fI(this._delegate,t,n)}get(e){let t;return t="cache"===(null==e?void 0:e.source)?function(e){e=j_(e,W_);const t=j_(e.firestore,nE),n=rE(t),r=new cI(t);return function(e,t){const n=new rd;return e.asyncQueue.enqueueAndForget((async()=>async function(e,t,n){try{const r=await function(e,t){const n=ed(e);return n.persistence.runTransaction("read document","readonly",(e=>n.localDocuments.getDocument(e,t)))}(e,t);r.isFoundDocument()?n.resolve(r):r.isNoDocument()?n.resolve(null):n.reject(new nd(td.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(e){const r=yb(e,`Failed to get document '${t} from cache`);n.reject(r)}}(await A_(e),t,n))),n.promise}(n,e._key).then((n=>new sI(t,r,e._key,n,new iI(null!==n&&n.hasLocalMutations,!0),e.converter)))}(this._delegate):"server"===(null==e?void 0:e.source)?function(e){e=j_(e,W_);const t=j_(e.firestore,nE);return D_(rE(t),e._key,{source:"server"}).then((n=>mI(t,e,n)))}(this._delegate):function(e){e=j_(e,W_);const t=j_(e.firestore,nE);return D_(rE(t),e._key).then((n=>mI(t,e,n)))}(this._delegate),t.then((e=>new LI(this.firestore,new sI(this.firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,this._delegate.converter))))}withConverter(e){return new RI(this.firestore,e?this._delegate.withConverter(NI.getInstance(this.firestore,e)):this._delegate.withConverter(null))}}function PI(e,t,n){return e.message=e.message.replace(t,n),e}function DI(e){for(const t of e)if("object"==typeof t&&!kI(t))return t;return{}}function OI(e,t){var n,r;let i;return i=kI(e[0])?e[0]:kI(e[1])?e[1]:"function"==typeof e[0]?{next:e[0],error:e[1],complete:e[2]}:{next:e[1],error:e[2],complete:e[3]},{next:e=>{i.next&&i.next(t(e))},error:null===(n=i.error)||void 0===n?void 0:n.bind(i),complete:null===(r=i.complete)||void 0===r?void 0:r.bind(i)}}class LI{constructor(e,t){this._firestore=e,this._delegate=t}get ref(){return new RI(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,t){return this._delegate.get(e,t)}isEqual(e){return uI(this._delegate,e._delegate)}}class MI extends LI{data(e){const t=this._delegate.data(e);return void 0!==t||Xh(),t}}class FI{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new xI(e)}where(e,t,n){try{return new FI(this.firestore,qE(this._delegate,function(e,t,n){const r=t,i=VE("where",e);return $E._create(i,r,n)}(e,t,n)))}catch(e){throw PI(e,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,t){try{return new FI(this.firestore,qE(this._delegate,function(e,t="asc"){const n=t,r=VE("orderBy",e);return GE._create(r,n)}(e,t)))}catch(e){throw PI(e,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new FI(this.firestore,qE(this._delegate,(q_("limit",t=e),WE._create("limit",t,"F"))))}catch(t){throw PI(t,"limit()","Query.limit()")}var t}limitToLast(e){try{return new FI(this.firestore,qE(this._delegate,(q_("limitToLast",t=e),WE._create("limitToLast",t,"L"))))}catch(t){throw PI(t,"limitToLast()","Query.limitToLast()")}var t}startAt(...e){try{return new FI(this.firestore,qE(this._delegate,function(...e){return HE._create("startAt",e,!0)}(...e)))}catch(e){throw PI(e,"startAt()","Query.startAt()")}}startAfter(...e){try{return new FI(this.firestore,qE(this._delegate,function(...e){return HE._create("startAfter",e,!1)}(...e)))}catch(e){throw PI(e,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new FI(this.firestore,qE(this._delegate,function(...e){return QE._create("endBefore",e,!1)}(...e)))}catch(e){throw PI(e,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new FI(this.firestore,qE(this._delegate,function(...e){return QE._create("endAt",e,!0)}(...e)))}catch(e){throw PI(e,"endAt()","Query.endAt()")}}isEqual(e){return X_(this._delegate,e._delegate)}get(e){let t;return t="cache"===(null==e?void 0:e.source)?function(e){e=j_(e,G_);const t=j_(e.firestore,nE),n=rE(t),r=new cI(t);return function(e,t){const n=new rd;return e.asyncQueue.enqueueAndForget((async()=>async function(e,t,n){try{const r=await uw(e,t,!0),i=new Lb(t,r.ss),s=i.sa(r.documents),o=i.applyChanges(s,!1);n.resolve(o.snapshot)}catch(e){const r=yb(e,`Failed to execute query '${t} against cache`);n.reject(r)}}(await A_(e),t,n))),n.promise}(n,e._query).then((n=>new aI(t,r,e,n)))}(this._delegate):"server"===(null==e?void 0:e.source)?function(e){e=j_(e,G_);const t=j_(e.firestore,nE),n=rE(t),r=new cI(t);return O_(n,e._query,{source:"server"}).then((n=>new aI(t,r,e,n)))}(this._delegate):function(e){e=j_(e,G_);const t=j_(e.firestore,nE),n=rE(t),r=new cI(t);return zE(e._query),O_(n,e._query).then((n=>new aI(t,r,e,n)))}(this._delegate),t.then((e=>new VI(this.firestore,new aI(this.firestore._delegate,this._userDataWriter,this._delegate,e._snapshot))))}onSnapshot(...e){const t=DI(e),n=OI(e,(e=>new VI(this.firestore,new aI(this.firestore._delegate,this._userDataWriter,this._delegate,e._snapshot))));return fI(this._delegate,t,n)}withConverter(e){return new FI(this.firestore,e?this._delegate.withConverter(NI.getInstance(this.firestore,e)):this._delegate.withConverter(null))}}class UI{constructor(e,t){this._firestore=e,this._delegate=t}get type(){return this._delegate.type}get doc(){return new MI(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class VI{constructor(e,t){this._firestore=e,this._delegate=t}get query(){return new FI(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map((e=>new MI(this._firestore,e)))}docChanges(e){return this._delegate.docChanges(e).map((e=>new UI(this._firestore,e)))}forEach(e,t){this._delegate.forEach((n=>{e.call(t,new MI(this._firestore,n))}))}isEqual(e){return uI(this._delegate,e._delegate)}}class zI extends FI{constructor(e,t){super(e,t),this.firestore=e,this._delegate=t}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const e=this._delegate.parent;return e?new RI(this.firestore,e):null}doc(e){try{return new RI(this.firestore,void 0===e?Y_(this._delegate):Y_(this._delegate,e))}catch(e){throw PI(e,"doc()","CollectionReference.doc()")}}add(e){return function(e,t){const n=j_(e.firestore,nE),r=Y_(e),i=nI(e.converter,t);return pI(n,[vE(yE(e.firestore),"addDoc",r._key,i,null!==e.converter,{}).toMutation(r._key,Gm.exists(!1))]).then((()=>r))}(this._delegate,e).then((e=>new RI(this.firestore,e)))}isEqual(e){return J_(this._delegate,e._delegate)}withConverter(e){return new zI(this.firestore,e?this._delegate.withConverter(NI.getInstance(this.firestore,e)):this._delegate.withConverter(null))}}function BI(e){return j_(e,W_)}class jI{constructor(...e){this._delegate=new lE(...e)}static documentId(){return new jI(Ed.keyField().canonicalString())}isEqual(e){return(e=Ft(e))instanceof lE&&this._delegate._internalPath.isEqual(e._internalPath)}}class qI{constructor(e){this._delegate=e}static serverTimestamp(){const e=new _E("serverTimestamp");return e._methodName="FieldValue.serverTimestamp",new qI(e)}static delete(){const e=new wE("deleteField");return e._methodName="FieldValue.delete",new qI(e)}static arrayUnion(...e){const t=function(...e){return new EE("arrayUnion",e)}(...e);return t._methodName="FieldValue.arrayUnion",new qI(t)}static arrayRemove(...e){const t=function(...e){return new IE("arrayRemove",e)}(...e);return t._methodName="FieldValue.arrayRemove",new qI(t)}static increment(e){const t=new kE("increment",e);return t._methodName="FieldValue.increment",new qI(t)}isEqual(e){return this._delegate.isEqual(e._delegate)}}const $I={Firestore:TI,GeoPoint:cE,Timestamp:yd,Blob:II,Transaction:CI,WriteBatch:AI,DocumentReference:RI,DocumentSnapshot:LI,Query:FI,QueryDocumentSnapshot:MI,QuerySnapshot:VI,CollectionReference:zI,FieldPath:jI,FieldValue:qI,setLogLevel:function(e){var t;t=e,Gh.setLogLevel(t)},CACHE_SIZE_UNLIMITED:-1};!function(e){!function(e,t){e.INTERNAL.registerComponent(new Ut("firestore-compat",(e=>((e,t)=>new TI(e,t,new SI))(e.getProvider("app-compat").getImmediate(),e.getProvider("firestore").getImmediate())),"PUBLIC").setServiceProps(Object.assign({},$I)))}(e),e.registerVersion("@firebase/firestore-compat","0.3.14")}(Xn),Xn.initializeApp({apiKey:"AIzaSyA3WzUrKtcCF_jk5uKEHsN56eeCqgqnbEw",authDomain:"online-shopping-dd0ad.firebaseapp.com",projectId:"online-shopping-dd0ad",storageBucket:"online-shopping-dd0ad.appspot.com",messagingSenderId:"1066635235174",appId:"1:1066635235174:web:9d6d3bd22dd37dc88682a7",measurementId:"G-RW0L30P63S"});const KI=Xn.auth();var GI=function(){const e=Se(),[n,r]=(0,t.useState)(""),[i,s]=(0,t.useState)("");return t.createElement("div",{className:"login"},t.createElement(Ge,{to:"/",style:{textDecoration:"none"}},t.createElement("div",{className:"login__logo"},t.createElement(O.Z,{className:"login__logoImage",fontSize:"large"}),t.createElement("h2",{className:"login__logoTitle"},"Online-shopping"))),t.createElement("div",{className:"login__container"},t.createElement("h1",null,"Sign-in"),t.createElement("form",null,t.createElement("h5",null,"E-mail"),t.createElement("input",{type:"text",value:n,onChange:e=>r(e.target.value)}),t.createElement("h5",null,"Password"),t.createElement("input",{type:"password",value:i,onChange:e=>s(e.target.value)}),t.createElement("button",{type:"submit",className:"login__signInButton",onClick:t=>{t.preventDefault(),KI.signInWithEmailAndPassword(n,i).then((t=>{t.user&&e("/")})).catch((e=>alert(e.message)))}},"Sign In")),t.createElement("p",null,"By signing-in you agree to the eShop Website Conditions of Use & Sale. Please see our Privacy Notice, our Cookies Notice, and our Interest-Based Ads Notice."),t.createElement("p",{className:"login__registerText"},"Don't have an account?",t.createElement(Ge,{to:"/register"},"Create an account"))))},WI=i(120),HI={};HI.styleTagTransform=g(),HI.setAttributes=d(),HI.insert=c().bind(null,"head"),HI.domAPI=l(),HI.insertStyleElement=p(),o()(WI.Z,HI),WI.Z&&WI.Z.locals&&WI.Z.locals;var QI=function(){const e=Se(),[n,r]=(0,t.useState)(""),[i,s]=(0,t.useState)(""),[o,a]=(0,t.useState)("");return t.createElement("div",{className:"RegisterPage"},t.createElement(Ge,{to:"/login",style:{textDecoration:"none"}},t.createElement("div",{className:"login__logo"},t.createElement(O.Z,{className:"login__logoImage",fontSize:"large"}),t.createElement("h2",{className:"login__logoTitle"},"Online-shopping"))),t.createElement("div",{className:"RegisterPage__container"},t.createElement("h1",null,"Sign-Up"),t.createElement("form",null,t.createElement("h5",null,"Name"),t.createElement("input",{type:"text",value:n,onChange:e=>r(e.target.value)}),t.createElement("h5",null,"E-mail"),t.createElement("input",{type:"text",value:i,onChange:e=>s(e.target.value)}),t.createElement("h5",null,"Password"),t.createElement("input",{type:"password",value:o,onChange:e=>a(e.target.value)}),t.createElement("button",{type:"submit",className:"login__signInButton",onClick:t=>{t.preventDefault(),console.log("Dummy Registration Data:",{name:n,email:i,password:o}),e("/login")}},"Sign Up"))))},YI=function(){return React.createElement("div",{className:"App"},React.createElement(qe,null,React.createElement(Ue,null,React.createElement(Me,{path:"/login",element:React.createElement(React.Fragment,null,React.createElement(Qe,null),React.createElement(GI,null))}),React.createElement(Me,{path:"/checkout",element:React.createElement(React.Fragment,null,React.createElement(Qe,null),React.createElement(at,null))}),React.createElement(Me,{path:"/register",element:React.createElement(React.Fragment,null,React.createElement(Qe,null),React.createElement(QI,null))}),React.createElement(Me,{path:"/",element:React.createElement(React.Fragment,null,React.createElement(Qe,null),React.createElement(A,null))}))))};r.render(t.createElement(t.StrictMode,null,t.createElement(T,{initialState:{basket:[]},reducer:(e,t)=>{switch(t.type){case"ADD_TO_BASKET":return{...e,basket:[...e.basket,t.item]};case"REMOVE_FROM_BASKET":const n=e.basket.findIndex((e=>e.id===t.id));let r=[...e.basket];return n>=0?r.splice(n,1):console.warn(`Can't remove product(id: ${t.id}) as its not in the basket!`),{...e,basket:r};default:return e}}},t.createElement(YI,null))),document.getElementById("root"))}()}();